!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/js/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,i){r.apply(this,[t,e,i].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([/*!***************************!*\
  !*** ./src/app-client.js ***!
  \***************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(/*! react */1),o=r(i),a=n(/*! react-dom */238),s=r(a),u=n(/*! ./components/AppRoutes */155),c=r(u);window.onload=function(){s.default.render(o.default.createElement(c.default,null),document.getElementById("main"))}},/*!**************************!*\
  !*** ./~/react/react.js ***!
  \**************************/
function(t,e,n){"use strict";t.exports=n(/*! ./lib/React */24)},/*!*********************************!*\
  !*** ./~/fbjs/lib/invariant.js ***!
  \*********************************/
function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=r},/*!*******************************!*\
  !*** ./~/fbjs/lib/warning.js ***!
  \*******************************/
function(t,e,n){"use strict";var r=n(/*! ./emptyFunction */12),i=r;t.exports=i},/*!***********************************************!*\
  !*** ./~/react-dom/lib/reactProdInvariant.js ***!
  \***********************************************/
function(t,e){"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=n},/*!**********************************!*\
  !*** ./~/object-assign/index.js ***!
  \**********************************/
function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,s,u=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(u[s[h]]=r[s[h]])}}return u}},/*!******************************************!*\
  !*** ./~/react-konva/src/react-konva.js ***!
  \******************************************/
function(t,e,n){function r(t){var e=function(t){this.node=null,this.subscriptions=null,this.listeners=null,this._mountImage=null,this._renderedChildren=null,this._mostRecentlyPlacedChild=null,this._nativeContainerInfo=null,this._initialProps=t.props,this._currentElement=t};e.displayName=t;for(var n=1,r=arguments.length;n<r;n++)h(e.prototype,arguments[n]);return e}var i=n(/*! konva */8),o=n(/*! react/lib/React */24),a=n(/*! prop-types */64),s=n(/*! create-react-class */212),u=n(/*! react-dom/lib/ReactInstanceMap */29),c=n(/*! react-dom/lib/ReactMultiChild */120),l=n(/*! react-dom/lib/ReactUpdates */14),h=n(/*! object-assign */5),f=n(/*! fbjs/lib/emptyObject */34),d=i.Container.prototype.add;i.Container.prototype.add=function(t){t.parentNode=this,d.apply(this,arguments)},i.Container.prototype.replaceChild=function(t,e){var n=e.index,r=e.parent;e.destroy(),e.parentNode=null,r.add(t),t.index!==n&&t.setZIndex(n),r.getLayer().batchDraw()};var p=h({},c.Mixin,{moveChild:function(t,e,n,r){var i=t._mountImage.node;if(i.index!==n){i.setZIndex(n);var o=i.getLayer();o&&o.batchDraw()}},createChild:function(t,e,n){t._mountImage=n;var r=n.node;r.moveTo(this.node),r.parentNode=this.node,t._mountIndex!==r.index&&r.setZIndex(t._mountIndex),this._mostRecentlyPlacedChild=r;var i=r.getLayer();i&&i.batchDraw()},removeChild:function(t,e){var n=t._mountImage.node.getLayer();t._mountImage.node.destroy(),t._mountImage.node.parentNode=null,n&&n.batchDraw(),t._mountImage=null},updateChildrenAtRoot:function(t,e){this.updateChildren(t,e,f)},mountAndInjectChildrenAtRoot:function(t,e){this.mountAndInjectChildren(t,e,f)},updateChildren:function(t,e,n){this._mostRecentlyPlacedChild=null,this._updateChildren(t,e,n)},mountAndInjectChildren:function(t,e,n){var r=this.mountChildren(t,e,n),o=0;for(var a in this._renderedChildren)if(this._renderedChildren.hasOwnProperty(a)){var s=this._renderedChildren[a];s._mountImage=r[o];var u=r[o].node;if(!u instanceof i.Node){var c="Looks like one of child element is not Konva.Node.react-konva do not support in for now.";console.error(c,this);continue}u.parent!==this.node&&u.moveTo(this.node),o++}},mountAndAddChildren:function(){console.log("mountAndAddChildren")}}),m={children:!0,ref:!0,key:!0,style:!0},v={construct:function(t){this._currentElement=t},receiveComponent:function(t,e,n){var r=t.props,i=this._currentElement.props||this._initialProps;this.applyNodeProps(i,r),this.updateChildren(r.children,e,n),this._currentElement=t},getPublicInstance:function(){return this.node},putEventListener:function(t,e){},handleEvent:function(t){},getNativeNode:function(){return this.node},applyNodeProps:function(t,e){var n={},r=!1;for(var i in t)if(!m[i]){var o="on"===i.slice(0,2),a=t[i]!==e[i];if(o&&a){var s=i.substr(2).toLowerCase();"content"===s.substr(0,7)&&(s="content"+s.substr(7,1).toUpperCase()+s.substr(8)),this.node.off(s,t[i])}var u=!e.hasOwnProperty(i);u&&this.node.setAttr(i,void 0)}for(var i in e)if(!m[i]){var o="on"===i.slice(0,2),c=t[i]!==e[i];if(o&&c){var s=i.substr(2).toLowerCase();"content"===s.substr(0,7)&&(s="content"+s.substr(7,1).toUpperCase()+s.substr(8)),this.node.on(s,e[i])}o||e[i]===t[i]&&e[i]===this.node.getAttr(i)||(r=!0,n[i]=e[i])}if(r){this.node.setAttrs(n);var l=this.node.getLayer()||this.node.getStage();l&&l.batchDraw();var h,f;for(f in n)if(h=n[f],h instanceof window.Image&&!h.complete){var d=this.node;h.addEventListener("load",function(){var t=d.getLayer();t&&t.batchDraw()})}}},unmountComponent:function(){},mountComponentIntoNode:function(t,e){throw new Error("You cannot render an ART component standalone. You need to wrap it in a Stage.")}},g=s({propTypes:{width:a.oneOfType([a.number,a.string]),height:a.oneOfType([a.number,a.string])},displayName:"Stage",mixins:[p],componentDidMount:function(){this.node=new i.Stage({container:this.domNode,width:this.props.width,height:this.props.height}),this.applyNodeProps(f,this.props),this._debugID=this._reactInternalInstance._debugID;var t=l.ReactReconcileTransaction.getPooled();t.perform(this.mountAndInjectChildren,this,this.props.children,t,u.get(this)._context),l.ReactReconcileTransaction.release(t),this.node.draw()},getStage:function(){return this.node},componentDidUpdate:function(t){this.node;this.applyNodeProps(t,this.props);var e=l.ReactReconcileTransaction.getPooled();e.perform(this.updateChildren,this,this.props.children,e,u.get(this)._context),l.ReactReconcileTransaction.release(e)},componentWillUnmount:function(){this.unmountChildren(),this.node.destroy(),this.node.parentNode=null},applyNodeProps:v.applyNodeProps,render:function(){var t=this.props;return o.createElement("div",{ref:function(t){return this.domNode=t}.bind(this),className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})}}),y={mountComponent:function(t,e,n,r){this._nativeContainerInfo=n,this.node=new i[this.constructor.displayName],e.node.add(this.node);var o=this._initialProps;return this.applyNodeProps(f,o),this.mountAndInjectChildren(o.children,t,r),{children:[],node:this.node,html:null,text:null}},unmountComponent:function(){this.unmountChildren()}},_={construct:function(t){this._currentElement=t,this._oldPath=null},mountComponent:function(t,e,n,r){return this._nativeContainerInfo=n,this.node=new i[this.constructor.displayName],e&&e.node.add(this.node),this.applyNodeProps(f,this._initialProps),{children:[],node:this.node,html:null,text:null}},receiveComponent:function(t,e,n){var r=t.props,i=this._currentElement.props||this._initialProps;this.applyNodeProps(i,r),this._currentElement=t}},b=r("Group",v,p,y),w=r("Layer",v,p,y),E=r("FastLayer",v,p,y),S=r("Label",v,p,y),C={Stage:g,Group:b,Layer:w,FastLayer:E,Label:S},T=["Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape"];T.forEach(function(t){C[t]=r(t,v,_)}),t.exports=C},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMComponentTree.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t,e){return 1===t.nodeType&&t.getAttribute(p)===String(e)||8===t.nodeType&&t.nodeValue===" react-text: "+e+" "||8===t.nodeType&&t.nodeValue===" react-empty: "+e+" "}function i(t){for(var e;e=t._renderedComponent;)t=e;return t}function o(t,e){var n=i(t);n._hostNode=e,e[v]=n}function a(t){var e=t._hostNode;e&&(delete e[v],t._hostNode=null)}function s(t,e){if(!(t._flags&m.hasCachedChildNodes)){var n=t._renderedChildren,a=e.firstChild;t:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],c=i(u)._domID;if(0!==c){for(;null!==a;a=a.nextSibling)if(r(a,c)){o(u,a);continue t}h("32",c)}}t._flags|=m.hasCachedChildNodes}}function u(t){if(t[v])return t[v];for(var e=[];!t[v];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[v]);t=e.pop())n=r,e.length&&s(r,t);return n}function c(t){var e=u(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode?h("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:h("34"),t=t._hostParent;for(;e.length;t=e.pop())s(t,t._hostNode);return t._hostNode}var h=n(/*! ./reactProdInvariant */4),f=n(/*! ./DOMProperty */28),d=n(/*! ./ReactDOMComponentFlags */113),p=(n(/*! fbjs/lib/invariant */2),f.ID_ATTRIBUTE_NAME),m=d,v="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:u,getInstanceFromNode:c,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:o,uncacheNode:a};t.exports=g},/*!**************************!*\
  !*** ./~/konva/konva.js ***!
  \**************************/
function(t,e,n){(function(e){/*
	 * Konva JavaScript Framework v2.0.2
	 * http://konvajs.github.io/
	 * Licensed under the MIT
	 * Date: Fri Mar 16 2018
	 *
	 * Original work Copyright (C) 2011 - 2013 by Eric Rowell (KineticJS)
	 * Modified work Copyright (C) 2014 - present by Anton Lavrenov (Konva)
	 *
	 * @license
	 */
!function(){"use strict";var n=Math.PI/180,r={version:"2.0.2",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,Filters:{},isDragging:function(){var t=r.DD;return!!t&&t.isDragging},isDragReady:function(){var t=r.DD;return!!t&&!!t.node},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){e&&(this.names[e]||(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(t){var n=this.names[t];if(n){for(var r=0;r<n.length;r++){var i=n[r];i._id===e&&n.splice(r,1)}0===n.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*n:t},_detectIE:function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);var n=t.indexOf("trident/");if(n>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var i=t.indexOf("edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)},_parseUA:function(t){var e=t.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:r._detectIE(e),mobile:i,ieMobile:o}},UA:void 0},i="undefined"!=typeof e?e:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{};r.UA=r._parseUA(i.navigator&&i.navigator.userAgent||""),i.Konva&&console.error("Konva instance is already exist in current eviroment. Please use only one instance."),i.Konva=r,r.global=i,r.window=i,r.document=i.document,t.exports=r}(),function(){"use strict";Konva.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;n<e;n++)this[n]=t[n];return this},Konva.Collection.prototype=[],Konva.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Konva.Collection.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;t<n;t++)e.push(this[t]);return e},Konva.Collection.toCollection=function(t){var e,n=new Konva.Collection,r=t.length;for(e=0;e<r;e++)n.push(t[e]);return n},Konva.Collection._mapMethod=function(t){Konva.Collection.prototype[t]=function(){var e,n=this.length,r=[].slice.call(arguments);for(e=0;e<n;e++)this[e][t].apply(this[e],r);return this}},Konva.Collection.mapMethods=function(t){var e=t.prototype;for(var n in e)Konva.Collection._mapMethod(n)},Konva.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Konva.Transform.prototype={copy:function(){return new Konva.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=a,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,r=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var n=this.m[0],r=this.m[1],i=this.m[2],o=this.m[3],a=this.m[4],s=this.m[5],u=(n*(e-s)-r*(t-a))/(n*o-r*i),c=(t-a-i*u)/n;return this.translate(c,u)}};var t="2d",e="[object Array]",n="[object Number]",r="[object String]",i=Math.PI/180,o=180/Math.PI,a="#",s="",u="0",c="Konva warning: ",l="Konva error: ",h="rgb(",f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Konva.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return Object.prototype.toString.call(t)===e},_isNumber:function(t){return Object.prototype.toString.call(t)===n},_isString:function(t){return Object.prototype.toString.call(t)===r},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},createCanvasElement:function(){var t=Konva.isBrowser?Konva.document.createElement("canvas"):new Konva._nodeCanvas;try{t.style=t.style||{}}catch(t){}return t},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Konva.document)return!0;return!1},_simplifyArray:function(t){var e,n,r=[],i=t.length,o=Konva.Util;for(e=0;e<i;e++)n=t[e],o._isNumber(n)?n=Math.round(1e3*n)/1e3:o._isString(n)||(n=n.toString()),r.push(n);return r},_getImage:function(e,n){var r,i;if(e)if(this._isElement(e))n(e);else if(this._isString(e))r=new Konva.window.Image,r.onload=function(){n(r)},r.src=e;else if(e.data){i=Konva.Util.createCanvasElement(),i.width=e.width,i.height=e.height;var o=i.getContext(t);o.putImageData(e,0,0),this._getImage(i.toDataURL(),n)}else n(null);else n(null)},_getRGBAString:function(t){var e=t.red||0,n=t.green||0,r=t.blue||0,i=t.alpha||1;return["rgba(",e,",",n,",",r,",",i,")"].join(s)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(a,s);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=u+t;return a+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in f?(e=f[t],{r:e[0],g:e[1],b:e[2]}):t[0]===a?this._hexToRgb(t.substring(1)):t.substr(0,4)===h?(e=d.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",Konva.Util._namedColorToRBA(t)||Konva.Util._hex3ColorToRGBA(t)||Konva.Util._hex6ColorToRGBA(t)||Konva.Util._rgbColorToRGBA(t)||Konva.Util._rgbaColorToRGBA(t)},_namedColorToRBA:function(t){var e=f[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_merge:function(t,e){var n=this._clone(e);for(var r in t)this._isObject(t[r])?n[r]=this._merge(t[r],n[r]):n[r]=t[r];return n},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)this._isObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*i},_radToDeg:function(t){return t*o},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(l+t)},error:function(t){console.error(l+t)},warn:function(t){Konva.global.console&&console.warn&&Konva.showWarnings&&console.warn(c+t)},extend:function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var r=t.prototype;t.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(t.prototype[i]=r[i]);t.__super__=e.prototype,t.super=e},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,r,i,o,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),u=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),c=a*s/(s+u),l=a*u/(s+u),h=n-c*(i-t),f=r-c*(o-e),d=n+l*(i-t),p=r+l*(o-e);return[h,f,d,p]},_expandPoints:function(t,e){var n,r,i=t.length,o=[];for(n=2;n<i-2;n+=2)r=Konva.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),o.push(r[0]),o.push(r[1]),o.push(t[n]),o.push(t[n+1]),o.push(r[2]),o.push(r[3]);return o},_removeLastLetter:function(t){return t.substring(0,t.length-1)},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,r,i,o){var a,s,u,c=(t-n)*(t-n)+(e-r)*(e-r);if(0==c)a=t,s=e,u=(i-n)*(i-n)+(o-r)*(o-r);else{var l=((i-t)*(n-t)+(o-e)*(r-e))/c;l<0?(a=t,s=e,u=(t-i)*(t-i)+(e-o)*(e-o)):l>1?(a=n,s=r,u=(n-i)*(n-i)+(r-o)*(r-o)):(a=t+l*(n-t),s=e+l*(r-e),u=(a-i)*(a-i)+(s-o)*(s-o))}return[a,s,u]},_getProjectionToLine:function(t,e,n){var r=Konva.Util.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(o,a){if(n||a!==e.length-1){var s=e[(a+1)%e.length],u=Konva.Util._getProjectionToSegment(o.x,o.y,s.x,s.y,t.x,t.y),c=u[0],l=u[1],h=u[2];h<i&&(r.x=c,r.y=l,i=h)}}),r},_prepareArrayForTween:function(t,e,n){var r,i=[],o=[];if(t.length>e.length){var a=e;e=t,t=a}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)o.push({x:e[r],y:e[r+1]});var s=[];return o.forEach(function(t){var e=Konva.Util._getProjectionToLine(t,i,n);s.push(e.x),s.push(e.y)}),s},_prepareToStringify:function(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||Konva.Util._isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===Konva.Util._prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t}}}(),function(){"use strict";function t(){if(e)return e;var t=Konva.Util.createCanvasElement(),n=t.getContext("2d");return e=function(){var t=Konva.window.devicePixelRatio||1,e=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;return t/e}()}var e;Konva.Canvas=function(t){this.init(t)},Konva.Canvas.prototype={init:function(e){var n=e||{},r=n.pixelRatio||Konva.pixelRatio||t();this.pixelRatio=r,this._canvas=Konva.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio,n=this.getContext()._context;n.scale(e,e)},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio,n=this.getContext()._context;n.scale(e,e)},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return Konva.Util.warn("Unable to get data URL. "+t.message),""}}}},Konva.SceneCanvas=function(t){var e=t||{},n=e.width||0,r=e.height||0;Konva.Canvas.call(this,e),this.context=new Konva.SceneContext(this),this.setSize(n,r)},Konva.Util.extend(Konva.SceneCanvas,Konva.Canvas),Konva.HitCanvas=function(t){var e=t||{},n=e.width||0,r=e.height||0;Konva.Canvas.call(this,e),this.context=new Konva.HitContext(this),this.setSize(n,r),this.hitCanvas=!0},Konva.Util.extend(Konva.HitCanvas,Konva.Canvas)}(),function(){"use strict";var t=",",e="(",n=")",r="([",i="])",o=";",a="()",s="=",u=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],c=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation"];Konva.Context=function(t){this.init(t)},Konva.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Konva.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(u){var c,l,h,f,d=this.traceArr,p=d.length,m="";for(c=0;c<p;c++)l=d[c],h=l.method,h?(f=l.args,m+=h,m+=u?a:Konva.Util._isArray(f[0])?r+f.join(t)+i:e+f.join(t)+n):(m+=l.property,u||(m+=s+l.val)),m+=o;return m},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,n=this.traceArr;n.push(t),e=n.length,e>=Konva.traceArrMax&&n.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},isPointInPath:function(t,e){return this._context.isPointInPath(t,e)},fill:function(){this._context.fill()},fillRect:function(t,e,n,r){this._context.fillRect(t,e,n,r)},strokeRect:function(t,e,n,r){this._context.strokeRect(t,e,n,r)},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},measureText:function(t){return this._context.measureText(t)},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},getLineDash:function(){return this._context.getLineDash()},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,n=this,r=u.length,i=Konva.Util._simplifyArray,o=this.setAttr,a=function(t){var r,o=n[t];n[t]=function(){return e=i(Array.prototype.slice.call(arguments,0)),r=o.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)a(u[t]);n.setAttr=function(){o.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}},c.forEach(function(t){Object.defineProperty(Konva.Context.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}),Konva.SceneContext=function(t){Konva.Context.call(this,t)},Konva.SceneContext.prototype={_fillColor:function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternX(),n=t.getFillPatternY(),r=t.getFillPatternScale(),i=Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffset();(e||n)&&this.translate(e||0,n||0),i&&this.rotate(i),r&&this.scale(r.x,r.y),o&&this.translate(-1*o.x,-1*o.y),this.setAttr("fillStyle",this.createPattern(t.getFillPatternImage(),t.getFillPatternRepeat()||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),r=t.getFillLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)i.addColorStop(r[o],r[o+1]);this.setAttr("fillStyle",i),t._fillFunc(this)}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),r=t.getFillRadialGradientStartRadius(),i=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),a=this.createRadialGradient(e.x,e.y,r,n.x,n.y,i),s=0;s<o.length;s+=2)a.addColorStop(o[s],o[s+1]);this.setAttr("fillStyle",a),this.fill()},_fill:function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)return void this._fillColor(t);var r=t.getFillPatternImage();if(r&&"pattern"===n)return void this._fillPattern(t);var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)return void this._fillLinearGradient(t);var o=t.getFillRadialGradientColorStops();return o&&"radial-gradient"===n?void this._fillRadialGradient(t):void(e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t))},_strokeLinearGradient:function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)i.addColorStop(r[o],r[o+1]);this.setAttr("strokeStyle",i)}},_stroke:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled()||t instanceof Konva.Text;if(t.hasStroke()){n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var r=t.getStrokeLinearGradientColorStops();r?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}},_applyShadow:function(t){var e=Konva.Util,n=e.get(t.getShadowRGBA(),"black"),r=e.get(t.getShadowBlur(),5),i=e.get(t.getShadowOffset(),{x:0,y:0}),o=t.getAbsoluteScale(),a=this.canvas.getPixelRatio(),s=o.x*a,u=o.y*a;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r*Math.min(Math.abs(s),Math.abs(u))),this.setAttr("shadowOffsetX",i.x*s),this.setAttr("shadowOffsetY",i.y*u)},_applyGlobalCompositeOperation:function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)}},Konva.Util.extend(Konva.SceneContext,Konva.Context),Konva.HitContext=function(t){Konva.Context.call(this,t)},Konva.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){if(t.hasStroke()&&t.strokeHitEnabled()){var e=t.getStrokeScaleEnabled()||t instanceof Konva.Text;e||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}},Konva.Util.extend(Konva.HitContext,Konva.Context)}(),function(){"use strict";var t="get",e="set";Konva.Factory={addGetterSetter:function(t,e,n,r,i){this.addGetter(t,e,n),this.addSetter(t,e,r,i),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,r){var i=t+Konva.Util._capitalize(n);e.prototype[i]=function(){var t=this.attrs[n];return void 0===t?r:t}},addSetter:function(t,n,r,i){var o=e+Konva.Util._capitalize(n);t.prototype[o]=function(t){return r&&(t=r.call(this,t)),this._setAttr(n,t),i&&i.call(this),this}},addComponentsGetterSetter:function(n,r,i,o,a){var s,u,c=i.length,l=Konva.Util._capitalize,h=t+l(r),f=e+l(r);n.prototype[h]=function(){var t={};for(s=0;s<c;s++)u=i[s],t[u]=this.getAttr(r+l(u));return t},n.prototype[f]=function(t){var e,n=this.attrs[r];o&&(t=o.call(this,t));for(e in t)t.hasOwnProperty(e)&&this._setAttr(r+l(e),t[e]);return this._fireChangeEvent(r,n,t),a&&a.call(this),this},this.addOverloadedGetterSetter(n,r)},addOverloadedGetterSetter:function(n,r){var i=Konva.Util._capitalize(r),o=e+i,a=t+i;n.prototype[r]=function(){return arguments.length?(this[o](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter:function(e,n,r,i){Konva.Util.error("Adding deprecated "+n);var o=t+Konva.Util._capitalize(n),a=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[o]=function(){Konva.Util.error(a);var t=this.attrs[n];return void 0===t?r:t},this.addSetter(e,n,i,function(){Konva.Util.error(a)}),this.addOverloadedGetterSetter(e,n)},backCompat:function(t,e){Konva.Util.each(e,function(e,n){var r=t.prototype[n];t.prototype[e]=function(){r.apply(this,arguments),Konva.Util.error(e+" method is deprecated and will be removed soon. Use "+n+" instead")}})},afterSetFilter:function(){this._filterUpToDate=!1}},Konva.Validators={RGBComponent:function(t){return t>255?255:t<0?0:Math.round(t)},alphaComponent:function(t){return t>1?1:t<1e-4?1e-4:t}}}(),function(t){"use strict";var e="absoluteOpacity",n="absoluteTransform",r="absoluteScale",i="Change",o="children",a=".",s="",u="get",c="id",l="konva",h="listening",f="mouseenter",d="mouseleave",p="name",m="set",v="Shape",g=" ",y="stage",_="transform",b="Stage",w="visible",E=["id"],S=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(g),C=["scaleXChange.konva","scaleYChange.konva"].join(g);t.Node=function(t){this._init(t)},t.Util.addMethods(t.Node,{_init:function(i){var o=this;this._id=t.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this._isUnderCache=!1,this.setAttrs(i),this.on(S,function(){this._clearCache(_),o._clearSelfAndDescendantCache(n)}),this.on(C,function(){o._clearSelfAndDescendantCache(r)}),this.on("visibleChange.konva",function(){o._clearSelfAndDescendantCache(w)}),this.on("listeningChange.konva",function(){o._clearSelfAndDescendantCache(h)}),this.on("opacityChange.konva",function(){o._clearSelfAndDescendantCache(e)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var n=this._cache[t];return void 0===n&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(n){var i=n||{},o=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}),a=i.width||o.width,s=i.height||o.height,u=i.pixelRatio,c=i.x||o.x,l=i.y||o.y,h=i.offset||0,f=i.drawBorder||!1;if(!a||!s)return void setTimeout(function(){t.Util.throw("Width or height of caching configuration equals 0. Caching is ignored.")});a+=2*h,s+=2*h,c-=h,l-=h;var d=new t.SceneCanvas({pixelRatio:u,width:a,height:s}),p=new t.SceneCanvas({pixelRatio:u,width:a,height:s}),m=new t.HitCanvas({pixelRatio:1,width:a,height:s}),v=d.getContext(),g=m.getContext();return m.isCache=!0,this.clearCache(),v.save(),g.save(),v.translate(-c,-l),g.translate(-c,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(r),this.drawScene(d,this,!0),this.drawHit(m,this,!0),this._isUnderCache=!1,v.restore(),g.restore(),f&&(v.save(),v.beginPath(),v.rect(0,0,a,s),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.canvas={scene:d,filter:p,hit:m,x:c,y:l},this},getClientRect:function(){throw new Error('abstract "getClientRect" method call')},_transformedRect:function(t,e){var n,r,i,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach(function(t){var e=s.point(t);void 0===n&&(n=i=e.x,r=o=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)}),{x:n,y:r,width:i-n,height:o-r}},_drawCachedSceneCanvas:function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this),t.translate(this._cache.canvas.x,this._cache.canvas.y);var e=this._getCachedSceneCanvas(),n=e.pixelRatio;t.drawImage(e._canvas,0,0,e.width/n,e.height/n),t.restore()},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,n=e.hit;t.save(),t.translate(this._cache.canvas.x,this._cache.canvas.y),t.drawImage(n._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var e,n,r,i,o=this.filters(),a=this._cache.canvas,s=a.scene,u=a.filter,c=u.getContext();if(o){if(!this._filterUpToDate){var l=s.pixelRatio;try{for(e=o.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/l,s.getHeight()/l),n=c.getImageData(0,0,u.getWidth(),u.getHeight()),r=0;r<e;r++)i=o[r],"function"==typeof i?(i.call(this,n),c.putImageData(n,0,0)):t.Util.error("Filter should be type of function, but got "+typeof i+" insted. Please check correct filters")}catch(e){t.Util.error("Unable to apply filter. "+e.message)}this._filterUpToDate=!0}return u}return s},on:function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,o,u,c=t.split(g),l=c.length;for(n=0;n<l;n++)r=c[n],i=r.split(a),o=i[0],u=i[1]||s,this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:u,handler:e});return this},off:function(t,e){var n,r,i,o,s,u,c=(t||"").split(g),l=c.length;if(!t)for(r in this.eventListeners)this._off(r);for(n=0;n<l;n++)if(i=c[n],o=i.split(a),s=o[0],u=o[1],s)this.eventListeners[s]&&this._off(s,u,e);else for(r in this.eventListeners)this._off(r,u,e);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},addEventListener:function(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this},removeEventListener:function(t){return this.off(t),
this},_delegate:function(e,n,r){var i=this;this.on(e,function(e){for(var o=e.target.findAncestors(n,!0,i),a=0;a<o.length;a++)e=t.Util.cloneObject(e),e.currentTarget=o[a],r.call(o[a],e)})},remove:function(){var t=this.getParent();return t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(e),this},destroy:function(){t._removeId(this.getId());for(var e=(this.getName()||"").split(/\s/g),n=0;n<e.length;n++){var r=e[n];t._removeName(r,this._id)}return this.remove(),this},getAttr:function(e){var n=u+t.Util._capitalize(e);return t.Util._isFunction(this[n])?this[n]():this.attrs[e]},getAncestors:function(){for(var e=this.getParent(),n=new t.Collection;e;)n.push(e),e=e.getParent();return n},getAttrs:function(){return this.attrs||{}},setAttrs:function(e){var n,r;if(!e)return this;for(n in e)n!==o&&(r=m+t.Util._capitalize(n),t.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]));return this},isListening:function(){return this._getCache(h,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},isVisible:function(){return this._getCache(w,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?!e||e.isVisible():t},shouldDrawHit:function(t){var e=this.getLayer();return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(u){for(e=[],n=u.length,r=0;r<n;r++)i=u[r],s++,i.nodeType!==v&&(e=e.concat(i.getChildren().toArray())),i._id===a._id&&(r=n);e.length>0&&e[0].getDepth()<=o&&t(e)}var e,n,r,i,o=this.getDepth(),a=this,s=0;return a.nodeType!==b&&t(a.getStage().getChildren()),s},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(e){var n=this.getAbsoluteTransform(e).getMatrix(),r=new t.Transform,i=this.offset();return r.m=n.slice(),r.translate(i.x,i.y),r.getTranslation()},setAbsolutePosition:function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},_setTransform:function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(_),this._clearSelfAndDescendantCache(n)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(_),this._clearSelfAndDescendantCache(n),t},move:function(t){var e=t.x,n=t.y,r=this.getX(),i=this.getY();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this},_eachAncestorReverse:function(t,e){var n,r,i=[],o=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(n=i.length,r=0;r<n;r++)t(i[r])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)},moveDown:function(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)},moveToBottom:function(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},setZIndex:function(e){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),!1;var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(e,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return this.getParent()!==t&&((this.__originalRemove||this.remove).call(this),t.add(this)),this},toObject:function(){var e,n,r,i,o={},a=this.getAttrs();o.attrs={};for(e in a)n=a[e],r=this[e],delete a[e],i=r?r.call(this):null,a[e]=n,i!==n&&(o.attrs[e]=n);return o.className=this.getClassName(),t.Util._prepareToStringify(o)},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},findAncestors:function(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r},findAncestor:function(t,e,n){return this.findAncestors(t,e,n)[0]},_isMatch:function(e){if(!e)return!1;var n,r,i=e.replace(/ /g,"").split(","),o=i.length;for(n=0;n<o;n++)if(r=i[n],t.Util.isValidSelector(r)||(t.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(0!==this._get(r).length)return!0;return!1},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(y,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,n){return e=e||{},e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(n,this._getAbsoluteTransform)},_getAbsoluteTransform:function(e){var n,r,i=new t.Transform;return this._eachAncestorReverse(function(t){n=t.transformsEnabled(),r=t.getTransform(),"all"===n?i.multiply(r):"position"===n&&i.translate(t.x(),t.y())},e),i},getAbsoluteScale:function(t){return t?this._getAbsoluteScale(t):this._getCache(r,this._getAbsoluteScale)},_getAbsoluteScale:function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=1,r=1;return this._eachAncestorReverse(function(t){n*=t.scaleX(),r*=t.scaleY()},t),{x:n,y:r}},getTransform:function(){return this._getCache(_,this._getTransform)},_getTransform:function(){var e=new t.Transform,n=this.getX(),r=this.getY(),i=t.getAngle(this.getRotation()),o=this.getScaleX(),a=this.getScaleY(),s=this.getSkewX(),u=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return 0===n&&0===r||e.translate(n,r),0!==i&&e.rotate(i),0===s&&0===u||e.skew(s,u),1===o&&1===a||e.scale(o,a),0===c&&0===l||e.translate(-1*c,-1*l),e},clone:function(e){var n,r,i,o,a,s=t.Util.cloneObject(this.attrs);for(var u in E){var c=E[u];delete s[c]}for(n in e)s[n]=e[n];var h=new this.constructor(s);for(n in this.eventListeners)for(r=this.eventListeners[n],i=r.length,o=0;o<i;o++)a=r[o],a.name.indexOf(l)<0&&(h.eventListeners[n]||(h.eventListeners[n]=[]),h.eventListeners[n].push(a));return h},_toKonvaCanvas:function(e){e=e||{};var n=this.getStage(),r=e.x||0,i=e.y||0,o=e.pixelRatio||1,a=new t.SceneCanvas({width:e.width||this.getWidth()||(n?n.getWidth():0),height:e.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:o}),s=a.getContext();return s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(a),s.restore(),a},toCanvas:function(t){return this._toKonvaCanvas(t)._canvas},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null;return this._toKonvaCanvas(t).toDataURL(e,n)},toImage:function(e){if(!e||!e.callback)throw"callback required for toImage method config argument";t.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():t.dragDistance},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},_off:function(t,e,n){var r,i,o,a=this.eventListeners[t];for(r=0;r<a.length;r++)if(i=a[r].name,o=a[r].handler,!("konva"===i&&"konva"!==e||e&&i!==e||n&&n!==o)){if(a.splice(r,1),0===a.length){delete this.eventListeners[t];break}r--}},_fireChangeEvent:function(t,e,n){this._fire(t+i,{oldVal:e,newVal:n})},setId:function(e){var n=this.getId();return t._removeId(n),t._addId(this,e),this._setAttr(c,e),this},setName:function(e){var n,r,i=(this.getName()||"").split(/\s/g),o=(e||"").split(/\s/g);for(r=0;r<i.length;r++)n=i[r],o.indexOf(n)===-1&&n&&t._removeName(n,this._id);for(r=0;r<o.length;r++)n=o[r],i.indexOf(n)===-1&&n&&t._addName(this,n);return this._setAttr(p,e),this},addName:function(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.setName(n)}return this},hasName:function(t){var e=(this.name()||"").split(/\s/g);return e.indexOf(t)!==-1},removeName:function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return n!==-1&&(e.splice(n,1),this.setName(e.join(" "))),this},setAttr:function(e,n){var r=m+t.Util._capitalize(e),i=this[r];return t.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this},_setAttr:function(t,e){var n;n=this.attrs[t],n!==e&&(void 0===e||null===e?delete this.attrs[t]:this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_setComponentAttr:function(t,e,n){var r;void 0!==n&&(r=this.attrs[t],r||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))},_fireAndBubble:function(t,e,n){var r=!0;if(e&&this.nodeType===v&&(e.target=this),t===f&&n&&(this._id===n._id||this.isAncestorOf&&this.isAncestorOf(n))?r=!1:t===d&&n&&(this._id===n._id||this.isAncestorOf&&this.isAncestorOf(n))&&(r=!1),r){this._fire(t,e);var i=(t===f||t===d)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e))}},_fire:function(t,e){var n,r=this.eventListeners[t];if(e=e||{},e.currentTarget=this,e.type=t,r)for(n=0;n<r.length;n++)r[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),t.Node.create=function(e,n){return t.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)},t.Node._createNode=function(e,n){var r,i,o,a=t.Node.prototype.getClassName.call(e),s=e.children;if(n&&(e.attrs.container=n),r=new t[a](e.attrs),s)for(i=s.length,o=0;o<i;o++)r.add(this._createNode(s[o]));return r},t.Factory.addOverloadedGetterSetter(t.Node,"position"),t.Factory.addGetterSetter(t.Node,"x",0),t.Factory.addGetterSetter(t.Node,"y",0),t.Factory.addGetterSetter(t.Node,"globalCompositeOperation","source-over"),t.Factory.addGetterSetter(t.Node,"opacity",1),t.Factory.addGetter(t.Node,"name"),t.Factory.addOverloadedGetterSetter(t.Node,"name"),t.Factory.addGetter(t.Node,"id"),t.Factory.addOverloadedGetterSetter(t.Node,"id"),t.Factory.addGetterSetter(t.Node,"rotation",0),t.Factory.addComponentsGetterSetter(t.Node,"scale",["x","y"]),t.Factory.addGetterSetter(t.Node,"scaleX",1),t.Factory.addGetterSetter(t.Node,"scaleY",1),t.Factory.addComponentsGetterSetter(t.Node,"skew",["x","y"]),t.Factory.addGetterSetter(t.Node,"skewX",0),t.Factory.addGetterSetter(t.Node,"skewY",0),t.Factory.addComponentsGetterSetter(t.Node,"offset",["x","y"]),t.Factory.addGetterSetter(t.Node,"offsetX",0),t.Factory.addGetterSetter(t.Node,"offsetY",0),t.Factory.addSetter(t.Node,"dragDistance"),t.Factory.addOverloadedGetterSetter(t.Node,"dragDistance"),t.Factory.addSetter(t.Node,"width",0),t.Factory.addOverloadedGetterSetter(t.Node,"width"),t.Factory.addSetter(t.Node,"height",0),t.Factory.addOverloadedGetterSetter(t.Node,"height"),t.Factory.addGetterSetter(t.Node,"listening","inherit"),t.Factory.addGetterSetter(t.Node,"preventDefault",!0),t.Factory.addGetterSetter(t.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),t.Factory.addGetterSetter(t.Node,"visible","inherit"),t.Factory.addGetterSetter(t.Node,"transformsEnabled","all"),t.Factory.addOverloadedGetterSetter(t.Node,"size"),t.Factory.backCompat(t.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),t.Collection.mapMethods(t.Node)}(Konva),function(){"use strict";Konva.Filters.Grayscale=function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=n,r[e+1]=n,r[e+2]=n}}(),function(t){"use strict";t.Filters.Brighten=function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},t.Factory.addGetterSetter(t.Node,"brightness",0,null,t.Factory.afterSetFilter)}(Konva),function(){"use strict";Konva.Filters.Invert=function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}}(),function(t){"use strict";function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function n(t,n){var o,a,s,u,c,l,h,f,d,p,m,v,g,y,_,b,w,E,S,C,T,k,I,P,N=t.data,O=t.width,A=t.height,x=n+n+1,R=O-1,D=A-1,M=n+1,L=M*(M+1)/2,F=new e,U=null,B=F,K=null,j=null,V=r[n],W=i[n];for(s=1;s<x;s++)B=B.next=new e,s===M&&(U=B);for(B.next=F,h=l=0,a=0;a<A;a++){for(b=w=E=S=f=d=p=m=0,v=M*(C=N[l]),g=M*(T=N[l+1]),y=M*(k=N[l+2]),_=M*(I=N[l+3]),f+=L*C,d+=L*T,p+=L*k,m+=L*I,B=F,s=0;s<M;s++)B.r=C,B.g=T,B.b=k,B.a=I,B=B.next;for(s=1;s<M;s++)u=l+((R<s?R:s)<<2),f+=(B.r=C=N[u])*(P=M-s),d+=(B.g=T=N[u+1])*P,p+=(B.b=k=N[u+2])*P,m+=(B.a=I=N[u+3])*P,b+=C,w+=T,E+=k,S+=I,B=B.next;for(K=F,j=U,o=0;o<O;o++)N[l+3]=I=m*V>>W,0!==I?(I=255/I,N[l]=(f*V>>W)*I,N[l+1]=(d*V>>W)*I,N[l+2]=(p*V>>W)*I):N[l]=N[l+1]=N[l+2]=0,f-=v,d-=g,p-=y,m-=_,v-=K.r,g-=K.g,y-=K.b,_-=K.a,u=h+((u=o+n+1)<R?u:R)<<2,b+=K.r=N[u],w+=K.g=N[u+1],E+=K.b=N[u+2],S+=K.a=N[u+3],f+=b,d+=w,p+=E,m+=S,K=K.next,v+=C=j.r,g+=T=j.g,y+=k=j.b,_+=I=j.a,b-=C,w-=T,E-=k,S-=I,j=j.next,l+=4;h+=O}for(o=0;o<O;o++){for(w=E=S=b=d=p=m=f=0,l=o<<2,v=M*(C=N[l]),g=M*(T=N[l+1]),y=M*(k=N[l+2]),_=M*(I=N[l+3]),f+=L*C,d+=L*T,p+=L*k,m+=L*I,B=F,s=0;s<M;s++)B.r=C,B.g=T,B.b=k,B.a=I,B=B.next;for(c=O,s=1;s<=n;s++)l=c+o<<2,f+=(B.r=C=N[l])*(P=M-s),d+=(B.g=T=N[l+1])*P,p+=(B.b=k=N[l+2])*P,m+=(B.a=I=N[l+3])*P,b+=C,w+=T,E+=k,S+=I,B=B.next,s<D&&(c+=O);for(l=o,K=F,j=U,a=0;a<A;a++)u=l<<2,N[u+3]=I=m*V>>W,I>0?(I=255/I,N[u]=(f*V>>W)*I,N[u+1]=(d*V>>W)*I,N[u+2]=(p*V>>W)*I):N[u]=N[u+1]=N[u+2]=0,f-=v,d-=g,p-=y,m-=_,v-=K.r,g-=K.g,y-=K.b,_-=K.a,u=o+((u=a+M)<D?u:D)*O<<2,f+=b+=K.r=N[u],d+=w+=K.g=N[u+1],p+=E+=K.b=N[u+2],m+=S+=K.a=N[u+3],K=K.next,v+=C=j.r,g+=T=j.g,y+=k=j.b,_+=I=j.a,b-=C,w-=T,E-=k,S-=I,j=j.next,l+=O}}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.Filters.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&n(t,e)},t.Factory.addGetterSetter(t.Node,"blurRadius",0,null,t.Factory.afterSetFilter)}(Konva),function(){"use strict";function t(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function n(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function r(r,i){var o=t(r,0,0),a=t(r,r.width-1,0),s=t(r,0,r.height-1),u=t(r,r.width-1,r.height-1),c=i||10;if(e(o,a)<c&&e(a,u)<c&&e(u,s)<c&&e(s,o)<c){for(var l=n([a,o,u,s]),h=[],f=0;f<r.width*r.height;f++){var d=e(l,[r.data[4*f],r.data[4*f+1],r.data[4*f+2]]);h[f]=d<c?0:255}return h}}function i(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function o(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var c=s*e+u,l=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=u+f-o;if(d>=0&&d<n&&p>=0&&p<e){var m=d*e+p,v=r[h*i+f];l+=t[m]*v}}a[c]=2040===l?255:0}return a}function a(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var c=s*e+u,l=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=u+f-o;if(d>=0&&d<n&&p>=0&&p<e){var m=d*e+p,v=r[h*i+f];l+=t[m]*v}}a[c]=l>=1020?255:0}return a}function s(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var c=s*e+u,l=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=u+f-o;if(d>=0&&d<n&&p>=0&&p<e){var m=d*e+p,v=r[h*i+f];l+=t[m]*v}}a[c]=l}return a}Konva.Filters.Mask=function(t){var e=this.threshold(),n=r(t,e);return n&&(n=o(n,t.width,t.height),n=a(n,t.width,t.height),n=s(n,t.width,t.height),i(t,n)),t},Konva.Factory.addGetterSetter(Konva.Node,"threshold",0,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.RGB=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=n*o,r[e+1]=n*a,r[e+2]=n*s,r[e+3]=r[e+3]},Konva.Factory.addGetterSetter(Konva.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Konva.Factory.addGetterSetter(Konva.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Konva.Factory.addGetterSetter(Konva.Node,"blue",0,Konva.Validators.RGBComponent,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.RGBA=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue(),u=this.alpha();for(e=0;e<i;e+=4)n=1-u,r[e]=o*u+r[e]*n,r[e+1]=a*u+r[e+1]*n,r[e+2]=s*u+r[e+2]*n},Konva.Factory.addGetterSetter(Konva.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Konva.Factory.addGetterSetter(Konva.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Konva.Factory.addGetterSetter(Konva.Node,"blue",0,Konva.Validators.RGBComponent,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})}(),function(){"use strict";Konva.Filters.HSV=function(t){var e,n,r,i,o,a=t.data,s=a.length,u=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=u*c*Math.cos(l*Math.PI/180),f=u*c*Math.sin(l*Math.PI/180),d=.299*u+.701*h+.167*f,p=.587*u-.587*h+.33*f,m=.114*u-.114*h-.497*f,v=.299*u-.299*h-.328*f,g=.587*u+.413*h+.035*f,y=.114*u-.114*h+.293*f,_=.299*u-.3*h+1.25*f,b=.587*u-.586*h-1.05*f,w=.114*u+.886*h-.2*f;for(e=0;e<s;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=d*n+p*r+m*i,a[e+1]=v*n+g*r+y*i,a[e+2]=_*n+b*r+w*i,a[e+3]=o},Konva.Factory.addGetterSetter(Konva.Node,"hue",0,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"saturation",0,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"value",0,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Factory.addGetterSetter(Konva.Node,"hue",0,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"saturation",0,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"luminance",0,null,Konva.Factory.afterSetFilter),Konva.Filters.HSL=function(t){var e,n,r,i,o,a=t.data,s=a.length,u=1,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=127*this.luminance(),f=u*c*Math.cos(l*Math.PI/180),d=u*c*Math.sin(l*Math.PI/180),p=.299*u+.701*f+.167*d,m=.587*u-.587*f+.33*d,v=.114*u-.114*f-.497*d,g=.299*u-.299*f-.328*d,y=.587*u+.413*f+.035*d,_=.114*u-.114*f+.293*d,b=.299*u-.3*f+1.25*d,w=.587*u-.586*f-1.05*d,E=.114*u+.886*f-.2*d;for(e=0;e<s;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=p*n+m*r+v*i+h,a[e+1]=g*n+y*r+_*i+h,a[e+2]=b*n+w*r+E*i+h,a[e+3]=o}}(),function(){"use strict";Konva.Filters.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),o=0,a=0,s=t.data,u=t.width,c=t.height,l=4*u,h=c;switch(r){case"top-left":o=-1,a=-1;break;case"top":o=-1,a=0;break;case"top-right":o=-1,a=1;break;case"right":o=0,a=1;break;case"bottom-right":o=1,a=1;break;case"bottom":o=1,a=0;break;case"bottom-left":o=1,a=-1;break;case"left":o=0,a=-1;break;default:Konva.Util.error("Unknown emboss direction: "+r)}do{var f=(h-1)*l,d=o;h+d<1&&(d=0),h+d>c&&(d=0);var p=(h-1+d)*u*4,m=u;do{var v=f+4*(m-1),g=a;m+g<1&&(g=0),m+g>u&&(g=0);var y=p+4*(m-1+g),_=s[v]-s[y],b=s[v+1]-s[y+1],w=s[v+2]-s[y+2],E=_,S=E>0?E:-E,C=b>0?b:-b,T=w>0?w:-w;if(C>S&&(E=b),T>S&&(E=w),E*=e,i){var k=s[v]+E,I=s[v+1]+E,P=s[v+2]+E;s[v]=k>255?255:k<0?0:k,s[v+1]=I>255?255:I<0?0:I,s[v+2]=P>255?255:P<0?0:P}else{var N=n-E;N<0?N=0:N>255&&(N=255),s[v]=s[v+1]=s[v+2]=N}}while(--m)}while(--h)},Konva.Factory.addGetterSetter(Konva.Node,"embossStrength",.5,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"embossWhiteLevel",.5,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"embossDirection","top-left",null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"embossBlend",!1,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";function t(t,e,n,r,i){var o,a=n-e,s=i-r;return 0===a?r+s/2:0===s?r:(o=(t-e)/a,o=s*o+r)}Konva.Filters.Enhance=function(e){var n,r,i,o,a=e.data,s=a.length,u=a[0],c=u,l=a[1],h=l,f=a[2],d=f,p=this.enhance();if(0!==p){for(o=0;o<s;o+=4)n=a[o+0],n<u?u=n:n>c&&(c=n),r=a[o+1],r<l?l=r:r>h&&(h=r),i=a[o+2],i<f?f=i:i>d&&(d=i);c===u&&(c=255,u=0),h===l&&(h=255,l=0),d===f&&(d=255,f=0);var m,v,g,y,_,b,w,E,S;for(p>0?(v=c+p*(255-c),g=u-p*(u-0),_=h+p*(255-h),b=l-p*(l-0),E=d+p*(255-d),S=f-p*(f-0)):(m=.5*(c+u),v=c+p*(c-m),g=u+p*(u-m),y=.5*(h+l),_=h+p*(h-y),b=l+p*(l-y),w=.5*(d+f),E=d+p*(d-w),S=f+p*(f-w)),o=0;o<s;o+=4)a[o+0]=t(a[o+0],u,c,g,v),a[o+1]=t(a[o+1],l,h,b,_),a[o+2]=t(a[o+2],f,d,S,E)}},Konva.Factory.addGetterSetter(Konva.Node,"enhance",0,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,o=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/o)*o},Konva.Factory.addGetterSetter(Konva.Node,"levels",.5,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.Noise=function(t){var e,n=255*this.noise(),r=t.data,i=r.length,o=n/2;for(e=0;e<i;e+=4)r[e+0]+=o-2*o*Math.random(),r[e+1]+=o-2*o*Math.random(),r[e+2]+=o-2*o*Math.random()},Konva.Factory.addGetterSetter(Konva.Node,"noise",.2,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.Pixelate=function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,m=Math.ceil(this.pixelSize()),v=t.width,g=t.height,y=Math.ceil(v/m),_=Math.ceil(g/m);if(t=t.data,m<=0)return void Konva.Util.error("pixelSize value can not be <= 0");for(f=0;f<y;f+=1)for(d=0;d<_;d+=1){for(i=0,o=0,a=0,s=0,u=f*m,c=u+m,l=d*m,h=l+m,p=0,e=u;e<c;e+=1)if(!(e>=v))for(n=l;n<h;n+=1)n>=g||(r=4*(v*n+e),i+=t[r+0],o+=t[r+1],a+=t[r+2],s+=t[r+3],p+=1);for(i/=p,o/=p,a/=p,s/=p,e=u;e<c;e+=1)if(!(e>=v))for(n=l;n<h;n+=1)n>=g||(r=4*(v*n+e),t[r+0]=i,t[r+1]=o,t[r+2]=a,t[r+3]=s)}},Konva.Factory.addGetterSetter(Konva.Node,"pixelSize",8,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";Konva.Filters.Threshold=function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255},Konva.Factory.addGetterSetter(Konva.Node,"threshold",.5,null,Konva.Factory.afterSetFilter)}(),function(){"use strict";/**
	     * Sepia Filter
	     * Based on: Pixastic Lib - Sepia filter - v0.1.0
	     * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
	     * @function
	     * @name Sepia
	     * @memberof Konva.Filters
	     * @param {Object} imageData
	     * @author Jacob Seidelin <jseidelin@nihilogic.dk>
	     * @license MPL v1.1 [http://www.pixastic.com/lib/license.txt]
	     * @example
	     * node.cache();
	     * node.filters([Konva.Filters.Sepia]);
	     */
Konva.Filters.Sepia=function(t){var e,n,r,i,o,a,s,u,c,l=t.data,h=t.width,f=t.height,d=4*h;do{e=(f-1)*d,n=h;do r=e+4*(n-1),i=l[r],o=l[r+1],a=l[r+2],s=.393*i+.769*o+.189*a,u=.349*i+.686*o+.168*a,c=.272*i+.534*o+.131*a,l[r]=s>255?255:s,l[r+1]=u>255?255:u,l[r+2]=c>255?255:c,l[r+3]=l[r+3];while(--n)}while(--f)}}(),function(){"use strict";Konva.Filters.Solarize=function(t){var e=t.data,n=t.width,r=t.height,i=4*n,o=r;do{var a=(o-1)*i,s=n;do{var u=a+4*(s-1),c=e[u],l=e[u+1],h=e[u+2];c>127&&(c=255-c),l>127&&(l=255-l),h>127&&(h=255-h),e[u]=c,e[u+1]=l,e[u+2]=h}while(--s)}while(--o)}}(),function(){"use strict";var t=function(t,e,n){var r,i,o,a,s=t.data,u=e.data,c=t.width,l=t.height,h=n.polarCenterX||c/2,f=n.polarCenterY||l/2,d=0,p=0,m=0,v=0,g=Math.sqrt(h*h+f*f);i=c-h,o=l-f,a=Math.sqrt(i*i+o*o),g=a>g?a:g;var y,_,b,w,E=l,S=c,C=360/S*Math.PI/180;for(_=0;_<S;_+=1)for(b=Math.sin(_*C),w=Math.cos(_*C),y=0;y<E;y+=1)i=Math.floor(h+g*y/E*w),o=Math.floor(f+g*y/E*b),r=4*(o*c+i),d=s[r+0],p=s[r+1],m=s[r+2],v=s[r+3],r=4*(_+y*c),u[r+0]=d,u[r+1]=p,u[r+2]=m,u[r+3]=v},e=function(t,e,n){var r,i,o,a,s,u,c=t.data,l=e.data,h=t.width,f=t.height,d=n.polarCenterX||h/2,p=n.polarCenterY||f/2,m=0,v=0,g=0,y=0,_=Math.sqrt(d*d+p*p);i=h-d,o=f-p,u=Math.sqrt(i*i+o*o),_=u>_?u:_;var b,w,E,S,C=f,T=h,k=n.polarRotation||0;for(i=0;i<h;i+=1)for(o=0;o<f;o+=1)a=i-d,s=o-p,b=Math.sqrt(a*a+s*s)*C/_,w=(180*Math.atan2(s,a)/Math.PI+360+k)%360,w=w*T/360,E=Math.floor(w),S=Math.floor(b),r=4*(S*h+E),m=c[r+0],v=c[r+1],g=c[r+2],y=c[r+3],r=4*(o*h+i),l[r+0]=m,l[r+1]=v,l[r+2]=g,l[r+3]=y};Konva.Filters.Kaleidoscope=function(n){var r,i,o,a,s,u,c,l,h,f,d=n.width,p=n.height,m=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),g=Math.floor(d*(v%360)/360);if(!(m<1)){var y=Konva.Util.createCanvasElement();y.width=d,y.height=p;var _=y.getContext("2d").getImageData(0,0,d,p);t(n,_,{polarCenterX:d/2,polarCenterY:p/2});for(var b=d/Math.pow(2,m);b<=8;)b*=2,m-=1;b=Math.ceil(b);var w=b,E=0,S=w,C=1;for(g+b>d&&(E=w,S=0,C=-1),i=0;i<p;i+=1)for(r=E;r!==S;r+=C)o=Math.round(r+g)%d,h=4*(d*i+o),s=_.data[h+0],u=_.data[h+1],c=_.data[h+2],l=_.data[h+3],f=4*(d*i+r),_.data[f+0]=s,_.data[f+1]=u,_.data[f+2]=c,_.data[f+3]=l;for(i=0;i<p;i+=1)for(w=Math.floor(b),a=0;a<m;a+=1){for(r=0;r<w+1;r+=1)h=4*(d*i+r),s=_.data[h+0],u=_.data[h+1],c=_.data[h+2],l=_.data[h+3],f=4*(d*i+2*w-r-1),_.data[f+0]=s,_.data[f+1]=u,_.data[f+2]=c,_.data[f+3]=l;w*=2}e(_,n,{polarRotation:0})}},Konva.Factory.addGetterSetter(Konva.Node,"kaleidoscopePower",2,null,Konva.Factory.afterSetFilter),Konva.Factory.addGetterSetter(Konva.Node,"kaleidoscopeAngle",0,null,Konva.Factory.afterSetFilter)}(),function(t){"use strict";t.Filters.Contrast=function(t){var e,n=Math.pow((parseInt(this.contrast())+100)/100,2),r=t.data,i=r.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=r[e],a=r[e+1],s=r[e+2],o/=255,o-=.5,o*=n,o+=.5,o*=255,a/=255,a-=.5,a*=n,a+=.5,a*=255,s/=255,s-=.5,s*=n,s+=.5,s*=255,o=o<0?0:o>255?255:o,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,r[e]=o,r[e+1]=a,r[e+2]=s},t.Factory.addGetterSetter(t.Node,"contrast",0,null,t.Factory.afterSetFilter)}(Konva),function(){"use strict";Konva.Container=function(t){this.__init(t)},Konva.Util.addMethods(Konva.Container,{__init:function(t){this.children=new Konva.Collection,Konva.Node.call(this,t)},getChildren:function(t){if(!t)return this.children;var e=new Konva.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Konva.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.remove();return e=null,this.children=new Konva.Collection,this},destroyChildren:function(){for(var t,e=Konva.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Konva.Collection,this},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t.getParent())return t.moveTo(this),this;var n=this.children;return this._validateAdd(t),t.index=n.length,t.parent=this,n.push(t),this._fire("add",{child:t}),Konva.DD&&t.isDragging()&&Konva.DD.anim.setLayers(t.getLayer()),this},destroy:function(){return this.hasChildren()&&this.destroyChildren(),Konva.Node.prototype.destroy.call(this),this},find:function(t){var e,n,r,i,o,a,s,u=[],c=t.replace(/ /g,"").split(","),l=c.length;for(e=0;e<l;e++)if(r=c[e],Konva.Util.isValidSelector(r)||(Konva.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Konva.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Konva.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0))o=this._getNodeById(r.slice(1)),o&&u.push(o);else if("."===r.charAt(0))i=this._getNodesByName(r.slice(1)),u=u.concat(i);else for(a=this.getChildren(),s=a.length,n=0;n<s;n++)u=u.concat(a[n]._get(r));return Konva.Collection.toCollection(u)},findOne:function(t){return this.find(t)[0]},_getNodeById:function(t){var e=Konva.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Konva.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Konva.Node.prototype._get.call(this,t),n=this.getChildren(),r=n.length,i=0;i<r;i++)e=e.concat(n[i]._get(t));return e},toObject:function(){var t=Konva.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,r=0;r<n;r++){var i=e[r];t.children.push(i.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r];this.isAncestorOf(i)&&e.push(i)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Konva.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e,n){var r=this.getLayer(),i=t||r&&r.getCanvas(),o=i&&i.getContext(),a=this._cache.canvas,s=a&&a.scene;return this.isVisible()&&(!n&&s?(o.save(),r._applyTransform(this,o,e),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren(i,"drawScene",e,!1,n)),this},drawHit:function(t,e,n){var r=this.getLayer(),i=t||r&&r.hitCanvas,o=i&&i.getContext(),a=this._cache.canvas,s=a&&a.hit;return this.shouldDrawHit(i)&&(r&&r.clearHitCache(),!n&&s?(o.save(),r._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore()):this._drawChildren(i,"drawHit",e)),this},_drawChildren:function(t,e,n,r,i){var o,a,s=this.getLayer(),u=t&&t.getContext(),c=this.getClipWidth(),l=this.getClipHeight(),h=this.getClipFunc(),f=c&&l||h;if(f&&s){u.save();var d=this.getAbsoluteTransform(n),p=d.getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),u.beginPath(),h?h.call(this,u,this):(o=this.getClipX(),a=this.getClipY(),u.rect(o,a,c,l)),u.clip(),p=d.copy().invert().getMatrix(),u.transform(p[0],p[1],p[2],p[3],p[4],p[5])}this.children.each(function(o){o[e](t,n,r,i)}),f&&u.restore()},shouldDrawHit:function(t){var e=this.getLayer(),n=Konva.DD,r=n&&Konva.isDragging()&&Konva.DD.anim.getLayers().indexOf(e)!==-1;return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isVisible()&&!r},getClientRect:function(t){t=t||{};var e,n,r,i,o=t.skipTransform,a=t.relativeTo,s={x:0,y:0,width:0,height:0},u=this;return this.children.each(function(t){if(t.isVisible()){var o=t.getClientRect({relativeTo:u});void 0===e?(e=o.x,n=o.y,r=o.x+o.width,i=o.y+o.height):(e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height))}}),0!==this.children.length&&(s={x:e,y:n,width:r-e,height:i-n}),o?s:this._transformedRect(s,a)}}),Konva.Util.extend(Konva.Container,Konva.Node),Konva.Container.prototype.get=Konva.Container.prototype.find,Konva.Factory.addComponentsGetterSetter(Konva.Container,"clip",["x","y","width","height"]),Konva.Factory.addGetterSetter(Konva.Container,"clipX"),Konva.Factory.addGetterSetter(Konva.Container,"clipY"),Konva.Factory.addGetterSetter(Konva.Container,"clipWidth"),Konva.Factory.addGetterSetter(Konva.Container,"clipHeight"),Konva.Factory.addGetterSetter(Konva.Container,"clipFunc"),Konva.Collection.mapMethods(Konva.Container)}(),function(t){"use strict";function e(t){t.fill()}function n(t){t.stroke()}function r(t){t.fill()}function i(t){t.stroke()}function o(){this._clearCache(s)}function a(){this._clearCache(u)}var s="hasShadow",u="shadowRGBA";t.Shape=function(t){this.__init(t)},t.Util.addMethods(t.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=e,this._strokeFunc=n,this._fillFuncHit=r,this._strokeFuncHit=i;for(var u,c=t.shapes;;)if(u=t.Util.getRandomColor(),u&&!(u in c))break;this.colorKey=u,c[u]=this,t.Node.call(this,s),this.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",o),this.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",a)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},getShadowRGBA:function(){return this._getCache(u,this._getShadowRGBA)},_getShadowRGBA:function(){if(this.hasShadow()){var e=t.Util.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.getShadowOpacity()||1)+")"}},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return this.strokeEnabled()&&!(!this.stroke()&&!this.getStrokeLinearGradientColorStops())},intersects:function(t){var e,n=this.getStage(),r=n.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r),e=r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){return t.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],this},_useBufferCanvas:function(t){return!t&&this.perfectDrawEnabled()&&1!==this.getAbsoluteOpacity()&&this.hasFill()&&this.hasStroke()&&this.getStage()||this.perfectDrawEnabled()&&this.hasShadow()&&1!==this.getAbsoluteOpacity()&&this.hasFill()&&this.hasStroke()&&this.getStage()},getSelfRect:function(){var t=this.getSize();return{x:this._centroid?Math.round(-t.width/2):0,y:this._centroid?Math.round(-t.height/2):0,width:t.width,height:t.height}},getClientRect:function(t){t=t||{};var e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,a=r.height+i,s=this.hasShadow()?this.shadowOffsetX():0,u=this.hasShadow()?this.shadowOffsetY():0,c=o+Math.abs(s),l=a+Math.abs(u),h=this.hasShadow()&&this.shadowBlur()||0,f=c+2*h,d=l+2*h,p=0;Math.round(i/2)!==i/2&&(p=1);var m={width:f+p,height:d+p,x:-Math.round(i/2+h)+Math.min(s,0)+r.x,y:-Math.round(i/2+h)+Math.min(u,0)+r.y};return e?m:this._transformedRect(m,n)},drawScene:function(t,e,n,r){var i,o,a,s=this.getLayer(),u=t||s.getCanvas(),c=u.getContext(),l=this._cache.canvas,h=this.sceneFunc(),f=this.hasShadow(),d=this.hasStroke();if(!this.isVisible())return this;if(l)return c.save(),s._applyTransform(this,c,e),this._drawCachedSceneCanvas(c),c.restore(),this;if(!h)return this;if(c.save(),this._useBufferCanvas(n)&&!r){if(i=this.getStage(),o=i.bufferCanvas,a=o.getContext(),a.clear(),a.save(),a._applyLineJoin(this),!n)if(s)s._applyTransform(this,a,e);else{var p=this.getAbsoluteTransform(e).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5])}h.call(this,a),a.restore();var m=o.pixelRatio;f&&!u.hitCanvas?(c.save(),c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(o._canvas,0,0,o.width/m,o.height/m),c.restore()):(c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(o._canvas,0,0,o.width/m,o.height/m))}else{if(c._applyLineJoin(this),!n)if(s)s._applyTransform(this,c,e);else{var v=this.getAbsoluteTransform(e).getMatrix();c.transform(v[0],v[1],v[2],v[3],v[4],v[5])}f&&d&&!u.hitCanvas?(c.save(),n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),h.call(this,c),c.restore(),this.hasFill()&&this.getShadowForStrokeEnabled()&&h.call(this,c)):f&&!u.hitCanvas?(c.save(),n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),h.call(this,c),c.restore()):(n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),h.call(this,c))}return c.restore(),this},drawHit:function(t,e,n){var r=this.getLayer(),i=t||r.hitCanvas,o=i.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._cache.canvas,u=s&&s.hit;if(!this.shouldDrawHit(i))return this;if(r&&r.clearHitCache(),u)return o.save(),r._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore(),this;if(!a)return this;if(o.save(),o._applyLineJoin(this),!n)if(r)r._applyTransform(this,o,e);else{var c=this.getAbsoluteTransform(e).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return a.call(this,o),o.restore(),this},drawHitFromCache:function(e){var n,r,i,o,a,s,u=e||0,c=this._cache.canvas,l=this._getCachedSceneCanvas(),h=c.hit,f=h.getContext(),d=h.getWidth(),p=h.getHeight();f.clear(),f.drawImage(l._canvas,0,0,d,p);try{for(n=f.getImageData(0,0,d,p),r=n.data,i=r.length,o=t.Util._hexToRgb(this.colorKey),a=0;a<i;a+=4)s=r[a+3],s>u?(r[a]=o.r,r[a+1]=o.g,r[a+2]=o.b,r[a+3]=255):r[a+3]=0;f.putImageData(n,0,0)}catch(e){t.Util.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}}),t.Util.extend(t.Shape,t.Node),t.Factory.addGetterSetter(t.Shape,"stroke"),t.Factory.addGetterSetter(t.Shape,"strokeWidth",2),t.Factory.addGetterSetter(t.Shape,"strokeHitEnabled",!0),t.Factory.addGetterSetter(t.Shape,"perfectDrawEnabled",!0),t.Factory.addGetterSetter(t.Shape,"shadowForStrokeEnabled",!0),t.Factory.addGetterSetter(t.Shape,"lineJoin"),t.Factory.addGetterSetter(t.Shape,"lineCap"),t.Factory.addGetterSetter(t.Shape,"sceneFunc"),t.Factory.addGetterSetter(t.Shape,"hitFunc"),t.Factory.addGetterSetter(t.Shape,"dash"),t.Factory.addGetterSetter(t.Shape,"dashOffset",0),t.Factory.addGetterSetter(t.Shape,"shadowColor"),t.Factory.addGetterSetter(t.Shape,"shadowBlur"),t.Factory.addGetterSetter(t.Shape,"shadowOpacity"),t.Factory.addComponentsGetterSetter(t.Shape,"shadowOffset",["x","y"]),t.Factory.addGetterSetter(t.Shape,"shadowOffsetX",0),t.Factory.addGetterSetter(t.Shape,"shadowOffsetY",0),t.Factory.addGetterSetter(t.Shape,"fillPatternImage"),t.Factory.addGetterSetter(t.Shape,"fill"),t.Factory.addGetterSetter(t.Shape,"fillPatternX",0),t.Factory.addGetterSetter(t.Shape,"fillPatternY",0),t.Factory.addGetterSetter(t.Shape,"fillLinearGradientColorStops"),t.Factory.addGetterSetter(t.Shape,"strokeLinearGradientColorStops"),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientStartRadius",0),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientEndRadius",0),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientColorStops"),t.Factory.addGetterSetter(t.Shape,"fillPatternRepeat","repeat"),t.Factory.addGetterSetter(t.Shape,"fillEnabled",!0),t.Factory.addGetterSetter(t.Shape,"strokeEnabled",!0),t.Factory.addGetterSetter(t.Shape,"shadowEnabled",!0),t.Factory.addGetterSetter(t.Shape,"dashEnabled",!0),t.Factory.addGetterSetter(t.Shape,"strokeScaleEnabled",!0),t.Factory.addGetterSetter(t.Shape,"fillPriority","color"),t.Factory.addComponentsGetterSetter(t.Shape,"fillPatternOffset",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillPatternOffsetX",0),t.Factory.addGetterSetter(t.Shape,"fillPatternOffsetY",0),t.Factory.addComponentsGetterSetter(t.Shape,"fillPatternScale",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillPatternScaleX",1),t.Factory.addGetterSetter(t.Shape,"fillPatternScaleY",1),t.Factory.addComponentsGetterSetter(t.Shape,"fillLinearGradientStartPoint",["x","y"]),t.Factory.addComponentsGetterSetter(t.Shape,"strokeLinearGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillLinearGradientStartPointX",0),t.Factory.addGetterSetter(t.Shape,"strokeLinearGradientStartPointX",0),t.Factory.addGetterSetter(t.Shape,"fillLinearGradientStartPointY",0),t.Factory.addGetterSetter(t.Shape,"strokeLinearGradientStartPointY",0),t.Factory.addComponentsGetterSetter(t.Shape,"fillLinearGradientEndPoint",["x","y"]),t.Factory.addComponentsGetterSetter(t.Shape,"strokeLinearGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillLinearGradientEndPointX",0),t.Factory.addGetterSetter(t.Shape,"strokeLinearGradientEndPointX",0),t.Factory.addGetterSetter(t.Shape,"fillLinearGradientEndPointY",0),t.Factory.addGetterSetter(t.Shape,"strokeLinearGradientEndPointY",0),t.Factory.addComponentsGetterSetter(t.Shape,"fillRadialGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientStartPointX",0),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientStartPointY",0),t.Factory.addComponentsGetterSetter(t.Shape,"fillRadialGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientEndPointX",0),t.Factory.addGetterSetter(t.Shape,"fillRadialGradientEndPointY",0),t.Factory.addGetterSetter(t.Shape,"fillPatternRotation",0),t.Factory.backCompat(t.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),t.Collection.mapMethods(t.Shape)}(Konva),function(){"use strict";function t(t,e){t.content.addEventListener(e,function(n){t[U+e](n)},!1)}var e="Stage",n="string",r="px",i="mouseout",o="mouseleave",a="mouseover",s="mouseenter",u="mousemove",c="mousedown",l="mouseup",h="contextmenu",f="click",d="dblclick",p="touchstart",m="touchend",v="tap",g="dbltap",y="touchmove",_="wheel",b="contentMouseout",w="contentMouseover",E="contentMousemove",S="contentMousedown",C="contentMouseup",T="contentContextmenu",k="contentClick",I="contentDblclick",P="contentTouchstart",N="contentTouchend",O="contentDbltap",A="contentTap",x="contentTouchmove",R="contentWheel",D="div",M="relative",L="konvajs-content",F=" ",U="_",B="container",K="",j=[c,u,l,i,p,y,m,a,_,h],V=j.length;Konva.Stage=function(t){this.___init(t)},Konva.Util.addMethods(Konva.Stage,{___init:function(t){this.nodeType=e,Konva.Container.call(this,t),this._id=Konva.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Konva.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Konva.Util.throw("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===n){if("."===t.charAt(0)){var e=t.slice(1);t=Konva.document.getElementsByClassName(e)[0]}else{var r;r="#"!==t.charAt(0)?t:t.slice(1),t=Konva.document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr(B,t),this},shouldDrawHit:function(){return!0},draw:function(){return Konva.Node.prototype.draw.call(this),this},setHeight:function(t){return Konva.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Konva.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Konva.document.createElement(D),Konva.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Konva.Container.prototype.destroy.call(this),t&&Konva.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Konva.stages.indexOf(this);return e>-1&&Konva.stages.splice(e,1),this},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,r=t.x||0,i=t.y||0,o=new Konva.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:t.pixelRatio}),a=o.getContext()._context,s=this.children;(r||i)&&a.translate(-1*r,-1*i),s.each(function(t){var e=t.getCanvas().getWidth(),n=t.getCanvas().getHeight(),r=t.getCanvas().getPixelRatio();a.drawImage(t.getCanvas()._canvas,0,0,e/r,n/r)});var u=o.toDataURL(e,n);return t.callback&&t.callback(u),u},toImage:function(t){var e=t.callback;t.callback=function(t){Konva.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t,e){var n,r,i=this.getChildren(),o=i.length,a=o-1;for(n=a;n>=0;n--)if(r=i[n].getIntersection(t,e))return r;return null},_resizeDOM:function(){if(this.content){var t,e,n=this.getWidth(),i=this.getHeight(),o=this.getChildren(),a=o.length;for(this.content.style.width=n+r,this.content.style.height=i+r,this.bufferCanvas.setSize(n,i),this.bufferHitCanvas.setSize(n,i),t=0;t<a;t++)e=o[t],e.setSize(n,i),e.draw()}},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return Konva.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){if(Konva.isBrowser)for(var e=0;e<V;e++)t(this,j[e])},_mouseover:function(t){Konva.UA.mobile||(this._setPointerPosition(t),this._fire(w,{evt:t}))},_mouseout:function(t){if(!Konva.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Konva.isDragging()&&(e._fireAndBubble(i,{evt:t}),e._fireAndBubble(o,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(b,{evt:t})}},_mousemove:function(t){if(Konva.UA.ieMobile)return this._touchmove(t);if(("undefined"!=typeof t.movementX||"undefined"!=typeof t.movementY)&&0===t.movementY&&0===t.movementX)return null;if(Konva.UA.mobile)return null;this._setPointerPosition(t);var e;Konva.isDragging()||(e=this.getIntersection(this.getPointerPosition()),e&&e.isListening()?Konva.isDragging()||this.targetShape&&this.targetShape._id===e._id?e._fireAndBubble(u,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(i,{evt:t},e),this.targetShape._fireAndBubble(o,{evt:t},e)),e._fireAndBubble(a,{evt:t},this.targetShape),e._fireAndBubble(s,{evt:t},this.targetShape),this.targetShape=e):(this.targetShape&&!Konva.isDragging()&&(this.targetShape._fireAndBubble(i,{evt:t}),this.targetShape._fireAndBubble(o,{evt:t}),this.targetShape=null),this._fire(u,{evt:t,target:this,currentTarget:this})),this._fire(E,{evt:t})),t.cancelable&&t.preventDefault()},_mousedown:function(t){if(Konva.UA.ieMobile)return this._touchstart(t);if(!Konva.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Konva.listenClickTap=!0,e&&e.isListening()?(this.clickStartShape=e,e._fireAndBubble(c,{evt:t})):this._fire(c,{evt:t,target:this,currentTarget:this}),this._fire(S,{evt:t})}t.cancelable&&t.preventDefault()},_mouseup:function(t){if(Konva.UA.ieMobile)return this._touchend(t);if(!Konva.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,r=this.clickEndShape,i=!1,o=Konva.DD;Konva.inDblClickWindow?(i=!0,Konva.inDblClickWindow=!1):o&&o.justDragged?o&&(o.justDragged=!1):Konva.inDblClickWindow=!0,setTimeout(function(){Konva.inDblClickWindow=!1},Konva.dblClickWindow),e&&e.isListening()?(this.clickEndShape=e,e._fireAndBubble(l,{evt:t}),Konva.listenClickTap&&n&&n._id===e._id&&(e._fireAndBubble(f,{evt:t}),i&&r&&r._id===e._id&&e._fireAndBubble(d,{evt:t}))):(this._fire(l,{evt:t,target:this,currentTarget:this}),this._fire(f,{evt:t,target:this,currentTarget:this}),i&&this._fire(d,{evt:t,target:this,currentTarget:this})),this._fire(C,{evt:t}),Konva.listenClickTap&&(this._fire(k,{evt:t}),i&&this._fire(I,{evt:t})),Konva.listenClickTap=!1}t.cancelable&&t.preventDefault()},_contextmenu:function(t){this._fire(T,{evt:t})},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Konva.listenClickTap=!0,e&&e.isListening()?(this.tapStartShape=e,e._fireAndBubble(p,{evt:t}),e.isListening()&&e.preventDefault()&&t.cancelable&&t.preventDefault()):this._fire(p,{evt:t,target:this,currentTarget:this}),this._fire(P,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=!1;Konva.inDblClickWindow?(n=!0,Konva.inDblClickWindow=!1):Konva.inDblClickWindow=!0,setTimeout(function(){Konva.inDblClickWindow=!1},Konva.dblClickWindow),e&&e.isListening()?(e._fireAndBubble(m,{evt:t}),Konva.listenClickTap&&this.tapStartShape&&e._id===this.tapStartShape._id&&(e._fireAndBubble(v,{evt:t}),n&&e._fireAndBubble(g,{evt:t})),e.isListening()&&e.preventDefault()&&t.cancelable&&t.preventDefault()):(this._fire(m,{evt:t,target:this,currentTarget:this}),this._fire(v,{evt:t,target:this,currentTarget:this}),n&&this._fire(g,{evt:t,target:this,currentTarget:this})),this._fire(N,{evt:t}),Konva.listenClickTap&&(this._fire(A,{evt:t}),n&&this._fire(O,{evt:t})),Konva.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e,n=Konva.DD;Konva.isDragging()||(e=this.getIntersection(this.getPointerPosition()),e&&e.isListening()?(e._fireAndBubble(y,{evt:t}),e.isListening()&&e.preventDefault()&&t.cancelable&&t.preventDefault()):this._fire(y,{evt:t,target:this,currentTarget:this}),this._fire(x,{evt:t})),n&&Konva.isDragging()&&Konva.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},_wheel:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(_,{evt:t}):this._fire(_,{evt:t,target:this,currentTarget:this}),this._fire(R,{evt:t})},_setPointerPosition:function(t){var e=this._getContentPosition(),n=null,r=null;if(t=t?t:window.event,void 0!==t.touches){if(t.touches.length>0){var i=t.touches[0];n=i.clientX-e.left,r=i.clientY-e.top}}else n=t.clientX-e.left,r=t.clientY-e.top;null!==n&&null!==r&&(this.pointerPos={x:n,y:r})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){if(this.bufferCanvas=new Konva.SceneCanvas,this.bufferHitCanvas=new Konva.HitCanvas({pixelRatio:1}),Konva.isBrowser){var t=this.getContainer();if(!t)throw"Stage has no container. A container is required.";t.innerHTML=K,this.content=Konva.document.createElement(D),this.content.style.position=M,this.content.className=L,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},_onContent:function(t,e){var n,r,i=t.split(F),o=i.length;for(n=0;n<o;n++)r=i[n],this.content.addEventListener(r,e,!1)},cache:function(){Konva.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Konva.Util.extend(Konva.Stage,Konva.Container),Konva.Factory.addGetter(Konva.Stage,"container"),Konva.Factory.addOverloadedGetterSetter(Konva.Stage,"container")}(),function(t){"use strict";t.BaseLayer=function(t){this.___init(t)},t.Util.addMethods(t.BaseLayer,{___init:function(e){this.nodeType="Layer",t.Container.call(this,e)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this},clearHitCache:function(){this._hitImageData=void 0},setZIndex:function(e){t.Node.prototype.setZIndex.call(this,e);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),e<n.getChildren().length-1?n.content.insertBefore(this.getCanvas()._canvas,n.getChildren()[e+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){t.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),e.content.appendChild(this.getCanvas()._canvas)),this},moveUp:function(){var e=t.Node.prototype.moveUp.call(this);if(!e)return this;var n=this.getStage();return n?(n.content.removeChild(this.getCanvas()._canvas),this.index<n.getChildren().length-1?n.content.insertBefore(this.getCanvas()._canvas,n.getChildren()[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas),this):this},moveDown:function(){if(t.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,n[this.index+1].getCanvas()._canvas)}}return this},moveToBottom:function(){if(t.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,n[1].getCanvas()._canvas)}}return this},getLayer:function(){return this},remove:function(){var e=this.getCanvas()._canvas;return t.Node.prototype.remove.call(this),e&&e.parentNode&&t.Util._isInDocument(e)&&e.parentNode.removeChild(e),this},getStage:function(){return this.parent},setSize:function(t,e){return this.canvas.setSize(t,e),this},getWidth:function(){if(this.parent)return this.parent.getWidth()},setWidth:function(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},getHeight:function(){if(this.parent)return this.parent.getHeight()},setHeight:function(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},_applyTransform:function(t,e,n){var r=t.getAbsoluteTransform(n).getMatrix();e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}}),t.Util.extend(t.BaseLayer,t.Container),t.Factory.addGetterSetter(t.BaseLayer,"clearBeforeDraw",!0),t.Collection.mapMethods(t.BaseLayer)}(Konva),function(){"use strict";var t="#",e="beforeDraw",n="draw",r=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],i=r.length;Konva.Layer=function(t){this.____init(t)},Konva.Util.addMethods(Konva.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Konva.SceneCanvas,this.hitCanvas=new Konva.HitCanvas({pixelRatio:1}),Konva.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Konva.Util.throw("You may only add groups and shapes to a layer.")},getIntersection:function(t,e){var n,o,a,s;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var u=1,c=!1;;){for(o=0;o<i;o++){if(a=r[o],n=this._getIntersection({x:t.x+a.x*u,y:t.y+a.y*u}),s=n.shape,s&&e)return s.findAncestor(e,!0);if(s)return s;if(c=!!n.antialiased,!n.antialiased)break}if(!c)return null;u+=1}},_getImageData:function(t,e){var n=this.hitCanvas.width||1,r=this.hitCanvas.height||1,i=Math.round(e)*n+Math.round(t);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,n,r)),[this._hitImageData.data[4*i+0],this._hitImageData.data[4*i+1],this._hitImageData.data[4*i+2],this._hitImageData.data[4*i+3]]},_getIntersection:function(e){var n,r,i=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,a=o[3];return 255===a?(n=Konva.Util._rgbToHex(o[0],o[1],o[2]),r=Konva.shapes[t+n],r?{shape:r}:{antialiased:!0}):a>0?{antialiased:!0}:{}},drawScene:function(t,r){var i=this.getLayer(),o=t||i&&i.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&o.getContext().clear(),Konva.Container.prototype.drawScene.call(this,o,r),this._fire(n,{node:this}),this},drawHit:function(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Konva.Container.prototype.drawHit.call(this,r,e),
this.imageData=null,this},clear:function(t){return Konva.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this.imageData=null,this},setVisible:function(t){return Konva.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(t,e){return Konva.BaseLayer.prototype.setSize.call(this,t,e),this.hitCanvas.setSize(t,e),this}}),Konva.Util.extend(Konva.Layer,Konva.BaseLayer),Konva.Factory.addGetterSetter(Konva.Layer,"hitGraphEnabled",!0),Konva.Collection.mapMethods(Konva.Layer)}(),function(){"use strict";Konva.FastLayer=function(t){this.____init(t)},Konva.Util.addMethods(Konva.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Konva.SceneCanvas,Konva.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Konva.Util.throw("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Konva.Container.prototype.drawScene.call(this,n),this},draw:function(){return this.drawScene(),this},setVisible:function(t){return Konva.Node.prototype.setVisible.call(this,t),t?this.getCanvas()._canvas.style.display="block":this.getCanvas()._canvas.style.display="none",this}}),Konva.Util.extend(Konva.FastLayer,Konva.BaseLayer),Konva.Collection.mapMethods(Konva.FastLayer)}(),function(){"use strict";Konva.Group=function(t){this.___init(t)},Konva.Util.addMethods(Konva.Group,{___init:function(t){this.nodeType="Group",Konva.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Konva.Util.throw("You may only add groups and shapes to groups.")}}),Konva.Util.extend(Konva.Group,Konva.Container),Konva.Collection.mapMethods(Konva.Group)}(),function(t){"use strict";function e(t){setTimeout(t,1e3/60)}function n(){return i.apply(t.global,arguments)}var r=function(){return t.global.performance&&t.global.performance.now?function(){return t.global.performance.now()}:function(){return(new Date).getTime()}}(),i=function(){return t.global.requestAnimationFrame||t.global.webkitRequestAnimationFrame||t.global.mozRequestAnimationFrame||t.global.oRequestAnimationFrame||t.global.msRequestAnimationFrame||e}();t.Animation=function(e,n){var i=t.Animation;this.func=e,this.setLayers(n),this.id=i.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r()}},t.Animation.prototype={setLayers:function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},getLayers:function(){return this.layers},addLayer:function(t){var e,n=this.layers,r=n.length;for(e=0;e<r;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0},isRunning:function(){var e,n=t.Animation,r=n.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===this.id)return!0;return!1},start:function(){var e=t.Animation;return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),e._addAnimation(this),this},stop:function(){return t.Animation._removeAnimation(this),this},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},t.Animation.animations=[],t.Animation.animIdCounter=0,t.Animation.animRunning=!1,t.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t.Animation._removeAnimation=function(t){var e,n=t.id,r=this.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===n){this.animations.splice(e,1);break}},t.Animation._runFrames=function(){var t,e,n,i,o,a,s,u,c,l={},h=this.animations;for(i=0;i<h.length;i++)if(t=h[i],e=t.layers,n=t.func,t._updateFrameObject(r()),a=e.length,c=!n||n.call(t,t.frame)!==!1)for(o=0;o<a;o++)s=e[o],void 0!==s._id&&(l[s._id]=s);for(u in l)l.hasOwnProperty(u)&&l[u].draw()},t.Animation._animationLoop=function(){var e=t.Animation;e.animations.length?(e._runFrames(),n(e._animationLoop)):e.animRunning=!1},t.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,n(this._animationLoop))},t.BaseLayer.prototype.batchDraw=function(){var e=this,n=t.Animation;return this.batchAnim||(this.batchAnim=new n(function(){e.batchAnim.stop()},this)),this.batchAnim.isRunning()||this.batchAnim.start(),this},t.Stage.prototype.batchDraw=function(){return this.getChildren().each(function(t){t.batchDraw()}),this}}(Konva),function(){"use strict";var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,r=3,i=0,o=["fill","stroke","shadowColor"],a=function(t,e,n,r,i,o,a){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()};a.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=r,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===r&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Konva.Tween=function(e){var n,r,o=this,s=e.node,u=s._id,c=e.easing||Konva.Easings.Linear,l=!!e.yoyo;n="undefined"==typeof e.duration?1:0===e.duration?.001:e.duration,this.node=s,this._id=i++;var h=s.getLayer()||(s instanceof Konva.Stage?s.getLayers():null);h||Konva.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Konva.Animation(function(){o.tween.onEnterFrame()},h),this.tween=new a(r,function(t){o._tweenFunc(t)},c,0,1,1e3*n,l),this._addListeners(),Konva.Tween.attrs[u]||(Konva.Tween.attrs[u]={}),Konva.Tween.attrs[u][this._id]||(Konva.Tween.attrs[u][this._id]={}),Konva.Tween.tweens[u]||(Konva.Tween.tweens[u]={});for(r in e)void 0===t[r]&&this._addAttr(r,e[r]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Konva.Tween.attrs={},Konva.Tween.tweens={},Konva.Tween.prototype={_addAttr:function(t,e){var n,r,i,a,s,u,c,l=this.node,h=l._id;if(i=Konva.Tween.tweens[h][t],i&&delete Konva.Tween.attrs[h][i][t],n=l.getAttr(t),Konva.Util._isArray(e))for(r=[],s=Math.max(e.length,n.length),"points"===t&&e.length!==n.length&&(e.length>n.length?(c=n,n=Konva.Util._prepareArrayForTween(n,e,l.closed())):(u=e,e=Konva.Util._prepareArrayForTween(e,n,l.closed()))),a=0;a<s;a++)r.push(e[a]-n[a]);else if(o.indexOf(t)!==-1){n=Konva.Util.colorToRGBA(n);var f=Konva.Util.colorToRGBA(e);r={r:f.r-n.r,g:f.g-n.g,b:f.b-n.b,a:f.a-n.a}}else r=e-n;Konva.Tween.attrs[h][this._id][t]={start:n,diff:r,end:e,trueEnd:u,trueStart:c},Konva.Tween.tweens[h][t]=this._id},_tweenFunc:function(t){var e,n,r,i,a,s,u,c,l=this.node,h=Konva.Tween.attrs[l._id][this._id];for(e in h){if(n=h[e],r=n.start,i=n.diff,c=n.end,Konva.Util._isArray(r))for(a=[],u=Math.max(r.length,c.length),s=0;s<u;s++)a.push((r[s]||0)+i[s]*t);else a=o.indexOf(e)!==-1?"rgba("+Math.round(r.r+i.r*t)+","+Math.round(r.g+i.g*t)+","+Math.round(r.b+i.b*t)+","+(r.a+i.a*t)+")":r+i*t;l.setAttr(e,a)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){var e=t.node,n=Konva.Tween.attrs[e._id][t._id];n.points&&n.points.trueEnd&&e.points(n.points.trueEnd),t.onFinish&&t.onFinish.call(t)},this.tween.onReset=function(){var e=t.node,n=Konva.Tween.attrs[e._id][t._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.tween.reset(),this},seek:function(t){return this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.tween.finish(),this},destroy:function(){var t,e=this.node._id,n=this._id,r=Konva.Tween.tweens[e];this.pause();for(t in r)delete Konva.Tween.tweens[e][t];delete Konva.Tween.attrs[e][n]}},Konva.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new Konva.Tween(t);n.play()},Konva.Easings={BackEaseIn:function(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn:function(t,e,n,r,i,o){var a=0;return 0===t?e:1===(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},ElasticEaseOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:1===(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:2===(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,r){return n-Konva.Easings.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut:function(t,e,n,r){return t<r/2?.5*Konva.Easings.BounceEaseIn(2*t,0,n,r)+e:.5*Konva.Easings.BounceEaseOut(2*t-r,0,n,r)+.5*n+e},EaseIn:function(t,e,n,r){return n*(t/=r)*t+e},EaseOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,r){return n*t/r+e}}}(),function(){"use strict";Konva.DD={anim:new Konva.Animation(function(){var t=this.dirty;return this.dirty=!1,t}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Konva.DD,n=e.node;if(n){if(!e.isDragging){var r=n.getStage().getPointerPosition();r||(n.getStage()._setPointerPosition(t),r=n.getStage().getPointerPosition());var i=n.dragDistance(),o=Math.max(Math.abs(r.x-e.startPointerPos.x),Math.abs(r.y-e.startPointerPos.y));if(o<i)return}n.getStage()._setPointerPosition(t),n._setDragPosition(t),e.isDragging||(e.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:t},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}},_endDragBefore:function(t){var e,n=Konva.DD,r=n.node;r&&(e=r.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,n.justDragged=!0,Konva.listenClickTap=!1,t&&(t.dragEndNode=r)),delete n.node,(r.getLayer()||e||r instanceof Konva.Stage)&&(e||r).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Konva.Node.prototype.startDrag=function(){var t=Konva.DD,e=this.getStage(),n=this.getLayer(),r=e.getPointerPosition(),i=this.getAbsolutePosition();r&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=r,t.offset.x=r.x-i.x,t.offset.y=r.y-i.y,t.anim.setLayers(n||this.getLayers()),t.anim.start(),this._setDragPosition())},Konva.Node.prototype._setDragPosition=function(t){var e=Konva.DD,n=this.getStage().getPointerPosition(),r=this.getDragBoundFunc();if(n){var i={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==r&&(i=r.call(this,i,t)),this.setAbsolutePosition(i),this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(e.anim.dirty=!0),this._lastPos=i}},Konva.Node.prototype.stopDrag=function(){var t=Konva.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Konva.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Konva.Node.prototype.remove;if(Konva.Node.prototype.__originalRemove=t,Konva.Node.prototype.remove=function(){var e=Konva.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Konva.Node.prototype.isDragging=function(){var t=Konva.DD;return!(!t.node||t.node._id!==this._id||!t.isDragging)},Konva.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.konva contentTouchstart.konva",function(e){Konva.DD.node||t.startDrag(e)}):this.on("mousedown.konva touchstart.konva",function(e){1!==e.evt.button&&2!==e.evt.button&&(Konva.DD.node||t.startDrag(e))})},Konva.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Konva.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Konva.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.konva"),this.off("contentTouchstart.konva")):(this.off("mousedown.konva"),this.off("touchstart.konva"))},Konva.Factory.addGetterSetter(Konva.Node,"dragBoundFunc"),Konva.Factory.addGetter(Konva.Node,"draggable",!1),Konva.Factory.addOverloadedGetterSetter(Konva.Node,"draggable"),Konva.isBrowser){var e=Konva.document.documentElement;e.addEventListener("mouseup",Konva.DD._endDragBefore,!0),e.addEventListener("touchend",Konva.DD._endDragBefore,!0),e.addEventListener("mousemove",Konva.DD._drag),e.addEventListener("touchmove",Konva.DD._drag),e.addEventListener("mouseup",Konva.DD._endDragAfter,!1),e.addEventListener("touchend",Konva.DD._endDragAfter,!1)}}(),function(){"use strict";Konva.Rect=function(t){this.___init(t)},Konva.Rect.prototype={___init:function(t){Konva.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),n=this.getWidth(),r=this.getHeight();t.beginPath(),e?(e=Math.min(e,n/2,r/2),t.moveTo(e,0),t.lineTo(n-e,0),t.arc(n-e,e,e,3*Math.PI/2,0,!1),t.lineTo(n,r-e),t.arc(n-e,r-e,e,0,Math.PI/2,!1),t.lineTo(e,r),t.arc(e,r-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}},Konva.Util.extend(Konva.Rect,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Rect,"cornerRadius",0),Konva.Collection.mapMethods(Konva.Rect)}(),function(t){"use strict";var e=2*Math.PI-1e-4,n="Circle";t.Circle=function(t){this.___init(t)},t.Circle.prototype={_centroid:!0,___init:function(e){t.Shape.call(this,e),this.className=n,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(e){t.Node.prototype.setWidth.call(this,e),this.radius()!==e/2&&this.setRadius(e/2)},setHeight:function(e){t.Node.prototype.setHeight.call(this,e),this.radius()!==e/2&&this.setRadius(e/2)}},t.Util.extend(t.Circle,t.Shape),t.Factory.addGetterSetter(t.Circle,"radius",0),t.Factory.addOverloadedGetterSetter(t.Circle,"radius"),t.Collection.mapMethods(t.Circle)}(Konva),function(){"use strict";var t=2*Math.PI-1e-4,e="Ellipse";Konva.Ellipse=function(t){this.___init(t)},Konva.Ellipse.prototype={_centroid:!0,___init:function(t){Konva.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var n=this.getRadiusX(),r=this.getRadiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(t){Konva.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Konva.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Konva.Util.extend(Konva.Ellipse,Konva.Shape),Konva.Factory.addComponentsGetterSetter(Konva.Ellipse,"radius",["x","y"]),Konva.Factory.addGetterSetter(Konva.Ellipse,"radiusX",0),Konva.Factory.addGetterSetter(Konva.Ellipse,"radiusY",0),Konva.Collection.mapMethods(Konva.Ellipse)}(),function(){"use strict";var t=2*Math.PI-1e-4;Konva.Ring=function(t){this.___init(t)},Konva.Ring.prototype={_centroid:!0,___init:function(t){Konva.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Konva.Node.prototype.setWidth.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setHeight:function(t){Konva.Node.prototype.setHeight.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setOuterRadius:function(t){this._setAttr("outerRadius",t),this.setWidth(2*t),this.setHeight(2*t)}},Konva.Util.extend(Konva.Ring,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Ring,"innerRadius",0),Konva.Factory.addGetter(Konva.Ring,"outerRadius",0),Konva.Factory.addOverloadedGetterSetter(Konva.Ring,"outerRadius"),Konva.Collection.mapMethods(Konva.Ring)}(),function(){"use strict";Konva.Wedge=function(t){this.___init(t)},Konva.Wedge.prototype={_centroid:!0,___init:function(t){Konva.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Konva.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Konva.Node.prototype.setWidth.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setHeight:function(t){Konva.Node.prototype.setHeight.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)}},Konva.Util.extend(Konva.Wedge,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Wedge,"radius",0),Konva.Factory.addGetterSetter(Konva.Wedge,"angle",0),Konva.Factory.addGetterSetter(Konva.Wedge,"clockwise",!1),Konva.Factory.backCompat(Konva.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Konva.Collection.mapMethods(Konva.Wedge)}(),function(t){"use strict";t.Arc=function(t){this.___init(t)},t.Arc.prototype={_centroid:!0,___init:function(e){t.Shape.call(this,e),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var n=t.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.getOuterRadius(),0,n,r),e.arc(0,0,this.getInnerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(e){t.Node.prototype.setWidth.call(this,e),this.getOuterRadius()!==e/2&&this.setOuterRadius(e/2)},setHeight:function(e){t.Node.prototype.setHeight.call(this,e),this.getOuterRadius()!==e/2&&this.setOuterRadius(e/2)}},t.Util.extend(t.Arc,t.Shape),t.Factory.addGetterSetter(t.Arc,"innerRadius",0),t.Factory.addGetterSetter(t.Arc,"outerRadius",0),t.Factory.addGetterSetter(t.Arc,"angle",0),t.Factory.addGetterSetter(t.Arc,"clockwise",!1),t.Collection.mapMethods(t.Arc)}(Konva),function(){"use strict";var t="Image";Konva.Image=function(t){this.___init(t)},Konva.Image.prototype={___init:function(e){Konva.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(t){var e,n,r,i=this.getWidth(),o=this.getHeight(),a=this.getImage();a&&(e=this.getCropWidth(),n=this.getCropHeight(),r=e&&n?[a,this.getCropX(),this.getCropY(),e,n,0,0,i,o]:[a,0,0,i,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,r)},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Konva.Util.extend(Konva.Image,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Image,"image"),Konva.Factory.addComponentsGetterSetter(Konva.Image,"crop",["x","y","width","height"]),Konva.Factory.addGetterSetter(Konva.Image,"cropX",0),Konva.Factory.addGetterSetter(Konva.Image,"cropY",0),Konva.Factory.addGetterSetter(Konva.Image,"cropWidth",0),Konva.Factory.addGetterSetter(Konva.Image,"cropHeight",0),Konva.Collection.mapMethods(Konva.Image),Konva.Image.fromURL=function(t,e){var n=new Image;n.onload=function(){var t=new Konva.Image({image:n});e(t)},n.src=t}}(),function(){"use strict";function t(){return r?r:r=Konva.Util.createCanvasElement().getContext(u)}function e(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}var r,i="auto",o="center",a="justify",s="Change.konva",u="2d",c="-",l="",h="left",f="text",d="Text",p="middle",m="normal",v="px ",g=" ",y="right",_="word",b="char",w="none",E="",S=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],C=S.length;Konva.Text=function(t){this.___init(t)},Konva.Text.prototype={___init:function(t){t=t||{},t.fillLinearGradientColorStops||t.fillRadialGradientColorStops||(t.fill=t.fill||"black"),Konva.Shape.call(this,t),this._fillFunc=e,this._strokeFunc=n,this.className=d;for(var r=0;r<C;r++)this.on(S[r]+s,this._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,n=this.getPadding(),r=this.getTextHeight(),i=this.getLineHeight()*r,s=this.textArr,u=s.length,c=this.getAlign(),l=this.getWidth(),f=this.getLetterSpacing(),d=this.textDecoration(),m=this.fill(),v=this.fontSize();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",p),t.setAttr("textAlign",h),t.save(),n?(t.translate(n,0),t.translate(0,n+r/2)):t.translate(0,r/2),e=0;e<u;e++){var g=s[e],_=g.text,b=g.width;if(t.save(),c===y?t.translate(l-b-2*n,0):c===o&&t.translate((l-b-2*n)/2,0),d.indexOf("underline")!==-1&&(t.save(),t.beginPath(),t.moveTo(0,Math.round(i/2)),t.lineTo(Math.round(b),Math.round(i/2)),t.lineWidth=v/15,t.strokeStyle=m,t.stroke(),t.restore()),d.indexOf("line-through")!==-1&&(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(Math.round(b),0),t.lineWidth=v/15,t.strokeStyle=m,t.stroke(),t.restore()),0!==f||c===a)for(var w=_.split(" ").length-1,E=0;E<_.length;E++){var S=_[E];" "===S&&e!==u-1&&c===a&&t.translate(Math.floor((l-b)/w),0),this.partialText=S,t.fillStrokeShape(this),t.translate(Math.round(this._getTextSize(S).width)+f,0)}else this.partialText=_,t.fillStrokeShape(this);t.restore(),t.translate(0,i)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Konva.Util._isString(t)?t:(t||"").toString();return this._setAttr(f,e),this},getWidth:function(){var t=this.attrs.width===i||void 0===this.attrs.width;return t?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){var t=this.attrs.height===i||void 0===this.attrs.height;return t?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var n,r=t(),i=this.getFontSize();return r.save(),r.font=this._getContextFont(),n=r.measureText(e),r.restore(),{width:n.width,height:parseInt(i,10)}},_getContextFont:function(){return Konva.UA.isIE?this.getFontStyle()+g+this.getFontSize()+v+this.getFontFamily():this.getFontStyle()+g+this.getFontVariant()+g+this.getFontSize()+v+this.getFontFamily()},_addTextLine:function(t){this.align()===a&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},_getTextWidth:function(e){var n=this.getLetterSpacing(),r=e.length;return t().measureText(e).width+(r?n*(r-1):0)},_setTextData:function(){var e=this.getText().split("\n"),n=+this.getFontSize(),r=0,o=this.getLineHeight()*n,a=this.attrs.width,s=this.attrs.height,u=a!==i,l=s!==i,h=this.getPadding(),f=a-2*h,d=s-2*h,p=0,m=this.getWrap(),v=m!==w,y=m!==b&&v,_=this.getEllipsis()&&!v;this.textArr=[],t().save(),t().font=this._getContextFont();for(var S=0,C=e.length;S<C;++S){var T=e[S],k=_?this._getTextWidth(E):0,I=this._getTextWidth(T);if(u&&I>f)for(;T.length>0;){for(var P=0,N=T.length,O="",A=0;P<N;){var x=P+N>>>1,R=T.slice(0,x+1),D=this._getTextWidth(R)+k;D<=f?(P=x+1,O=R+(_?E:""),A=D):N=x}if(!O)break;if(y){var M=Math.max(O.lastIndexOf(g),O.lastIndexOf(c))+1;M>0&&(P=M,O=O.slice(0,P),A=this._getTextWidth(O))}if(this._addTextLine(O),r=Math.max(r,A),p+=o,!v||l&&p+o>d)break;if(T=T.slice(P),T.length>0&&(I=this._getTextWidth(T),I<=f)){this._addTextLine(T),p+=o,r=Math.max(r,I);break}}else this._addTextLine(T),p+=o,r=Math.max(r,I);if(l&&p+o>d)break}t().restore(),this.textHeight=n,this.textWidth=r}},Konva.Util.extend(Konva.Text,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Text,"fontFamily","Arial"),Konva.Factory.addGetterSetter(Konva.Text,"fontSize",12),Konva.Factory.addGetterSetter(Konva.Text,"fontStyle",m),Konva.Factory.addGetterSetter(Konva.Text,"fontVariant",m),Konva.Factory.addGetterSetter(Konva.Text,"padding",0),Konva.Factory.addGetterSetter(Konva.Text,"align",h),Konva.Factory.addGetterSetter(Konva.Text,"lineHeight",1),Konva.Factory.addGetterSetter(Konva.Text,"wrap",_),Konva.Factory.addGetterSetter(Konva.Text,"ellipsis",!1),Konva.Factory.addGetterSetter(Konva.Text,"letterSpacing",0),Konva.Factory.addGetter(Konva.Text,"text",l),Konva.Factory.addOverloadedGetterSetter(Konva.Text,"text"),Konva.Factory.addGetterSetter(Konva.Text,"textDecoration",l),Konva.Collection.mapMethods(Konva.Text)}(),function(){"use strict";Konva.Line=function(t){this.___init(t)},Konva.Line.prototype={___init:function(t){Konva.Shape.call(this,t),this.className="Line",this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,r,i=this.getPoints(),o=i.length,a=this.getTension(),s=this.getClosed(),u=this.getBezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(e=this.getTensionPoints(),n=e.length,r=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);s||t.quadraticCurveTo(e[n-2],e[n-1],i[o-2],i[o-1])}else if(u)for(r=2;r<o;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<o;r+=2)t.lineTo(i[r],i[r+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Konva.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,n=this.getTension(),r=Konva.Util,i=r._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),o=r._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=Konva.Util._expandPoints(t,n),s=[i[2],i[3]].concat(a).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],i[0],i[1],t[0],t[1]]);return s},getWidth:function(){return this.getSelfRect().width},getHeight:function(){return this.getSelfRect().height},getSelfRect:function(){var t;t=0!==this.getTension()?this._getTensionPoints():this.getPoints();for(var e,n,r=t[0],i=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),a=Math.max(a,n);return{x:Math.round(r),y:Math.round(o),width:Math.round(i-r),height:Math.round(a-o)}}},Konva.Util.extend(Konva.Line,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Line,"closed",!1),Konva.Factory.addGetterSetter(Konva.Line,"bezier",!1),Konva.Factory.addGetterSetter(Konva.Line,"tension",0),Konva.Factory.addGetterSetter(Konva.Line,"points",[]),Konva.Collection.mapMethods(Konva.Line)}(),function(){"use strict";Konva.Sprite=function(t){this.___init(t)},Konva.Sprite.prototype={___init:function(t){Konva.Shape.call(this,t),this.className="Sprite",this._updated=!0;var e=this;this.anim=new Konva.Animation(function(){var t=e._updated;return e._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),r=4*n,i=this.getAnimations()[e],o=this.frameOffsets(),a=i[r+0],s=i[r+1],u=i[r+2],c=i[r+3],l=this.getImage();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,u,c),t.closePath(),t.fillStrokeShape(this)),l)if(o){var h=o[e],f=2*n;t.drawImage(l,a,s,u,c,h[f+0],h[f+1],u,c)}else t.drawImage(l,a,s,u,c,0,0,u,c)},_hitFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),r=4*n,i=this.getAnimations()[e],o=this.frameOffsets(),a=i[r+2],s=i[r+3];if(t.beginPath(),o){var u=o[e],c=2*n;t.rect(u[c+0],u[c+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),n=this.getAnimations(),r=n[e],i=r.length/4;t<i-1?this.frameIndex(t+1):this.frameIndex(0)}},Konva.Util.extend(Konva.Sprite,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Sprite,"animation"),Konva.Factory.addGetterSetter(Konva.Sprite,"animations"),Konva.Factory.addGetterSetter(Konva.Sprite,"frameOffsets"),Konva.Factory.addGetterSetter(Konva.Sprite,"image"),Konva.Factory.addGetterSetter(Konva.Sprite,"frameIndex",0),Konva.Factory.addGetterSetter(Konva.Sprite,"frameRate",17),Konva.Factory.backCompat(Konva.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Konva.Collection.mapMethods(Konva.Sprite)}(),function(){"use strict";Konva.Path=function(t){this.___init(t)},Konva.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Konva.Shape.call(this,t),this.className="Path",this.dataArray=Konva.Path.parsePathData(this.getData()),this.on("dataChange.konva",function(){
e.dataArray=Konva.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray;t.beginPath();for(var n=0;n<e.length;n++){var r=e[n].command,i=e[n].points;switch(r){case"L":t.lineTo(i[0],i[1]);break;case"M":t.moveTo(i[0],i[1]);break;case"C":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var o=i[0],a=i[1],s=i[2],u=i[3],c=i[4],l=i[5],h=i[6],f=i[7],d=s>u?s:u,p=s>u?1:s/u,m=s>u?u/s:1;t.translate(o,a),t.rotate(h),t.scale(p,m),t.arc(0,0,d,c,c+l,1-f),t.scale(1/p,1/m),t.rotate(-h),t.translate(-o,-a);break;case"z":t.closePath()}}t.fillStrokeShape(this)},getSelfRect:function(){var t=[];this.dataArray.forEach(function(e){t=t.concat(e.points)});for(var e,n,r=t[0],i=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),a=Math.max(a,n);return{x:Math.round(r),y:Math.round(o),width:Math.round(i-r),height:Math.round(a-o)}}},Konva.Util.extend(Konva.Path,Konva.Shape),Konva.Path.getLineLength=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},Konva.Path.getPointOnLine=function(t,e,n,r,i,o,a){void 0===o&&(o=e),void 0===a&&(a=n);var s=(i-n)/(r-e+1e-8),u=Math.sqrt(t*t/(1+s*s));r<e&&(u*=-1);var c,l=s*u;if(r===e)c={x:o,y:a+l};else if((a-n)/(o-e+1e-8)===s)c={x:o+u,y:a+l};else{var h,f,d=this.getLineLength(e,n,r,i);if(d<1e-8)return;var p=(o-e)*(r-e)+(a-n)*(i-n);p/=d*d,h=e+p*(r-e),f=n+p*(i-n);var m=this.getLineLength(o,a,h,f),v=Math.sqrt(t*t-m*m);u=Math.sqrt(v*v/(1+s*s)),r<e&&(u*=-1),l=s*u,c={x:h+u,y:f+l}}return c},Konva.Path.getPointOnCubicBezier=function(t,e,n,r,i,o,a,s,u){function c(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function f(t){return(1-t)*(1-t)*(1-t)}var d=s*c(t)+o*l(t)+r*h(t)+e*f(t),p=u*c(t)+a*l(t)+i*h(t)+n*f(t);return{x:d,y:p}},Konva.Path.getPointOnQuadraticBezier=function(t,e,n,r,i,o,a){function s(t){return t*t}function u(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}var l=o*s(t)+r*u(t)+e*c(t),h=a*s(t)+i*u(t)+n*c(t);return{x:l,y:h}},Konva.Path.getPointOnEllipticalArc=function(t,e,n,r,i,o){var a=Math.cos(o),s=Math.sin(o),u={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:t+(u.x*a-u.y*s),y:e+(u.x*s+u.y*a)}},Konva.Path.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,o=e.split("|"),a=[],s=[],u=0,c=0,l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<o.length;r++){var h=o[r],f=h.charAt(0);for(h=h.slice(1),s.length=0;i=l.exec(h);)s.push(i[0]);for(var d=[],p=0,m=s.length;p<m;p++){var v=parseFloat(s[p]);isNaN(v)||d.push(v)}for(;d.length>0&&!isNaN(d[0]);){var g,y,_,b,w,E,S,C,T,k,I=null,P=[],N=u,O=c;switch(f){case"l":u+=d.shift(),c+=d.shift(),I="L",P.push(u,c);break;case"L":u=d.shift(),c=d.shift(),P.push(u,c);break;case"m":var A=d.shift(),x=d.shift();if(u+=A,c+=x,I="M",a.length>2&&"z"===a[a.length-1].command)for(var R=a.length-2;R>=0;R--)if("M"===a[R].command){u=a[R].points[0]+A,c=a[R].points[1]+x;break}P.push(u,c),f="l";break;case"M":u=d.shift(),c=d.shift(),I="M",P.push(u,c),f="L";break;case"h":u+=d.shift(),I="L",P.push(u,c);break;case"H":u=d.shift(),I="L",P.push(u,c);break;case"v":c+=d.shift(),I="L",P.push(u,c);break;case"V":c=d.shift(),I="L",P.push(u,c);break;case"C":P.push(d.shift(),d.shift(),d.shift(),d.shift()),u=d.shift(),c=d.shift(),P.push(u,c);break;case"c":P.push(u+d.shift(),c+d.shift(),u+d.shift(),c+d.shift()),u+=d.shift(),c+=d.shift(),I="C",P.push(u,c);break;case"S":y=u,_=c,g=a[a.length-1],"C"===g.command&&(y=u+(u-g.points[2]),_=c+(c-g.points[3])),P.push(y,_,d.shift(),d.shift()),u=d.shift(),c=d.shift(),I="C",P.push(u,c);break;case"s":y=u,_=c,g=a[a.length-1],"C"===g.command&&(y=u+(u-g.points[2]),_=c+(c-g.points[3])),P.push(y,_,u+d.shift(),c+d.shift()),u+=d.shift(),c+=d.shift(),I="C",P.push(u,c);break;case"Q":P.push(d.shift(),d.shift()),u=d.shift(),c=d.shift(),P.push(u,c);break;case"q":P.push(u+d.shift(),c+d.shift()),u+=d.shift(),c+=d.shift(),I="Q",P.push(u,c);break;case"T":y=u,_=c,g=a[a.length-1],"Q"===g.command&&(y=u+(u-g.points[0]),_=c+(c-g.points[1])),u=d.shift(),c=d.shift(),I="Q",P.push(y,_,u,c);break;case"t":y=u,_=c,g=a[a.length-1],"Q"===g.command&&(y=u+(u-g.points[0]),_=c+(c-g.points[1])),u+=d.shift(),c+=d.shift(),I="Q",P.push(y,_,u,c);break;case"A":b=d.shift(),w=d.shift(),E=d.shift(),S=d.shift(),C=d.shift(),T=u,k=c,u=d.shift(),c=d.shift(),I="A",P=this.convertEndpointToCenterParameterization(T,k,u,c,S,C,b,w,E);break;case"a":b=d.shift(),w=d.shift(),E=d.shift(),S=d.shift(),C=d.shift(),T=u,k=c,u+=d.shift(),c+=d.shift(),I="A",P=this.convertEndpointToCenterParameterization(T,k,u,c,S,C,b,w,E)}a.push({command:I||f,points:P,start:{x:N,y:O},pathLength:this.calcLength(N,O,I||f,P)})}"z"!==f&&"Z"!==f||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},Konva.Path.calcLength=function(t,e,n,r){var i,o,a,s,u=Konva.Path;switch(n){case"L":return u.getLineLength(t,e,r[0],r[1]);case"C":for(i=0,o=u.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)a=u.getPointOnCubicBezier(s,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return i;case"Q":for(i=0,o=u.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)a=u.getPointOnQuadraticBezier(s,t,e,r[0],r[1],r[2],r[3]),i+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return i;case"A":i=0;var c=r[4],l=r[5],h=r[4]+l,f=Math.PI/180;if(Math.abs(c-h)<f&&(f=Math.abs(c-h)),o=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),l<0)for(s=c-f;s>h;s-=f)a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=c+f;s<h;s+=f)a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),i+=u.getLineLength(o.x,o.y,a.x,a.y)}return 0},Konva.Path.convertEndpointToCenterParameterization=function(t,e,n,r,i,o,a,s,u){var c=u*(Math.PI/180),l=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-r)/2,h=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-r)/2,f=l*l/(a*a)+h*h/(s*s);f>1&&(a*=Math.sqrt(f),s*=Math.sqrt(f));var d=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(l*l))/(a*a*(h*h)+s*s*(l*l)));i===o&&(d*=-1),isNaN(d)&&(d=0);var p=d*a*h/s,m=d*-s*l/a,v=(t+n)/2+Math.cos(c)*p-Math.sin(c)*m,g=(e+r)/2+Math.sin(c)*p+Math.cos(c)*m,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},w=b([1,0],[(l-p)/a,(h-m)/s]),E=[(l-p)/a,(h-m)/s],S=[(-1*l-p)/a,(-1*h-m)/s],C=b(E,S);return _(E,S)<=-1&&(C=Math.PI),_(E,S)>=1&&(C=0),0===o&&C>0&&(C-=2*Math.PI),1===o&&C<0&&(C+=2*Math.PI),[v,g,a,s,w,C,c,o]},Konva.Factory.addGetterSetter(Konva.Path,"data"),Konva.Collection.mapMethods(Konva.Path)}(),function(){"use strict";function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="",r="normal";Konva.TextPath=function(t){this.___init(t)},Konva.TextPath.prototype={___init:function(n){var r=this;this.dummyCanvas=Konva.Util.createCanvasElement(),this.dataArray=[],this.getKerning=n&&n.getKerning,Konva.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Konva.Path.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){r.dataArray=Konva.Path.parsePathData(this.attrs.data),r._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva",r._setTextData),r._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.getTextBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()},_hitFunc:function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.getFontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Konva.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var r=n.measureText(t);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.getLetterSpacing(),r=this.align();this.textWidth=e.width,this.textHeight=e.height;var i=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var o=0,a=0;a<t.dataArray.length;a++)t.dataArray[a].pathLength>0&&(o+=t.dataArray[a].pathLength);var s=0;"center"===r&&(s=Math.max(0,o/2-i/2)),"right"===r&&(s=Math.max(0,o-i));for(var u,c,l,h=this.getText().split(""),f=this.getText().split(" ").length-1,d=-1,p=0,m=function(){p=0;for(var e=t.dataArray,n=d+1;n<e.length;n++){if(e[n].pathLength>0)return d=n,e[n];"M"===e[n].command&&(u={x:e[n].points[0],y:e[n].points[1]})}return{}},v=function(e){var a=t._getTextSize(e).width+n;" "===e&&"justify"===r&&(a+=(o-i)/f);var s=0,h=0;for(c=void 0;Math.abs(a-s)/a>.01&&h<25;){h++;for(var d=s;void 0===l;)l=m(),l&&d+l.pathLength<a&&(d+=l.pathLength,l=void 0);if(l==={}||void 0===u)return;var v=!1;switch(l.command){case"L":Konva.Path.getLineLength(u.x,u.y,l.points[0],l.points[1])>a?c=Konva.Path.getPointOnLine(a,u.x,u.y,l.points[0],l.points[1],u.x,u.y):l=void 0;break;case"A":var g=l.points[4],y=l.points[5],_=l.points[4]+y;0===p?p=g+1e-8:a>s?p+=Math.PI/180*y/Math.abs(y):p-=Math.PI/360*y/Math.abs(y),(y<0&&p<_||y>=0&&p>_)&&(p=_,v=!0),c=Konva.Path.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],p,l.points[6]);break;case"C":0===p?p=a>l.pathLength?1e-8:a/l.pathLength:a>s?p+=(a-s)/l.pathLength:p-=(s-a)/l.pathLength,p>1&&(p=1,v=!0),c=Konva.Path.getPointOnCubicBezier(p,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);break;case"Q":0===p?p=a/l.pathLength:a>s?p+=(a-s)/l.pathLength:p-=(s-a)/l.pathLength,p>1&&(p=1,v=!0),c=Konva.Path.getPointOnQuadraticBezier(p,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3])}void 0!==c&&(s=Konva.Path.getLineLength(u.x,u.y,c.x,c.y)),v&&(v=!1,l=void 0)}},g="C",y=t._getTextSize(g).width+n,_=0;_<s/y&&(v(g),void 0!==u&&void 0!==c);_++)u=c;for(var b=0;b<h.length&&(v(h[b]),void 0!==u&&void 0!==c);b++){var w=Konva.Path.getLineLength(u.x,u.y,c.x,c.y),E=0;if(this.getKerning)try{E=this.getKerning(h[b-1],h[b])*this.fontSize()}catch(t){E=0}u.x+=E,c.x+=E,this.textWidth+=E;var S=Konva.Path.getPointOnLine(E+w/2,u.x,u.y,c.x,c.y),C=Math.atan2(c.y-u.y,c.x-u.x);this.glyphInfo.push({transposeX:S.x,transposeY:S.y,text:h[b],rotation:C,p0:u,p1:c}),u=c}},getSelfRect:function(){var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,n,r=t[0],i=t[0],o=t[0],a=t[0],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),a=Math.max(a,n);var u=this.fontSize();return{x:Math.round(r)-u/2,y:Math.round(o)-u/2,width:Math.round(i-r)+u,height:Math.round(a-o)+u}}},Konva.TextPath.prototype._getContextFont=Konva.Text.prototype._getContextFont,Konva.Util.extend(Konva.TextPath,Konva.Shape),Konva.Factory.addGetterSetter(Konva.TextPath,"fontFamily","Arial"),Konva.Factory.addGetterSetter(Konva.TextPath,"fontSize",12),Konva.Factory.addGetterSetter(Konva.TextPath,"fontStyle",r),Konva.Factory.addGetterSetter(Konva.TextPath,"align","left"),Konva.Factory.addGetterSetter(Konva.TextPath,"letterSpacing",0),Konva.Factory.addGetterSetter(Konva.TextPath,"textBaseline","middle"),Konva.Factory.addGetterSetter(Konva.TextPath,"fontVariant",r),Konva.Factory.addGetter(Konva.TextPath,"text",n),Konva.Factory.addGetterSetter(Konva.TextPath,"textDecoration",null),Konva.Collection.mapMethods(Konva.TextPath)}(),function(){"use strict";Konva.RegularPolygon=function(t){this.___init(t)},Konva.RegularPolygon.prototype={_centroid:!0,___init:function(t){Konva.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,r,i=this.attrs.sides,o=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-o),e=1;e<i;e++)n=o*Math.sin(2*e*Math.PI/i),r=-1*o*Math.cos(2*e*Math.PI/i),t.lineTo(n,r);t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Konva.Node.prototype.setWidth.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setHeight:function(t){Konva.Node.prototype.setHeight.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)}},Konva.Util.extend(Konva.RegularPolygon,Konva.Shape),Konva.Factory.addGetterSetter(Konva.RegularPolygon,"radius",0),Konva.Factory.addGetterSetter(Konva.RegularPolygon,"sides",0),Konva.Collection.mapMethods(Konva.RegularPolygon)}(),function(){"use strict";Konva.Star=function(t){this.___init(t)},Konva.Star.prototype={_centroid:!0,___init:function(t){Konva.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var o=i%2===0?n:e,a=o*Math.sin(i*Math.PI/r),s=-1*o*Math.cos(i*Math.PI/r);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Konva.Node.prototype.setWidth.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setHeight:function(t){Konva.Node.prototype.setHeight.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)}},Konva.Util.extend(Konva.Star,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Star,"numPoints",5),Konva.Factory.addGetterSetter(Konva.Star,"innerRadius",0),Konva.Factory.addGetterSetter(Konva.Star,"outerRadius",0),Konva.Collection.mapMethods(Konva.Star)}(),function(){"use strict";var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],e="Change.konva",n="none",r="up",i="right",o="down",a="left",s="Label",u=t.length;Konva.Label=function(t){this.____init(t)},Konva.Label.prototype={____init:function(t){var e=this;Konva.Group.call(this,t),this.className=s,this.on("add.konva",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var r,i=this,o=function(){i._sync()};for(r=0;r<u;r++)n.on(t[r]+e,o)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,n,s,u,c,l,h=this.getText(),f=this.getTag();if(h&&f){switch(t=h.getWidth(),e=h.getHeight(),n=f.getPointerDirection(),s=f.getPointerWidth(),l=f.getPointerHeight(),u=0,c=0,n){case r:u=t/2,c=-1*l;break;case i:u=t+s,c=e/2;break;case o:u=t/2,c=e+l;break;case a:u=-1*s,c=e/2}f.setAttrs({x:-1*u,y:-1*c,width:t,height:e}),h.setAttrs({x:-1*u,y:-1*c})}}},Konva.Util.extend(Konva.Label,Konva.Group),Konva.Collection.mapMethods(Konva.Label),Konva.Tag=function(t){this.___init(t)},Konva.Tag.prototype={___init:function(t){Konva.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),n=this.getHeight(),s=this.getPointerDirection(),u=this.getPointerWidth(),c=this.getPointerHeight(),l=Math.min(this.getCornerRadius(),e/2,n/2);t.beginPath(),l?t.moveTo(l,0):t.moveTo(0,0),s===r&&(t.lineTo((e-u)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+u)/2,0)),l?(t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1)):t.lineTo(e,0),s===i&&(t.lineTo(e,(n-c)/2),t.lineTo(e+u,n/2),t.lineTo(e,(n+c)/2)),l?(t.lineTo(e,n-l),t.arc(e-l,n-l,l,0,Math.PI/2,!1)):t.lineTo(e,n),s===o&&(t.lineTo((e+u)/2,n),t.lineTo(e/2,n+c),t.lineTo((e-u)/2,n)),l?(t.lineTo(l,n),t.arc(l,n-l,l,Math.PI/2,Math.PI,!1)):t.lineTo(0,n),s===a&&(t.lineTo(0,(n+c)/2),t.lineTo(-1*u,n/2),t.lineTo(0,(n-c)/2)),l&&(t.lineTo(0,l),t.arc(l,l,l,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},getSelfRect:function(){var t=0,e=0,n=this.getPointerWidth(),s=this.getPointerHeight(),u=this.pointerDirection(),c=this.getWidth(),l=this.getHeight();return u===r?(e-=s,l+=s):u===o?l+=s:u===a?(t-=1.5*n,c+=n):u===i&&(c+=1.5*n),{x:t,y:e,width:c,height:l}}},Konva.Util.extend(Konva.Tag,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Tag,"pointerDirection",n),Konva.Factory.addGetterSetter(Konva.Tag,"pointerWidth",0),Konva.Factory.addGetterSetter(Konva.Tag,"pointerHeight",0),Konva.Factory.addGetterSetter(Konva.Tag,"cornerRadius",0),Konva.Collection.mapMethods(Konva.Tag)}(),function(t){"use strict";t.Arrow=function(t){this.____init(t)},t.Arrow.prototype={____init:function(e){t.Line.call(this,e),this.className="Arrow"},_sceneFunc:function(e){t.Line.prototype._sceneFunc.apply(this,arguments);var n=2*Math.PI,r=this.points(),i=r.length,o=r[i-2]-r[i-4],a=r[i-1]-r[i-3],s=(Math.atan2(a,o)+n)%n,u=this.pointerLength(),c=this.pointerWidth();e.save(),e.beginPath(),e.translate(r[i-2],r[i-1]),e.rotate(s),e.moveTo(0,0),e.lineTo(-u,c/2),e.lineTo(-u,-c/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(r[0],r[1]),o=r[2]-r[0],a=r[3]-r[1],e.rotate((Math.atan2(-a,-o)+n)%n),e.moveTo(0,0),e.lineTo(-u,c/2),e.lineTo(-u,-c/2),e.closePath(),e.restore()),e.fillStrokeShape(this)}},t.Util.extend(t.Arrow,t.Line),t.Factory.addGetterSetter(t.Arrow,"pointerLength",10),t.Factory.addGetterSetter(t.Arrow,"pointerWidth",10),t.Factory.addGetterSetter(t.Arrow,"pointerAtBeginning",!1),t.Collection.mapMethods(t.Arrow)}(Konva),function(t){"use strict";function e(e,n){if("rotater"===e)return"crosshair";var r;return r="top-left"===e||"bottom-right"===e?-45:"top-right"===e||"bottom-left"===e?45:"top-center"===e||"bottom-center"===e?0:"middle-left"===e||"middle-right"===e?90:0,r=(r+t.Util._radToDeg(n)+360)%360,t.Util._inRange(r,337.5,360)||t.Util._inRange(r,0,22.5)?"ns-resize":t.Util._inRange(r,22.5,67.5)?"nesw-resize":t.Util._inRange(r,67.5,112.5)?"ew-resize":t.Util._inRange(r,112.5,157.5)?"nwse-resize":t.Util._inRange(r,157.5,202.5)?"ns-resize":t.Util._inRange(r,202.5,247.5)?"nesw-resize":t.Util._inRange(r,247.5,292.5)?"ew-resize":t.Util._inRange(r,292.5,337.5)?"nwse-resize":"pointer"}function n(e){return e instanceof Array||t.Util.warn("enabledHandlers value should be an array"),e instanceof Array&&e.forEach(function(e){a.indexOf(e)===-1&&t.Util.warn("Unknown resizer name: "+e+". Available names are: "+a.join(", "))}),e||[]}var r=["resizeEnabledChange","rotateHandlerOffsetChange"].join(" "),i="nodeRect",o=["xChange.resizer","yChange.resizer","widthChange.resizer","heightChange.resizer","scaleXChange.resizer","scaleYChange.resizer","skewXChange.resizer","skewYChange.resizer","rotationChange.resizer","offsetXChange.resizer","offsetYChange.resizer","transformsEnabledChange.resizer"].join(" ");t.Transformer=function(t){this.____init(t)};var a=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],s=!1;t.Transformer.prototype={_centroid:!1,____init:function(e){t.Group.call(this,e),this.className="Transformer",this._createElements(),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(r,this.update),s||(t.Util.warn("Konva.Transformer is currently experimental and may have bugs. Please report any issues to GitHub repo."),s=!0),this.getNode()&&this.update()},attachTo:function(t){this.setNode(t)},setNode:function(t){this._node&&this.detach(),this._node=t,this._clearCache(i),t.on(o,function(){this._clearCache(i)}.bind(this)),t.on(o,this.requestUpdate.bind(this)),t.on("dragmove.resizer",this.requestUpdate.bind(this));var e=!!this.findOne(".top-left");e&&this.update()},getNode:function(){return this._node},detach:function(){this.getNode()&&this.getNode().off(".resizer")},_getNodeRect:function(){return this._getCache(i,this.__getNodeRect)},__getNodeRect:function(){var e=this.getNode();if(!e)return{x:-Number.MAX_SAFE_INTEGER,y:-Number.MAX_SAFE_INTEGER,width:0,height:0,rotation:0};var n=e.getClientRect({skipTransform:!0}),r=t.getAngle(e.rotation()),i=n.x*e.scaleX()-e.offsetX(),o=n.y*e.scaleY()-e.offsetY();return{x:e.x()+i*Math.cos(r)+o*Math.sin(-r),y:e.y()+o*Math.cos(r)+i*Math.sin(r),width:n.width*e.scaleX(),height:n.height*e.scaleY(),rotation:e.rotation()}},getX:function(){return this._getNodeRect().x},getY:function(){return this._getNodeRect().y},getRotation:function(){return this._getNodeRect().rotation},getWidth:function(){return this._getNodeRect().width},getHeight:function(){return this._getNodeRect().height},_createElements:function(){this._createBack(),a.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},_createAnchor:function(n){var r=new t.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:n,width:10,height:10,offsetX:5,offsetY:5,draggable:!0,dragDistance:0}),i=this;r.on("mousedown touchstart",function(t){i.handleResizerMouseDown(t)}),r.on("mouseenter",function(){var i=this.getLayer(),o=t.getAngle(this.getParent().rotation()),a=e(n,o);r.getStage().getContainer().style.cursor=a,this.fill("lightgrey"),i.batchDraw()}),r.on("mouseout",function(){var t=this.getLayer();t&&(r.getStage().getContainer().style.cursor="",this.fill("white"),t.batchDraw())}),this.add(r)},_createBack:function(){var e=new t.Shape({stroke:"rgb(0, 161, 255)",name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),n=e.getPadding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateHandlerOffset()),t.fillStrokeShape(this)}});this.add(e)},handleResizerMouseDown:function(t){this.movingResizer=t.target.name();var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=r/i,this.cos=n/i,window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("touchmove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("touchend",this.handleMouseUp),this._transforming=!0,this.fire("transformstart"),this.getNode().fire("transformstart")},handleMouseMove:function(e){var n,r,i,o=this.findOne("."+this.movingResizer),a=o.getStage(),s=a.getContent().getBoundingClientRect(),u={x:s.left,y:s.top},c={left:void 0!==e.clientX?e.clientX:e.touches[0].clientX,top:void 0!==e.clientX?e.clientY:e.touches[0].clientY},l={x:c.left-u.x,y:c.top-u.y};o.setAbsolutePosition(l);var h=this.keepRatio()||e.shiftKey;if("top-left"===this.movingResizer)h&&(i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-o.x(),2)+Math.pow(this.findOne(".bottom-right").y()-o.y(),2)),n=i*this.cos,r=i*this.sin,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-n),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-r));else if("top-center"===this.movingResizer)this.findOne(".top-left").y(o.y());else if("top-right"===this.movingResizer){h&&(i=Math.sqrt(Math.pow(this.findOne(".bottom-left").x()-o.x(),2)+Math.pow(this.findOne(".bottom-left").y()-o.y(),2)),n=i*this.cos,r=i*this.sin,this.findOne(".top-right").x(n),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-r));var f=o.position();this.findOne(".top-left").y(f.y),this.findOne(".bottom-right").x(f.x)}else if("middle-left"===this.movingResizer)this.findOne(".top-left").x(o.x());else if("middle-right"===this.movingResizer)this.findOne(".bottom-right").x(o.x());else if("bottom-left"===this.movingResizer)h&&(i=Math.sqrt(Math.pow(this.findOne(".top-right").x()-o.x(),2)+Math.pow(this.findOne(".top-right").y()-o.y(),2)),n=i*this.cos,r=i*this.sin,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-n),this.findOne(".bottom-left").y(r)),f=o.position(),this.findOne(".top-left").x(f.x),this.findOne(".bottom-right").y(f.y);else if("bottom-center"===this.movingResizer)this.findOne(".bottom-right").y(o.y());else if("bottom-right"===this.movingResizer)h&&(i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x(),2)+Math.pow(this.findOne(".bottom-right").y(),2)),n=i*this.cos,r=i*this.sin,this.findOne(".bottom-right").x(n),this.findOne(".bottom-right").y(r));else if("rotater"===this.movingResizer){var d=this.getPadding(),p=this._getNodeRect();n=o.x()-p.width/2,r=-o.y()+p.height/2;for(var m=Math.atan2(-r,n)+Math.PI/2,v=t.getAngle(this.rotation()),g=t.Util._radToDeg(v)+t.Util._radToDeg(m),y=t.getAngle(this.getNode().rotation()),_=t.Util._degToRad(g),b=this.rotationSnaps(),w=.1,E=0;E<b.length;E++){var S=t.getAngle(b[E]),C=Math.abs(S-t.Util._degToRad(g))%(2*Math.PI);C<w&&(g=t.Util._radToDeg(S),_=t.Util._degToRad(g))}var T=d,k=d;this._fitNodeInto(Object.assign(p,{rotation:t.angleDeg?g:t.Util._degToRad(g),x:p.x+(p.width/2+d)*(Math.cos(y)-Math.cos(_))+(p.height/2+d)*(Math.sin(-y)-Math.sin(-_))-(T*Math.cos(v)+k*Math.sin(-v)),y:p.y+(p.height/2+d)*(Math.cos(y)-Math.cos(_))+(p.width/2+d)*(Math.sin(y)-Math.sin(_))-(k*Math.cos(v)+T*Math.sin(v)),width:p.width+2*d,height:p.height+2*d}))}else console.error(new Error("Wrong position argument of selection resizer: ",this.movingResizer));if("rotater"!==this.movingResizer){var I=this.findOne(".top-left").getAbsolutePosition(this.getParent());n=I.x,r=I.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:n+this.offsetX(),y:r+this.offsetY(),width:P,height:N})}},handleMouseUp:function(){this._removeEvents()},_removeEvents:function(){this._transforming&&(this._transforming=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("touchmove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchend",this.handleMouseUp),this.fire("transformend"),this.getNode().fire("transformend"))},_fitNodeInto:function(e){this._settings=!0;var n=this.getNode();void 0!==e.rotation&&this.getNode().rotation(e.rotation);var r=n.getClientRect({skipTransform:!0}),i=this.getPadding(),o=(e.width-2*i)/r.width,a=(e.height-2*i)/r.height,s=t.getAngle(n.getRotation()),u=r.x*o-i,c=r.y*a-i;this.getNode().setAttrs({scaleX:o,scaleY:a,x:e.x-(u*Math.cos(s)+c*Math.sin(-s)),y:e.y-(c*Math.cos(s)+u*Math.sin(s))}),this._settings=!1,this.fire("transform"),this.getNode().fire("transform"),this.update(),this.getLayer().batchDraw()},requestUpdate:function(){this.timeout||(this.timeout=setTimeout(function(){this.timeout=null,this.update()}.bind(this)))},forceUpdate:function(){this._clearCache(i),this.update()},update:function(){var t=this._getNodeRect(),e=t.x,n=t.y,r=t.width,i=t.height;this.x(e),this.y(n),this.rotation(t.rotation);var o=this.enabledHandlers(),a=this.resizeEnabled(),s=this.getPadding();this.findOne(".top-left").setAttrs({x:-s,y:-s,visible:a&&o.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:r/2,y:-s,visible:a&&o.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:r+s,y:-s,visible:a&&o.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-s,y:i/2,visible:a&&o.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:r+s,y:i/2,visible:a&&o.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-s,y:i+s,visible:a&&o.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:r/2,y:i+s,visible:a&&o.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:r+s,y:i+s,visible:a&&o.indexOf("bottom-right")>=0}),this.findOne(".rotater").setAttrs({x:r/2,y:-this.rotateHandlerOffset(),visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:r,height:i,visible:this.lineEnabled()})},destroy:function(){t.Group.prototype.destroy.call(this),this.detach(),this._removeEvents()},toObject:function(){return t.Node.prototype.toObject.call(this)}},t.Util.extend(t.Transformer,t.Group),t.Factory.addGetterSetter(t.Transformer,"enabledHandlers",a,n),t.Factory.addGetterSetter(t.Transformer,"resizeEnabled",!0),t.Factory.addGetterSetter(t.Transformer,"rotateEnabled",!0),t.Factory.addGetterSetter(t.Transformer,"rotationSnaps",[]),t.Factory.addGetterSetter(t.Transformer,"rotateHandlerOffset",50),t.Factory.addGetterSetter(t.Transformer,"lineEnabled",!0),t.Factory.addGetterSetter(t.Transformer,"keepRatio",!0),t.Factory.addGetterSetter(t.Transformer,"padding",0),t.Factory.addOverloadedGetterSetter(t.Transformer,"node"),t.Collection.mapMethods(t.Transformer)}(Konva)}).call(e,function(){return this}())},/*!*********************************************!*\
  !*** ./~/react-router/lib/routerWarning.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(e.indexOf("deprecated")!==-1){if(u[e])return;u[e]=!0}e="[react-router] "+e;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.default.apply(void 0,[t,e].concat(r))}function o(){u={}}e.__esModule=!0,e.default=i,e._resetWarned=o;var a=n(/*! warning */340),s=r(a),u={}},/*!********************************!*\
  !*** ./~/invariant/browser.js ***!
  \********************************/
function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;u=new Error(e.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},/*!********************************************!*\
  !*** ./~/fbjs/lib/ExecutionEnvironment.js ***!
  \********************************************/
function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},/*!*************************************!*\
  !*** ./~/fbjs/lib/emptyFunction.js ***!
  \*************************************/
function(t,e){"use strict";function n(t){return function(){return t}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},/*!*************************************************!*\
  !*** ./~/react-dom/lib/ReactInstrumentation.js ***!
  \*************************************************/
function(t,e,n){"use strict";var r=null;t.exports={debugTool:r}},/*!*****************************************!*\
  !*** ./~/react-dom/lib/ReactUpdates.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(){P.ReactReconcileTransaction&&E?void 0:l("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=f.getPooled(),this.reconcileTransaction=P.ReactReconcileTransaction.getPooled(!0)}function o(t,e,n,i,o,a){return r(),E.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==y.length?l("124",e,y.length):void 0,y.sort(a),_++;for(var n=0;n<e;n++){var r=y[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(p.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(r,t.reconcileTransaction,_),o&&console.timeEnd(o),i)for(var u=0;u<i.length;u++)t.callbackQueue.enqueue(i[u],r.getPublicInstance())}}function u(t){return r(),E.isBatchingUpdates?(y.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=_+1))):void E.batchedUpdates(u,t)}function c(t,e){g(E.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),b.enqueue(t,e),w=!0}var l=n(/*! ./reactProdInvariant */4),h=n(/*! object-assign */5),f=n(/*! ./CallbackQueue */111),d=n(/*! ./PooledClass */22),p=n(/*! ./ReactFeatureFlags */116),m=n(/*! ./ReactReconciler */30),v=n(/*! ./Transaction */49),g=n(/*! fbjs/lib/invariant */2),y=[],_=0,b=f.getPooled(),w=!1,E=null,S={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),k()):y.length=0}},C={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},T=[S,C];h(i.prototype,v,{getTransactionWrappers:function(){return T},destructor:function(){this.dirtyComponentsLength=null,f.release(this.callbackQueue),this.callbackQueue=null,P.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return v.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),d.addPoolingTo(i);var k=function(){for(;y.length||w;){if(y.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(w){w=!1;var e=b;b=f.getPooled(),e.notifyAll(),f.release(e)}}},I={injectReconcileTransaction:function(t){t?void 0:l("126"),P.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:l("127"),"function"!=typeof t.batchedUpdates?l("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?l("129"):void 0,E=t}},P={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:k,injection:I,asap:c};t.exports=P},/*!****************************************!*\
  !*** ./~/history/~/warning/browser.js ***!
  \****************************************/
function(t,e,n){"use strict";var r=function(){};t.exports=r},/*!********************************!*\
  !*** ./src/static/Settings.js ***!
  \********************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={timeToWinOutright:15,cupsPerPerson:3,seedMode:"seeded"};e.default=n},/*!*******************************************!*\
  !*** ./~/react-dom/lib/SyntheticEvent.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(/*! object-assign */5),o=n(/*! ./PooledClass */22),a=n(/*! fbjs/lib/emptyFunction */12),s=(n(/*! fbjs/lib/warning */3),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),t.exports=r},/*!******************************************!*\
  !*** ./~/react/lib/ReactCurrentOwner.js ***!
  \******************************************/
function(t,e){"use strict";var n={current:null};t.exports=n},/*!******************************************!*\
  !*** ./~/react-router/lib/RouteUtils.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return null==t||f.default.isValidElement(t)}function o(t){return i(t)||Array.isArray(t)&&t.every(i)}function a(t,e){return l({},t,e)}function s(t){var e=t.type,n=a(e.defaultProps,t.props);if(n.children){var r=u(n.children,n);r.length&&(n.childRoutes=r),delete n.children}return n}function u(t,e){var n=[];return f.default.Children.forEach(t,function(t){if(f.default.isValidElement(t))if(t.type.createRouteFromReactElement){var r=t.type.createRouteFromReactElement(t,e);r&&n.push(r)}else n.push(s(t))}),n}function c(t){return o(t)?t=u(t):t&&!Array.isArray(t)&&(t=[t]),t}e.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.isReactChildren=o,e.createRouteFromReactElement=s,e.createRoutesFromReactChildren=u,e.createRoutes=c;var h=n(/*! react */1),f=r(h)},/*!*******************************************!*\
  !*** ./~/@firebase/app/dist/index.cjs.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(){function t(t){var e=p[t];f(e,"delete"),delete p[t]}function e(t){return t=t||s,a(p,t)||i("no-app",{name:t}),p[t]}function n(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var n=e;e={name:n}}var r=e;void 0===r.name&&(r.name=s);var o=r.name;"string"==typeof o&&o||i("bad-app-name",{name:o+""}),a(p,o)&&i("duplicate-app",{name:o});var u=new c(t,r,g);return p[o]=u,f(u,"create"),u}function u(){return Object.keys(p).map(function(t){return p[t]})}function l(t,n,r,a,s){m[t]&&i("duplicate-service",{name:t}),m[t]=n,a&&(v[t]=a,u().forEach(function(t){a("create",t)}));var l=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&i("invalid-app-argument",{name:t}),n[t]()};return void 0!==r&&o.deepExtend(l,r),g[t]=l,c.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,s?e:[])},l}function h(t){o.deepExtend(g,t)}function f(t,e){Object.keys(m).forEach(function(n){var r=d(t,n);null!==r&&v[r]&&v[r](e,t)})}function d(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}var p={},m={},v={},g={__esModule:!0,initializeApp:n,app:e,apps:null,Promise:Promise,SDK_VERSION:"5.0.4",INTERNAL:{registerService:l,createFirebaseNamespace:r,extendNamespace:h,createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:t,factories:m,useAsService:d,Promise:Promise,deepExtend:o.deepExtend}};return o.patchProperty(g,"default",g),Object.defineProperty(g,"apps",{get:u}),o.patchProperty(e,"App",c),g}function i(t,e){throw h.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! @firebase/util */55),a=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s="[DEFAULT]",u=[],c=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){u.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){u=u.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=s),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==s?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(u.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),u=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&i("app-deleted",{name:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var l={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},h=new o.ErrorFactory("app","Firebase",l),f=r();e.firebase=f,e.default=f},/*!************************************!*\
  !*** ./~/history/lib/PathUtils.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t.match(/^https?:\/\/[^\/]*/);return null==e?t:t.substring(e[0].length)}function o(t){var e=i(t),n="",r="",o=e.indexOf("#");o!==-1&&(r=e.substring(o),e=e.substring(0,o));var a=e.indexOf("?");return a!==-1&&(n=e.substring(a),e=e.substring(0,a)),""===e&&(e="/"),{pathname:e,search:n,hash:r}}e.__esModule=!0,e.extractPath=i,e.parsePath=o;var a=n(/*! warning */15);r(a)},/*!****************************************!*\
  !*** ./~/react-dom/lib/PooledClass.js ***!
  \****************************************/
[341,4],/*!*************************************************!*\
  !*** ./~/react-router/lib/InternalPropTypes.js ***!
  \*************************************************/
function(t,e,n){"use strict";function r(t,e,n){if(t[e])return new Error("<"+n+'> should not have a "'+e+'" prop')}e.__esModule=!0,e.routes=e.route=e.components=e.component=e.history=void 0,e.falsy=r;var i=n(/*! react */1),o=i.PropTypes.func,a=i.PropTypes.object,s=i.PropTypes.arrayOf,u=i.PropTypes.oneOfType,c=i.PropTypes.element,l=i.PropTypes.shape,h=i.PropTypes.string,f=(e.history=l({listen:o.isRequired,push:o.isRequired,replace:o.isRequired,go:o.isRequired,goBack:o.isRequired,goForward:o.isRequired}),e.component=u([o,h])),d=(e.components=u([f,a]),e.route=u([a,c]));e.routes=u([d,s(d)])},/*!******************************!*\
  !*** ./~/react/lib/React.js ***!
  \******************************/
function(t,e,n){"use strict";var r=n(/*! object-assign */5),i=n(/*! ./ReactBaseClasses */140),o=n(/*! ./ReactChildren */327),a=n(/*! ./ReactDOMFactories */328),s=n(/*! ./ReactElement */32),u=n(/*! ./ReactPropTypes */329),c=n(/*! ./ReactVersion */330),l=n(/*! ./createClass */331),h=n(/*! ./onlyChild */335),f=s.createElement,d=s.createFactory,p=s.cloneElement,m=r,v=function(t){return t},g={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:h},Component:i.Component,PureComponent:i.PureComponent,createElement:f,cloneElement:p,isValidElement:s.isValidElement,PropTypes:u,createClass:l,createFactory:d,createMixin:v,DOM:a,version:c,__spread:m};t.exports=g},/*!************************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/DetermineRoundNumber.js ***!
  \************************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=0;if("loserBracket"==n)for(var i=2*((0,a.default)(e)-1),o=1;o<=i;o++){var s=Number(o)%2!=0?Number(o)-1:Number(o)-2,u=(i-s)/2;if(r=Number(o)%2==0?e-Math.pow(2,u):e-1.5*Math.pow(2,u),t-e<=r)return o}else for(var c=(0,a.default)(e),o=0;o<=c;o++)if(r=e/(2*Math.pow(2,o)),t<=e-r)return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! ../baseMethods/DetermineBracketPower */57),a=r(o)},/*!**********************************!*\
  !*** ./~/history/lib/Actions.js ***!
  \**********************************/
function(t,e){"use strict";e.__esModule=!0;var n="PUSH";e.PUSH=n;var r="REPLACE";e.REPLACE=r;var i="POP";e.POP=i,e.default={PUSH:n,REPLACE:r,POP:i}},/*!****************************************!*\
  !*** ./~/react-dom/lib/DOMLazyTree.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){if(v){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)g(e,n[r],null);else null!=t.html?h(e,t.html):null!=t.text&&d(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function o(t,e){v?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){v?t.html=e:h(t.node,e)}function s(t,e){v?t.text=e:d(t.node,e)}function u(){return this.node.nodeName}function c(t){return{node:t,children:[],html:null,text:null,toString:u}}var l=n(/*! ./DOMNamespaces */66),h=n(/*! ./setInnerHTML */51),f=n(/*! ./createMicrosoftUnsafeLocalFunction */74),d=n(/*! ./setTextContent */130),p=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=f(function(t,e,n){e.node.nodeType===m||e.node.nodeType===p&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===l.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});c.insertTreeBefore=g,c.replaceChildWithTree=i,c.queueChild=o,c.queueHTML=a,c.queueText=s,t.exports=c},/*!****************************************!*\
  !*** ./~/react-dom/lib/DOMProperty.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t,e){return(t&e)===e}var i=n(/*! ./reactProdInvariant */4),o=(n(/*! fbjs/lib/invariant */2),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},c=t.DOMPropertyNames||{},l=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var f=h.toLowerCase(),d=n[h],p={attributeName:f,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(d,e.MUST_USE_PROPERTY),hasBooleanValue:r(d,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(p.hasBooleanValue+p.hasNumericValue+p.hasOverloadedBooleanValue<=1?void 0:i("50",h),u.hasOwnProperty(h)){var m=u[h];p.attributeName=m}a.hasOwnProperty(h)&&(p.attributeNamespace=a[h]),c.hasOwnProperty(h)&&(p.propertyName=c[h]),l.hasOwnProperty(h)&&(p.mutationMethod=l[h]),s.properties[h]=p}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},injection:o};t.exports=s},/*!*********************************************!*\
  !*** ./~/react-dom/lib/ReactInstanceMap.js ***!
  \*********************************************/
function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},/*!********************************************!*\
  !*** ./~/react-dom/lib/ReactReconciler.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(/*! ./ReactRef */274),o=(n(/*! ./ReactInstrumentation */13),n(/*! fbjs/lib/warning */3),{mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=o},/*!********************************************!*\
  !*** ./~/react-router/lib/PatternUtils.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(t){for(var e="",n=[],r=[],o=void 0,a=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;o=s.exec(t);)o.index!==a&&(r.push(t.slice(a,o.index)),e+=i(t.slice(a,o.index))),o[1]?(e+="([^/]+)",n.push(o[1])):"**"===o[0]?(e+="(.*)",n.push("splat")):"*"===o[0]?(e+="(.*?)",n.push("splat")):"("===o[0]?e+="(?:":")"===o[0]&&(e+=")?"),r.push(o[0]),a=s.lastIndex;return a!==t.length&&(r.push(t.slice(a,t.length)),e+=i(t.slice(a,t.length))),{pattern:t,regexpSource:e,paramNames:n,tokens:r}}function a(t){return d[t]||(d[t]=o(t)),d[t]}function s(t,e){"/"!==t.charAt(0)&&(t="/"+t);var n=a(t),r=n.regexpSource,i=n.paramNames,o=n.tokens;"/"!==t.charAt(t.length-1)&&(r+="/?"),"*"===o[o.length-1]&&(r+="$");var s=e.match(new RegExp("^"+r,"i"));if(null==s)return null;var u=s[0],c=e.substr(u.length);if(c){if("/"!==u.charAt(u.length-1))return null;c="/"+c}return{remainingPathname:c,paramNames:i,paramValues:s.slice(1).map(function(t){return t&&decodeURIComponent(t)})}}function u(t){return a(t).paramNames}function c(t,e){var n=s(t,e);if(!n)return null;var r=n.paramNames,i=n.paramValues,o={};return r.forEach(function(t,e){o[t]=i[e]}),o}function l(t,e){e=e||{};for(var n=a(t),r=n.tokens,i=0,o="",s=0,u=void 0,c=void 0,l=void 0,h=0,d=r.length;h<d;++h)u=r[h],"*"===u||"**"===u?(l=Array.isArray(e.splat)?e.splat[s++]:e.splat,null!=l||i>0?void 0:(0,f.default)(!1),null!=l&&(o+=encodeURI(l))):"("===u?i+=1:")"===u?i-=1:":"===u.charAt(0)?(c=u.substring(1),l=e[c],null!=l||i>0?void 0:(0,f.default)(!1),null!=l&&(o+=encodeURIComponent(l))):o+=u;return o.replace(/\/+/g,"/")}e.__esModule=!0,e.compilePattern=a,e.matchPattern=s,e.getParamNames=u,e.getParams=c,e.formatPattern=l;var h=n(/*! invariant */10),f=r(h),d=Object.create(null)},/*!*************************************!*\
  !*** ./~/react/lib/ReactElement.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return void 0!==t.ref}function i(t){return void 0!==t.key}var o=n(/*! object-assign */5),a=n(/*! ./ReactCurrentOwner */18),s=(n(/*! fbjs/lib/warning */3),n(/*! ./canDefineProperty */144),Object.prototype.hasOwnProperty),u=n(/*! ./ReactElementSymbol */142),c={key:!0,ref:!0,__self:!0,__source:!0},l=function(t,e,n,r,i,o,a){var s={$$typeof:u,type:t,key:e,ref:n,props:a,_owner:o};return s};l.createElement=function(t,e,n){var o,u={},h=null,f=null,d=null,p=null;if(null!=e){r(e)&&(f=e.ref),i(e)&&(h=""+e.key),d=void 0===e.__self?null:e.__self,p=void 0===e.__source?null:e.__source;for(o in e)s.call(e,o)&&!c.hasOwnProperty(o)&&(u[o]=e[o])}var m=arguments.length-2;if(1===m)u.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];u.children=v}if(t&&t.defaultProps){var y=t.defaultProps;for(o in y)void 0===u[o]&&(u[o]=y[o])}return l(t,h,f,d,p,a.current,u)},l.createFactory=function(t){var e=l.createElement.bind(null,t);return e.type=t,e},l.cloneAndReplaceKey=function(t,e){var n=l(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},l.cloneElement=function(t,e,n){var u,h=o({},t.props),f=t.key,d=t.ref,p=t._self,m=t._source,v=t._owner;if(null!=e){r(e)&&(d=e.ref,v=a.current),i(e)&&(f=""+e.key);var g;t.type&&t.type.defaultProps&&(g=t.type.defaultProps);for(u in e)s.call(e,u)&&!c.hasOwnProperty(u)&&(void 0===e[u]&&void 0!==g?h[u]=g[u]:h[u]=e[u])}var y=arguments.length-2;if(1===y)h.children=n;else if(y>1){for(var _=Array(y),b=0;b<y;b++)_[b]=arguments[b+2];h.children=_}return l(t.type,f,d,p,m,v,h)},l.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===u},t.exports=l},/*!**********************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/NgamesInRound.js ***!
  \**********************************************************************/
function(t,e){"use strict";function n(t,e,n){return"VS"==n?t=t:t/=2,e%2==0?t/(2*Math.pow(2,e/2)):t/(2*Math.pow(2,(e+1)/2))}function r(t,e,n){return"VS"==n?t=t:t/=2,t/(2*Math.pow(2,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.loserBracket=n,e.winnerBracket=r},/*!***********************************!*\
  !*** ./~/fbjs/lib/emptyObject.js ***!
  \***********************************/
function(t,e,n){"use strict";var r={};t.exports=r},/*!******************************!*\
  !*** ./~/process/browser.js ***!
  \******************************/
function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!m){var t=i(a);m=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,p=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},/*!*******************************************!*\
  !*** ./~/react-dom/lib/EventPluginHub.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}function i(t,e,n){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(e));default:return!1}}var o=n(/*! ./reactProdInvariant */4),a=n(/*! ./EventPluginRegistry */67),s=n(/*! ./EventPluginUtils */68),u=n(/*! ./ReactErrorUtils */72),c=n(/*! ./accumulateInto */123),l=n(/*! ./forEachAccumulated */124),h=(n(/*! fbjs/lib/invariant */2),{}),f=null,d=function(t,e){t&&(s.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},p=function(t){return d(t,!0)},m=function(t){return d(t,!1)},v=function(t){return"."+t._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?o("94",e,typeof n):void 0;var r=v(t),i=h[e]||(h[e]={});i[r]=n;var s=a.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=h[e];if(i(e,t._currentElement.type,t._currentElement.props))return null;var r=v(t);return n&&n[r]},deleteListener:function(t,e){var n=a.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=h[e];if(r){var i=v(t);delete r[i]}},deleteAllListeners:function(t){var e=v(t);for(var n in h)if(h.hasOwnProperty(n)&&h[n][e]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(t,n),delete h[n][e]}},extractEvents:function(t,e,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var u=o[s];if(u){var l=u.extractEvents(t,e,n,r);l&&(i=c(i,l))}}return i},enqueueEvents:function(t){t&&(f=c(f,t))},processEventQueue:function(t){var e=f;f=null,t?l(e,p):l(e,m),f?o("95"):void 0,u.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};t.exports=g},/*!*********************************************!*\
  !*** ./~/react-dom/lib/EventPropagators.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return g(t,r)}function i(t,e,n){var i=r(t,n,e);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&p.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?p.getParentInstance(e):null;p.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(t,r);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function c(t){v(t,o)}function l(t){v(t,a)}function h(t,e,n,r){p.traverseEnterLeave(n,r,s,t,e)}function f(t){v(t,u)}var d=n(/*! ./EventPluginHub */36),p=n(/*! ./EventPluginUtils */68),m=n(/*! ./accumulateInto */123),v=n(/*! ./forEachAccumulated */124),g=(n(/*! fbjs/lib/warning */3),d.getListener),y={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:h};t.exports=y},/*!*********************************************!*\
  !*** ./~/react-dom/lib/SyntheticUIEvent.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o=n(/*! ./getEventTarget */77),a={view:function(t){if(t.view)return t.view;var e=o(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},/*!*************************************!*\
  !*** ./~/react-router/lib/index.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.createMemoryHistory=e.hashHistory=e.browserHistory=e.applyRouterMiddleware=e.formatPattern=e.useRouterHistory=e.match=e.routerShape=e.locationShape=e.PropTypes=e.RoutingContext=e.RouterContext=e.createRoutes=e.useRoutes=e.RouteContext=e.Lifecycle=e.History=e.Route=e.Redirect=e.IndexRoute=e.IndexRedirect=e.withRouter=e.IndexLink=e.Link=e.Router=void 0;var i=n(/*! ./RouteUtils */19);Object.defineProperty(e,"createRoutes",{enumerable:!0,get:function(){return i.createRoutes}});var o=n(/*! ./PropTypes */82);Object.defineProperty(e,"locationShape",{enumerable:!0,get:function(){return o.locationShape}}),Object.defineProperty(e,"routerShape",{enumerable:!0,get:function(){return o.routerShape}});var a=n(/*! ./PatternUtils */31);Object.defineProperty(e,"formatPattern",{enumerable:!0,get:function(){return a.formatPattern}});var s=n(/*! ./Router */308),u=r(s),c=n(/*! ./Link */132),l=r(c),h=n(/*! ./IndexLink */302),f=r(h),d=n(/*! ./withRouter */321),p=r(d),m=n(/*! ./IndexRedirect */303),v=r(m),g=n(/*! ./IndexRoute */304),y=r(g),_=n(/*! ./Redirect */133),b=r(_),w=n(/*! ./Route */306),E=r(w),S=n(/*! ./History */301),C=r(S),T=n(/*! ./Lifecycle */305),k=r(T),I=n(/*! ./RouteContext */307),P=r(I),N=n(/*! ./useRoutes */320),O=r(N),A=n(/*! ./RouterContext */52),x=r(A),R=n(/*! ./RoutingContext */309),D=r(R),M=r(o),L=n(/*! ./match */318),F=r(L),U=n(/*! ./useRouterHistory */138),B=r(U),K=n(/*! ./applyRouterMiddleware */311),j=r(K),V=n(/*! ./browserHistory */312),W=r(V),G=n(/*! ./hashHistory */316),q=r(G),H=n(/*! ./createMemoryHistory */135),z=r(H);e.Router=u.default,e.Link=l.default,e.IndexLink=f.default,e.withRouter=p.default,e.IndexRedirect=v.default,e.IndexRoute=y.default,e.Redirect=b.default,e.Route=E.default,e.History=C.default,e.Lifecycle=k.default,e.RouteContext=P.default,e.useRoutes=O.default,e.RouterContext=x.default,e.RoutingContext=D.default,e.PropTypes=M.default,e.match=F.default,e.useRouterHistory=B.default,e.applyRouterMiddleware=j.default,e.browserHistory=W.default,e.hashHistory=q.default,e.createMemoryHistory=z.default},/*!*******************************************!*\
  !*** ./~/react/lib/reactProdInvariant.js ***!
  \*******************************************/
4,/*!**************************!*\
  !*** ./~/tslib/tslib.js ***!
  \**************************/
function(t,e,n){var r,i;(function(n){/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0
	
	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.
	
	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var o,a,s,u,c,l,h,f,d,p,m,v,g,y,_,b,w,E,S;!function(o){function a(t,e){return t!==s&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}var s="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};r=[e],i=function(t){o(a(s,a(t)))}.apply(e,r),!(void 0!==i&&(t.exports=i))}(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};o=function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},u=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=function(t,e){return function(n,r){e(n,r,t)}},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},f=function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},p=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},m=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},v=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t},g=function(t){return this instanceof g?(this.v=t,this):new g(t)},y=function(t,e,n){function r(t){l[t]&&(c[t]=function(e){return new Promise(function(n,r){h.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(l[t](e))}catch(t){u(h[0][3],t)}}function o(t){t.value instanceof g?Promise.resolve(t.value.v).then(a,s):u(h[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(t,e||[]),h=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c},_=function(t){function e(e,i){t[e]&&(n[e]=function(n){return(r=!r)?{value:g(t[e](n)),done:"return"===e}:i?i(n):n})}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n},b=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof p?p(t):t[Symbol.iterator]()},w=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},E=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},S=function(t){return t&&t.__esModule?t:{default:t}},t("__extends",o),t("__assign",a),t("__rest",s),t("__decorate",u),t("__param",c),t("__metadata",l),t("__awaiter",h),t("__generator",f),t("__exportStar",d),t("__values",p),t("__read",m),t("__spread",v),t("__await",g),t("__asyncGenerator",y),t("__asyncDelegator",_),t("__asyncValues",b),t("__makeTemplateObject",w),t("__importStar",E),t("__importDefault",S)})}).call(e,function(){return this}())},/*!*****************************************!*\
  !*** ./src/components/GameComponent.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s,u,c,l,h,f,d,p,m,v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=n(/*! react */1),_=r(y),b=n(/*! konva */8),w=(r(b),n(/*! react-konva */6)),E=n(/*! ./TileTeam */162),S=r(E),C=n(/*! ../static/Colors */44),T=r(C),k=n(/*! ./viewMethods/StabilizeView */199),I=r(k),P=n(/*! ./vsBracketMethods/baseMethods/DetermineWinChance */58),N=r(P),O=n(/*! ./vsBracketMethods/baseMethods/DetermineAvgTime */56),A=r(O),x=T.default.gameNotReadyColor,R=T.default.gameCompleteColor,D=T.default.gameAvailColor,M=T.default.gameNumberColor,L=16,F=[],U=[],B=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={hover:!1},s=n.props.gProps.vizGeo.teamHeight,u=n.props.gProps.vizGeo.teamWidth,c=n.props.gProps.gVars.gameWidth,l=n.props.gProps.gVars.gameHeight,n}return a(e,t),g(e,[{key:"componentWillReceiveProps",value:function(t){v({},t)!==v({},this.props)&&(this.gProps=t.gProps)}},{key:"randomIntFromInterval",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"BackgroundColor",value:function(t){return"COMPLETE"===t?R:"VS"==this.props.gProps.mode?this.props.gProps.playerA.seed>=1&&this.props.gProps.playerB.seed>=1?D:x:this.props.gProps.playerA.seed>=1&&this.props.gProps.playerB.seed>=1&&this.props.gProps.playerC.seed>=1&&this.props.gProps.playerD.seed>=1?D:x}},{key:"handleOnclick",value:function(t){var e={playerA:this.gProps.playerA,playerB:this.gProps.playerB,playerC:this.gProps.playerC,playerD:this.gProps.playerD,winner1:null,winner2:null,loser1:null,loser2:null,byeRound:null,newPos:null,gameNumber:this.gProps.gameNumber,bracketSpots:this.gProps.bracketSpots,bracket:this.gProps.bracket,mode:this.gProps.mode};if("VS"==this.props.gProps.mode)this.props.gProps.playerA.seed>=1&&this.props.gProps.playerB.seed>=1&&"COMPLETE"!==this.props.gProps.status&&(e.newPos=(0,I.default)(t),"BYE"==this.props.gProps.playerB.name?(e.winner1=this.props.gProps.playerA,e.loser1=this.props.gProps.playerB,e.byeRound=!0):"BYE"==this.props.gProps.playerA.name&&(e.winner1=this.props.gProps.playerB,e.loser1=this.props.gProps.playerA,e.byeRound=!0),this.props.gProps.showMatchup(e));else if(this.props.gProps.playerA.seed>=1&&this.props.gProps.playerB.seed>=1&&this.props.gProps.playerC.seed>=1&&this.props.gProps.playerD.seed>=1&&"COMPLETE"!==this.props.gProps.status){e.newPos=(0,I.default)(t);var n="BYE"==this.props.gProps.playerA.name?1:0,r="BYE"==this.props.gProps.playerB.name?1:0,i="BYE"==this.props.gProps.playerC.name?1:0,o="BYE"==this.props.gProps.playerD.name?1:0,a=n.toString()+r.toString()+i.toString()+o.toString();switch(a){case"1100":e.winner1=this.props.gProps.playerC,e.winner2=this.props.gProps.playerD,e.loser1=this.props.gProps.playerA,e.loser2=this.props.gProps.playerB,e.byeRound=!0;break;case"1010":e.winner1=this.props.gProps.playerB,e.winner2=this.props.gProps.playerD,e.loser1=this.props.gProps.playerA,e.loser2=this.props.gProps.playerC,e.byeRound=!0;break;case"1001":e.winner1=this.props.gProps.playerB,e.winner2=this.props.gProps.playerC,e.loser1=this.props.gProps.playerA,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"0110":e.winner1=this.props.gProps.playerA,e.winner2=this.props.gProps.playerD,e.loser1=this.props.gProps.playerB,e.loser2=this.props.gProps.playerC,e.byeRound=!0;break;case"0101":e.winner1=this.props.gProps.playerA,e.winner2=this.props.gProps.playerC,e.loser1=this.props.gProps.playerB,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"0011":e.winner1=this.props.gProps.playerA,e.winner2=this.props.gProps.playerB,e.loser1=this.props.gProps.playerC,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"0111":e.winner1=this.props.gProps.playerA,e.winner2=this.props.gProps.playerB,e.loser1=this.props.gProps.playerC,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"1011":e.winner1=this.props.gProps.playerB,e.winner2=this.props.gProps.playerA,e.loser1=this.props.gProps.playerC,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"1101":e.winner1=this.props.gProps.playerC,e.winner2=this.props.gProps.playerB,e.loser1=this.props.gProps.playerA,e.loser2=this.props.gProps.playerD,e.byeRound=!0;break;case"1110":e.winner1=this.props.gProps.playerD,e.winner2=this.props.gProps.playerB,e.loser1=this.props.gProps.playerC,e.loser2=this.props.gProps.playerA,e.byeRound=!0;break;case"1111":e.winner1=this.props.gProps.playerA,e.winner2=this.props.gProps.playerB,e.loser1=this.props.gProps.playerC,e.loser2=this.props.gProps.playerD,e.byeRound=!0}this.props.gProps.showMatchup(e)}}},{key:"handleOnMouseOver",value:function(){this.setState({hover:!0})}},{key:"handleOnMouseOut",value:function(){this.setState({hover:!1})}},{key:"render",value:function(){var t=[],e=[],n=[];if(F=[],F.push(this.props.gProps.playerA),F.push(this.props.gProps.playerB),h=(0,A.default)(this.props.gProps.playerA.timeTrial,this.props.gProps.playerA.totalTime,this.props.gProps.playerA.wins,this.props.gProps.playerA.losses,this.props.gProps.playerA.nLastPlace),f=(0,A.default)(this.props.gProps.playerB.timeTrial,this.props.gProps.playerB.totalTime,this.props.gProps.playerB.wins,this.props.gProps.playerB.losses,this.props.gProps.playerB.nLastPlace),"VS"!==this.props.gProps.mode&&(d=(0,A.default)(this.props.gProps.playerC.timeTrial,this.props.gProps.playerC.totalTime,this.props.gProps.playerC.wins,this.props.gProps.playerC.losses,this.props.gProps.playerC.nLastPlace),p=(0,A.default)(this.props.gProps.playerD.timeTrial,this.props.gProps.playerD.totalTime,this.props.gProps.playerD.wins,this.props.gProps.playerD.losses,this.props.gProps.playerD.nLastPlace),F.push(this.props.gProps.playerC),F.push(this.props.gProps.playerD)),U=[h,f,d,p],e=[this.props.gProps.playerAtime,this.props.gProps.playerBtime],n=[this.props.gProps.playerAtime,this.props.gProps.playerBtime,this.props.gProps.playerCtime,this.props.gProps.playerDtime],m="VS"==this.props.gProps.mode?2:4,"VS"==this.props.gProps.mode)for(var r=0;r<m;r++)t.push(_.default.createElement(S.default,{seed:F[r].seed,country:F[r].country.name,name:F[r].name,time:U[r],img:F[r].country.flagPathSVG,height:s,width:u,globalX:1.5*s,globalY:(1.5*(r+1)-1)*s,hover:this.state.hover,losses:F[r].losses,winChance:(0,N.default)(F,U,r,this.props.gProps.mode,this.props.gProps.gameNumber==this.props.gProps.bracketSpots/2),loser:this.props.gProps.loser,loserEliminated:this.props.gProps.loserEliminated,mode:this.props.gProps.mode,finishTime:e[r],status:this.props.gProps.status}));else for(var r=0;r<m;r++)t.push(_.default.createElement(S.default,{seed:F[r].seed,country:F[r].country.name,name:F[r].name,time:U[r],img:F[r].country.flagPathSVG,height:s,width:u,globalX:1.5*s,globalY:(1.5*(r+1)-1)*s,hover:this.state.hover,losses:F[r].losses,winChance:(0,N.default)(F,U,r,this.props.gProps.mode,this.props.gProps.gameNumber==this.props.gProps.bracketSpots/2),winner1:this.props.gProps.winner1,winner2:this.props.gProps.winner2,loser1:this.props.gProps.loser1,loser2:this.props.gProps.loser2,loserEliminated1:this.props.gProps.loserEliminated1,loserEliminated2:this.props.gProps.loserEliminated2,mode:this.props.gProps.mode,finishTime:n[r],status:this.props.gProps.status}));return _.default.createElement(w.Group,{x:this.props.gProps.x,y:this.props.gProps.y,width:c,height:l,onClick:this.handleOnclick.bind(this),onTap:this.handleOnclick.bind(this),onmouseover:this.handleOnMouseOver.bind(this),onmouseout:this.handleOnMouseOut.bind(this),draggable:!1},_.default.createElement(w.Rect,{x:0,y:0,width:c,height:l,fill:this.BackgroundColor(this.props.gProps.status),stroke:"black",strokeWidth:2}),_.default.createElement(w.Rect,{x:0,y:0,width:s,height:l,fill:M,stroke:"black",strokeWidth:2}),_.default.createElement(w.Text,{text:this.props.gProps.gameNumber,x:s/2-9,y:(l-L)/2,fontSize:L,fontStyle:"bold",shadowBlur:2,fill:"white",width:18,align:"center"}),t)}}]),e}(_.default.Component);e.default=B},/*!***************************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/GameComponentProps.js ***!
  \***************************************************************************/
function(t,e){"use strict";function n(t,e,n,r,i,o,a,s){return"VS"==s?{playerA:n[e].playerA,playerB:n[e].playerB,gameNumber:n[e].gameNumber,bracket:n[e].bracket,bracketSpots:r,vizGeo:i,x:o,y:a,status:n[e].status,winner:n[e].winner,loser:n[e].loser,loserEliminated:n[e].loserEliminated,showMatchup:t.showMatchup,gVars:t,mode:s,playerAtime:n[e].playerAtime,playerBtime:n[e].playerBtime}:{playerA:n[e].playerA,playerB:n[e].playerB,playerC:n[e].playerC,playerD:n[e].playerD,gameNumber:n[e].gameNumber,bracket:n[e].bracket,bracketSpots:r,vizGeo:i,x:o,y:a,status:n[e].status,winner1:n[e].winner1,winner2:n[e].winner2,loser1:n[e].loser1,loser2:n[e].loser2,loserEliminated1:n[e].loserEliminated1,loserEliminated2:n[e].loserEliminated2,showMatchup:t.showMatchup,gVars:t,mode:s,playerAtime:n[e].playerAtime,playerBtime:n[e].playerBtime,playerCtime:n[e].playerCtime,playerDtime:n[e].playerDtime}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!******************************!*\
  !*** ./src/static/Colors.js ***!
  \******************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={tileColor:"#eef3f5",byeColor:"#CCCCCC",hoverColor:"#FCBFB8",seedColor:"#4A0D53",timeColor:"#7B767A",eliminatedColor:"#96312D",gameNotReadyColor:"#A39094",gameCompleteColor:"#E5CAE7",gameAvailColor:"#E6D9A4",gameNumberColor:"#323232",matchupBorder:"#666666",smokeGray:"#E5E5E5",gold:"#ffd700",silver:"#c0c0c0",bronze:"#cd7f32",pebbleGray:"#646D6A",deSatOrng:"#e8ba50",paleAmber:"#F6E3B8"};e.default=n},/*!***********************************************!*\
  !*** ./~/history/lib/ExecutionEnvironment.js ***!
  \***********************************************/
function(t,e){"use strict";e.__esModule=!0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.canUseDOM=n},/*!*************************************!*\
  !*** ./~/history/lib/useQueries.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return u.stringify(t).replace(/%20/g,"+")}function o(t){return function(){function e(t){if(null==t.query){var e=t.search;t.query=E(e.substring(1)),t[p]={search:e,searchBase:""}}return t}function n(t,e){var n,r=t[p],i=e?w(e):"";if(!r&&!i)return t;"string"==typeof t&&(t=h.parsePath(t));var o=void 0;o=r&&t.search===r.search?r.searchBase:t.search||"";var s=o;return i&&(s+=(s?"&":"?")+i),a({},t,(n={search:s},n[p]={search:s,searchBase:o},n))}function r(t){return b.listenBefore(function(n,r){l.default(t,e(n),r)})}function o(t){return b.listen(function(n){t(e(n))})}function s(t){b.push(n(t,t.query))}function u(t){b.replace(n(t,t.query))}function c(t,e){return b.createPath(n(t,e||t.query))}function f(t,e){return b.createHref(n(t,e||t.query))}function v(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=b.createLocation.apply(b,[n(t,t.query)].concat(i));return t.query&&(a.query=t.query),e(a)}function g(t,e,n){"string"==typeof e&&(e=h.parsePath(e)),s(a({state:t},e,{query:n}))}function y(t,e,n){"string"==typeof e&&(e=h.parsePath(e)),u(a({state:t},e,{query:n}))}var _=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=t(_),w=_.stringifyQuery,E=_.parseQueryString;return"function"!=typeof w&&(w=i),"function"!=typeof E&&(E=m),a({},b,{listenBefore:r,listen:o,push:s,replace:u,createPath:c,createHref:f,createLocation:v,pushState:d.default(g,"pushState is deprecated; use push instead"),replaceState:d.default(y,"replaceState is deprecated; use replace instead")})}}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(/*! warning */15),u=(r(s),n(/*! query-string */237)),c=n(/*! ./runTransitionHook */63),l=r(c),h=n(/*! ./PathUtils */21),f=n(/*! ./deprecate */62),d=r(f),p="$searchBase",m=u.parse;e.default=o,t.exports=e.default},/*!*****************************************************!*\
  !*** ./~/react-dom/lib/ReactBrowserEventEmitter.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=d++,h[t[m]]={}),h[t[m]]}var i,o=n(/*! object-assign */5),a=n(/*! ./EventPluginRegistry */67),s=n(/*! ./ReactEventEmitterMixin */267),u=n(/*! ./ViewportMetrics */122),c=n(/*! ./getVendorPrefixedEventName */298),l=n(/*! ./isEventSupported */78),h={},f=!1,d=0,p={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=r(n),o=a.registrationNameDependencies[t],s=0;s<o.length;s++){var u=o[s];i.hasOwnProperty(u)&&i[u]||("topWheel"===u?l("wheel")?v.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?v.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):v.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?l("scroll",!0)?v.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):v.ReactEventListener.trapBubbledEvent("topScroll","scroll",v.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(l("focus",!0)?(v.ReactEventListener.trapCapturedEvent("topFocus","focus",n),v.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(v.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),v.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):p.hasOwnProperty(u)&&v.ReactEventListener.trapBubbledEvent(u,p[u],n),i[u]=!0)}},trapBubbledEvent:function(t,e,n){return v.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return v.ReactEventListener.trapCapturedEvent(t,e,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var t=document.createEvent("MouseEvent");return null!=t&&"pageX"in t},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=v.supportsEventPageXY()),!i&&!f){var t=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),f=!0}}});t.exports=v},/*!************************************************!*\
  !*** ./~/react-dom/lib/SyntheticMouseEvent.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticUIEvent */38),o=n(/*! ./ViewportMetrics */122),a=n(/*! ./getEventModifierState */76),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},/*!****************************************!*\
  !*** ./~/react-dom/lib/Transaction.js ***!
  \****************************************/
function(t,e,n){"use strict";var r=n(/*! ./reactProdInvariant */4),i=(n(/*! fbjs/lib/invariant */2),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,i,o,a,s,u){this.isInTransaction()?r("27"):void 0;var c,l;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=t.call(e,n,i,o,a,s,u),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(t){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(t){}}}},closeAll:function(t){this.isInTransaction()?void 0:r("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,a=e[n],s=this.wrapperInitData[n];try{o=!0,s!==i&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(t){}}}this.wrapperInitData.length=0}};t.exports=o},/*!********************************************************!*\
  !*** ./~/react-dom/lib/escapeTextContentForBrowser.js ***!
  \********************************************************/
function(t,e){"use strict";function n(t){var e=""+t,n=i.exec(e);if(!n)return e;var r,o="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=e.substring(s,a)),s=a+1,o+=r}return s!==a?o+e.substring(s,a):o}function r(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var i=/["'&<>]/;t.exports=r},/*!*****************************************!*\
  !*** ./~/react-dom/lib/setInnerHTML.js ***!
  \*****************************************/
function(t,e,n){"use strict";var r,i=n(/*! fbjs/lib/ExecutionEnvironment */11),o=n(/*! ./DOMNamespaces */66),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(/*! ./createMicrosoftUnsafeLocalFunction */74),c=u(function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild;n.firstChild;)t.appendChild(n.firstChild)}});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(c=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),l=null}t.exports=c},/*!*********************************************!*\
  !*** ./~/react-router/lib/RouterContext.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(/*! invariant */10),s=r(a),u=n(/*! react */1),c=r(u),l=n(/*! ./deprecateObjectProperties */53),h=(r(l),n(/*! ./getRouteParams */315)),f=r(h),d=n(/*! ./RouteUtils */19),p=n(/*! ./routerWarning */9),m=(r(p),c.default.PropTypes),v=m.array,g=m.func,y=m.object,_=c.default.createClass({displayName:"RouterContext",propTypes:{history:y,router:y.isRequired,location:y.isRequired,routes:v.isRequired,params:y.isRequired,components:v.isRequired,createElement:g.isRequired},getDefaultProps:function(){return{createElement:c.default.createElement}},childContextTypes:{history:y,location:y.isRequired,router:y.isRequired},getChildContext:function(){var t=this.props,e=t.router,n=t.history,r=t.location;return e||(e=o({},n,{setRouteLeaveHook:n.listenBeforeLeavingRoute}),delete e.listenBeforeLeavingRoute),{history:n,location:r,router:e}},createElement:function(t,e){return null==t?null:this.props.createElement(t,e)},render:function(){var t=this,e=this.props,n=e.history,r=e.location,a=e.routes,u=e.params,l=e.components,h=null;return l&&(h=l.reduceRight(function(e,s,c){if(null==s)return e;var l=a[c],h=(0,f.default)(l,u),p={history:n,location:r,params:u,route:l,routeParams:h,routes:a};if((0,d.isReactChildren)(e))p.children=e;else if(e)for(var m in e)Object.prototype.hasOwnProperty.call(e,m)&&(p[m]=e[m]);if("object"===("undefined"==typeof s?"undefined":i(s))){var v={};for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(v[g]=t.createElement(s[g],o({key:g},p)));return v}return t.createElement(s,p)},h)),null===h||h===!1||c.default.isValidElement(h)?void 0:(0,s.default)(!1),h}});e.default=_,t.exports=e.default},/*!*********************************************************!*\
  !*** ./~/react-router/lib/deprecateObjectProperties.js ***!
  \*********************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.canUseMembrane=void 0;var i=n(/*! ./routerWarning */9),o=(r(i),e.canUseMembrane=!1,function(t){return t});e.default=o},/*!***************************************!*\
  !*** ./~/react-skylight/lib/index.js ***!
  \***************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./skylight */322);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(i).default}});var o=n(/*! ./skylightstateless */139);Object.defineProperty(e,"SkyLightStateless",{enumerable:!0,get:function(){return r(o).default}})},/*!********************************************!*\
  !*** ./~/@firebase/util/dist/index.cjs.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return i(void 0,t)}function i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=i(t[r],e[r]));return t}function o(t,e,n){t[e]=n}function a(t){var e=x;return x=t,e}function s(t){return JSON.parse(t)}function u(t){return JSON.stringify(t)}function c(t,e){var n=new it(t,e);return n.subscribe.bind(n)}function l(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function h(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function f(){}function d(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function p(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(d(t,e,r)+"must be a valid firebase namespace.")}function m(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(d(t,e,r)+"must be a valid function.")}function v(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(d(t,e,r)+"must be a valid context object.")}Object.defineProperty(e,"__esModule",{value:!0});var g=n(/*! tslib */41),y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},_=function(t,e){if(!t)throw b(e)},b=function(t){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},w=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},E=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{var o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var l=i<t.length,h=l?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!=c){var d=s<<4&240|c>>2;if(r.push(d),64!=h){var p=c<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},C=function(t){var e=w(t);return S.encodeByteArray(e,!0)},T=function(t){try{return S.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},k=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),I=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},P=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())},N=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},O=function(){return y.NODE_CLIENT===!0||y.NODE_ADMIN===!0},A="FirebaseError",x=Error.captureStackTrace,R=function(){function t(t,e){if(this.code=t,this.message=e,x)x(this,D.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=A,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R.prototype.name=A;var D=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new R(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=s(T(o[0])||""),n=s(T(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e,n,r=M(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},F=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},U=function(t){var e=M(t),n=e.claims;return!!e.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},B=function(t){var e=M(t).claims;return"object"==typeof e&&e.admin===!0},K=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},j=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},V=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},W=function(t,e){return V(e,function(e,n){t[e]=n}),t},G=function(t){return W({},t)},q=function(t){return"object"==typeof t&&null!==t},H=function(t){for(var e in t)return!1;return!0},z=function(t){var e=0;for(var n in t)e++;return e},Q=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},Y=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},X=function(t,e,n){var r=Y(t,e,n);return r&&t[r]},J=function(t){for(var e in t)return e},$=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},Z=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},tt=function(t){var e=[];return V(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},et=function(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},nt=function(){function t(){this.blockSize=-1}return t}(),rt=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return g.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(nt),it=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=h(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=f),void 0===r.error&&(r.error=f),void 0===r.complete&&(r.complete=f);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),ot=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},at=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,_(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},st=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};e.assert=_,e.assertionError=b,e.base64=S,e.base64Decode=T,e.base64Encode=C,e.CONSTANTS=y,e.deepCopy=r,e.deepExtend=i,e.patchProperty=o,e.Deferred=k,e.getUA=I,e.isMobileCordova=P,e.isNodeSdk=O,e.isReactNative=N,e.ErrorFactory=D,e.FirebaseError=R,e.patchCapture=a,e.jsonEval=s,e.stringify=u,e.decode=M,e.isAdmin=B,e.issuedAtTime=F,e.isValidFormat=U,e.isValidTimestamp=L,e.clone=G,e.contains=K,e.every=Z,e.extend=W,e.findKey=Y,e.findValue=X,e.forEach=V,e.getAnyKey=J,e.getCount=z,e.getValues=$,e.isEmpty=H,e.isNonNullObject=q,e.map=Q,e.safeGet=j,e.querystring=tt,e.querystringDecode=et,e.Sha1=rt,e.async=l,e.createSubscribe=c,e.errorPrefix=d,e.validateArgCount=ot,e.validateCallback=m,e.validateContextObject=v,e.validateNamespace=p,e.stringLength=st,e.stringToByteArray=at},/*!*************************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/DetermineAvgTime.js ***!
  \*************************************************************************/
function(t,e){"use strict";function n(t,e,n,r,i){return 0==n&&0==r?t:Math.round(100*(e+("-"==t?0:t))/(("-"==t?0:1)+n+r-i))/100}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!******************************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/DetermineBracketPower.js ***!
  \******************************************************************************/
function(t,e){"use strict";function n(t){for(var e=0,n=0;n<t;n++)if(Number(t)<=Math.pow(2,n))return e=n;return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!***************************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/DetermineWinChance.js ***!
  \***************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){var o=t[n].name,s=e[n];if("VS"==r){var u=null,c=null;return t[0].name===o?(u=t[1].name,c=e[1]):(u=t[0].name,c=e[0]),"BYE"==o?0:"BYE"==u?100:Math.min(99,Math.max(1,Math.round(100-50*(a.default.timeToWinOutright-(c-s))/a.default.timeToWinOutright)))}var l=0,h=0;if("BYE"==o)return 0;for(var f=0;f<4;f++)t[f].name!==o&&"BYE"!==t[f].name&&(l+=e[f],h+=1);var d=l/h,p=1==i?75:50,m=Math.min(99,Math.max(1,Math.round(100-p*(a.default.timeToWinOutright-(d-s))/a.default.timeToWinOutright)));return isNaN(m)?"-":m}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! ../../../static/Settings */16),a=r(o)},/*!*******************************!*\
  !*** ./src/data/countries.js ***!
  \*******************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{AF:{name:"Afghanistan",iso2:"AF",code:"93"},AL:{name:"Albania",iso2:"AL",code:"355"},DZ:{name:"Algeria",iso2:"DZ",code:"213"},AS:{name:"American Samoa",iso2:"AS",code:"1 684"},AD:{name:"Andorra",iso2:"AD",code:"376"},AO:{name:"Angola",iso2:"AO",code:"244"},AI:{name:"Anguilla",iso2:"AI",code:"1 264"},AG:{name:"Antigua And Barbuda",iso2:"AG",code:"1 268"},AR:{name:"Argentina",iso2:"AR",code:"54"},AM:{name:"Armenia",iso2:"AM",code:"374"},AW:{name:"Aruba",iso2:"AW",code:"297"},AU:{name:"Australia",iso2:"AU",code:"61"},AT:{name:"Austria",iso2:"AT",code:"43"},AZ:{name:"Azerbaijan",iso2:"AZ",code:"994"},BS:{name:"Bahamas",iso2:"BS",code:"1 242"},BH:{name:"Bahrain",iso2:"BH",code:"973"},BD:{name:"Bangladesh",iso2:"BD",code:"880"},BB:{name:"Barbados",iso2:"BB",code:"1 246"},BY:{name:"Belarus",iso2:"BY",code:"375"},BE:{name:"Belgium",iso2:"BE",code:"32"},BZ:{name:"Belize",iso2:"BZ",code:"501"},BJ:{name:"Benin",iso2:"BJ",code:"229"},BM:{name:"Bermuda",iso2:"BM",code:"1 441"},BT:{name:"Bhutan",iso2:"BT",code:"975"},BO:{name:"Bolivia",iso2:"BO",code:"591"},BQ:{name:"Bonaire",iso2:"BQ",code:"599"},BA:{name:"Bosnia & Herzegovina",iso2:"BA",code:"387"},BW:{name:"Botswana",iso2:"BW",code:"267"},BR:{name:"Brazil",iso2:"BR",code:"55"},IO:{name:"British Indian Ocean Territory",iso2:"IO",code:"246"},BN:{name:"Brunei Darussalam",iso2:"BN",code:"673"},BG:{name:"Bulgaria",iso2:"BG",code:"359"},BF:{name:"Burkina Faso",iso2:"BF",code:"226"},BI:{name:"Burundi",iso2:"BI",code:"257"},KH:{name:"Cambodia",iso2:"KH",code:"855"},CM:{name:"Cameroon",iso2:"CM",code:"237"},CA:{name:"Canada",iso2:"CA",code:"1"},CT:{name:"Scotland",iso2:"CT",code:"1"},IC:{name:"Canary Islands",iso2:"IC",code:""},CV:{name:"Cape Verde",iso2:"CV",code:"238"},KY:{name:"Cayman Islands",iso2:"KY",code:"1 345"},CF:{name:"Central African Republic",iso2:"CF",code:"236"},EA:{name:"Ceuta",iso2:"EA",code:""},TD:{name:"Chad",iso2:"TD",code:"235"},CL:{name:"Chile",iso2:"CL",code:"56"},CN:{name:"China",iso2:"CN",code:"86"},CX:{name:"Christmas Island",iso2:"CX",code:"61"},CC:{name:"Cocos Islands",iso2:"CC",code:"61"},CO:{name:"Colombia",iso2:"CO",code:"57"},KM:{name:"Comoros",iso2:"KM",code:"269"},CK:{name:"Cook Islands",iso2:"CK",code:"682"},CR:{name:"Costa Rica",iso2:"CR",code:"506"},CI:{name:"Cote d'Ivoire",iso2:"CI",code:"225"},HR:{name:"Croatia",iso2:"HR",code:"385"},CU:{name:"Cuba",iso2:"CU",code:"53"},CW:{name:"Curacao",iso2:"CW",code:"599"},CZ:{name:"Czech Republic",iso2:"CZ",code:"420"},CD:{name:"Democratic Republic Of Congo",iso2:"CD",code:"243"},DK:{name:"Denmark",iso2:"DK",code:"45"},DJ:{name:"Djibouti",iso2:"DJ",code:"253"},DM:{name:"Dominica",iso2:"DM",code:"1 767"},DO:{name:"Dominican Republic",iso2:"DO",code:"1 809"},TL:{name:"East Timor",iso2:"TL",code:"670"},EC:{name:"Ecuador",iso2:"EC",code:"593"},EG:{name:"Egypt",iso2:"EG",code:"20"},SV:{name:"El Salvador",iso2:"SV",code:"503"},GQ:{name:"Equatorial Guinea",iso2:"GQ",code:"240"},ER:{name:"Eritrea",iso2:"ER",code:"291"},EE:{name:"Estonia",iso2:"EE",code:"372"},ET:{name:"Ethiopia",iso2:"ET",code:"251"},EU:{name:"European Union",iso2:"EU",code:"388"},FK:{name:"Falkland Islands",iso2:"FK",code:"500"},FJ:{name:"Fiji",iso2:"FJ",code:"679"},FI:{name:"Finland",iso2:"FI",code:"358"},FR:{name:"France",iso2:"FR",code:"33"},EN:{name:"England",iso2:"EN",code:""},PF:{name:"French Polynesia",iso2:"PF",code:"689"},GA:{name:"Gabon",iso2:"GA",code:"44"},GM:{name:"Gambia",iso2:"GM",code:"220"},GE:{name:"Georgia",iso2:"GE",code:"594"},DE:{name:"Germany",iso2:"DE",code:"49"},GH:{name:"Ghana",iso2:"GH",code:"233"},GI:{name:"Gibraltar",iso2:"GI",code:"350"},GR:{name:"Greece",iso2:"GR",code:"30"},GL:{name:"Greenland",iso2:"GL",code:"299"},GD:{name:"Grenada",iso2:"GD",code:"995"},GU:{name:"Guam",iso2:"GU",code:"1 671"},GT:{name:"Guatemala",iso2:"GT",code:"502"},GG:{name:"Guernsey",iso2:"GG",code:""},GN:{name:"Guinea",iso2:"GN",code:"224"},GW:{name:"Guinea-Bissau",iso2:"GW",code:"245"},HT:{name:"Haiti",iso2:"HT",code:"509"},HN:{name:"Honduras",iso2:"HN",code:"504"},HK:{name:"Hong Kong",iso2:"HK",code:"852"},HU:{name:"Hungary",iso2:"HU",code:"36"},IS:{name:"Iceland",iso2:"IS",code:"354"},IN:{name:"India",iso2:"IN",code:"91"},ID:{name:"Indonesia",iso2:"ID",code:"62"},IR:{name:"Iran",iso2:"IR",code:"98"},IQ:{name:"Iraq",iso2:"IQ",code:"964"},IE:{name:"Ireland",iso2:"IE",code:"353"},IM:{name:"Isle Of Man",iso2:"IM",code:"44"},IL:{name:"Israel",iso2:"IL",code:"972"},IT:{name:"Italy",iso2:"IT",code:"39"},JM:{name:"Jamaica",iso2:"JM",code:"1 876"},JP:{name:"Japan",iso2:"JP",code:"81"},JE:{name:"Jersey",iso2:"JE",code:"44"},JO:{name:"Jordan",iso2:"JO",code:"962"},KZ:{name:"Kazakhstan",iso2:"KZ",code:"7"},KE:{name:"Kenya",iso2:"KE",code:"254"},KI:{name:"Kiribati",iso2:"KI",code:"686"},KP:{name:"South Korea",iso2:"KP",code:"850"},KR:{name:"North Korea",iso2:"KR",code:"82"},KW:{name:"Kuwait",iso2:"KW",code:"965"},KG:{name:"Kyrgyzstan",iso2:"KG",code:"996"},LA:{name:"Laos",iso2:"LA",code:"856"},LV:{name:"Latvia",iso2:"LV",code:"371"},LB:{name:"Lebanon",iso2:"LB",code:"961"},LS:{name:"Lesotho",iso2:"LS",code:"266"},LR:{name:"Liberia",iso2:"LR",code:"231"},LY:{name:"Libya",iso2:"LY",code:"218"},LI:{name:"Liechtenstein",iso2:"LI",code:"423"},LT:{name:"Lithuania",iso2:"LT",code:"370"},LU:{name:"Luxembourg",iso2:"LU",code:"352"},MO:{name:"Macao",iso2:"MO",code:"853"},MK:{name:"Macedonia",iso2:"MK",code:"389"},MG:{name:"Madagascar",iso2:"MG",code:"261"},MW:{name:"Malawi",iso2:"MW",code:"265"},MY:{name:"Malaysia",iso2:"MY",code:"60"},MV:{name:"Maldives",iso2:"MV",code:"960"},ML:{name:"Mali",iso2:"ML",code:"223"},MT:{name:"Malta",iso2:"MT",code:"356"},MH:{name:"Marshall Islands",iso2:"MH",code:"692"},MQ:{name:"Martinique",iso2:"MQ",code:"596"},MR:{name:"Mauritania",iso2:"MR",code:"222"},MU:{name:"Mauritius",iso2:"MU",code:"230"},MX:{name:"Mexico",iso2:"MX",code:"52"},FM:{name:"Micronesia",iso2:"FM",code:"691"},MD:{name:"Moldova",iso2:"MD",code:"373"},MC:{name:"Monaco",iso2:"MC",code:"377"},MN:{name:"Mongolia",iso2:"MN",code:"976"},ME:{name:"Montenegro",iso2:"ME",code:"382"},MS:{name:"Montserrat",iso2:"MS",code:"1 664"},MA:{name:"Morocco",iso2:"MA",code:"212"},MZ:{name:"Mozambique",iso2:"MZ",code:"258"},MM:{name:"Myanmar",iso2:"MM",code:"95"},NA:{name:"Namibia",iso2:"NA",code:"264"},NR:{name:"Nauru",iso2:"NR",code:"674"},NP:{name:"Nepal",iso2:"NP",code:"977"},NL:{name:"Netherlands",iso2:"NL",code:"31"},NZ:{name:"New Zealand",iso2:"NZ",code:"64"},NI:{name:"Nicaragua",iso2:"NI",code:"505"},NE:{name:"Niger",iso2:"NE",code:"227"},NG:{name:"Nigeria",iso2:"NG",code:"234"},NU:{name:"Niue",iso2:"NU",code:"683"},NF:{name:"Norfolk Island",iso2:"NF",code:"672"},MP:{name:"Northern Mariana Islands",iso2:"MP",code:"1 670"},NO:{name:"Norway",iso2:"NO",code:"47"},OM:{name:"Oman",iso2:"OM",code:"968"},PK:{name:"Pakistan",iso2:"PK",code:"92"},PW:{name:"Palau",iso2:"PW",code:"680"},PS:{name:"Palestine",iso2:"PS",code:"970"},PA:{name:"Panama",iso2:"PA",code:"507"},PG:{name:"Papua New Guinea",iso2:"PG",code:"675"},PY:{name:"Paraguay",iso2:"PY",code:"595"},PE:{name:"Peru",iso2:"PE",code:"51"},PH:{name:"Philippines",iso2:"PH",code:"63"},PN:{name:"Pitcairn",iso2:"PN",code:""},PL:{name:"Poland",iso2:"PL",code:"48"},PT:{name:"Portugal",iso2:"PT",code:"351"},PR:{name:"Puerto Rico",iso2:"PR",code:"1 787"},QA:{name:"Qatar",iso2:"QA",code:"974"},CG:{name:"Republic Of Congo",iso2:"CG",code:"242"},RO:{name:"Romania",iso2:"RO",code:"40"},RU:{name:"Russia",iso2:"RU",code:"7"},RW:{name:"Rwanda",iso2:"RW",code:"250"},KN:{name:"Saint Kitts And Nevis",iso2:"KN",code:"1 869"},LC:{name:"Saint Lucia",iso2:"LC",code:"1 758"},VC:{name:"Saint Vincent And The Grenadines",iso2:"VC",code:"1 784"},WS:{name:"Samoa",iso2:"WS",code:"685"},SM:{name:"San Marino",iso2:"SM",code:"378"},ST:{name:"Sao Tome And Principe",iso2:"ST",code:"239"},SA:{name:"Saudi Arabia",iso2:"SA",code:"966"},SN:{name:"Senegal",iso2:"SN",code:"221"},RS:{name:"Serbia",iso2:"RS",code:"381"},SC:{name:"Seychelles",iso2:"SC",code:"248"},SL:{name:"Sierra Leone",iso2:"SL",code:"232"},SG:{name:"Singapore",iso2:"SG",code:"65"},SX:{name:"Sint Maarten",iso2:"SX",code:"1 721"},SK:{name:"Slovakia",iso2:"SK",code:"421"},SI:{name:"Slovenia",iso2:"SI",code:"386"},SB:{name:"Solomon Islands",iso2:"SB",code:"677"},SO:{name:"Somalia",iso2:"SO",code:"252"},ZA:{name:"South Africa",iso2:"ZA",code:"27"},ES:{name:"Spain",iso2:"ES",code:"34"},LK:{name:"Sri Lanka",iso2:"LK",code:"94"},SD:{name:"Sudan",iso2:"SD",code:"249"},SR:{name:"Suriname",iso2:"SR",code:"597"},SZ:{name:"Swaziland",iso2:"SZ",code:"268"},SE:{name:"Sweden",iso2:"SE",code:"46"},CH:{name:"Switzerland",iso2:"CH",code:"41"},SY:{name:"Syria",iso2:"SY",code:"963"},TW:{name:"Taiwan",iso2:"TW",code:"886"},TJ:{name:"Tajikistan",iso2:"TJ",code:"992"},TZ:{name:"Tanzania, United Republic Of",iso2:"TZ",code:"255"},TH:{name:"Thailand",iso2:"TH",code:"66"},TG:{name:"Togo",iso2:"TG",code:"228"},TK:{name:"Tokelau",iso2:"TK",code:"690"},TO:{name:"Tonga",iso2:"TO",code:"676"},TT:{name:"Trinidad And Tobago",iso2:"TT",code:"1 868"},TN:{name:"Tunisia",iso2:"TN",code:"216"},TR:{name:"Turkey",iso2:"TR",code:"90"},TM:{name:"Turkmenistan",iso2:"TM",code:"993"},TC:{name:"Turks And Caicos Islands",iso2:"TC",code:"1 649"},TV:{name:"Tuvalu",iso2:"TV",code:"688"},UG:{name:"Uganda",iso2:"UG",code:"256"},UA:{name:"Ukraine",iso2:"UA",code:"380"},AE:{name:"United Arab Emirates",iso2:"AE",code:"971"},UK:{name:"United Kingdom",iso2:"UK",code:""},US:{name:"United States",iso2:"US",code:"1"},UN:{name:"United Nations",iso2:"UN",code:""},UY:{name:"Uruguay",iso2:"UY",code:"598"},UZ:{name:"Uzbekistan",iso2:"UZ",code:"998"},VU:{name:"Vanuatu",iso2:"VU",code:"678"},VA:{name:"Vatican City State",iso2:"VA",code:"379"},VE:{name:"Venezuela",iso2:"VE",code:"58"},VN:{name:"Vietnam",iso2:"VN",code:"84"},VG:{name:"Virgin Islands (British)",iso2:"VG",code:"1 284"},VI:{name:"Virgin Islands (US)",iso2:"VI",code:"1 340"},WA:{name:"Wales",iso2:"WA",code:"681"},YE:{name:"Yemen",iso2:"YE",code:"967"},ZM:{name:"Zambia",iso2:"ZM",code:"260"},XX:{name:"Select Country",iso2:"XX",code:"000"},ZW:{name:"Zimbabwe",iso2:"ZW",code:"263"}}];e.default=n},/*!************************************!*\
  !*** ./~/fbjs/lib/shallowEqual.js ***!
  \************************************/
function(t,e){"use strict";function n(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function r(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(e,r[a])||!n(t[r[a]],e[r[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=r},/*!***********************************!*\
  !*** ./~/history/lib/DOMUtils.js ***!
  \***********************************/
function(t,e){"use strict";function n(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function r(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)}function i(){return window.location.href.split("#")[1]||""}function o(t){window.location.replace(window.location.pathname+window.location.search+"#"+t)}function a(){return window.location.pathname+window.location.search+window.location.hash}function s(t){t&&window.history.go(t)}function u(t,e){e(window.confirm(t))}function c(){var t=navigator.userAgent;return(t.indexOf("Android 2.")===-1&&t.indexOf("Android 4.0")===-1||t.indexOf("Mobile Safari")===-1||t.indexOf("Chrome")!==-1||t.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)}function l(){var t=navigator.userAgent;return t.indexOf("Firefox")===-1}e.__esModule=!0,e.addEventListener=n,e.removeEventListener=r,e.getHashPath=i,e.replaceHashPath=o,e.getWindowPath=a,e.go=s,e.getUserConfirmation=u,e.supportsHistory=c,e.supportsGoWithoutReloadUsingHash=l},/*!************************************!*\
  !*** ./~/history/lib/deprecate.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return function(){return t.apply(this,arguments)}}e.__esModule=!0;var o=n(/*! warning */15);r(o);e.default=i,t.exports=e.default},/*!********************************************!*\
  !*** ./~/history/lib/runTransitionHook.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=t(e,n);t.length<2&&n(r)}e.__esModule=!0;var o=n(/*! warning */15);r(o);e.default=i,t.exports=e.default},/*!*******************************!*\
  !*** ./~/prop-types/index.js ***!
  \*******************************/
function(t,e,n){t.exports=n(/*! ./factoryWithThrowingShims */235)()},/*!**************************************************!*\
  !*** ./~/react-dom/lib/DOMChildrenOperations.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){l.insertTreeBefore(t,e,n)}function o(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):m(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,r){for(var i=e;;){var o=i.nextSibling;if(m(t,i,r),i===n)break;i=o}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function c(t,e,n){var r=t.parentNode,i=t.nextSibling;i===e?n&&m(r,document.createTextNode(n),i):n?(p(i,n),u(r,i,e)):u(r,t,e)}var l=n(/*! ./DOMLazyTree */27),h=n(/*! ./Danger */244),f=(n(/*! ./ReactDOMComponentTree */7),n(/*! ./ReactInstrumentation */13),n(/*! ./createMicrosoftUnsafeLocalFunction */74)),d=n(/*! ./setInnerHTML */51),p=n(/*! ./setTextContent */130),m=f(function(t,e,n){t.insertBefore(e,n)}),v=h.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:c,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case"INSERT_MARKUP":i(t,s.content,r(t,s.afterNode));break;case"MOVE_EXISTING":o(t,s.fromNode,r(t,s.afterNode));break;case"SET_MARKUP":d(t,s.content);break;case"TEXT_CONTENT":p(t,s.content);break;case"REMOVE_NODE":a(t,s.fromNode)}}}};t.exports=g},/*!******************************************!*\
  !*** ./~/react-dom/lib/DOMNamespaces.js ***!
  \******************************************/
function(t,e){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},/*!************************************************!*\
  !*** ./~/react-dom/lib/EventPluginRegistry.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(n>-1?void 0:a("96",t),!c.plugins[n]){e.extractEvents?void 0:a("97",t),c.plugins[n]=e;var r=e.eventTypes;for(var o in r)i(r[o],e,o)?void 0:a("98",o,t)}}}function i(t,e,n){c.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,c.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,e,n)}return!0}return!!t.registrationName&&(o(t.registrationName,e,n),!0)}function o(t,e,n){c.registrationNameModules[t]?a("100",t):void 0,c.registrationNameModules[t]=e,c.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(/*! ./reactProdInvariant */4),s=(n(/*! fbjs/lib/invariant */2),null),u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s?a("101"):void 0,s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]?a("102",n):void 0,u[n]=i,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return c.registrationNameModules[e.registrationName]||null;if(void 0!==e.phasedRegistrationNames){var n=e.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=c.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];c.plugins.length=0;var e=c.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=c.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=c},/*!*********************************************!*\
  !*** ./~/react-dom/lib/EventPluginUtils.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return"topMouseUp"===t||"topTouchEnd"===t||"topTouchCancel"===t}function i(t){return"topMouseMove"===t||"topTouchMove"===t}function o(t){return"topMouseDown"===t||"topTouchStart"===t}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=g.getNodeFromInstance(r),e?m.invokeGuardedCallbackWithCatch(i,n,t):m.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)a(t,e,n[i],r[i]);else n&&a(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function c(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function l(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?p("103"):void 0,t.currentTarget=e?g.getNodeFromInstance(n):null;var r=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,r}function h(t){return!!t._dispatchListeners}var f,d,p=n(/*! ./reactProdInvariant */4),m=n(/*! ./ReactErrorUtils */72),v=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),{injectComponentTree:function(t){f=t},injectTreeTraversal:function(t){d=t}}),g={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:h,getInstanceFromNode:function(t){return f.getInstanceFromNode(t)},getNodeFromInstance:function(t){return f.getNodeFromInstance(t)},isAncestor:function(t,e){return d.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return d.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return d.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return d.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,i){return d.traverseEnterLeave(t,e,n,r,i)},injection:v};t.exports=g},/*!*******************************************!*\
  !*** ./~/react-dom/lib/KeyEscapeUtils.js ***!
  \*******************************************/
function(t,e){"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+t).replace(e,function(t){return n[t]});return"$"+r}function r(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+r).replace(e,function(t){return n[t]})}var i={escape:n,unescape:r};t.exports=i},/*!*********************************************!*\
  !*** ./~/react-dom/lib/LinkedValueUtils.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink?s("87"):void 0}function i(t){r(t),null!=t.value||null!=t.onChange?s("88"):void 0}function o(t){r(t),null!=t.checked||null!=t.onChange?s("89"):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(/*! ./reactProdInvariant */4),u=n(/*! ./ReactPropTypesSecret */272),c=n(/*! prop-types/factory */108),l=n(/*! react/lib/React */24),h=c(l.isValidElement),f=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(t,e,n){return!t[e]||f[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:h.func},p={},m={checkPropTypes:function(t,e,n){for(var r in d){if(d.hasOwnProperty(r))var i=d[r](e,r,t,"prop",null,u);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=m},/*!******************************************************!*\
  !*** ./~/react-dom/lib/ReactComponentEnvironment.js ***!
  \******************************************************/
function(t,e,n){"use strict";var r=n(/*! ./reactProdInvariant */4),i=(n(/*! fbjs/lib/invariant */2),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i?r("104"):void 0,o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o},/*!********************************************!*\
  !*** ./~/react-dom/lib/ReactErrorUtils.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t,e,n){try{e(n)}catch(t){null===i&&(i=t)}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=o},/*!*********************************************!*\
  !*** ./~/react-dom/lib/ReactUpdateQueue.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){u.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(/*! ./reactProdInvariant */4),s=(n(/*! react/lib/ReactCurrentOwner */18),n(/*! ./ReactInstanceMap */29)),u=(n(/*! ./ReactInstrumentation */13),n(/*! ./ReactUpdates */14)),c=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),{isMounted:function(t){var e=s.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){c.validateCallback(e,n);var i=o(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void r(i)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e,n){var i=o(t,"replaceState");i&&(i._pendingStateQueue=[e],i._pendingReplaceState=!0,void 0!==n&&null!==n&&(c.validateCallback(n,"replaceState"),i._pendingCallbacks?i._pendingCallbacks.push(n):i._pendingCallbacks=[n]),r(i))},enqueueSetState:function(t,e){var n=o(t,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(e),r(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!=typeof t?a("122",e,i(t)):void 0}});t.exports=c},/*!***************************************************************!*\
  !*** ./~/react-dom/lib/createMicrosoftUnsafeLocalFunction.js ***!
  \***************************************************************/
function(t,e){"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t};t.exports=n},/*!*********************************************!*\
  !*** ./~/react-dom/lib/getEventCharCode.js ***!
  \*********************************************/
function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},/*!**************************************************!*\
  !*** ./~/react-dom/lib/getEventModifierState.js ***!
  \**************************************************/
function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=i[t];return!!r&&!!n[r]}function r(t){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},/*!*******************************************!*\
  !*** ./~/react-dom/lib/getEventTarget.js ***!
  \*******************************************/
function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},/*!*********************************************!*\
  !*** ./~/react-dom/lib/isEventSupported.js ***!
  \*********************************************/
function(t,e,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(/*! fbjs/lib/ExecutionEnvironment */11);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},/*!*******************************************************!*\
  !*** ./~/react-dom/lib/shouldUpdateReactComponent.js ***!
  \*******************************************************/
function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=n},/*!***********************************************!*\
  !*** ./~/react-dom/lib/validateDOMNesting.js ***!
  \***********************************************/
function(t,e,n){"use strict";var r=(n(/*! object-assign */5),n(/*! fbjs/lib/emptyFunction */12)),i=(n(/*! fbjs/lib/warning */3),r);t.exports=i},/*!******************************************!*\
  !*** ./~/react-router/lib/AsyncUtils.js ***!
  \******************************************/
function(t,e){"use strict";function n(t,e,n){function r(){return a=!0,s?void(c=[].concat(Array.prototype.slice.call(arguments))):void n.apply(this,arguments)}function i(){if(!a&&(u=!0,!s)){for(s=!0;!a&&o<t&&u;)u=!1,e.call(this,o++,i,r);return s=!1,a?void n.apply(this,c):void(o>=t&&u&&(a=!0,n()))}}var o=0,a=!1,s=!1,u=!1,c=void 0;i()}function r(t,e,n){function r(t,e,r){a||(e?(a=!0,n(e)):(o[t]=r,a=++s===i,a&&n(null,o)))}var i=t.length,o=[];if(0===i)return n(null,o);var a=!1,s=0;t.forEach(function(t,n){e(t,n,function(t,e){r(n,t,e)})})}e.__esModule=!0,e.loopAsync=n,e.mapAsync=r},/*!*****************************************!*\
  !*** ./~/react-router/lib/PropTypes.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.router=e.routes=e.route=e.components=e.component=e.location=e.history=e.falsy=e.locationShape=e.routerShape=void 0;var o=n(/*! react */1),a=n(/*! ./deprecateObjectProperties */53),s=(i(a),n(/*! ./InternalPropTypes */23)),u=r(s),c=n(/*! ./routerWarning */9),l=(i(c),o.PropTypes.func),h=o.PropTypes.object,f=o.PropTypes.shape,d=o.PropTypes.string,p=e.routerShape=f({push:l.isRequired,replace:l.isRequired,go:l.isRequired,goBack:l.isRequired,goForward:l.isRequired,setRouteLeaveHook:l.isRequired,isActive:l.isRequired}),m=e.locationShape=f({pathname:d.isRequired,search:d.isRequired,state:h,action:d.isRequired,key:d}),v=e.falsy=u.falsy,g=e.history=u.history,y=e.location=m,_=e.component=u.component,b=e.components=u.components,w=e.route=u.route,E=(e.routes=u.routes,e.router=p),S={falsy:v,history:g,location:y,component:_,components:b,route:w,router:E};e.default=S},/*!*******************************************************!*\
  !*** ./~/react-router/lib/createTransitionManager.js ***!
  \*******************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}function o(t,e){function n(e){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=void 0;return n&&n!==!0||null!==r?(e={pathname:e,query:n},i=r||!1):(e=t.createLocation(e),i=n),(0,f.default)(e,i,_.location,_.routes,_.params)}function r(t,n){b&&b.location===t?o(b,n):(0,v.default)(e,t,function(e,r){e?n(e):r?o(a({},r,{location:t}),n):n()})}function o(t,e){function n(n,i){return n||i?r(n,i):void(0,p.default)(t,function(n,r){n?e(n):e(null,null,_=a({},t,{components:r}))})}function r(t,n){t?e(t):e(null,n)}var i=(0,c.default)(_,t),o=i.leaveRoutes,s=i.changeRoutes,u=i.enterRoutes;(0,l.runLeaveHooks)(o,_),o.filter(function(t){return u.indexOf(t)===-1}).forEach(m),(0,l.runChangeHooks)(s,_,t,function(e,i){return e||i?r(e,i):void(0,l.runEnterHooks)(u,t,n)})}function s(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1];return t.__id__||e&&(t.__id__=w++)}function u(t){return t.reduce(function(t,e){return t.push.apply(t,E[s(e)]),t},[])}function h(t,n){(0,v.default)(e,t,function(e,r){if(null==r)return void n();b=a({},r,{location:t});for(var i=u((0,c.default)(_,b).leaveRoutes),o=void 0,s=0,l=i.length;null==o&&s<l;++s)o=i[s](t);n(o)})}function d(){if(_.routes){for(var t=u(_.routes),e=void 0,n=0,r=t.length;"string"!=typeof e&&n<r;++n)e=t[n]();return e}}function m(t){var e=s(t,!1);e&&(delete E[e],i(E)||(S&&(S(),S=null),C&&(C(),C=null)))}function g(e,n){var r=s(e),o=E[r];if(o)o.indexOf(n)===-1&&o.push(n);else{var a=!i(E);E[r]=[n],a&&(S=t.listenBefore(h),t.listenBeforeUnload&&(C=t.listenBeforeUnload(d)))}return function(){var t=E[r];if(t){var i=t.filter(function(t){return t!==n});0===i.length?m(e):E[r]=i}}}function y(e){return t.listen(function(n){_.location===n?e(null,_):r(n,function(n,r,i){n?e(n):r?t.replace(r):i&&e(null,i)})})}var _={},b=void 0,w=1,E=Object.create(null),S=void 0,C=void 0;return{isActive:n,match:r,listenBeforeLeavingRoute:g,listen:y}}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=o;var s=n(/*! ./routerWarning */9),u=(r(s),n(/*! ./computeChangedRoutes */313)),c=r(u),l=n(/*! ./TransitionUtils */310),h=n(/*! ./isActive */317),f=r(h),d=n(/*! ./getComponents */314),p=r(d),m=n(/*! ./matchRoutes */319),v=r(m);t.exports=e.default},/*!**********************************************!*\
  !*** ./~/@firebase/logger/dist/index.cjs.js ***!
  \**********************************************/
function(t,e){"use strict";function n(t){r.forEach(function(e){e.logLevel=t})}Object.defineProperty(e,"__esModule",{value:!0});var r=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(e.LogLevel||(e.LogLevel={}));var i=e.LogLevel.INFO,o=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(n<t.logLevel)){var o=(new Date).toISOString();switch(n){case e.LogLevel.DEBUG:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+n+")")}}},a=function(){function t(t){this.name=t,this._logLevel=i,this._logHandler=o,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.WARN].concat(t))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.ERROR].concat(t))},t}();e.setLogLevel=n,e.Logger=a},/*!****************************************!*\
  !*** ./src/components/BezierCurves.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! konva */8),h=(r(l),n(/*! react-konva */6)),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t,e,n,r,i,o,a,s;t=this.props.xs,e=this.props.ys,n=this.props.xe,r=this.props.ys,i=this.props.xs,o=this.props.ye,a=this.props.xe,s=this.props.ye;var u=this.props.color,l=this.props.stroke,f=this.props.dashEnabled,d=[10,10];return c.default.createElement(h.Arrow,{points:[t,e,n,r,i,o,a,s],stroke:u,fill:u,strokeWidth:l,pointerWidth:20,pointerLength:20,shadowBlur:2,dashEnabled:f,dash:d,bezier:!0})}}]),e}(c.default.Component);e.default=f},/*!***************************************!*\
  !*** ./src/components/BracketLine.js ***!
  \***************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(/*! react */1),l=r(c),h=n(/*! konva */8),f=(r(h),n(/*! react-konva */6)),d=n(/*! ../static/Settings */16),p=r(d),m=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return s(e,t),u(e,[{key:"render",value:function(){var t={};"final"==this.props.class?(console.log("gameCounter",this.props.gameCounter),t=i({sx:this.props.xs,sy:this.props.ys,x1:this.props.x1,x1a:this.props.x1,x1b:this.props.x1+this.props.radius,y1:this.props.y1,y1a:this.props.y1+this.props.radius,y1b:this.props.y1,x2:this.props.x2,x2a:this.props.x2-this.props.radius,x2b:this.props.x2,y2:this.props.y2,y2a:this.props.y2,y2b:this.props.y2+this.props.radius,x3:this.props.x3,y3:this.props.y3,arc1s:this.props.arc1s,arc1e:this.props.arc1e,arc2s:this.props.arc2s,arc2e:this.props.arc2e,clockwise:!1},"clockwise",!1)):t="blind"!==p.default.seedMode||this.props.gameCounter==this.props.bracketSpots/("VS"==this.props.mode?1:2)-1?"counter-clockwise"===this.props.direction?i({sx:this.props.xs,sy:this.props.ys,x1:this.props.x1,x1a:this.props.x1,x1b:this.props.x1+this.props.radius,y1:this.props.y1,y1a:this.props.y1+this.props.radius,y1b:this.props.y1,x2:this.props.x2,x2a:this.props.x2-this.props.radius,x2b:this.props.x2,y2:this.props.y2,y2a:this.props.y2,y2b:this.props.y2+this.props.radius,x3:this.props.x3,y3:this.props.y3,arc1s:this.props.arc1s,arc1e:this.props.arc1e,arc2s:this.props.arc2s,arc2e:this.props.arc2e,clockwise:!0},"clockwise",!0):i({sx:this.props.xs,sy:this.props.ys,x1:this.props.x1,x1a:this.props.x1,x1b:this.props.x1-this.props.radius,y1:this.props.y1,y1a:this.props.y1-this.props.radius,y1b:this.props.y1,x2:this.props.x2,x2a:this.props.x2+this.props.radius,x2b:this.props.x2,y2:this.props.y2,y2a:this.props.y2,y2b:this.props.y2-this.props.radius,x3:this.props.x3,y3:this.props.y3,arc1s:this.props.arc1s,arc1e:this.props.arc1e,arc2s:this.props.arc2s,arc2e:this.props.arc2e,clockwise:!1},"clockwise",!1):"counter-clockwise"===this.props.direction?i({sx:this.props.xs,sy:this.props.ys,x1:this.props.x1,x1a:this.props.x1,x1b:this.props.x1-this.props.radius,y1:this.props.y1,y1a:this.props.y1+this.props.radius,y1b:this.props.y1,x2:this.props.x2,x2a:this.props.x2+this.props.radius,x2b:this.props.x2,y2:this.props.y2,y2a:this.props.y2,y2b:this.props.y2-this.props.radius,x3:this.props.x3,y3:this.props.y3,arc1s:this.props.arc1s,arc1e:this.props.arc1e,arc2s:this.props.arc2s,arc2e:this.props.arc2e,clockwise:!1},"clockwise",!0):i({sx:this.props.xs,sy:this.props.ys,x1:this.props.x1,x1a:this.props.x1,x1b:this.props.x1-this.props.radius,y1:this.props.y1,y1a:this.props.y1-this.props.radius,y1b:this.props.y1,x2:this.props.x2,x2a:this.props.x2+this.props.radius,x2b:this.props.x2,y2:this.props.y2,y2a:this.props.y2,y2b:this.props.y2+this.props.radius,x3:this.props.x3,y3:this.props.y3,arc1s:this.props.arc1s,arc1e:this.props.arc1e,arc2s:this.props.arc2s,arc2e:this.props.arc2e,clockwise:!0},"clockwise",!1);var e=this.props.color,n=4,r=this.props.radius,o=[10,10],a=this.props.dashEnabled;return l.default.createElement(f.Group,null,l.default.createElement(f.Arrow,{points:[t.sx,t.sy,t.x1a,t.y1a],stroke:e,fill:e,strokeWidth:n,dash:o,pointerWidth:20,pointerLength:20,shadowBlur:2,dashEnabled:a}),l.default.createElement(f.Arc,{x:t.x1b,y:t.y1a,innerRadius:r,outerRadius:r,rotation:180*t.arc1s/Math.PI,angle:90,clockwise:t.counterClockwise1,stroke:e,strokeWidth:n,dash:o,shadowBlur:2,dashEnabled:a}),l.default.createElement(f.Line,{points:[t.x1b,t.y1b,t.x2a,t.y2a],stroke:e,strokeWidth:n,dash:o,shadowBlur:2,dashEnabled:a}),l.default.createElement(f.Arc,{x:t.x2a,y:t.y2b,innerRadius:r,outerRadius:r,rotation:180*t.arc2s/Math.PI,angle:90,clockwise:t.counterClockwise1,stroke:e,strokeWidth:n,dash:o,shadowBlur:2,dashEnabled:a}),l.default.createElement(f.Arrow,{points:[t.x2b,t.y2b,t.x3,t.y3],stroke:e,fill:e,strokeWidth:n,dash:o,pointerWidth:20,pointerLength:20,shadowBlur:2,dashEnabled:a}))}}]),e}(l.default.Component);e.default=m},/*!*****************************************!*\
  !*** ./src/components/CountryKeyVal.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,a){this.name=t,this.iso2=e,this.flagPathSM=n,this.flagPathMD=r,this.flagPathLG=i,this.flagPathXL=o,this.flagPathSVG=a}Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../data/countries */59),a=r(o),s={};for(var u in a.default[0])if(a.default[0].hasOwnProperty(u)){var c=new i;c.name=a.default[0][u].name,c.iso2=u,c.flagPathSM="/img/flagsSM/"+u+".png",c.flagPathMD="/img/flagsMD/"+u+".png",c.flagPathLG="/img/flagsLG/"+u+".png",c.flagPathXL="/img/flagsXL/"+u+".png",c.flagPathSVG="/img/flagsSVG/"+u+".svg",s[a.default[0][u].name]=c}e.default=s},/*!********************************!*\
  !*** ./src/components/Flag.js ***!
  \********************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return c.default.createElement("img",{className:"icon",src:this.props.icon,align:"middle"})}}]),e}(c.default.Component);e.default=l},/*!*****************************************!*\
  !*** ./src/components/TeamInputForm.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! ./Flag */88),h=(r(l),n(/*! ./CountryKeyVal */87)),f=r(h),d=n(/*! ../data/countries */59),p=r(d),m=[],v={color:"#dfdfdf",textShadow:"0 0 3px #939393"},g={color:"#dfdfdf"},y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={name:"",country:null,oldName:null,oldCountry:null};for(var r in p.default[0])m.push(p.default[0][r].name);return n}return a(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){t.name!==this.props.name&&this.setState({oldName:t.name},function(){this.setState({name:t.name})}),t.country!==this.props.country&&this.setState({oldCountry:t.country},function(){this.setState({country:t.country},function(){this.props.country=null})},function(){document.getElementById("country").value=t.country})}},{key:"randomIntFromInterval",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"onSubmitClick",value:function(){(/\d/.test(this.state.name)||/[a-zA-Z]/.test(this.state.name))&&null!==this.state.name&&null!==this.state.country&&"Select Country"!==this.state.country&&("add"==this.props.mode?this.props.addTeamClick(this.state.name,this.state.country):this.props.editPlayer(this.state.oldName,this.state.name,this.state.oldCountry,this.state.country),this.setState({name:null,country:null},function(){this.props.hideInput()}),this.props.name=null,this.props.country=null,document.getElementById("country").value=null)}},{key:"onCancelClick",value:function(){this.setState({name:null,country:null},function(){this.props.hideInput()}),this.props.name=null,this.props.country=null,document.getElementById("country").value=null}},{key:"randomCountry",value:function(){var t=m[this.randomIntFromInterval(0,m.length)];document.getElementById("country").value=t,this.setState({country:t})}},{key:"render",value:function(){var t=this;console.log("this.state.name=",this.state.name),console.log("this.state.country=",this.state.country),console.log("this.props.name=",this.props.name),console.log("this.props.country=",this.props.country),console.log("-----------------------------");var e=[];for(var n in f.default)e.push(f.default[n].name);var r={height:this.props.geo.height,width:this.props.geo.width};return c.default.createElement("div",{className:"input-wrapper",style:r},c.default.createElement("div",{className:"input-inner-wrapper",style:r},c.default.createElement("div",{className:"halfportion"},c.default.createElement("div",{className:"quad"},c.default.createElement("div",{className:"TeamSectorInput"},c.default.createElement("div",{className:"enter-text"},c.default.createElement("input",{className:"input-info",style:g,value:this.state.name,type:"text",id:"name",onChange:function(e){t.setState({name:e.target.value})}}))),c.default.createElement("div",{className:"TeamSectorText"},c.default.createElement("div",{className:"enter-text"},c.default.createElement("h1",{className:"maintext",style:v},"Enter Name")))),c.default.createElement("div",{className:"quad"},c.default.createElement("div",{className:"TeamSectorInput"},c.default.createElement("div",{className:"enter-text"},c.default.createElement("input",{className:"input-info",style:g,list:"countryList",value:this.state.country,onChange:function(e){t.setState({country:e.target.value})},type:"text",id:"country"}),c.default.createElement("datalist",{id:"countryList"},e.map(function(t,e){return c.default.createElement("option",{"data-id":e,value:t})})))),c.default.createElement("div",{className:"TeamSectorText"},c.default.createElement("div",{className:"enter-text"},c.default.createElement("h1",{className:"maintext",style:v},"Select Country"))))),c.default.createElement("div",{className:"halfportion2"},c.default.createElement("div",{className:"quad2"},c.default.createElement("div",{className:"TeamButtons"},c.default.createElement("button",{className:"typical-button",onClick:this.randomCountry.bind(this)},"Randomize Country")),c.default.createElement("div",{className:"TeamButtons"},c.default.createElement("button",{className:"typical-button",onClick:this.onSubmitClick.bind(this)},"Submit")),c.default.createElement("div",{className:"TeamButtons"},c.default.createElement("button",{className:"typical-button",onClick:this.onCancelClick.bind(this)},"Cancel"))),c.default.createElement("div",{className:"quad3"},c.default.createElement("div",{className:"flag-team-input"},c.default.createElement("img",{src:null==this.state.country||void 0==f.default[this.state.country]?null:f.default[this.state.country].flagPathSVG}))))))}}]),e}(c.default.Component);e.default=y},/*!****************************************!*\
  !*** ./src/components/VsTournament.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){for(var e,n,r=t.length;0!==r;)n=Math.floor(Math.random()*r),r-=1,e=t[r],t[r]=t[n],t[n]=e;return t}function c(t){var e=Object.keys(t);return t[e[e.length*Math.random()<<0]]}function l(t,e){var n=c(e);return n!==t?n:l(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var h,f,d,p,m,v,g,y,_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=n(/*! react */1),w=i(b),E=n(/*! react-skylight */54),S=i(E),C=n(/*! react-konva */6),T=n(/*! ../static/Colors */44),k=i(T),I=n(/*! ../data/divisionNames */209),P=i(I),N=n(/*! ./matchup/DivisionImage */91),O=i(N),A=n(/*! ../firebase */210),x=i(A),R=n(/*! ./Button */156),D=i(R),M=n(/*! ../static/Settings */16),L=i(M),F=n(/*! ./VsMatchup */167),U=i(F),B=n(/*! ./vsBracketMethods/higherOrderMethods/PropogateSeedsArr */207),K=i(B),j=n(/*! ./vsBracketMethods/higherOrderMethods/CreateMasterGameObject */206),V=i(j),W=n(/*! ./vsBracketMethods/higherOrderMethods/CreateGmsWinBracket */205),G=i(W),q=n(/*! ./vsBracketMethods/higherOrderMethods/CreateGmsSpecialWinBracket */204),H=i(q),z=n(/*! ./vsBracketMethods/higherOrderMethods/CreateGmsLoseBracket */203),Q=i(z),Y=n(/*! ./vsBracketMethods/higherOrderMethods/CreateGmsFinalsBracket */202),X=i(Y),J=n(/*! ./vsBracketMethods/baseMethods/DetermineBracketPower */57),$=i(J),Z=n(/*! ./vsBracketMethods/baseMethods/NgamesInRound */33),tt=r(Z),et=n(/*! ./outcomes/WinnerLoserHandler */191),nt=i(et),rt=n(/*! ./outcomes/StartOutcomes */190),it=i(rt),ot=n(/*! ./outcomes/SetPlayerInDestGame */188),at=i(ot),st=n(/*! ./outcomes/SetPlayerInDestGame4P */189),ut=i(st),ct=n(/*! ./outcomes/SendWinnerWinBracket */186),lt=i(ct),ht=n(/*! ./outcomes/SendWinnerWinBracket4P */187),ft=i(ht),dt=n(/*! ./outcomes/SendWinnerLoseBracket */181),pt=i(dt),mt=n(/*! ./outcomes/SendWinnerLoseBracket4P */182),vt=i(mt),gt=n(/*! ./outcomes/SendLoserWinBracket */179),yt=i(gt),_t=n(/*! ./outcomes/SendLoserWinBracket4P */180),bt=i(_t),wt=n(/*! ./outcomes/SendLoserStartBracket */177),Et=i(wt),St=n(/*! ./outcomes/SendLoserStartBracket4P */178),Ct=i(St),Tt=n(/*! ./outcomes/SendWinnerSpecialLoserBracket */183),kt=i(Tt),It=n(/*! ./outcomes/SendWinnerSpecialLoserBracket4P */184),Pt=i(It),Nt=n(/*! ./outcomes/SendWinnerSpecialWinnerBracket */185),Ot=i(Nt),At=n(/*! ./sideChart/ChartHeaders */194),xt=i(At),Rt=n(/*! ./sideChart/ChartTitle */195),Dt=i(Rt),Mt=n(/*! ./sideChart/ChartDataManager */193),Lt=i(Mt),Ft={teamHeight:48,teamWidth:300,horizSpace:192,vertSpace:84,radius:100,lColAr:[]},Ut=[],Bt=[],Kt=[],jt=[],Vt={},Wt=[],Gt=!0,qt=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={masterGameObject:{},scale:.5,posX:-1e3,posY:null,matchupPlayerA:{},matchupPlayerB:{},matchupPlayerC:{},matchupPlayerD:{},matchupGameNumber:1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,chartDisplay:"Place"},y=n.props.location.state.mode,L.default.seedMode=n.props.location.state.seeding;for(var r=0;r<30;r++)Ft.lColAr.push("#"+((1<<24)*Math.random()|0).toString(16));n.updateWindowDimensions=n.updateWindowDimensions.bind(n),n.WinnerLoserHandler=nt.default.bind(n),n.StartOutcomes=it.default.bind(n),n.SetPlayerInDestGame=at.default.bind(n),n.SetPlayerInDestGame4P=ut.default.bind(n),n.SendWinnerWinBracket=lt.default.bind(n),n.SendWinnerWinBracket4P=ft.default.bind(n),n.SendWinnerLoseBracket=pt.default.bind(n),n.SendWinnerLoseBracket4P=vt.default.bind(n),n.SendLoserWinBracket=yt.default.bind(n),n.SendLoserWinBracket4P=bt.default.bind(n),n.SendLoserStartBracket=Et.default.bind(n),n.SendLoserStartBracket4P=Ct.default.bind(n),n.SendWinnerSpecialLoserBracket=kt.default.bind(n),n.SendWinnerSpecialLoserBracket4P=Pt.default.bind(n),n.SendWinnerSpecialWinnerBracket=Ot.default.bind(n),n.ChartTitle=Dt.default.bind(n),h=Object.keys(n.props.location.state.players).length,f=Math.pow(2,(0,$.default)(h)),d=(0,$.default)(h),p=2*f*("VS"==y?1:.5),m=Ft.teamWidth+2*Ft.teamHeight,v=Ft.teamHeight*("VS"==y?3.5:6.5),g=Ft.vertSpace*(3+f/("VS"==y?2:4))+f*v/("VS"==y?2:4),Vt={gameWidth:m,gameHeight:v,boardHeight:g,winnerArr:Bt,loserArr:Ut,vizGeo:Ft,bracketPower:d,bracketSpots:f,showMatchup:n.showMatchup.bind(n)};var i=0;for(M=1;M<=2*(d-("VS"==y?0:1)-1);M++)Ut.push(tt.loserBracket(f,M,y));for(M=0;M<d-("VS"==y?0:1);M++)Bt.push(tt.winnerBracket(f,M,y));(0,K.default)(h,Kt,d),n.state.masterGameObject=(0,V.default)(p,f,y),console.log("masterGameObject",n.state.masterGameObject);var s=[];for(var _ in n.props.location.state.players)s.push(n.props.location.state.players[_]);if("random"==n.props.location.state.order){jt=u(jt);for(var b=0;b<s.length;b++)s[b].seed=b+1}var w=0,E=1,S=c(P.default),C=l(S,P.default),T=c(S),k=l(T,S),I=c(C),N=l(I,C);Wt=[T,k,I,N];for(var O in Kt){for(var A=0;A<s.length;A++)Kt[O]==s[A].seed&&(s[A].mascot=Wt[w],jt.push(s[A]),i=1);0==i&&jt.push({name:"BYE",country:"",seed:Kt[O],timeTrial:"-",wins:null,losses:null,totalTime:0,avgTime:0,splitTime:0}),i=0,E%(f/("VS"==y?2:4))==0&&0!==E&&(w+=1,console.log("divisionTrigger",w)),E+=1}var R=x.default.database().ref("players");console.log("seededArray",jt);for(var _=0;_<jt.length;_++)R.push(jt[_]);for(var D=1,M=0;M<jt.length;M++)"VS"==y?M%2==0?n.state.masterGameObject[M/2+1].playerA=jt[M]:n.state.masterGameObject[(M+1)/2].playerB=jt[M]:1==D?(n.state.masterGameObject[Math.ceil((M+1)/4)].playerA=jt[M],D+=1):2==D?(n.state.masterGameObject[Math.ceil((M+1)/4)].playerB=jt[M],D+=1):3==D?(n.state.masterGameObject[Math.ceil((M+1)/4)].playerC=jt[M],D+=1):(n.state.masterGameObject[Math.ceil((M+1)/4)].playerD=jt[M],D=1);for(var M in n.state.masterGameObject)n.StartOutcomes(n.state.masterGameObject[M].gameNumber,f,n.state.masterGameObject[M].bracket,d,y,Gt);return window.onbeforeunload=function(){return"Data will be lost if you leave the page, are you sure?"},Gt=!1,n}return s(e,t),_(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.handleStatButtonClick(jt,"timeTrial")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}},{key:"wheel",value:function(t){t.evt.preventDefault();var e=1.15,n=this.state.scale,r=t.evt.deltaY<0?n*e:n/e,i={x:t.target.getStage().getPointerPosition().x/n-t.target.getStage().x()/n,y:t.target.getStage().getPointerPosition().y/n-t.target.getStage().y()/n},o={x:-(i.x-t.target.getStage().getPointerPosition().x/r)*r,y:-(i.y-t.target.getStage().getPointerPosition().y/r)*r};this.setState({scale:r,posX:o.x,posY:o.y})}},{key:"handleStatButtonClick",value:function(t){this.setState({chartDisplay:t})}},{key:"showMatchup",value:function(t){if(t.byeRound!==!0)this.setState({posX:t.newPos.x,posY:t.newPos.y,matchupPlayerA:t.playerA,matchupPlayerB:t.playerB,matchupPlayerC:t.playerC,matchupPlayerD:t.playerD,matchupGameNumber:t.gameNumber},function(){this.customDialog.show()});else{this.setState({posX:t.newPos.x,posY:t.newPos.y});var e={win1time:0,win2time:0,lose1time:0,lose2time:0};t.playerAtime="-",t.playerBtime="-",t.playerCtime="-",t.playerDtime="-",this.WinnerLoserHandler(t,e)}}},{key:"hideMatchup",value:function(){this.customDialog.hide(),this.setState({matchupPlayerA:{},matchupPlayerB:{},matchupPlayerC:{},matchupPlayerD:{}})}},{key:"render",value:function(){var t=this;console.log("masterGameObject",this.state.masterGameObject);var e={width:"VS"==y?"1000":"1400",height:"VS"==y?"600":"800",position:"fixed",top:"50%",left:"50%",marginTop:"VS"==y?"-300":"-400",marginLeft:"VS"==y?"-500":"-700",backgroundColor:k.default.gameNotReadyColor,color:k.default.gameNotReadyColor},n=[],r=[],i=[],o=[],a=1,s=(0,G.default)(Vt,a,this.state.masterGameObject,y);r.push(s.winnerBracket),s.bezArr.map(function(t){return n.push(t)}),a=s.gameCounter,r.push((0,H.default)(Vt,a,this.state.masterGameObject,y)),a+=1;var u=(0,Q.default)(Vt,a,this.state.masterGameObject,y);if(i=u.loserBracket,u.bezArr.map(function(t){return n.push(t)}),a=u.gameCounter,"VS"==y){var c=(0,X.default)(Vt,a,this.state.masterGameObject,y);o=c.finalsBracket}n.reverse();var l=Math.round(.8*this.state.windowHeight),h={height:Math.round(l)},p=[];p="VS"==y?[this.state.matchupPlayerA,this.state.matchupPlayerB]:[this.state.matchupPlayerA,this.state.matchupPlayerB,this.state.matchupPlayerC,this.state.matchupPlayerD];for(var _,b,E=[],T=[],I=[],P=[],N=-1;N>=-Ut.length;N--)_=(N+2*(d-("VS"==y?0:1)-1))*(m+Ft.horizSpace)+Ft.horizSpace/2,E.push(w.default.createElement(C.Rect,{x:_,y:1.5*Ft.vertSpace,width:m+Ft.horizSpace,height:g-3*Ft.vertSpace,fill:"#FF3B3B",opacity:.8*(Ut.length-(Math.abs(N)-1))/Ut.length})),I.push(w.default.createElement(C.Text,{text:"ELIMINATION ROUND "+Math.abs(N),x:_,y:2*-Ft.vertSpace,width:m+Ft.horizSpace,fontSize:30,fontStyle:"bold",shadowBlur:2,fill:"#121212",align:"center",fontFamily:"Open Sans"}));for(var A=0;A<=Bt.length;A++)_=(A+2*(d-("VS"==y?0:1)-1))*(m+Ft.horizSpace)+Ft.horizSpace/2,0!==A&&T.push(w.default.createElement(C.Rect,{x:_,width:("VS"==y&&A==Bt.length?2:1)*(m+Ft.horizSpace),height:g,fill:"#8C69CE",opacity:.8*Math.abs(A)/Bt.length})),b=0==A?"ROUND OF "+Math.pow(2,d-A):A==Bt.length?"CHAMPIONSHIP":A==Bt.length-1?"SEMI-FINAL":A==Bt.length-2?"CONFERENCE FINAL":A==Bt.length-3?"DIVISION FINAL":"ROUND OF "+Math.pow(2,d-A),P.push(w.default.createElement(C.Text,{text:b,x:_,y:2*-Ft.vertSpace,width:m+Ft.horizSpace,fontSize:30,fontStyle:"bold",shadowBlur:2,fill:"#121212",align:"center",fontFamily:"Open Sans"}));for(var x=[],R=[],M=0;M<4;M++)x.push(w.default.createElement(C.Rect,{x:Ft.horizSpace/2+Ut.length*(m+Ft.horizSpace),y:1.5*Ft.vertSpace+M*(v+Ft.vertSpace)*f/(4*("VS"==y?2:4)),width:(Bt.length+("VS"==y?1:0))*(m+Ft.horizSpace)+Ft.horizSpace*(f<=8?5:6)+m/2,height:(v+Ft.vertSpace)*f/(4*("VS"==y?2:4)),fill:M%2==0?"#DFDFDF":"#CACACA",opacity:.5})),R.push(w.default.createElement(O.default,{x:(Ut.length+Bt.length+("VS"==y?1:0))*(m+Ft.horizSpace)+3.5*Ft.horizSpace+m/2,y:1.5*Ft.vertSpace+M*(v+Ft.vertSpace)*f/(4*("VS"==y?2:4))+(v+Ft.vertSpace)*f/(4*("VS"==y?2:4))/2-v*("VS"==y?2:1)*(f<=8?.5:1)/2,imgHeight:v*("VS"==y?2:1)*(f<=8?.5:1),img:"/img/divisions/"+Wt[M]+".svg",opacity:1}));for(var L=[],A=0;A<2;A++)L.push(w.default.createElement(C.Rect,{x:Ft.horizSpace/2+(Ut.length+(Bt.length-2))*(m+Ft.horizSpace),y:1.5*Ft.vertSpace+A*(v+Ft.vertSpace)*f/(4*("VS"==y?1:2)),width:m+Ft.horizSpace,height:(v+Ft.vertSpace)*f/(4*("VS"==y?1:2)),fill:A%2==0?"#CBCBCB":"#B7B7B7",opacity:1}));var F=[];F.push(w.default.createElement(C.Rect,{x:Ft.horizSpace/2+(Ut.length+(Bt.length-1))*(m+Ft.horizSpace),y:1.5*Ft.vertSpace,width:("VS"==y?3:2)*(m+Ft.horizSpace),height:(v+Ft.vertSpace)*f/(2*("VS"==y?1:2)),fill:"#A3A3A3",opacity:1}));for(var B,K=[],j=0,V=0;V<jt.length;V++)"-"!==jt[V].avgTime&&0!==jt[V].avgTime&&null!==jt[V].avgTime&&K.push(jt[V].avgTime);K.sort(function(t,e){return t-e}),B=Math.floor(K.length/2),j=K.length%2==0?K[B-1]:K[B];var W=this.ChartTitle(this.state.chartDisplay,j);return w.default.createElement("div",{className:"tournament-container"},w.default.createElement(S.default,{dialogStyles:e,hideOnOverlayClicked:!0,ref:function(e){return t.customDialog=e},afterClose:this._executeAfterModalClose},w.default.createElement(U.default,{players:p,gameNumber:this.state.matchupGameNumber,dialogHeight:e.height,dialogWidth:e.width,WinnerLoserHandler:this.WinnerLoserHandler.bind(this),bracketSpots:f,hideMatchup:this.hideMatchup.bind(this),mode:y,allAvgTime:j})),w.default.createElement(C.Stage,{className:"bracket-area",ref:"stage",x:this.state.posX,y:this.state.posY,width:Math.round(.75*this.state.windowWidth),height:l,draggable:!0,onWheel:this.wheel.bind(this),scaleX:this.state.scale,scaleY:this.state.scale},w.default.createElement(C.Layer,null,w.default.createElement(C.Group,null,x.map(function(t){return t}),E.map(function(t){return t}),L.map(function(t){return t}),F.map(function(t){return t}),n.map(function(t){return t}),i.map(function(t){return t}),r.map(function(t){return t}),o.map(function(t){return t}),I.map(function(t){return t}),P.map(function(t){return t}),R.map(function(t){return t})))),w.default.createElement("div",{className:"side-panel-area",style:h},w.default.createElement("div",{className:"side-panel-chart"},w.default.createElement("div",{className:"chart-title"},W),w.default.createElement(xt.default,{query:this.state.chartDisplay}),w.default.createElement(Lt.default,{seededArray:jt,query:this.state.chartDisplay,mode:y,allAvgTime:j})),w.default.createElement("div",{className:"side-panel-selectors"},w.default.createElement("div",{className:"row-of-buttons"},w.default.createElement(D.default,{title:"Seed",clickHandle:this.handleStatButtonClick.bind(this)}),w.default.createElement(D.default,{title:"Place",clickHandle:this.handleStatButtonClick.bind(this)})),w.default.createElement("div",{className:"row-of-buttons"},w.default.createElement(D.default,{title:"Time Trial",clickHandle:this.handleStatButtonClick.bind(this)}),w.default.createElement(D.default,{title:"Avg Times",clickHandle:this.handleStatButtonClick.bind(this)}),w.default.createElement(D.default,{title:"Best Times",clickHandle:this.handleStatButtonClick.bind(this)})),w.default.createElement("div",{className:"row-of-buttons"},w.default.createElement(D.default,{title:"Cup Time",clickHandle:this.handleStatButtonClick.bind(this)}),w.default.createElement(D.default,{title:"Median Time Split",clickHandle:this.handleStatButtonClick.bind(this)}),"VS"==y?null:w.default.createElement(D.default,{title:"Avg Place",clickHandle:this.handleStatButtonClick.bind(this)})))))}}]),e}(w.default.Component);e.default=qt},/*!*************************************************!*\
  !*** ./src/components/matchup/DivisionImage.js ***!
  \*************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! konva */8),h=(r(l),n(/*! react-konva */6)),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={image:null},t}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this,e=new window.Image;e.src=this.props.img,e.onload=function(){t.setState({image:e})}}},{key:"componentWillReceiveProps",value:function(t){var e=this;if(t.img!==this.props.img){var n=new window.Image;n.src=t.img,n.onload=function(){e.setState({image:n})}}}},{key:"render",value:function(){var t=this,e=this.props.imgHeight;return c.default.createElement(h.Image,{y:this.props.y,x:this.props.x,image:this.state.image,height:e,width:e,opacity:this.props.opacity,ref:function(e){return t.imageNode=e},shadowBlur:5,shadowOpacity:.8,shadowColor:"black"})}}]),e}(c.default.Component);e.default=f},/*!**************************************************!*\
  !*** ./src/components/matchup/FlagClipBorder.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n;return n="VS"==e?t.margin+t.positionWidth:t.margin+t.positionWidth+t.finishBox,a.default.createElement(u.Line,{x:n,sceneFunc:function(e){e.beginPath(),e.moveTo(t.flagClip.xs,t.flagClip.ys),e.lineTo(t.flagClip.x1,t.flagClip.y1),e.lineTo(t.flagClip.x2,t.flagClip.y2),e.lineTo(t.flagClip.x3,t.flagClip.y3),e.lineTo(t.flagClip.x4,t.flagClip.y4),e.lineTo(t.flagClip.x5,t.flagClip.y5),e.closePath(),e.setAttr("strokeStyle",t.borderColor),e.setAttr("lineWidth",1),e.stroke()}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! konva */8),u=(r(s),n(/*! react-konva */6))},/*!**************************************************!*\
  !*** ./src/components/matchup/FlagClipShadow.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r;return r="VS"==n?t.margin+t.positionWidth:t.margin+t.positionWidth+t.finishBox,a.default.createElement(u.Shape,{x:r,shadowBlur:e.shadowBlur,shadowOpacity:e.shadowOpacity,shadowColor:e.shadowColor,sceneFunc:function(e){e.beginPath(),e.moveTo(t.flagClip.xs,t.flagClip.ys),e.lineTo(t.flagClip.x1,t.flagClip.y1),e.lineTo(t.flagClip.x2,t.flagClip.y2),e.lineTo(t.flagClip.x3,t.flagClip.y3),e.lineTo(t.flagClip.x4,t.flagClip.y4),e.lineTo(t.flagClip.x5,t.flagClip.y5),e.closePath(),e.stroke()}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! konva */8),u=(r(s),n(/*! react-konva */6))},/*!********************************************!*\
  !*** ./src/components/matchup/FlagCuts.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){function r(t){return 0===Object.keys(t).length&&t.constructor===Object||"BYE"==t.name?"/img/flagsSVG/XX.svg":t.country.flagPathSVG}var i;return i="VS"==n?t.margin+t.positionWidth:t.margin+t.positionWidth+t.finishBox,u.default.createElement(a.Group,{x:i,clipFunc:function(e){e.beginPath(),e.moveTo(t.flagClip.xs,t.flagClip.ys),e.lineTo(t.flagClip.x1,t.flagClip.y1),e.lineTo(t.flagClip.x2,t.flagClip.y2),e.lineTo(t.flagClip.x3,t.flagClip.y3),e.lineTo(t.flagClip.x4,t.flagClip.y4),e.lineTo(t.flagClip.x5,t.flagClip.y5),e.closePath()}},u.default.createElement(l.default,{img:r(e),flagHeight:t.flagHeight,flagWidth:t.flagWidth}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s),c=n(/*! ./FlagImage */169),l=r(c)},/*!************************************************!*\
  !*** ./src/components/matchup/PositionTile.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){return u.default.createElement(a.Group,null,u.default.createElement(a.Rect,{width:t.positionWidth,height:t.tileHeight,fill:n,opacity:.5,stroke:t.borderColor,strokeWidth:1,shadowBlur:r.shadowBlur,shadowOpacity:r.shadowOpacity,shadowColor:r.shadowColor}),u.default.createElement(a.Text,{text:e,x:(t.positionWidth-t.positionFontSize)/2,y:(t.tileHeight-t.positionFontSize)/2,fontSize:t.positionFontSize,fontStyle:"bold",shadowBlur:5,shadowOpacity:.8,fill:"white",width:t.positionFontSize,align:"center"}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!*********************************************!*\
  !*** ./src/components/matchup/SeedShape.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r;return r="VS"==n?t.margin+t.positionWidth:t.margin+t.positionWidth+t.finishBox,a.default.createElement(u.Group,{x:r},a.default.createElement(u.Shape,{fill:t.seedColor,stroke:t.borderColor,strokeWidth:1,shadowBlur:2,drawFunc:function(e){e.beginPath(),e.moveTo(t.seedShape.xs,t.seedShape.ys),e.lineTo(t.seedShape.x1,t.seedShape.y1),e.lineTo(t.seedShape.x2,t.seedShape.y2),e.closePath(),e.fillStrokeShape(this)}}),a.default.createElement(u.Text,{text:e.seed,x:t.seedPos.x-t.seedFontSize,y:t.seedPos.y-t.positionFontSize/2,fontSize:t.seedFontSize,fontStyle:"bold",shadowBlur:2,fill:"white",width:2*t.seedFontSize,align:"center"}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! konva */8),u=(r(s),n(/*! react-konva */6))},/*!*********************************************!*\
  !*** ./src/components/matchup/StatsTile.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,f,p,v,y,b,E,S){var C,T;if(console.log("statTile player",S),"VS"==i)C=2*t.margin+t.flagWidth+t.positionWidth,o=n-(5*t.margin+t.flagWidth+t.positionWidth);else{C=2*t.margin+t.flagWidth+t.positionWidth+1.5*t.finishBox,o=n-(7*t.margin+t.flagWidth+t.positionWidth+2*t.timeCircleRadius4P+1.5*t.finishBox);for(var k=[],I=0;I<v.length;I++)k.push((0,g.default)(v[I].timeTrial,v[I].totalTime,v[I].wins,v[I].losses,v[I].nLastPlace));T=(0,_.default)(v,k,y,"4P",b==E/2)}a=t.tileHeight-2.5*t.margin,s=(a-(t.nameSize+t.statLabelSize))/3,c=e.avgTime,l=Math.round(100*c/w.default.cupsPerPerson)/100,h=Math.round(100*(c-S))/100,isNaN(h)&&(h=0);var P=null==e.country?"":e.country.name,N=["wins","losses","avg cup time","avg time","best time","group avg"];console.log("avgSplit",h);var O=[],A=[],x=[0==e.wins?"0":e.wins,0==e.losses?"0":e.losses,l,c,e.bestTime,h>=0?"+"+(0===h?"0.00":h):h];"VS"!=i&&(N.push("avg place"),N.push(b==E/2?"win chance":"chance to adv"),x.push(e.avgPlacement),x.push(T+"%")),u=o/N.length;for(var R=0;R<N.length;R++)A.push(m.default.createElement(d.Text,{x:u*R,y:s,text:x[R],align:"center",width:u,fill:t.statColor,fontSize:t.nameSize,fontFamily:t.mainFontfamily,shadowBlur:2,shadowOpacity:.5})),O.push(m.default.createElement(d.Text,{x:u*R,y:2*s+t.nameSize,text:N[R],fontFamily:t.mainFontfamily,align:"center",width:u,fill:t.borderColor,fontSize:t.statLabelSize,shadowBlur:2,shadowOpacity:.5}));return m.default.createElement(d.Group,{x:C},m.default.createElement(d.Rect,{width:o,height:a,fill:t.statTileColor,stroke:t.borderColor,strokeWidth:0,shadowBlur:r.shadowBlur,shadowOpacity:r.shadowOpacity,shadowColor:r.shadowColor,opacity:.2,cornerRadius:10}),m.default.createElement(d.Text,{y:t.tileHeight-(2*t.nameSize+t.margin/2)/2,text:e.name,align:"left",fill:t.paleAmber,fontSize:t.nameSize,fontFamily:t.mainFontfamily,shadowBlur:2,shadowOpacity:.5}),m.default.createElement(d.Text,{y:t.tileHeight-(2*t.seedFontSize+t.margin/2)/2,text:P,align:"right",width:o,fill:t.deSatOrng,fontSize:t.seedFontSize,shadowBlur:r.shadowBlur,shadowOpacity:r.shadowOpacity,shadowColor:r.shadowColor,fontFamily:t.mainFontfamily,fontStyle:"bold"}),A,O)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o,a,s,u,c,l,h,f=n(/*! konva */8),d=(r(f),n(/*! react-konva */6)),p=n(/*! react */1),m=r(p),v=n(/*! ../vsBracketMethods/baseMethods/DetermineAvgTime */56),g=r(v),y=n(/*! ../vsBracketMethods/baseMethods/DetermineWinChance */58),_=r(y),b=n(/*! ../../static/Settings */16),w=r(b)},/*!*************************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/DetermineBracket.js ***!
  \*************************************************************************/
function(t,e){"use strict";function n(t,e,n){return e="VS"==n?e:e/2,t<=e/2?"startBracket":t<e&&t>e/2?"winnerBracket":t>e&&t<2*(e-1)?"loserBracket":"specialBracket"}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!*****************************************!*\
  !*** ./~/create-react-class/factory.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t}function i(t,e,n){function i(t,e){var n=y.hasOwnProperty(e)?y[e]:null;S.hasOwnProperty(e)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function o(t,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,o=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(t,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var s=n[a],l=r.hasOwnProperty(a);if(i(l,a),b.hasOwnProperty(a))b[a](t,s);else{var h=y.hasOwnProperty(a),p="function"==typeof s,m=p&&!h&&!l&&n.autobind!==!1;if(m)o.push(a,s),r[a]=s;else if(l){var v=y[a];u(h&&("DEFINE_MANY_MERGED"===v||"DEFINE_MANY"===v),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,a),"DEFINE_MANY_MERGED"===v?r[a]=f(r[a],s):"DEFINE_MANY"===v&&(r[a]=d(r[a],s))}else r[a]=s}}}else;}function l(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in b;u(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in t;if(o){var a=_.hasOwnProperty(n)?_[n]:null;return u("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],r))}t[n]=r}}}function h(t,e){u(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(u(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function d(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function p(t,e){var n=e.bind(t);return n}function m(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=p(t,i)}}function v(t){var e=r(function(t,r,i){this.__reactAutoBindPairs.length&&m(this),this.props=t,this.context=r,this.refs=s,this.updater=i||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;u("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=o});e.prototype=new C,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],g.forEach(o.bind(null,e)),o(e,w),o(e,t),o(e,E),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),u(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var i in y)e.prototype[i]||(e.prototype[i]=null);return e}var g=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},b={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)o(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=a({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=a({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=a({},t.propTypes,e)},statics:function(t,e){l(t,e)},autobind:function(){}},w={componentDidMount:function(){this.__isMounted=!0}},E={componentWillUnmount:function(){this.__isMounted=!1}},S={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},C=function(){};return a(C.prototype,t.prototype,S),v}var o,a=n(/*! object-assign */5),s=n(/*! fbjs/lib/emptyObject */34),u=n(/*! fbjs/lib/invariant */2),c="mixins";o={},t.exports=i},/*!*************************************!*\
  !*** ./~/fbjs/lib/EventListener.js ***!
  \*************************************/
function(t,e,n){"use strict";var r=n(/*! ./emptyFunction */12),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},/*!*********************************!*\
  !*** ./~/fbjs/lib/focusNode.js ***!
  \*********************************/
function(t,e){"use strict";function n(t){try{t.focus()}catch(t){}}t.exports=n},/*!****************************************!*\
  !*** ./~/fbjs/lib/getActiveElement.js ***!
  \****************************************/
function(t,e){"use strict";function n(t){if(t=t||("undefined"!=typeof document?document:void 0),"undefined"==typeof t)return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=n},/*!******************************************!*\
  !*** ./~/history/lib/DOMStateStorage.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return u+t}function o(t,e){try{null==e?window.sessionStorage.removeItem(i(t)):window.sessionStorage.setItem(i(t),JSON.stringify(e))}catch(t){if(t.name===l)return;if(c.indexOf(t.name)>=0&&0===window.sessionStorage.length)return;throw t}}function a(t){var e=void 0;try{e=window.sessionStorage.getItem(i(t))}catch(t){if(t.name===l)return null}if(e)try{return JSON.parse(e)}catch(t){}return null}e.__esModule=!0,e.saveState=o,e.readState=a;var s=n(/*! warning */15),u=(r(s),"@@History/"),c=["QuotaExceededError","QUOTA_EXCEEDED_ERR"],l="SecurityError"},/*!*******************************************!*\
  !*** ./~/history/lib/createDOMHistory.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){function e(t){return u.canUseDOM?void 0:s.default(!1),n.listen(t)}var n=h.default(o({getUserConfirmation:c.getUserConfirmation},t,{go:c.go}));return o({},n,{listen:e})}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(/*! invariant */10),s=r(a),u=n(/*! ./ExecutionEnvironment */45),c=n(/*! ./DOMUtils */61),l=n(/*! ./createHistory */106),h=r(l);e.default=i,t.exports=e.default},/*!********************************************!*\
  !*** ./~/history/lib/createHashHistory.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"string"==typeof t&&"/"===t.charAt(0)}function o(){var t=g.getHashPath();return!!i(t)||(g.replaceHashPath("/"+t),!1)}function a(t,e,n){return t+(t.indexOf("?")===-1?"?":"&")+(e+"="+n)}function s(t,e){return t.replace(new RegExp("[?&]?"+e+"=[a-zA-Z0-9]+"),"")}function u(t,e){var n=t.match(new RegExp("\\?.*?\\b"+e+"=(.+?)\\b"));return n&&n[1]}function c(){function t(){var t=g.getHashPath(),e=void 0,n=void 0;I?(e=u(t,I),t=s(t,I),e?n=y.readState(e):(n=null,e=P.createKey(),g.replaceHashPath(a(t,I,e)))):e=n=null;var r=m.parsePath(t);return P.createLocation(l({},r,{state:n}),void 0,e)}function e(e){function n(){o()&&r(t())}var r=e.transitionTo;return o(),g.addEventListener(window,"hashchange",n),function(){g.removeEventListener(window,"hashchange",n)}}function n(t){var e=t.basename,n=t.pathname,r=t.search,i=t.state,o=t.action,s=t.key;if(o!==p.POP){var u=(e||"")+n+r;I?(u=a(u,I,s),y.saveState(s,i)):t.key=t.state=null;var c=g.getHashPath();o===p.PUSH?c!==u&&(window.location.hash=u):c!==u&&g.replaceHashPath(u)}}function r(t){1===++N&&(O=e(P));var n=P.listenBefore(t);return function(){n(),0===--N&&O()}}function i(t){1===++N&&(O=e(P));var n=P.listen(t);return function(){n(),0===--N&&O()}}function c(t){P.push(t)}function h(t){P.replace(t)}function f(t){P.go(t)}function _(t){return"#"+P.createHref(t)}function E(t){1===++N&&(O=e(P)),P.registerTransitionHook(t)}function S(t){P.unregisterTransitionHook(t),0===--N&&O()}function C(t,e){P.pushState(t,e)}function T(t,e){P.replaceState(t,e)}var k=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];v.canUseDOM?void 0:d.default(!1);var I=k.queryKey;(void 0===I||I)&&(I="string"==typeof I?I:w);var P=b.default(l({},k,{getCurrentLocation:t,finishTransition:n,saveState:y.saveState})),N=0,O=void 0;g.supportsGoWithoutReloadUsingHash();return l({},P,{listenBefore:r,listen:i,push:c,replace:h,go:f,createHref:_,registerTransitionHook:E,unregisterTransitionHook:S,pushState:C,replaceState:T})}e.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=n(/*! warning */15),f=(r(h),n(/*! invariant */10)),d=r(f),p=n(/*! ./Actions */26),m=n(/*! ./PathUtils */21),v=n(/*! ./ExecutionEnvironment */45),g=n(/*! ./DOMUtils */61),y=n(/*! ./DOMStateStorage */103),_=n(/*! ./createDOMHistory */104),b=r(_),w="_k";e.default=c,t.exports=e.default},/*!****************************************!*\
  !*** ./~/history/lib/createHistory.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return Math.random().toString(36).substr(2,t)}function o(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.key===e.key&&l.default(t.state,e.state)}function a(){function t(t){return U.push(t),function(){U=U.filter(function(e){return e!==t})}}function e(){return V&&V.action===d.POP?B.indexOf(V.key):j?B.indexOf(j.key):-1}function n(t){var n=e();j=t,j.action===d.PUSH?B=[].concat(B.slice(0,n+1),[j.key]):j.action===d.REPLACE&&(B[n]=j.key),K.forEach(function(t){t(j)})}function r(t){if(K.push(t),j)t(j);else{var e=x();B=[e.key],n(e)}return function(){K=K.filter(function(e){return e!==t})}}function a(t,e){f.loopAsync(U.length,function(e,n,r){g.default(U[e],t,function(t){null!=t?r(t):n()})},function(t){L&&"string"==typeof t?L(t,function(t){e(t!==!1)}):e(t!==!1)})}function u(t){j&&o(j,t)||(V=t,a(t,function(e){if(V===t)if(e){if(t.action===d.PUSH){var r=E(j),i=E(t);i===r&&l.default(j.state,t.state)&&(t.action=d.REPLACE)}R(t)!==!1&&n(t)}else if(j&&t.action===d.POP){var o=B.indexOf(j.key),a=B.indexOf(t.key);o!==-1&&a!==-1&&M(o-a)}}))}function c(t){u(C(t,d.PUSH,w()))}function p(t){u(C(t,d.REPLACE,w()))}function v(){M(-1)}function y(){M(1)}function w(){return i(F)}function E(t){if(null==t||"string"==typeof t)return t;var e=t.pathname,n=t.search,r=t.hash,i=e;return n&&(i+=n),r&&(i+=r),i}function S(t){return E(t)}function C(t,e){var n=arguments.length<=2||void 0===arguments[2]?w():arguments[2];return"object"==typeof e&&("string"==typeof t&&(t=h.parsePath(t)),t=s({},t,{state:e}),e=n,n=arguments[3]||w()),m.default(t,e,n)}function T(t){j?(k(j,t),n(j)):k(x(),t)}function k(t,e){t.state=s({},t.state,e),D(t.key,t.state)}function I(t){U.indexOf(t)===-1&&U.push(t)}function P(t){U=U.filter(function(e){return e!==t})}function N(t,e){"string"==typeof e&&(e=h.parsePath(e)),c(s({state:t},e))}function O(t,e){"string"==typeof e&&(e=h.parsePath(e)),p(s({state:t},e))}var A=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],x=A.getCurrentLocation,R=A.finishTransition,D=A.saveState,M=A.go,L=A.getUserConfirmation,F=A.keyLength;"number"!=typeof F&&(F=b);var U=[],B=[],K=[],j=void 0,V=void 0;return{listenBefore:t,listen:r,transitionTo:u,push:c,replace:p,go:M,goBack:v,goForward:y,createKey:w,createPath:E,createHref:S,createLocation:C,setState:_.default(T,"setState is deprecated; use location.key to save state instead"),registerTransitionHook:_.default(I,"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:_.default(P,"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead"),pushState:_.default(N,"pushState is deprecated; use push instead"),replaceState:_.default(O,"replaceState is deprecated; use replace instead")}}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(/*! warning */15),c=(r(u),n(/*! deep-equal */213)),l=r(c),h=n(/*! ./PathUtils */21),f=n(/*! ./AsyncUtils */229),d=n(/*! ./Actions */26),p=n(/*! ./createLocation */231),m=r(p),v=n(/*! ./runTransitionHook */63),g=r(v),y=n(/*! ./deprecate */62),_=r(y),b=6;e.default=a,t.exports=e.default},/*!**************************************!*\
  !*** ./~/history/lib/useBasename.js ***!
  \**************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){function e(){if(!w){if(null==b&&s.canUseDOM){var t=document.getElementsByTagName("base")[0],e=t&&t.getAttribute("href");null!=e&&(b=e)}w=!0}}function n(t){return e(),b&&null==t.basename&&(0===t.pathname.indexOf(b)?(t.pathname=t.pathname.substring(b.length),t.basename=b,""===t.pathname&&(t.pathname="/")):t.basename=""),t}function r(t){if(e(),!b)return t;"string"==typeof t&&(t=u.parsePath(t));var n=t.pathname,r="/"===b.slice(-1)?b:b+"/",i="/"===n.charAt(0)?n.slice(1):n,a=r+i;return o({},t,{pathname:a})}function i(t){return _.listenBefore(function(e,r){l.default(t,n(e),r)})}function a(t){return _.listen(function(e){t(n(e))})}function c(t){_.push(r(t))}function h(t){_.replace(r(t))}function d(t){return _.createPath(r(t))}function p(t){return _.createHref(r(t))}function m(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];return n(_.createLocation.apply(_,[r(t)].concat(i)))}function v(t,e){"string"==typeof e&&(e=u.parsePath(e)),c(o({state:t},e))}function g(t,e){"string"==typeof e&&(e=u.parsePath(e)),h(o({state:t},e))}var y=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_=t(y),b=y.basename,w=!1;return o({},_,{listenBefore:i,listen:a,push:c,replace:h,createPath:d,createHref:p,createLocation:m,pushState:f.default(v,"pushState is deprecated; use push instead"),replaceState:f.default(g,"replaceState is deprecated; use replace instead")})}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(/*! warning */15),s=(r(a),n(/*! ./ExecutionEnvironment */45)),u=n(/*! ./PathUtils */21),c=n(/*! ./runTransitionHook */63),l=r(c),h=n(/*! ./deprecate */62),f=r(h);e.default=i,t.exports=e.default},/*!*********************************!*\
  !*** ./~/prop-types/factory.js ***!
  \*********************************/
function(t,e,n){"use strict";var r=n(/*! ./factoryWithTypeCheckers */236);t.exports=function(t){var e=!1;return r(t,e)}},/*!**************************************************!*\
  !*** ./~/prop-types/lib/ReactPropTypesSecret.js ***!
  \**************************************************/
function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},/*!****************************************!*\
  !*** ./~/react-dom/lib/CSSProperty.js ***!
  \****************************************/
function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){i.forEach(function(e){r[n(e,t)]=r[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=a},/*!******************************************!*\
  !*** ./~/react-dom/lib/CallbackQueue.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(/*! ./reactProdInvariant */4),o=n(/*! ./PooledClass */22),a=(n(/*! fbjs/lib/invariant */2),function(){function t(e){r(this,t),this._callbacks=null,this._contexts=null,this._arg=e}return t.prototype.enqueue=function(t,e){this._callbacks=this._callbacks||[],this._callbacks.push(t),this._contexts=this._contexts||[],this._contexts.push(e)},t.prototype.notifyAll=function(){var t=this._callbacks,e=this._contexts,n=this._arg;if(t&&e){t.length!==e.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<t.length;r++)t[r].call(e[r],n);t.length=0,e.length=0}},t.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},t.prototype.rollback=function(t){this._callbacks&&this._contexts&&(this._callbacks.length=t,this._contexts.length=t)},t.prototype.reset=function(){this._callbacks=null,this._contexts=null},t.prototype.destructor=function(){this.reset()},t}());t.exports=o.addPoolingTo(a)},/*!**************************************************!*\
  !*** ./~/react-dom/lib/DOMPropertyOperations.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t){return!!c.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(s.test(t)?(c[t]=!0,!0):(u[t]=!0,!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var o=n(/*! ./DOMProperty */28),a=(n(/*! ./ReactDOMComponentTree */7),n(/*! ./ReactInstrumentation */13),n(/*! ./quoteAttributeValueForBrowser */299)),s=(n(/*! fbjs/lib/warning */3),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},c={},l={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){if(i(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?r+'=""':r+"="+a(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var r=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(r){var a=r.mutationMethod;if(a)a(t,n);else{if(i(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?t.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(e))return void l.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(r(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?t[i]=!1:t[i]=""}else t.removeAttribute(n.attributeName)}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=l},/*!***************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMComponentFlags.js ***!
  \***************************************************/
function(t,e){"use strict";var n={hasCachedChildNodes:1};t.exports=n},/*!*******************************************!*\
  !*** ./~/react-dom/lib/ReactDOMSelect.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=s.getValue(t);null!=e&&i(this,Boolean(t.multiple),e)}}function i(t,e,n){var r,i,o=u.getNodeFromInstance(t).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(/*! object-assign */5),s=n(/*! ./LinkedValueUtils */70),u=n(/*! ./ReactDOMComponentTree */7),c=n(/*! ./ReactUpdates */14),l=(n(/*! fbjs/lib/warning */3),!1),h={getHostProps:function(t,e){return a({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=s.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:o.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||l||(l=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=s.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,i(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?i(t,Boolean(e.multiple),e.defaultValue):i(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=h},/*!************************************************!*\
  !*** ./~/react-dom/lib/ReactEmptyComponent.js ***!
  \************************************************/
function(t,e){"use strict";var n,r={injectEmptyComponentFactory:function(t){n=t}},i={create:function(t){return n(t)}};i.injection=r,t.exports=i},/*!**********************************************!*\
  !*** ./~/react-dom/lib/ReactFeatureFlags.js ***!
  \**********************************************/
function(t,e){"use strict";var n={logTopLevelRenders:!1};t.exports=n},/*!***********************************************!*\
  !*** ./~/react-dom/lib/ReactHostComponent.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return s?void 0:a("111",t.type),new s(t)}function i(t){return new u(t)}function o(t){return t instanceof u}var a=n(/*! ./reactProdInvariant */4),s=(n(/*! fbjs/lib/invariant */2),null),u=null,c={injectGenericComponentClass:function(t){s=t},injectTextComponentClass:function(t){u=t}},l={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:c};t.exports=l},/*!************************************************!*\
  !*** ./~/react-dom/lib/ReactInputSelection.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=n(/*! ./ReactDOMSelection */260),o=n(/*! fbjs/lib/containsNode */218),a=n(/*! fbjs/lib/focusNode */101),s=n(/*! fbjs/lib/getActiveElement */102),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=u},/*!***************************************!*\
  !*** ./~/react-dom/lib/ReactMount.js ***!
  \***************************************/
function(t,e,n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===D?t.documentElement:t.firstChild:null}function o(t){return t.getAttribute&&t.getAttribute(A)||""}function a(t,e,n,r,i){var o;if(w.logTopLevelRenders){var a=t._currentElement.props.child,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var u=C.mountComponent(t,n,null,_(t,e),i,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,B._mountImageIntoNode(u,e,t,r,n)}function s(t,e,n,r){var i=k.ReactReconcileTransaction.getPooled(!n&&b.useCreateElement);i.perform(a,null,t,e,i,n,r),k.ReactReconcileTransaction.release(i)}function u(t,e,n){for(C.unmountComponent(t,n),e.nodeType===D&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function c(t){var e=i(t);if(e){var n=y.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function l(t){return!(!t||t.nodeType!==R&&t.nodeType!==D&&t.nodeType!==M)}function h(t){var e=i(t),n=e&&y.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function f(t){var e=h(t);return e?e._hostContainerInfo._topLevelWrapper:null}var d=n(/*! ./reactProdInvariant */4),p=n(/*! ./DOMLazyTree */27),m=n(/*! ./DOMProperty */28),v=n(/*! react/lib/React */24),g=n(/*! ./ReactBrowserEventEmitter */47),y=(n(/*! react/lib/ReactCurrentOwner */18),n(/*! ./ReactDOMComponentTree */7)),_=n(/*! ./ReactDOMContainerInfo */254),b=n(/*! ./ReactDOMFeatureFlags */256),w=n(/*! ./ReactFeatureFlags */116),E=n(/*! ./ReactInstanceMap */29),S=(n(/*! ./ReactInstrumentation */13),n(/*! ./ReactMarkupChecksum */270)),C=n(/*! ./ReactReconciler */30),T=n(/*! ./ReactUpdateQueue */73),k=n(/*! ./ReactUpdates */14),I=n(/*! fbjs/lib/emptyObject */34),P=n(/*! ./instantiateReactComponent */128),N=(n(/*! fbjs/lib/invariant */2),n(/*! ./setInnerHTML */51)),O=n(/*! ./shouldUpdateReactComponent */79),A=(n(/*! fbjs/lib/warning */3),m.ID_ATTRIBUTE_NAME),x=m.ROOT_ATTRIBUTE_NAME,R=1,D=9,M=11,L={},F=1,U=function(){this.rootID=F++};U.prototype.isReactComponent={},U.prototype.render=function(){return this.props.child},U.isReactTopLevelWrapper=!0;var B={TopLevelWrapper:U,_instancesByReactRootID:L,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,i){return B.scrollMonitor(r,function(){T.enqueueElementInternal(t,e,n),i&&T.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,n,r){l(e)?void 0:d("37"),g.ensureScrollValueMonitoring();var i=P(t,!1);k.batchedUpdates(s,i,e,n,r);var o=i._instance.rootID;return L[o]=i,i},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&E.has(t)?void 0:d("38"),B._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){T.validateCallback(r,"ReactDOM.render"),v.isValidElement(e)?void 0:d("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=v.createElement(U,{child:e});if(t){var u=E.get(t);a=u._processChildContext(u._context)}else a=I;var l=f(n);if(l){var h=l._currentElement,p=h.props.child;if(O(p,e)){var m=l._renderedComponent.getPublicInstance(),g=r&&function(){r.call(m)};return B._updateRootComponent(l,s,a,n,g),m}B.unmountComponentAtNode(n)}var y=i(n),_=y&&!!o(y),b=c(n),w=_&&!l&&!b,S=B._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return r&&r.call(S),S},render:function(t,e,n){return B._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){l(t)?void 0:d("40");var e=f(t);if(!e){c(t),1===t.nodeType&&t.hasAttribute(x);return!1}return delete L[e._instance.rootID],k.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,o,a){if(l(e)?void 0:d("41"),o){var s=i(e);if(S.canReuseMarkup(t,s))return void y.precacheNode(n,s);var u=s.getAttribute(S.CHECKSUM_ATTR_NAME);s.removeAttribute(S.CHECKSUM_ATTR_NAME);var c=s.outerHTML;s.setAttribute(S.CHECKSUM_ATTR_NAME,u);var h=t,f=r(h,c),m=" (client) "+h.substring(f-20,f+20)+"\n (server) "+c.substring(f-20,f+20);e.nodeType===D?d("42",m):void 0}if(e.nodeType===D?d("43"):void 0,a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);p.insertTreeBefore(e,t,null)}else N(e,t),y.precacheNode(n,e.firstChild)}};t.exports=B},/*!********************************************!*\
  !*** ./~/react-dom/lib/ReactMultiChild.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t,e,n){return{type:"INSERT_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:"MOVE_EXISTING",content:null,fromIndex:t._mountIndex,fromNode:f.getHostNode(t),toIndex:n,afterNode:e}}function o(t,e){return{type:"REMOVE_NODE",content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function c(t,e){h.processChildrenUpdates(t,e)}var l=n(/*! ./reactProdInvariant */4),h=n(/*! ./ReactComponentEnvironment */71),f=(n(/*! ./ReactInstanceMap */29),n(/*! ./ReactInstrumentation */13),n(/*! react/lib/ReactCurrentOwner */18),n(/*! ./ReactReconciler */30)),d=n(/*! ./ReactChildReconciler */249),p=(n(/*! fbjs/lib/emptyFunction */12),n(/*! ./flattenChildren */294)),m=(n(/*! fbjs/lib/invariant */2),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return d.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,r,i,o){var a,s=0;return a=p(e,s),d.updateChildren(t,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,c=f.mountComponent(s,e,this,this._hostContainerInfo,n,u);s._mountIndex=o++,i.push(c)}return i},updateTextContent:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");var r=[s(t)];c(this,r)},updateMarkup:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");var r=[a(t)];c(this,r)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,t,o,i,e,n);if(a||r){var s,l=null,h=0,d=0,p=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=r&&r[s],g=a[s];v===g?(l=u(l,this.moveChild(v,m,h,d)),d=Math.max(v._mountIndex,d),v._mountIndex=h):(v&&(d=Math.max(v._mountIndex,d)),l=u(l,this._mountChildAtIndex(g,o[p],m,h,e,n)),p++),h++,m=f.getHostNode(g)}for(s in i)i.hasOwnProperty(s)&&(l=u(l,this._unmountChild(r[s],i[s])));l&&c(this,l),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;d.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return i(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return o(t,e)},_mountChildAtIndex:function(t,e,n,r,i,o){return t._mountIndex=r,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=m},/*!*******************************************!*\
  !*** ./~/react-dom/lib/ReactNodeTypes.js ***!
  \*******************************************/
function(t,e,n){"use strict";var r=n(/*! ./reactProdInvariant */4),i=n(/*! react/lib/React */24),o=(n(/*! fbjs/lib/invariant */2),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?o.EMPTY:i.isValidElement(t)?"function"==typeof t.type?o.COMPOSITE:o.HOST:void r("26",t)}});t.exports=o},/*!********************************************!*\
  !*** ./~/react-dom/lib/ViewportMetrics.js ***!
  \********************************************/
function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},/*!*******************************************!*\
  !*** ./~/react-dom/lib/accumulateInto.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t,e){return null==e?i("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=n(/*! ./reactProdInvariant */4);n(/*! fbjs/lib/invariant */2);t.exports=r},/*!***********************************************!*\
  !*** ./~/react-dom/lib/forEachAccumulated.js ***!
  \***********************************************/
function(t,e){"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},/*!**********************************************************!*\
  !*** ./~/react-dom/lib/getHostComponentFromComposite.js ***!
  \**********************************************************/
function(t,e,n){"use strict";function r(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=n(/*! ./ReactNodeTypes */121);t.exports=r},/*!***************************************************!*\
  !*** ./~/react-dom/lib/getTextContentAccessor.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(/*! fbjs/lib/ExecutionEnvironment */11),o=null;t.exports=r},/*!***********************************************!*\
  !*** ./~/react-dom/lib/inputValueTracking.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){var e=t.type,n=t.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===e||"radio"===e)}function i(t){return t._wrapperState.valueTracker}function o(t,e){t._wrapperState.valueTracker=e}function a(t){t._wrapperState.valueTracker=null}function s(t){var e;return t&&(e=r(t)?""+t.checked:t.value),e}var u=n(/*! ./ReactDOMComponentTree */7),c={_getTrackerFromNode:function(t){return i(u.getInstanceFromNode(t))},track:function(t){if(!i(t)){var e=u.getNodeFromInstance(t),n=r(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];e.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(e,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(t){c=""+t,s.set.call(this,t)}}),o(t,{getValue:function(){return c},setValue:function(t){c=""+t},stopTracking:function(){a(t),delete e[n]}}))}},updateValueIfChanged:function(t){if(!t)return!1;var e=i(t);if(!e)return c.track(t),!0;var n=e.getValue(),r=s(u.getNodeFromInstance(t));return r!==n&&(e.setValue(r),!0)},stopTracking:function(t){var e=i(t);e&&e.stopTracking()}};t.exports=c},/*!******************************************************!*\
  !*** ./~/react-dom/lib/instantiateReactComponent.js ***!
  \******************************************************/
function(t,e,n){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t,e){var n;if(null===t||t===!1)n=c.create(o);else if("object"==typeof t){var s=t,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var f="";f+=r(s._owner),a("130",null==u?u:typeof u,f)}"string"==typeof s.type?n=l.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof t||"number"==typeof t?n=l.createInstanceForText(t):a("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}var a=n(/*! ./reactProdInvariant */4),s=n(/*! object-assign */5),u=n(/*! ./ReactCompositeComponent */251),c=n(/*! ./ReactEmptyComponent */115),l=n(/*! ./ReactHostComponent */117),h=(n(/*! react/lib/getNextDebugID */333),n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),function(t){this.construct(t)});s(h.prototype,u,{_instantiateReactComponent:o}),t.exports=o},/*!***********************************************!*\
  !*** ./~/react-dom/lib/isTextInputElement.js ***!
  \***********************************************/
function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!r[t.type]:"textarea"===e}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},/*!*******************************************!*\
  !*** ./~/react-dom/lib/setTextContent.js ***!
  \*******************************************/
function(t,e,n){"use strict";var r=n(/*! fbjs/lib/ExecutionEnvironment */11),i=n(/*! ./escapeTextContentForBrowser */50),o=n(/*! ./setInnerHTML */51),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){return 3===t.nodeType?void(t.nodeValue=e):void o(t,i(e))})),t.exports=a},/*!************************************************!*\
  !*** ./~/react-dom/lib/traverseAllChildren.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var f=typeof t;if("undefined"!==f&&"boolean"!==f||(t=null),null===t||"string"===f||"number"===f||"object"===f&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var d,p,m=0,v=""===e?l:e+h;if(Array.isArray(t))for(var g=0;g<t.length;g++)d=t[g],p=v+r(d,g),m+=i(d,p,n,o);else{var y=u(t);if(y){var _,b=y.call(t);if(y!==t.entries)for(var w=0;!(_=b.next()).done;)d=_.value,p=v+r(d,w++),m+=i(d,p,n,o);else for(;!(_=b.next()).done;){var E=_.value;E&&(d=E[1],p=v+c.escape(E[0])+h+r(d,0),m+=i(d,p,n,o))}}else if("object"===f){var S="",C=String(t);a("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,S)}}return m}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(/*! ./reactProdInvariant */4),s=(n(/*! react/lib/ReactCurrentOwner */18),n(/*! ./ReactElementSymbol */266)),u=n(/*! ./getIteratorFn */296),c=(n(/*! fbjs/lib/invariant */2),n(/*! ./KeyEscapeUtils */69)),l=(n(/*! fbjs/lib/warning */3),"."),h=":";t.exports=o},/*!************************************!*\
  !*** ./~/react-router/lib/Link.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){return 0===t.button}function a(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function u(t,e){var n=e.query,r=e.hash,i=e.state;return n||r||i?{pathname:t,query:n,hash:r,state:i}:t}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=n(/*! react */1),h=r(l),f=n(/*! ./routerWarning */9),d=(r(f),n(/*! invariant */10)),p=r(d),m=n(/*! ./PropTypes */82),v=h.default.PropTypes,g=v.bool,y=v.object,_=v.string,b=v.func,w=v.oneOfType,E=h.default.createClass({displayName:"Link",contextTypes:{router:m.routerShape},propTypes:{to:w([_,y]),query:y,hash:_,state:y,activeStyle:y,activeClassName:_,onlyActiveOnIndex:g.isRequired,onClick:b,target:_},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(t){if(this.props.onClick&&this.props.onClick(t),!t.defaultPrevented&&(this.context.router?void 0:(0,p.default)(!1),!a(t)&&o(t)&&!this.props.target)){t.preventDefault();var e=this.props,n=e.to,r=e.query,i=e.hash,s=e.state,c=u(n,{query:r,hash:i,state:s});this.context.router.push(c)}},render:function(){var t=this.props,e=t.to,n=t.query,r=t.hash,o=t.state,a=t.activeClassName,l=t.activeStyle,f=t.onlyActiveOnIndex,d=i(t,["to","query","hash","state","activeClassName","activeStyle","onlyActiveOnIndex"]),p=this.context.router;if(p){if(null==e)return h.default.createElement("a",d);var m=u(e,{query:n,hash:r,state:o});d.href=p.createHref(m),(a||null!=l&&!s(l))&&p.isActive(m,f)&&(a&&(d.className?d.className+=" "+a:d.className=a),l&&(d.style=c({},d.style,l)))}return h.default.createElement("a",c({},d,{onClick:this.handleClick}))}});e.default=E,t.exports=e.default},/*!****************************************!*\
  !*** ./~/react-router/lib/Redirect.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! react */1),o=r(i),a=n(/*! invariant */10),s=r(a),u=n(/*! ./RouteUtils */19),c=n(/*! ./PatternUtils */31),l=n(/*! ./InternalPropTypes */23),h=o.default.PropTypes,f=h.string,d=h.object,p=o.default.createClass({displayName:"Redirect",statics:{createRouteFromReactElement:function(t){var e=(0,u.createRouteFromReactElement)(t);return e.from&&(e.path=e.from),e.onEnter=function(t,n){var r=t.location,i=t.params,o=void 0;if("/"===e.to.charAt(0))o=(0,c.formatPattern)(e.to,i);else if(e.to){var a=t.routes.indexOf(e),s=p.getRoutePattern(t.routes,a-1),u=s.replace(/\/*$/,"/")+e.to;o=(0,c.formatPattern)(u,i)}else o=r.pathname;n({pathname:o,query:e.query||r.query,state:e.state||r.state})},e},getRoutePattern:function(t,e){for(var n="",r=e;r>=0;r--){var i=t[r],o=i.path||"";if(n=o.replace(/\/*$/,"/")+n,0===o.indexOf("/"))break}return"/"+n}},propTypes:{path:f,from:f,to:f.isRequired,query:d,state:d,onEnter:l.falsy,children:l.falsy},render:function(){(0,s.default)(!1)}});e.default=p,t.exports=e.default},/*!*******************************************!*\
  !*** ./~/react-router/lib/RouterUtils.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return a({},t,{setRouteLeaveHook:e.listenBeforeLeavingRoute,isActive:e.isActive})}function o(t,e){return t=a({},t,e)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.createRouterObject=i,e.createRoutingHistory=o;var s=n(/*! ./deprecateObjectProperties */53);r(s)},/*!***************************************************!*\
  !*** ./~/react-router/lib/createMemoryHistory.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=(0,l.default)(t),n=function(){return e},r=(0,a.default)((0,u.default)(n))(t);return r.__v2_compatible__=!0,r}e.__esModule=!0,e.default=i;var o=n(/*! history/lib/useQueries */46),a=r(o),s=n(/*! history/lib/useBasename */107),u=r(s),c=n(/*! history/lib/createMemoryHistory */232),l=r(c);t.exports=e.default},/*!***************************************************!*\
  !*** ./~/react-router/lib/createRouterHistory.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){var e=void 0;return a&&(e=(0,o.default)(t)()),e};var i=n(/*! ./useRouterHistory */138),o=r(i),a=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=e.default},/*!*****************************************************!*\
  !*** ./~/react-router/lib/makeStateWithLocation.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return o({},t,e)}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=i;var a=(n(/*! ./deprecateObjectProperties */53),n(/*! ./routerWarning */9));r(a);t.exports=e.default},/*!************************************************!*\
  !*** ./~/react-router/lib/useRouterHistory.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(e){var n=(0,a.default)((0,u.default)(t))(e);return n.__v2_compatible__=!0,n}}e.__esModule=!0,e.default=i;var o=n(/*! history/lib/useQueries */46),a=r(o),s=n(/*! history/lib/useBasename */107),u=r(s);t.exports=e.default},/*!***************************************************!*\
  !*** ./~/react-skylight/lib/skylightstateless.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(/*! react */1),l=r(c),h=n(/*! prop-types */64),f=r(h),d=n(/*! ./styles */323),p=r(d),m=n(/*! ./utils/assign */324),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"componentWillMount",value:function(){document.addEventListener("keydown",this._handlerEsc.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handlerEsc.bind(this))}},{key:"_handlerEsc",value:function(t){var e=!1;e="key"in t?"Escape"==t.key||"Esc"==t.key:27==t.keyCode,e&&this.props.closeOnEsc&&this.props.isVisible&&this.props.onCloseClicked()}},{key:"onOverlayClicked",value:function(){this.props.onOverlayClicked&&this.props.onOverlayClicked()}},{key:"onCloseClicked",value:function(){this.props.onCloseClicked&&this.props.onCloseClicked()}},{key:"render",value:function(){var t=this,e=function(e){return(0,v.default)({},p.default[e],t.props[e])},n=this.props.isVisible,r=e("dialogStyles"),i=e("overlayStyles"),o=e("closeButtonStyle"),a=e("titleStyle"),s=void 0;n?(s=(0,v.default)({},r,p.default.animationOpen),i.display="block"):(s=(0,v.default)({},r,p.default.animationBase),i.display="none"),s.transitionDuration=this.props.transitionDuration+"ms",i.transitionDuration=this.props.transitionDuration+"ms";var u=void 0;this.props.showOverlay&&(u=l.default.createElement("div",{className:"skylight-overlay",onClick:function(){return t.onOverlayClicked()},style:i}));var c=void 0;return c=l.default.isValidElement(this.props.title)?this.props.title:this.props.title?l.default.createElement("h2",{style:a},this.props.title):null,l.default.createElement("section",{className:"skylight-wrapper"},u,l.default.createElement("div",{className:"skylight-dialog",style:s},l.default.createElement("a",{role:"button",className:"skylight-close-button",onClick:function(){return t.onCloseClicked()},style:o},""),c,this.props.children))}}]),e}(l.default.Component);e.default=g,g.displayName="SkyLightStateless",g.sharedPropTypes={closeButtonStyle:f.default.object,dialogStyles:f.default.object,onCloseClicked:f.default.func,onOverlayClicked:f.default.func,overlayStyles:f.default.object,showOverlay:f.default.bool,title:f.default.any,transitionDuration:f.default.number,titleStyle:f.default.object,closeOnEsc:f.default.bool},g.propTypes=s({},g.sharedPropTypes,{isVisible:f.default.bool}),g.defaultProps={title:"",showOverlay:!0,overlayStyles:p.default.overlayStyles,dialogStyles:p.default.dialogStyles,closeButtonStyle:p.default.closeButtonStyle,transitionDuration:200,closeOnEsc:!0}},/*!*****************************************!*\
  !*** ./~/react/lib/ReactBaseClasses.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function i(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function o(){}var a=n(/*! ./reactProdInvariant */40),s=n(/*! object-assign */5),u=n(/*! ./ReactNoopUpdateQueue */143),c=(n(/*! ./canDefineProperty */144),n(/*! fbjs/lib/emptyObject */34));n(/*! fbjs/lib/invariant */2),n(/*! ./lowPriorityWarning */334);r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?a("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i,s(i.prototype,r.prototype),i.prototype.isPureReactComponent=!0,t.exports={Component:r,PureComponent:i}},/*!***********************************************!*\
  !*** ./~/react/lib/ReactComponentTreeHook.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(t){return!1}}function i(t){var e=c(t);if(e){var n=e.childIDs;l(t),n.forEach(i)}}function o(t,e,n){return"\n    in "+(t||"Unknown")+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function a(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function s(t){var e,n=T.getDisplayName(t),r=T.getElement(t),i=T.getOwnerID(t);return i&&(e=T.getDisplayName(i)),o(n,r&&r._source,e)}var u,c,l,h,f,d,p,m=n(/*! ./reactProdInvariant */40),v=n(/*! ./ReactCurrentOwner */18),g=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(g){var y=new Map,_=new Set;u=function(t,e){y.set(t,e)},c=function(t){return y.get(t)},l=function(t){y.delete(t)},h=function(){return Array.from(y.keys())},f=function(t){_.add(t)},d=function(t){_.delete(t)},p=function(){return Array.from(_.keys())}}else{var b={},w={},E=function(t){return"."+t},S=function(t){return parseInt(t.substr(1),10)};u=function(t,e){var n=E(t);b[n]=e},c=function(t){var e=E(t);return b[e]},l=function(t){var e=E(t);delete b[e]},h=function(){return Object.keys(b).map(S)},f=function(t){var e=E(t);w[e]=!0},d=function(t){var e=E(t);delete w[e]},p=function(){return Object.keys(w).map(S)}}var C=[],T={onSetChildren:function(t,e){var n=c(t);n?void 0:m("144"),n.childIDs=e;for(var r=0;r<e.length;r++){var i=e[r],o=c(i);o?void 0:m("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element?m("141"):void 0,o.isMounted?void 0:m("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t?m("142",i,o.parentID,t):void 0}},onBeforeMountComponent:function(t,e,n){var r={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};u(t,r)},onBeforeUpdateComponent:function(t,e){var n=c(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=c(t);e?void 0:m("144"),e.isMounted=!0;var n=0===e.parentID;n&&f(t)},onUpdateComponent:function(t){var e=c(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=c(t);if(e){e.isMounted=!1;var n=0===e.parentID;n&&d(t)}C.push(t)},purgeUnmountedComponents:function(){if(!T._preventPurging){for(var t=0;t<C.length;t++){var e=C[t];i(e)}C.length=0}},isMounted:function(t){var e=c(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=a(t),r=t._owner;e+=o(n,t._source,r&&r.getName())}var i=v.current,s=i&&i._debugID;return e+=T.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=s(t),t=T.getParentID(t);return e},getChildIDs:function(t){var e=c(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=T.getElement(t);return e?a(e):null},getElement:function(t){var e=c(t);return e?e.element:null},getOwnerID:function(t){var e=T.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=c(t);return e?e.parentID:null},getSource:function(t){var e=c(t),n=e?e.element:null,r=null!=n?n._source:null;return r},getText:function(t){var e=T.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=c(t);return e?e.updateCount:0},getRootIDs:p,getRegisteredIDs:h,pushNonStandardWarningStack:function(t,e){if("function"==typeof console.reactStack){var n=[],r=v.current,i=r&&r._debugID;try{for(t&&n.push({name:i?T.getDisplayName(i):null,fileName:e?e.fileName:null,lineNumber:e?e.lineNumber:null});i;){var o=T.getElement(i),a=T.getParentID(i),s=T.getOwnerID(i),u=s?T.getDisplayName(s):null,c=o&&o._source;n.push({name:u,fileName:c?c.fileName:null,lineNumber:c?c.lineNumber:null}),i=a}}catch(t){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};t.exports=T},/*!*******************************************!*\
  !*** ./~/react/lib/ReactElementSymbol.js ***!
  \*******************************************/
function(t,e){"use strict";var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=n},/*!*********************************************!*\
  !*** ./~/react/lib/ReactNoopUpdateQueue.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t,e){}var i=(n(/*! fbjs/lib/warning */3),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")}});t.exports=i},/*!******************************************!*\
  !*** ./~/react/lib/canDefineProperty.js ***!
  \******************************************/
function(t,e,n){"use strict";var r=!1;t.exports=r},/*!***************************************!*\
  !*** ./~/@firebase/auth/dist/auth.js ***!
  \***************************************/
function(t,e,n){(function(t){(function(){function t(t){return"string"==typeof t}function e(t){return"boolean"==typeof t}function r(){}function i(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function o(t){return null===t}function a(t){return"array"==i(t)}function s(t){var e=i(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"function"==i(t)}function c(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t,e,n){return t.call.apply(t.bind,arguments)}function h(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function f(t,e,n){return f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:h,f.apply(null,arguments)}function d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function p(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.cd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function m(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function v(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function g(t){if(Error.captureStackTrace)Error.captureStackTrace(this,g);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function y(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");g.call(this,n+t[r])}function _(t,e){throw new y("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function b(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function w(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function E(){this.b=this.a=null}function S(){var t=Yu,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function C(){this.next=this.b=this.a=null}function T(e,n){var r=e.length,i=t(e)?e.split(""):e;for(--r;0<=r;--r)r in i&&n.call(void 0,i[r],r,e)}function k(e){t:{for(var n=qr,r=e.length,i=t(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,e)){n=o;break t}n=-1}return 0>n?null:t(e)?e.charAt(n):e[n]}function I(t,e){return 0<=Au(t,e)}function P(t,e){e=Au(t,e);var n;return(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function N(t,e){var n=0;T(t,function(r,i){e.call(void 0,r,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&n++})}function O(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function x(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function R(t){return Vu.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(Lu,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Fu,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Uu,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Bu,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Ku,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ju,"&#0;")),t):t}function D(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}function L(t){return D(Ou,t)}function F(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function U(t){for(var e in t)return!1;return!0}function B(t){var e,n={};for(e in t)n[e]=t[e];return n}function K(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<zu.length;o++)n=zu[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function j(t){Tu.setTimeout(function(){throw t},0)}function V(){var t=Tu.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!L("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=f(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof t&&!L("Trident")&&!L("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.tb;n.tb=null,t()}},function(t){r.next={tb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){Tu.setTimeout(t,0)}}function W(t,e){Hu||G(),Qu||(Hu(),Qu=!0),Yu.add(t,e)}function G(){if(Tu.Promise&&Tu.Promise.resolve){var t=Tu.Promise.resolve(void 0);Hu=function(){t.then(q)}}else Hu=function(){var t=q;!u(Tu.setImmediate)||Tu.Window&&Tu.Window.prototype&&!L("Edge")&&Tu.Window.prototype.setImmediate==Tu.setImmediate?(qu||(qu=V()),qu(t)):Tu.setImmediate(t)}}function q(){for(var t;t=S();){try{t.a.call(t.b)}catch(t){j(t)}w(Nu,t)}Qu=!1}function H(t,e){if(this.a=Xu,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=r)try{var n=this;t.call(e,function(t){rt(n,Ju,t)},function(t){if(!(t instanceof ht))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}rt(n,$u,t)})}catch(t){rt(this,$u,t)}}function z(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function Q(t,e,n){var r=Zu.get();return r.g=t,r.b=e,r.f=n,r}function Y(t){if(t instanceof H)return t;var e=new H(r);return rt(e,Ju,t),e}function X(t){return new H(function(e,n){n(t)})}function J(t,e,n){it(t,e,n,null)||W(d(e,t))}function $(t){return new H(function(e,n){var r=t.length,i=[];if(r)for(var o,a=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],J(o,d(a,u),s);else e(i)})}function Z(t){return new H(function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],J(i,d(o,a,!0),d(o,a,!1));else e(r)})}function tt(t,e){if(t.a==Xu)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Xu&&1==r?tt(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):st(n),ut(n,i,$u,e)))}t.c=null}else rt(t,$u,e)}function et(t,e){t.b||t.a!=Ju&&t.a!=$u||at(t),t.f?t.f.next=e:t.b=e,t.f=e}function nt(t,e,n,r){var i=Q(null,null,null);return i.a=new H(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ht?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,et(t,i),i.a}function rt(t,e,n){t.a==Xu&&(t===n&&(e=$u,n=new TypeError("Promise cannot resolve to itself")),t.a=1,it(n,t.Lc,t.Mc,t)||(t.i=n,t.a=e,t.c=null,at(t),e!=$u||n instanceof ht||lt(t,n)))}function it(t,e,n,i){if(t instanceof H)return et(t,Q(e||r,n||null,i)),!0;if(v(t))return t.then(e,n,i),!0;if(c(t))try{var o=t.then;if(u(o))return ot(t,o,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function ot(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}function at(t){t.h||(t.h=!0,W(t.Ub,t))}function st(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function ut(t,e,n,r){if(n==$u&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ct(e,n,r);else try{e.c?e.g.call(e.f):ct(e,n,r)}catch(t){tc.call(null,t)}w(Zu,e)}function ct(t,e,n){e==Ju?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function lt(t,e){t.g=!0,W(function(){t.g&&tc.call(null,e)})}function ht(t){g.call(this,t)}function ft(){0!=ec&&(nc[this[ku]||(this[ku]=++Iu)]=this),this.pa=this.pa,this.ja=this.ja}function dt(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=ec)){var e=t[ku]||(t[ku]=++Iu);if(0!=ec&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete nc[e]}}function pt(t){return pt[" "](t),t}function mt(t,e){var n=pc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function vt(){var t=Tu.document;return t?t.documentMode:void 0}function gt(t){return mt(t,function(){for(var e=0,n=Mu(String(rc)).split("."),r=Mu(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}function yt(t,e){this.type=t,this.b=this.target=e,this.Gb=!0}function _t(e,n){if(yt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var r=this.type=e.type,i=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=n,n=e.relatedTarget){if(uc){t:{try{pt(n.nodeName);var o=!0;break t}catch(t){}o=!1}o||(n=null)}}else"mouseover"==r?n=e.fromElement:"mouseout"==r&&(n=e.toElement);this.relatedTarget=n,null===i?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=t(e.pointerType)?e.pointerType:bc[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}function bt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++Ec,this.na=this.Ia=!1}function wt(t){t.na=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function Et(t){this.src=t,this.a={},this.b=0}function St(t,e){var n=e.type;n in t.a&&P(t.a[n],e)&&(wt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ct(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.na&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}function Tt(t,e,n,r,i){if(r&&r.once)Pt(t,e,n,r,i);else if(a(e))for(var o=0;o<e.length;o++)Tt(t,e[o],n,r,i);else n=Lt(n),t&&t[wc]?Ut(t,e,n,c(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=c(i)?!!i.capture:!!i,s=Mt(t);if(s||(t[Sc]=s=new Et(t)),n=s.add(e,n,r,a,o),!n.proxy){if(r=It(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_c||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(At(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}Tc++}}function It(){var t=Dt,e=gc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Pt(t,e,n,r,i){if(a(e))for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);else n=Lt(n),t&&t[wc]?Bt(t,e,n,c(r)?!!r.capture:!!r,i):kt(t,e,n,!0,r,i)}function Nt(t,e,n,r,i){if(a(e))for(var o=0;o<e.length;o++)Nt(t,e[o],n,r,i);else r=c(r)?!!r.capture:!!r,n=Lt(n),t&&t[wc]?(t=t.m,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Ct(o,n,r,i),-1<n&&(wt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Mt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ct(e,n,r,i)),(n=-1<t?e[t]:null)&&Ot(n))}function Ot(t){if("number"!=typeof t&&t&&!t.na){var e=t.src;if(e&&e[wc])St(e.m,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(At(n),r):e.addListener&&e.removeListener&&e.removeListener(r),Tc--,(n=Mt(e))?(St(n,t),0==n.b&&(n.src=null,e[Sc]=null)):wt(t)}}}function At(t){return t in Cc?Cc[t]:Cc[t]="on"+t}function xt(t,e,n,r){var i=!0;if((t=Mt(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.na&&(o=Rt(o,r),i=i&&!1!==o)}return i}function Rt(t,e){var n=t.listener,r=t.La||t.src;return t.Ia&&Ot(t),n.call(r,e)}function Dt(t,e){if(t.na)return!0;if(!gc){if(!e)t:{e=["window","event"];for(var n=Tu,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new _t(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=xt(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=xt(r[i],t,!1,e),n=n&&o}return n}return Rt(t,new _t(e,this))}function Mt(t){return t=t[Sc],t instanceof Et?t:null}function Lt(t){return u(t)?t:(t[kc]||(t[kc]=function(e){return t.handleEvent(e)}),t[kc])}function Ft(){ft.call(this),this.m=new Et(this),this.Nb=this,this.Ua=null}function Ut(t,e,n,r,i){t.m.add(String(e),n,!1,r,i)}function Bt(t,e,n,r,i){t.m.add(String(e),n,!0,r,i)}function Kt(t,e,n,r){if(e=t.m.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.na&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&St(t.m,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Gb}function jt(t,e,n){if(u(t))n&&(t=f(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=f(t.handleEvent,t)}return 2147483647<Number(e)?-1:Tu.setTimeout(t,e||0)}function Vt(t){var e=null;return new H(function(n,r){e=jt(function(){n(void 0)},t),-1==e&&r(Error("Failed to schedule timer."))}).s(function(t){throw Tu.clearTimeout(e),t})}function Wt(e){if(e.S&&"function"==typeof e.S)return e.S();if(t(e))return e.split("");if(s(e)){for(var n=[],r=e.length,i=0;i<r;i++)n.push(e[i]);return n}n=[],r=0;for(i in e)n[r++]=e[i];return n}function Gt(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(s(e)||t(e)){var n=[];e=e.length;for(var r=0;r<e;r++)n.push(r);return n}n=[],r=0;for(var i in e)n[r++]=i;return n}}function qt(e,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(n,void 0);else if(s(e)||t(e))xu(e,n,void 0);else for(var r=Gt(e),i=Wt(e),o=i.length,a=0;a<o;a++)n.call(void 0,i[a],r&&r[a],e)}function Ht(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ht)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function zt(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Qt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Qt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yt(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Xt(t,e){if(this.b=this.m=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Xt){this.f=void 0!==e?e:t.f,Jt(this,t.c),this.m=t.m,this.b=t.b,$t(this,t.i),this.g=t.g,e=t.a;var n=new se;n.c=e.c,e.a&&(n.a=new Ht(e.a),n.b=e.b),Zt(this,n),this.h=t.h}else t&&(n=String(t).match(Ic))?(this.f=!!e,Jt(this,n[1]||"",!0),this.m=ie(n[2]||""),this.b=ie(n[3]||"",!0),$t(this,n[4]),this.g=ie(n[5]||"",!0),Zt(this,n[6]||"",!0),this.h=ie(n[7]||"")):(this.f=!!e,this.a=new se(null,this.f))}function Jt(t,e,n){t.c=n?ie(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function $t(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Zt(t,e,n){e instanceof se?(t.a=e,pe(t.a,t.f)):(n||(e=oe(e,Ac)),t.a=new se(e,t.f))}function te(t,e,n){t.a.set(e,n)}function ee(t,e){return t.a.get(e)}function ne(t){return t instanceof Xt?new Xt(t):new Xt(t,void 0)}function re(t,e){var n=new Xt(null,void 0);return Jt(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function ie(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function oe(e,n,r){return t(e)?(e=encodeURI(e).replace(n,ae),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ae(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function se(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ue(t){t.a||(t.a=new Ht,t.b=0,t.c&&Yt(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ce(t){var e=Gt(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new se(null,void 0);t=Wt(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];a(o)?fe(n,i,o):n.add(i,o)}return n}function le(t,e){ue(t),e=de(t,e),Qt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Qt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&zt(t)))}function he(t,e){return ue(t),e=de(t,e),Qt(t.a.b,e)}function fe(t,e,n){le(t,e),0<n.length&&(t.c=null,t.a.set(de(t,e),A(n)),t.b+=n.length)}function de(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function pe(t,e){e&&!t.f&&(ue(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(le(this,e),fe(this,n,t))},t)),t.f=e}function me(){this.a="",this.b=Dc}function ve(t){return t instanceof me&&t.constructor===me&&t.b===Dc?t.a:(_("expected object of type Const, got '"+t+"'"),"type_error:Const")}function ge(t){var e=new me;return e.a=t,e}function ye(){this.a="",this.b=Fc}function _e(t){return t instanceof ye&&t.constructor===ye&&t.b===Fc?t.a:(_("expected object of type TrustedResourceUrl, got '"+t+"' of type "+i(t)),"type_error:TrustedResourceUrl")}function be(t,e){var n=ve(t);if(!Lc.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Mc,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof me?ve(t):encodeURIComponent(String(t))}),we(t)}function we(t){var e=new ye;return e.a=t,e}function Ee(){this.a="",this.b=Bc}function Se(t){return t instanceof Ee&&t.constructor===Ee&&t.b===Bc?t.a:(_("expected object of type SafeUrl, got '"+t+"' of type "+i(t)),"type_error:SafeUrl")}function Ce(t){return t instanceof Ee?t:(t=t.ma?t.la():String(t),Uc.test(t)||(t="about:invalid#zClosurez"),Te(t))}function Te(t){var e=new Ee;return e.a=t,e}function ke(){this.a="",this.b=Kc}function Ie(t){return t instanceof ke&&t.constructor===ke&&t.b===Kc?t.a:(_("expected object of type SafeHtml, got '"+t+"' of type "+i(t)),"type_error:SafeHtml")}function Pe(t){var e=new ke;return e.a=t,e}function Ne(e){var n=document;return t(e)?n.getElementById(e):e}function Oe(t,e){F(e,function(e,n){e&&e.ma&&(e=e.la()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:jc.hasOwnProperty(n)?t.setAttribute(jc[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function Ae(e,n,r){var i=arguments,o=document,s=String(i[0]),u=i[1];if(!Rc&&u&&(u.name||u.type)){if(s=["<",s],u.name&&s.push(' name="',R(u.name),'"'),u.type){s.push(' type="',R(u.type),'"');var c={};K(c,u),delete c.type,u=c}s.push(">"),s=s.join("")}return s=o.createElement(s),u&&(t(u)?s.className=u:a(u)?s.className=u.join(" "):Oe(s,u)),2<i.length&&xe(o,s,i),s}function xe(e,n,r){function i(r){r&&n.appendChild(t(r)?e.createTextNode(r):r)}for(var o=2;o<r.length;o++){var a=r[o];!s(a)||c(a)&&0<a.nodeType?i(a):xu(Re(a)?A(a):a,i)}}function Re(t){if(t&&"number"==typeof t.length){if(c(t))return"function"==typeof t.item||"string"==typeof t.item;if(u(t))return"function"==typeof t.item}return!1}function De(t){var e=[];return Le(new Me,t,e),e.join("")}function Me(){}function Le(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(a(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Le(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){n.push("{"),i="";for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Fe(r,n),n.push(":"),Le(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Fe(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}function Fe(t,e){e.push('"',t.replace(Wc,function(t){var e=Vc[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Vc[t]=e),e}),'"')}function Ue(){var t=rn();return oc&&!!dc&&11==dc||/Edge\/\d+/.test(t)}function Be(){return Tu.window&&Tu.window.location.href||self&&self.location&&self.location.href||""}function Ke(t,e){e=e||Tu.window;var n="about:blank";t&&(n=Se(Ce(t))),e.location.href=n}function je(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<je(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Ve(){var t=rn();return t=en(t)!=Hc?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!oc||!dc||9<dc)}function We(t){return t=(t||rn()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Ge(t){t=t||Tu.window;try{t.close()}catch(t){}}function qe(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=rn().toLowerCase(),r&&(e.target=r,D(n,"crios/")&&(e.target="_blank")),en(rn())==qc&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ee?n:Ce("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[];for(a in t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((L("iPhone")&&!L("iPod")&&!L("iPad")||L("iPad")||L("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof Ee||e instanceof Ee||(e=e.ma?e.la():String(e),Uc.test(e)||(e="about:invalid#zClosurez"),e=Te(e)),a.href=Se(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Se(e),a&&(sc&&D(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,ge("b/12014412, meta tag with sanitized URL"),t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+R(t)+'">',t=Pe(t),a.document.write(Ie(t)),a.document.close())):(a=r.open(Se(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}function He(t){return new H(function(e){function n(){Vt(2e3).then(function(){return t&&!t.closed?n():void e()})}return n()})}function ze(){var t=null;return new H(function(e){"complete"==Tu.document.readyState?e():(t=function(){e()},Pt(window,"load",t))}).s(function(e){throw Nt(window,"load",t),e})}function Qe(){return Ye(void 0)?ze().then(function(){return new H(function(t,e){var n=Tu.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):X(Error("Cordova must run in an Android or iOS file scheme."))}function Ye(t){return t=t||rn(),!("file:"!==cn()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xe(){var t=Tu.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Je(){return"object"!=typeof Tu.window&&"function"==typeof Tu.importScripts}function $e(){return Su.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Su.INTERNAL.hasOwnProperty("node")?"Node":Je()?"Worker":"Browser"}function Ze(){var t=$e();return"ReactNative"===t||"Node"===t}function tn(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function en(t){var e=t.toLowerCase();return D(e,"opera/")||D(e,"opr/")||D(e,"opios/")?"Opera":D(e,"iemobile")?"IEMobile":D(e,"msie")||D(e,"trident/")?"IE":D(e,"edge/")?"Edge":D(e,"firefox/")?qc:D(e,"silk/")?"Silk":D(e,"blackberry")?"Blackberry":D(e,"webos")?"Webos":!D(e,"safari/")||D(e,"chrome/")||D(e,"crios/")||D(e,"android")?!D(e,"chrome/")&&!D(e,"crios/")||D(e,"edge/")?D(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Hc:"Safari"}function nn(t,e){e=e||[];var n,r=[],i={};for(n in zc)i[zc[n]]=!0;for(n=0;n<e.length;n++)"undefined"!=typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=$e(),"Browser"===r?(i=rn(),r=en(i)):"Worker"===r&&(i=rn(),r=en(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function rn(){return Tu.navigator&&Tu.navigator.userAgent||""}function on(t,e){t=t.split("."),e=e||Tu;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function an(){try{var t=Tu.localStorage,e=pn();if(t)return t.setItem(e,"1"),t.removeItem(e),!Ue()||!!Tu.indexedDB}catch(t){return Je()&&!!Tu.indexedDB}return!1}function sn(){return(un()||"chrome-extension:"===cn()||Ye())&&!Ze()&&an()&&!Je()}function un(){return"http:"===cn()||"https:"===cn()}function cn(){return Tu.location&&Tu.location.protocol||null}function ln(t){return t=t||rn(),!We(t)&&en(t)!=qc}function hn(t){return"undefined"==typeof t?null:De(t)}function fn(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function dn(t){if(null!==t)return JSON.parse(t)}function pn(t){return t?t:Math.floor(1e9*Math.random()).toString()}function mn(t){return t=t||rn(),"Safari"!=en(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vn(){var t=Tu.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function gn(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=rn(),e=$e(),this.b=We(t)||"ReactNative"===e}function yn(){var t=Tu.document;return!t||"undefined"==typeof t.visibilityState||"visible"==t.visibilityState}function _n(){var t=Tu.document,e=null;return yn()||!t?Y():new H(function(n){e=function(){yn()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}function bn(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function wn(){return!(!on("fireauth.oauthhelper",Tu)&&!on("fireauth.iframe",Tu))}function En(t){Yc[t]||(Yc[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}function Sn(t,e,n){Qc?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Cn(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Sn(t,n,e[n])}function Tn(t){var e={};return Cn(e,t),e}function kn(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function In(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Pn(t){var e=t;if("object"==typeof t&&null!=t){e="length"in t?[]:{};for(var n in t)Sn(e,n,Pn(t[n]))}return e}function Nn(t){var e={},n=t[$c],r=t[Zc];if(t=t[tl],!t||t!=Jc&&!n)throw Error("Invalid provider user info!");e[nl]=r||null,e[el]=n||null,Sn(this,il,t),Sn(this,rl,Pn(e))}function On(t,e){this.code=ol+t,this.message=e||al[t]||""}function An(t){var e=t&&t.code;return e?new On(e.substring(ol.length),t.message):null}function xn(t){var e=t[ll];if("undefined"==typeof e)throw new On("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new On("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[sl];if(n&&"object"==typeof n){e=n[dl];var r=n[hl];if(n=n[fl],"string"==typeof e&&e.length){if(this.a=e,"undefined"!=typeof r&&"boolean"!=typeof r)throw new On("argument-error",hl+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new On("argument-error",fl+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!=typeof e)throw new On("argument-error",dl+" property must be a non empty string when specified.");if("undefined"!=typeof r||"undefined"!=typeof n)throw new On("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new On("argument-error",sl+" property must be a non null object when specified.");if(this.f=null,(e=t[cl])&&"object"==typeof e){if(e=e[pl],"string"==typeof e&&e.length)this.f=e;else if("undefined"!=typeof e)throw new On("argument-error",pl+" property must be a non empty string when specified.")}else if("undefined"!=typeof e)throw new On("argument-error",cl+" property must be a non null object when specified.");if(t=t[ul],"undefined"!=typeof t&&"boolean"!=typeof t)throw new On("argument-error",ul+" property must be a boolean when specified.");this.c=!!t}function Rn(t){var e={};e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f;for(var n in e)null===e[n]&&delete e[n];return e}function Dn(t){return Ru(t,function(t){return t=t.toString(16),1<t.length?t:"0"+t}).join("")}function Mn(t){var e="";return Ln(t,function(t){e+=String.fromCharCode(t)}),e}function Ln(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=vl[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}Fn();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}function Fn(){if(!ml){ml={},vl={};for(var t=0;65>t;t++)ml[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),vl[ml[t]]=t,62<=t&&(vl["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}function Un(t){this.c=t.sub,Pu(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Bn(t){return(t=Kn(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Un(t):null}function Kn(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Mn(t))}catch(t){}return null}function jn(t){for(var e in _l)if(_l[e].Na==t)return _l[e];return null}function Vn(t){var e={};e["facebook.com"]=qn,e["google.com"]=zn,e["github.com"]=Hn,e["twitter.com"]=Qn;var n=t&&t[wl];try{if(n)return e[n]?new e[n](t):new Gn(t);if("undefined"!=typeof t[bl])return new Wn(t)}catch(t){}return null}function Wn(t){var e=t[wl];if(!e&&t[bl]){var n=Bn(t[bl]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),
n=!1,"undefined"!=typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Sn(this,"providerId",e),Sn(this,"isNewUser",n)}function Gn(t){Wn.call(this,t),t=dn(t.rawUserInfo||"{}"),Sn(this,"profile",Pn(t||{}))}function qn(t){if(Gn.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hn(t){if(Gn.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",this.profile&&this.profile.login||null)}function zn(t){if(Gn.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qn(t){if(Gn.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",t.screenName||null)}function Yn(t){this.a=ne(t)}function Xn(t){var e=ne(t),n=ee(e,"link"),r=ee(ne(n),"link");return e=ee(e,"deep_link_id"),ee(ne(e),"link")||e||r||n||t}function Jn(t,e){return t.then(function(t){if(t[Kl]){var n=Bn(t[Kl]);if(!n||e!=n.c)throw new On("user-mismatch");return t}throw new On("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==ol+"user-not-found"?new On("user-mismatch"):t})}function $n(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Sn(this,"idToken",e.idToken),e.accessToken&&Sn(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new On("internal-error","failed to construct a credential");Sn(this,"accessToken",e.oauthToken),Sn(this,"secret",e.oauthTokenSecret)}Sn(this,"providerId",t),Sn(this,"signInMethod",n)}function Zn(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:ce(e).toString(),requestUri:"http://localhost"}}function tr(t,e){this.Ac=e||[],Cn(this,{providerId:t,isOAuthProvider:!0}),this.vb={},this.$a=(jn(t)||{}).Ma||null,this.Ya=null}function er(t){tr.call(this,t,yl),this.a=[]}function nr(){er.call(this,"facebook.com")}function rr(t){if(!t)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new nr).credential(null,e)}function ir(){er.call(this,"github.com")}function or(t){if(!t)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new ir).credential(null,e)}function ar(){er.call(this,"google.com"),this.ta("profile")}function sr(t,e){var n=t;return c(t)&&(n=t.idToken,e=t.accessToken),(new ar).credential(n,e)}function ur(){tr.call(this,"twitter.com",gl)}function cr(t,e){var n=t;if(c(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new On("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new $n("twitter.com",n,"twitter.com")}function lr(t,e,n){this.a=t,this.b=e,Sn(this,"providerId","password"),Sn(this,"signInMethod",n===hr.EMAIL_LINK_SIGN_IN_METHOD?hr.EMAIL_LINK_SIGN_IN_METHOD:hr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function hr(){Cn(this,{providerId:"password",isOAuthProvider:!1})}function fr(t,e){if(e=dr(e),!e)throw new On("argument-error","Invalid email link!");return new lr(t,e,hr.EMAIL_LINK_SIGN_IN_METHOD)}function dr(t){t=Xn(t),t=new Yn(t);var e=ee(t.a,"oobCode")||null;return"signIn"===(ee(t.a,"mode")||null)&&e?e:null}function pr(t){if(!(t.Sa&&t.Ra||t.Fa&&t.$))throw new On("internal-error");this.a=t,Sn(this,"providerId","phone"),Sn(this,"signInMethod","phone")}function mr(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Sa,code:t.a.Ra}}function vr(t){try{this.a=t||Su.auth()}catch(t){throw new On("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Cn(this,{providerId:"phone",isOAuthProvider:!1})}function gr(t,e){if(!t)throw new On("missing-verification-id");if(!e)throw new On("missing-verification-code");return new pr({Sa:t,Ra:e})}function yr(t){if(t.temporaryProof&&t.phoneNumber)return new pr({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return sr(t,n);case"facebook.com":return rr(n);case"github.com":return or(n);case"twitter.com":return cr(n,r);default:return new er(e).credential(t,n)}}catch(t){return null}}function _r(t){if(!t.isOAuthProvider)throw new On("invalid-oauth-provider")}function br(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new On("invalid-auth-event");if(this.f&&this.a)throw new On("invalid-auth-event");if(this.f&&!this.g)throw new On("invalid-auth-event")}function wr(t){return t=t||{},t.type?new br(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&An(t.error)):null}function Er(){this.b=null,this.a=[]}function Sr(t){var e="unauthorized-domain",n=void 0,r=ne(t);t=r.b,r=r.c,"chrome-extension"==r?n=x("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=x("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",On.call(this,e,n)}function Cr(t,e,n){On.call(this,t,n),t=e||{},t.wb&&Sn(this,"email",t.wb),t.$&&Sn(this,"phoneNumber",t.$),t.credential&&Sn(this,"credential",t.credential)}function Tr(t){if(t.code){var e=t.code||"";0==e.indexOf(ol)&&(e=e.substring(ol.length));var n={credential:yr(t)};if(t.email)n.wb=t.email;else{if(!t.phoneNumber)return new On(e,t.message||void 0);n.$=t.phoneNumber}return new Cr(e,n,t.message)}return null}function kr(){}function Ir(t){return t.c||(t.c=t.b())}function Pr(){}function Nr(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Or(){}function Ar(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=f(this.bc,this),this.a.onerror=f(this.Bb,this),this.a.onprogress=f(this.cc,this),this.a.ontimeout=f(this.fc,this)}function xr(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Rr(t,e,n){this.reset(t,e,n,void 0,void 0)}function Dr(t){this.f=t,this.b=this.c=this.a=null}function Mr(t,e){this.name=t,this.value=e}function Lr(t){return t.c?t.c:t.a?Lr(t.a):(_("Root logger has no level set."),null)}function Fr(t){Al||(Al=new Dr(""),Ol[""]=Al,Al.c=Pl);var e;if(!(e=Ol[t])){e=new Dr(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Fr(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Ol[t]=e}return e}function Ur(t,e){t&&t.log(Nl,e,void 0)}function Br(t){this.f=t}function Kr(t){Ft.call(this),this.i=t,this.readyState=xl,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=Fr("goog.net.FetchXmlHttp")}function jr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Vr(t){Ft.call(this),this.headers=new Ht,this.C=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Rl,this.v=this.O=!1}function Wr(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.C?t.C.a():Cl.a(),t.w=Ir(t.C?t.C:Cl),t.a.onreadystatechange=f(t.Fb,t);try{Ur(t.b,ti(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return Ur(t.b,ti(t,"Error opening Xhr: "+e.message)),void Hr(t,e)}e=r||"";var o=new Ht(t.headers);i&&qt(i,function(t,e){o.set(e,t)}),i=k(o.U()),r=Tu.FormData&&e instanceof Tu.FormData,!I(Ml,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Xr(t),0<t.g&&(t.v=Gr(t.a),Ur(t.b,ti(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=f(t.Ga,t)):t.u=jt(t.Ga,t.g,t)),Ur(t.b,ti(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Ur(t.b,ti(t,"Send error: "+e.message)),Hr(t,e)}}function Gr(t){return oc&&gt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function qr(t){return"content-type"==t.toLowerCase()}function Hr(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,zr(t),Yr(t)}function zr(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Qr(t){if(t.c&&"undefined"!=typeof Cu)if(t.w[1]&&4==Jr(t)&&2==$r(t))Ur(t.b,ti(t,"Local request error detected and ignored"));else if(t.i&&4==Jr(t))jt(t.Fb,0,t);else if(t.dispatchEvent("readystatechange"),4==Jr(t)){Ur(t.b,ti(t,"Request complete")),t.c=!1;try{var e=$r(t);t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=0===e){var o=String(t.l).match(Ic)[1]||null;if(!o&&Tu.self&&Tu.self.location){var a=Tu.self.location.protocol;o=a.substr(0,a.length-1)}i=!Dl.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<Jr(t)?t.a.statusText:""}catch(e){Ur(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+$r(t)+"]",zr(t)}}finally{Yr(t)}}}function Yr(t,e){if(t.a){Xr(t);var n=t.a,i=t.w[0]?r:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(kl,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Xr(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(Tu.clearTimeout(t.u),t.u=null)}function Jr(t){return t.a?t.a.readyState:0}function $r(t){try{return 2<Jr(t)?t.a.status:-1}catch(t){return-1}}function Zr(t){try{return t.a?t.a.responseText:""}catch(e){return Ur(t.b,"Can not get responseText: "+e.message),""}}function ti(t,e){return e+" ["+t.N+" "+t.l+" "+$r(t)+"]"}function ei(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function ni(t,e,n){t.a=!0,t.c=n,t.f=!e,si(t)}function ri(t){if(t.a){if(!t.l)throw new ui(t);t.l=!1}}function ii(t,e){oi(t,null,e,void 0)}function oi(t,e,n,r){t.g.push([e,n,r]),t.a&&si(t)}function ai(t){return Du(t.g,function(t){return u(t[1])})}function si(t){if(t.h&&t.a&&ai(t)){var e=t.h,n=Ll[e];n&&(Tu.clearTimeout(n.a),delete Ll[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.u,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(v(e)||"function"==typeof Tu.Promise&&e instanceof Tu.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,ai(t)||(n=!0)}}t.c=e,r&&(s=f(t.o,t,!0),r=f(t.o,t,!1),e instanceof ei?(oi(e,s,r),e.w=!0):e.then(s,r)),n&&(e=new li(e),Ll[e.a]=e,t.h=e.a)}function ui(){g.call(this)}function ci(){g.call(this)}function li(t){this.a=Tu.setTimeout(f(this.c,this),0),this.b=t}function hi(t){var e={},n=e.document||document,r=_e(t),i=document.createElement("SCRIPT"),o={Hb:i,Ga:void 0},a=new ei(di,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){pi(i,!0);var t=new mi(Ul,"Timeout reached for loading script "+r);ri(a),ni(a,!1,t)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(pi(i,e.dd||!1,s),a.C())},i.onerror=function(){pi(i,!0,s);var t=new mi(Fl,"Error while loading script "+r);ri(a),ni(a,!1,t)},o=e.attributes||{},K(o,{type:"text/javascript",charset:"UTF-8"}),Oe(i,o),i.src=_e(t),fi(n).appendChild(i),a}function fi(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function di(){if(this&&this.Hb){var t=this.Hb;t&&"SCRIPT"==t.tagName&&pi(t,!0,this.Ga)}}function pi(t,e,n){null!=n&&Tu.clearTimeout(n),t.onload=r,t.onerror=r,t.onreadystatechange=r,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function mi(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),g.call(this,n),this.code=t}function vi(t){this.f=t}function gi(t,e,n){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||jl,this.f=B(t.secureTokenHeaders||Vl),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Wl,this.a=B(t.firebaseHeaders||Gl),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==$e(),n=Tu.XMLHttpRequest||n&&Su.INTERNAL.node&&Su.INTERNAL.node.XMLHttpRequest,!n&&!Je())throw new On("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Je()?this.c=new Br(self):Ze()?this.c=new vi(n):this.c=new Or}function yi(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function _i(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function bi(t,e,n,r,i,o,a){Ve()||Je()?t=f(t.o,t):(Bl||(Bl=new H(function(t,e){wi(t,e)})),t=f(t.l,t)),t(e,n,r,i,o,a)}function wi(t,e){if(((window.gapi||{}).client||{}).request)t();else{Tu[Hl]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=be(ql,{onload:Hl});ii(hi(n),function(){e(Error("CORS_UNSUPPORTED"))})}}function Ei(t,e){return new H(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?bi(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(ji(t)):t.access_token&&t.refresh_token?n(t):r(new On("internal-error")):r(new On("network-request-failed"))},"POST",ce(e).toString(),t.f,t.m.get()):r(new On("internal-error"))})}function Si(t,e,n,r,i,o){var a=ne(t.g+e);te(a,"key",t.b),o&&te(a,"cb",Pu().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&te(a,u,r[u]);return new H(function(e,o){bi(t,a.toString(),function(t){t?t.error?o(ji(t,i||{})):e(t):o(new On("network-request-failed"))},n,s?void 0:De(fn(r)),t.a,t.h.get())})}function Ci(t){if(!Sl.test(t.email))throw new On("invalid-email")}function Ti(t){"email"in t&&Ci(t)}function ki(t,e){return Bi(t,$l,{identifier:e,continueUri:un()?Be():"http://localhost"}).then(function(t){return t.allProviders||[]})}function Ii(t,e){return Bi(t,$l,{identifier:e,continueUri:un()?Be():"http://localhost"}).then(function(t){return t.signinMethods||[]})}function Pi(t){return Bi(t,sh,{}).then(function(t){return t.authorizedDomains||[]})}function Ni(t){if(!t[Kl])throw new On("internal-error")}function Oi(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new On("internal-error")}else{if(!t.sessionInfo)throw new On("missing-verification-id");if(!t.code)throw new On("missing-verification-code")}}function Ai(t,e){return Bi(t,lh,e)}function xi(t,e,n){return Bi(t,th,{idToken:e,deleteProvider:n})}function Ri(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new On("internal-error")}function Di(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Tr(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Tr(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Tr(t)):t.errorMessage&&(e=Ki(t.errorMessage)),e)throw e;if(!t[Kl])throw new On("internal-error")}function Mi(t,e){return e.returnIdpCredential=!0,Bi(t,ph,e)}function Li(t,e){return e.returnIdpCredential=!0,Bi(t,vh,e)}function Fi(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Bi(t,mh,e)}function Ui(t){if(!t.oobCode)throw new On("invalid-action-code")}function Bi(t,e,n){if(!In(n,e.T))return X(new On("internal-error"));var r,i=e.Eb||"POST";return Y(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),Si(t,e.endpoint,i,n,e.Tb,e.rb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new On("internal-error");return r[e.da]})}function Ki(t){return ji({error:{errors:[{message:t}],code:400,message:t}})}function ji(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new On(r[n]):null)return n;n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},K(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new On(r[i],e);return!e&&t&&(e=hn(t)),new On("internal-error",e)}function Vi(t){for(var e in Eh)if(Eh[e].id===t)return t=Eh[e],{firebaseEndpoint:t.Za,secureTokenEndpoint:t.fb};return null}function Wi(t){this.b=t,this.a=null,this.bb=Gi(this)}function Gi(t){return zi().then(function(){return new H(function(e,n){on("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:on("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Th.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function qi(t,e){return t.bb.then(function(){return new H(function(n){t.a.send(e.type,e,n,on("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Hi(t,e){t.bb.then(function(){t.a.register("authEvent",e,on("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function zi(){return kh?kh:kh=new H(function(t,e){function n(){vn(),on("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vn(),e(Error("Network Error"))},timeout:Ch.get()})}if(on("gapi.iframes.Iframe"))t();else if(on("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();Tu[r]=function(){on("gapi.load")?n():e(Error("Network Error"))},r=be(Sh,{onload:r}),Y(hi(r)).s(function(){e(Error("Network Error"))})}}).s(function(t){throw kh=null,t})}function Qi(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=re(this.i,"/__/auth/iframe"),te(this.a,"apiKey",this.g),te(this.a,"appName",this.h),this.b=null,this.c=[]}function Yi(t,e,n,r,i){this.o=t,this.l=e,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Xi(t){try{return Su.app(t).auth().xa()}catch(t){return[]}}function Ji(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function $i(t){var e=Be();return Pi(t).then(function(t){t:{var n=ne(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ne(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Gc.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Sr(Be())})}function Zi(t){return t.m?t.m:(t.m=ze().then(function(){if(!t.u){var e=t.c,n=t.h,r=Xi(t.b),i=new Qi(t.l,t.f,t.b);i.f=e,i.b=n,i.c=A(r||[]),t.u=i.toString()}t.i=new Wi(t.u),no(t)}),t.m)}function to(t){return t.o||(t.v=t.c?nn(t.c,Xi(t.b)):null,t.o=new gi(t.f,Vi(t.h),t.v)),t.o}function eo(t,e,n,r,i,o,a,s,u,c){return t=new Yi(t,e,n,r,i),t.i=o,t.g=a,t.h=s,t.b=B(u||null),t.f=c,t.toString()}function no(t){if(!t.i)throw Error("IfcHandler must be initialized!");Hi(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=wr(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return n={},n.status=r?"ACK":"ERROR",Y(n)}return n.status="ERROR",Y(n)})}function ro(t){var e={type:"webStorageSupport"};return Zi(t).then(function(){return qi(t.i,e)}).then(function(t){if(t&&t.length&&"undefined"!=typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})}function io(t){if(this.a=t||Su.INTERNAL.reactNative&&Su.INTERNAL.reactNative.AsyncStorage,!this.a)throw new On("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function oo(){if(!co())throw new On("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=Tu.indexedDB,this.type="indexedDB"}function ao(t){return new H(function(e,n){var r=t.g.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}function so(t){return new H(function(e,n){var r=t.g.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):ao(t).then(function(){return so(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function uo(t){return t.h||(t.h=so(t)),t.h}function co(){try{return!!Tu.indexedDB}catch(t){return!1}}function lo(t){return t.objectStore("firebaseLocalStorage")}function ho(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function fo(t){return new H(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function po(t){function e(){return t.c=Vt(800).then(f(t.Kc,t)).then(function(e){0<e.length&&xu(t.a,function(t){t(e)})}).then(e).s(function(t){"STOP_EVENT"!=t.message&&e()}),t.c}t.c&&t.c.cancel("STOP_EVENT"),e()}function mo(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Y().then(function(){if(co()){var t=pn(),r="__sak"+t;return Ih||(Ih=new oo),n=Ih,n.set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){xu(e.a,function(e){e(t)})}),t})}function vo(){this.a={},this.type="inMemory"}function go(){if(!_o()){if("Node"==$e())throw new On("internal-error","The LocalStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=yo()||Su.INTERNAL.node.localStorage,this.type="localStorage"}function yo(){try{var t=Tu.localStorage,e=pn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function _o(){var t="Node"==$e();if(t=yo()||t&&Su.INTERNAL.node&&Su.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function bo(){this.type="nullStorage"}function wo(){if(!So()){if("Node"==$e())throw new On("internal-error","The SessionStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=Eo()||Su.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Eo(){try{var t=Tu.sessionStorage,e=pn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function So(){var t="Node"==$e();if(t=Eo()||t&&Su.INTERNAL.node&&Su.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function Co(){var t={};t.Browser=Oh,t.Node=Ah,t.ReactNative=xh,t.Worker=Rh,this.a=t[$e()]}function To(t){var e=new On("invalid-persistence-type"),n=new On("unsupported-persistence-type");t:{for(r in Dh)if(Dh[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch($e()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!an()&&"none"!==t)throw n}}function ko(){var t=!(mn(rn())||!Xe()),e=ln(),n=an();this.o=t,this.h=e,this.m=n,this.a={},Ph||(Ph=new Co),t=Ph;try{this.g=!Ue()&&wn()||!Tu.indexedDB?new t.a.A:new mo(Je()?new vo:new t.a.A)}catch(t){this.g=new vo,this.h=!0}try{this.i=new t.a.Qa}catch(t){this.i=new vo}this.l=new vo,this.f=f(this.Lb,this),this.b={}}function Io(){return Nh||(Nh=new ko),Nh}function Po(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function No(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Oo(t,e,n){var r=No(e,n),i=Po(t,e.A);return t.get(e,n).then(function(o){var a=null;try{a=dn(Tu.localStorage.getItem(r))}catch(t){}return a&&!o?(Tu.localStorage.removeItem(r),t.set(e,a,n)):void(a&&o&&"localStorage"!=i.type&&Tu.localStorage.removeItem(r))})}function Ao(t,e,n){return n=No(e,n),"local"==e.A&&(t.b[n]=null),Po(t,e.A).P(n)}function xo(t){Ro(t),t.c=setInterval(function(){for(var e in t.a){var n=Tu.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new _t({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Lb(n))}},1e3)}function Ro(t){t.c&&(clearInterval(t.c),t.c=null)}function Do(t){this.a=t,this.b=Io()}function Mo(t){return t.b.get(Lh,t.a).then(function(t){return wr(t)})}function Lo(){this.a=Io()}function Fo(){this.b=-1}function Uo(t,e){this.b=-1,this.b=Fh,this.f=Tu.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=Tu.Int32Array?new Int32Array(64):Array(64),void 0!==Mh||(Mh=Tu.Int32Array?new Int32Array(Vh):Vh),this.reset()}function Bo(t){for(var e=t.f,n=t.m,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|Mh[e])|0,a=o+(a+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Ko(e,n,r){void 0===r&&(r=n.length);var i=0,o=e.c;if(t(n))for(;i<r;)e.f[o++]=n.charCodeAt(i++),o==e.b&&(Bo(e),o=0);else{if(!s(n))throw Error("message must be string or array");for(;i<r;){var a=n[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[o++]=a,o==e.b&&(Bo(e),o=0)}}e.c=o,e.g+=r}function jo(){Uo.call(this,8,Wh)}function Vo(t,e,n,r,i){this.l=t,this.i=e,this.m=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new Lo,this.g=new Do(this.h),this.f=null,this.b=[],this.a=this.c=null}function Wo(t){return new On("invalid-cordova-configuration",t)}function Go(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function qo(t){var e=new jo;Ko(e,t),t=[];var n=8*e.g;56>e.c?Ko(e,jh,56-e.c):Ko(e,jh,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Bo(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return Dn(t)}function Ho(t,e,n,r){var i=Go(),o=new br(e,r,null,i,new On("no-auth-event")),a=on("BuildInfo.packageName",Tu);if("string"!=typeof a)throw new On("invalid-cordova-configuration");var s=on("BuildInfo.displayName",Tu),u={};if(rn().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!rn().toLowerCase().match(/android/))return X(new On("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=qo(i),u.sessionId=i;var c=eo(t.l,t.i,t.m,e,n,null,r,t.o,u,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(Lh,o.D(),e)}).then(function(){var e=on("cordova.plugins.browsertab.isAvailable",Tu);if("function"!=typeof e)throw new On("invalid-cordova-configuration");var n=null;e(function(e){if(e){if(n=on("cordova.plugins.browsertab.openUrl",Tu),"function"!=typeof n)throw new On("invalid-cordova-configuration");n(c)}else{if(n=on("cordova.InAppBrowser.open",Tu),"function"!=typeof n)throw new On("invalid-cordova-configuration");e=rn(),e=!(!e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(c,e?"_blank":"_system","location=yes")}})})}function zo(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Qo(t){return t.f||(t.f=t.ga().then(function(){return new H(function(e){function n(r){return e(r),t.Ka(n),!1}t.va(n),Xo(t)})})),t.f}function Yo(t){var e=null;return Mo(t.g).then(function(n){return e=n,n=t.g,Ao(n.b,Lh,n.a)}).then(function(){return e})}function Xo(t){function e(e){r=!0,i&&i.cancel(),Yo(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;i=Xn(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ne(i),o=dn(ee(o,"firebaseError")||null),o=(o="object"==typeof o?An(o):null)?new br(r.b,r.c,null,null,o):new br(r.b,r.c,i,r.g)),i=o||n}zo(t,i)})}var n=new br("unknown",null,null,null,new On("no-auth-event")),r=!1,i=Vt(500).then(function(){return Yo(t).then(function(){r||zo(t,n)})}),o=Tu.handleOpenURL;Tu.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(on("BuildInfo.packageName",Tu).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},El||(El=new Er),El.subscribe(e)}function Jo(t){this.a=t,this.b=Io()}function $o(t){return t.b.set(Gh,"pending",t.a)}function Zo(t){return Ao(t.b,Gh,t.a)}function ta(t){return t.b.get(Gh,t.a).then(function(t){return"pending"==t})}function ea(t,e,n){this.v=t,this.m=e,this.l=n,this.h=[],this.f=!1,this.i=f(this.o,this),this.c=new ua,this.u=new ma,this.g=new Jo(this.m+":"+this.l),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.u,this.b.linkViaPopup=this.u,this.b.reauthViaPopup=this.u,this.a=na(this.v,this.m,this.l,Ql)}function na(t,e,n,r){var i=Su.SDK_VERSION||null;return Ye()?new Vo(t,e,n,i,r):new Ji(t,e,n,i,r)}function ra(t){t.f||(t.f=!0,t.a.va(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function ia(t){t.a.Ib()&&ra(t).s(function(e){var n=new br("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));
aa(e)&&t.o(n)}),t.a.Db()||ca(t.c)}function oa(t,e,n,r,i,o){return t.a.zb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.i))},function(){t.reset()},i,o)}function aa(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function sa(t,e,n){var r=e+":"+n;return zh[r]||(zh[r]=new ea(t,e,n)),zh[r]}function ua(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function ca(t){t.g||(t.g=!0,da(t,!1,null,null))}function la(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){da(t,o,e,null)}).s(function(e){da(t,o,null,e)})}function ha(t,e){if(t.b=function(){return X(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function fa(t,e){if(t.b=function(){return Y(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function da(t,e,n,r){e?r?ha(t,r):fa(t,n):fa(t,{user:null}),t.f=[],t.c=[]}function pa(t){var e=new On("timeout");t.a&&t.a.cancel(),t.a=Vt(Hh.get()).then(function(){t.b||da(t,!0,null,e)})}function ma(){}function va(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}function ga(){this.pb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.pb},set:function(t){this.pb=t},enumerable:!1})}function ya(t,e){this.a=e,Sn(this,"verificationId",t)}function _a(t,e,n,r){return new vr(t).Ta(e,n).then(function(t){return new ya(t,r)})}function ba(t){var e=Kn(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new On("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Cn(this,{token:t,expirationTime:bn(1e3*e.exp),authTime:bn(1e3*e.auth_time),issuedAtTime:bn(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function wa(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ea(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Sa(t,e){t.stop(),t.b=Vt(Ea(t,e)).then(function(){return _n()}).then(function(){return t.h()}).then(function(){Sa(t,!0)}).s(function(e){t.i(e)&&Sa(t,!1)})}function Ca(t){this.f=t,this.b=this.a=null,this.c=0}function Ta(t,e){var n=e[Kl],r=e.refreshToken;e=Ia(e.expiresIn),t.b=n,t.c=e,t.a=r}function ka(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Ia(t){return Pu()+1e3*parseInt(t,10)}function Pa(t,e){return Ei(t.f,e).then(function(e){return t.b=e.access_token,t.c=Ia(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Na(t,e){this.a=t||null,this.b=e||null,Cn(this,{lastSignInTime:bn(e||null),creationTime:bn(t||null)})}function Oa(t){return new Na(t.a,t.b)}function Aa(t,e,n,r,i,o){Cn(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function xa(t,e){yt.call(this,t);for(var n in e)this[n]=e[n]}function Ra(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=Su.SDK_VERSION?nn(Su.SDK_VERSION):null,this.b=new gi(this.l,Vi(Ql),t),this.h=new Ca(this.b),ja(this,e[Kl]),Ta(this.h,e),Sn(this,"refreshToken",this.h.a),qa(this,n||{}),Ft.call(this),this.I=!1,this.u&&sn()&&(this.a=sa(this.u,this.l,this.o)),this.N=[],this.i=null,this.w=Ua(this),this.V=f(this.Ha,this);var r=this;this.ka=null,this.sa=function(t){r.oa(t.g)},this.X=null,this.O=[],this.ra=function(t){Ma(r,t.c)},this.W=null}function Da(t,e){t.X&&Nt(t.X,"languageCodeChanged",t.sa),(t.X=e)&&Tt(e,"languageCodeChanged",t.sa)}function Ma(t,e){t.O=e,_i(t.b,Su.SDK_VERSION?nn(Su.SDK_VERSION,t.O):null)}function La(t,e){t.W&&Nt(t.W,"frameworkChanged",t.ra),(t.W=e)&&Tt(e,"frameworkChanged",t.ra)}function Fa(t){try{return Su.app(t.o).auth()}catch(e){throw new On("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Ua(t){return new wa(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Pu()-3e5;return 0<e?e:0})}function Ba(t){t.C||t.w.b||(t.w.start(),Nt(t,"tokenChanged",t.V),Tt(t,"tokenChanged",t.V))}function Ka(t){Nt(t,"tokenChanged",t.V),t.w.stop()}function ja(t,e){t.qa=e,Sn(t,"_lat",e)}function Va(t,e){N(t.N,function(t){return t==e})}function Wa(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return Z(e).then(function(){return t})}function Ga(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function qa(t,e){Cn(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Na(e.createdAt,e.lastLoginAt),providerData:[]})}function Ha(){}function za(t){return Y().then(function(){if(t.C)throw new On("app-deleted")})}function Qa(t){return Ru(t.providerData,function(t){return t.providerId})}function Ya(t,e){e&&(Xa(t,e.providerId),t.providerData.push(e))}function Xa(t,e){N(t.providerData,function(t){return t.providerId==e})}function Ja(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Sn(t,e,n)}function $a(t,e){t!=e&&(Cn(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Sn(t,"metadata",Oa(e.metadata)):Sn(t,"metadata",new Na),xu(e.providerData,function(e){Ya(t,e)}),ka(t.h,e.h),Sn(t,"refreshToken",t.h.a))}function Za(t){return t.F().then(function(e){var n=t.isAnonymous;return es(t,e).then(function(){return n||Ja(t,"isAnonymous",!1),e})})}function ts(t,e){e[Kl]&&t.qa!=e[Kl]&&(Ta(t.h,e),t.dispatchEvent(new xa("tokenChanged")),ja(t,e[Kl]),Ja(t,"refreshToken",t.h.a))}function es(t,e){return Bi(t.b,rh,{idToken:e}).then(f(t.uc,t))}function ns(t){return(t=t.providerUserInfo)&&t.length?Ru(t,function(t){return new Aa(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}function rs(t,e){return Za(t).then(function(){if(I(Qa(t),e))return Wa(t).then(function(){throw new On("provider-already-linked")})})}function is(t,e,n){var r=yr(e);return e=Vn(e),Tn({user:t,credential:r,additionalUserInfo:e,operationType:n})}function os(t,e){return ts(t,e),t.reload().then(function(){return t})}function as(t,e,n,r,i){if(!sn())return X(new On("operation-not-supported-in-this-environment"));if(t.i&&!i)return X(t.i);var o=jn(n.providerId),a=pn(t.uid+":::"),s=null;(!ln()||Xe())&&t.u&&n.isOAuthProvider&&(s=eo(t.u,t.l,t.o,e,n,null,a,Su.SDK_VERSION||null));var u=qe(s,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(us(t),!i)return t.F().then(function(){})}).then(function(){return oa(t.a,u,e,n,a,!!s)}).then(function(){return new H(function(n,r){t.ha(e,null,new On("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=a,t.c=t.a.Ea(t,e,u,a)})}).then(function(t){return u&&Ge(u),t?Tn(t):null}).s(function(t){throw u&&Ge(u),t}),cs(t,r,i)}function ss(t,e,n,r,i){if(!sn())return X(new On("operation-not-supported-in-this-environment"));if(t.i&&!i)return X(t.i);var o=null,a=pn(t.uid+":::");return r=r().then(function(){if(us(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,Wa(t)}).then(function(e){return t.ba&&(e=t.ba,e=e.b.set(Qh,t.D(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return ms(t.ba);throw o}).then(function(){if(o)throw o}),cs(t,r,i)}function us(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new On("internal-error");throw new On("auth-domain-config-required")}}function cs(t,e,n){var r=ls(t,e,n);return t.G.push(r),r.ia(function(){P(t.G,r)}),r}function ls(t,e,n){return t.i&&!n?(e.cancel(),X(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new xa("userInvalidated")),t.i=e),e})}function hs(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Kl]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-Pu())/1e3;var r=new Ra(e,n,t);return t.providerData&&xu(t.providerData,function(t){t&&Ya(r,Tn(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function fs(t,e,n,r){var i=new Ra(t,e);return n&&(i.ba=n),r&&Ma(i,r),i.reload().then(function(){return i})}function ds(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var i=t.h,o={};return o[Kl]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-Pu())/1e3,e=new Ra(e,o),n&&(e.ba=n),r&&Ma(e,r),$a(e,t),e}function ps(t){this.a=t,this.b=Io()}function ms(t){return Ao(t.b,Qh,t.a)}function vs(t,e){return t.b.get(Qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),hs(t||{})})}function gs(t){this.a=t,this.b=Io(),this.c=null,this.f=_s(this),this.b.addListener(bs("local"),this.a,f(this.g,this))}function ys(t,e){var n,r=[];for(n in Dh)Dh[n]!==e&&r.push(Ao(t.b,bs(Dh[n]),t.a));return r.push(Ao(t.b,Yh,t.a)),$(r)}function _s(t){var e=bs("local"),n=bs("session"),r=bs("none");return Oo(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Yh,t.a).then(function(t){return t?bs(t):e})})})}).then(function(e){return t.c=e,ys(t,e.A)}).s(function(){t.c||(t.c=e)})}function bs(t){return{name:"authUser",A:t}}function ws(t){return Ts(t,function(){return t.b.set(Yh,t.c.A,t.a)})}function Es(t,e){return Ts(t,function(){return t.b.set(t.c,e.D(),t.a)})}function Ss(t){return Ts(t,function(){return Ao(t.b,t.c,t.a)})}function Cs(t,e){return Ts(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),hs(t||{})})})}function Ts(t,e){return t.f=t.f.then(e,e),t.f}function ks(t){if(this.l=!1,Sn(this,"settings",new ga),Sn(this,"app",t),!Us(this).options||!Us(this).options.apiKey)throw new On("invalid-api-key");t=Su.SDK_VERSION?nn(Su.SDK_VERSION):null,this.b=new gi(Us(this).options&&Us(this).options.apiKey,Vi(Ql),t),this.N=[],this.o=[],this.I=[],this.Pb=Su.INTERNAL.createSubscribe(f(this.ic,this)),this.O=void 0,this.Qb=Su.INTERNAL.createSubscribe(f(this.jc,this)),Rs(this,null),this.h=new gs(Us(this).options.apiKey+":"+Us(this).name),this.w=new ps(Us(this).options.apiKey+":"+Us(this).name),this.V=Ws(this,Ms(this)),this.i=Ws(this,Ls(this)),this.X=!1,this.ka=f(this.Jc,this),this.Ha=f(this.Z,this),this.qa=f(this.Yb,this),this.ra=f(this.gc,this),this.sa=f(this.hc,this),As(this),this.INTERNAL={},this.INTERNAL.delete=f(this.delete,this),this.INTERNAL.logFramework=f(this.qc,this),this.u=0,Ft.call(this),Ns(this),this.G=[]}function Is(t){yt.call(this,"languageCodeChanged"),this.g=t}function Ps(t){yt.call(this,"frameworkChanged"),this.c=t}function Ns(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.oa(t)},enumerable:!1}),t.W=null}function Os(t){return t.Ob||X(new On("auth-domain-config-required"))}function As(t){var e=Us(t).options.authDomain,n=Us(t).options.apiKey;e&&sn()&&(t.Ob=t.V.then(function(){if(!t.l){if(t.a=sa(e,n,Us(t).name),t.a.subscribe(t),Bs(t)&&Ga(Bs(t)),t.C){Ga(t.C);var r=t.C;r.oa(t.ea()),Da(r,t),r=t.C,Ma(r,t.G),La(r,t),t.C=null}return t.a}}))}function xs(t,e){var n={};return n.apiKey=Us(t).options.apiKey,n.authDomain=Us(t).options.authDomain,n.appName=Us(t).name,t.V.then(function(){return fs(n,e,t.w,t.xa())}).then(function(e){return Bs(t)&&e.uid==Bs(t).uid?($a(Bs(t),e),t.Z(e)):(Rs(t,e),Ga(e),t.Z(e))}).then(function(){js(t)})}function Rs(t,e){Bs(t)&&(Va(Bs(t),t.Ha),Nt(Bs(t),"tokenChanged",t.qa),Nt(Bs(t),"userDeleted",t.ra),Nt(Bs(t),"userInvalidated",t.sa),Ka(Bs(t))),e&&(e.N.push(t.Ha),Tt(e,"tokenChanged",t.qa),Tt(e,"userDeleted",t.ra),Tt(e,"userInvalidated",t.sa),0<t.u&&Ba(e)),Sn(t,"currentUser",e),e&&(e.oa(t.ea()),Da(e,t),Ma(e,t.G),La(e,t))}function Ds(t){var e=vs(t.w,Us(t).options.authDomain).then(function(e){return(t.C=e)&&(e.ba=t.w),ms(t.w)});return Ws(t,e)}function Ms(t){var e=Us(t).options.authDomain,n=Ds(t).then(function(){return Cs(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.C&&(t.C.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Es(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Ss(t.h)})):null}).then(function(e){Rs(t,e||null)});return Ws(t,n)}function Ls(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(bs("local"),e.a,t.ka)}})}function Fs(t,e){var n=null,r=null;return Ws(t,e.then(function(e){return n=yr(e),r=Vn(e),xs(t,e)}).then(function(){return Tn({user:Bs(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Us(t){return t.app}function Bs(t){return t.currentUser}function Ks(t){return Bs(t)&&Bs(t)._lat||null}function js(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Ks(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Ks(t))}}function Vs(t,e){t.I.push(e),Ws(t,t.i.then(function(){!t.l&&I(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Ks(t)))}))}function Ws(t,e){return t.N.push(e),e.ia(function(){P(t.N,e)}),e}function Gs(){}function qs(){this.a={},this.b=1e12}function Hs(t,e){return(e=zs(e))?t.a[e]||null:null}function zs(t){return(t="undefined"==typeof t?1e12:t)?t.toString():null}function Qs(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Ne(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Tt(this.f,"click",this.i)}function Ys(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Xs(){}function Js(){this.b=Tu.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function $s(t,e,n,r,i,o,a){if(Sn(this,"type","recaptcha"),this.c=this.f=null,this.C=!1,this.l=e,this.g=null,a?(Jh||(Jh=new Xs),a=Jh):(tf||(tf=new Js),a=tf),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[rf])throw new On("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[of],!Tu.document)throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Ne(e)||!this.i&&Ne(e).hasChildNodes())throw new On("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new gi(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.m=[];var u=this.a[ef];this.a[ef]=function(t){if(Zs(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=on(u,Tu);"function"==typeof e&&e(t)}};var c=this.a[nf];this.a[nf]=function(){if(Zs(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=on(c,Tu);"function"==typeof t&&t()}}}function Zs(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(t){}}function tu(t,e){N(t.m,function(t){return t==e})}function eu(t,e){return t.h.push(e),e.ia(function(){P(t.h,e)}),e}function nu(t){if(t.C)throw new On("internal-error","RecaptchaVerifier instance has been destroyed.")}function ru(t,e,n){var r=!1;try{this.b=n||Su.app()}catch(t){throw new On("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new On("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().xa()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Su.SDK_VERSION?nn(Su.SDK_VERSION,o):null,$s.call(this,n,t,e,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,Vi(Ql),r)}function iu(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new On("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=af.length)throw new On("internal-error","Argument validator received an unsupported number of arguments.");n=af[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new On("argument-error",t+" failed: "+r)}function ou(e,n){return{name:e||"",K:"a valid string",optional:!!n,M:t}}function au(t,n){return{name:t||"",K:"a boolean",optional:!!n,M:e}}function su(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:c}}function uu(t,e){return{name:t||"",K:"a function",optional:!!e,M:u}}function cu(t,e){return{name:t||"",K:"null",optional:!!e,M:o}}function lu(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function hu(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ks)}}}function fu(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Su.app.App)}}}function du(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ya||!n)}}}function pu(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function mu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&t(e.type)&&u(e.verify))}}}function vu(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function gu(t,e){for(var n in e){var r=e[n].name;t[r]=bu(r,t[n],e[n].j)}}function yu(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].qb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){iu(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}function _u(t,e,n,r){t[e]=bu(e,n,r)}function bu(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return iu(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=wu(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function wu(t){return t=t.split("."),t[t.length-1]}var Eu,Su=n(/*! @firebase/app */20).default,Cu=Cu||{},Tu=this,ku="closure_uid_"+(1e9*Math.random()>>>0),Iu=0,Pu=Date.now||function(){return+new Date};p(g,Error),g.prototype.name="CustomError",p(y,g),y.prototype.name="AssertionError",b.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nu=new b(function(){return new C},function(t){t.reset()});E.prototype.add=function(t,e){var n=Nu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},C.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},C.prototype.reset=function(){this.next=this.b=this.a=null};var Ou,Au=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(e,n){if(t(e))return t(n)&&1==n.length?e.indexOf(n,0):-1;for(var r=0;r<e.length;r++)if(r in e&&e[r]===n)return r;return-1},xu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(e,n,r){for(var i=e.length,o=t(e)?e.split(""):e,a=0;a<i;a++)a in o&&n.call(r,o[a],a,e)},Ru=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(e,n){for(var r=e.length,i=Array(r),o=t(e)?e.split(""):e,a=0;a<r;a++)a in o&&(i[a]=n.call(void 0,o[a],a,e));return i},Du=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(e,n){for(var r=e.length,i=t(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,e))return!0;return!1},Mu=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Lu=/&/g,Fu=/</g,Uu=/>/g,Bu=/"/g,Ku=/'/g,ju=/\x00/g,Vu=/[\x00&<>"']/;t:{var Wu=Tu.navigator;if(Wu){var Gu=Wu.userAgent;if(Gu){Ou=Gu;break t}}Ou=""}var qu,Hu,zu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Qu=!1,Yu=new E,Xu=0,Ju=2,$u=3;z.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Zu=new b(function(){return new z},function(t){t.reset()});H.prototype.then=function(t,e,n){return nt(this,u(t)?t:null,u(e)?e:null,n)},m(H),Eu=H.prototype,Eu.ia=function(t,e){return t=Q(t,t,e),t.c=!0,et(this,t),this},Eu.s=function(t,e){return nt(this,null,t,e)},Eu.cancel=function(t){this.a==Xu&&W(function(){var e=new ht(t);tt(this,e)},this)},Eu.Lc=function(t){this.a=Xu,rt(this,Ju,t)},Eu.Mc=function(t){this.a=Xu,rt(this,$u,t)},Eu.Ub=function(){for(var t;t=st(this);)ut(this,t,this.a,this.i);this.h=!1};var tc=j;p(ht,g),ht.prototype.name="cancel";var ec=0,nc={};ft.prototype.pa=!1,ft.prototype.ua=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},pt[" "]=r;var rc,ic=L("Opera"),oc=L("Trident")||L("MSIE"),ac=L("Edge"),sc=ac||oc,uc=L("Gecko")&&!(D(Ou.toLowerCase(),"webkit")&&!L("Edge"))&&!(L("Trident")||L("MSIE"))&&!L("Edge"),cc=D(Ou.toLowerCase(),"webkit")&&!L("Edge");t:{var lc="",hc=function(){var t=Ou;return uc?/rv:([^\);]+)(\)|;)/.exec(t):ac?/Edge\/([\d\.]+)/.exec(t):oc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):cc?/WebKit\/(\S+)/.exec(t):ic?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(hc&&(lc=hc?hc[1]:""),oc){var fc=vt();if(null!=fc&&fc>parseFloat(lc)){rc=String(fc);break t}}rc=lc}var dc,pc={},mc=Tu.document;dc=mc&&oc?vt()||("CSS1Compat"==mc.compatMode?parseInt(rc,10):5):void 0;var vc=Object.freeze||function(t){return t},gc=!oc||9<=Number(dc),yc=oc&&!gt("9"),_c=function(){if(!Tu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return Tu.addEventListener("test",r,e),Tu.removeEventListener("test",r,e),t}();yt.prototype.preventDefault=function(){this.Gb=!1},p(_t,yt);var bc=vc({2:"touch",3:"pen",4:"mouse"});_t.prototype.preventDefault=function(){_t.lb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,yc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},_t.prototype.f=function(){return this.a};var wc="closure_listenable_"+(1e6*Math.random()|0),Ec=0;Et.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=Ct(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):(e=new bt(e,this.src,o,!!r,i),e.Ia=n,t.push(e)),e};var Sc="closure_lm_"+(1e6*Math.random()|0),Cc={},Tc=0,kc="__closure_events_fn_"+(1e9*Math.random()>>>0);p(Ft,ft),Ft.prototype[wc]=!0,Ft.prototype.addEventListener=function(t,e,n,r){Tt(this,t,e,n,r)},Ft.prototype.removeEventListener=function(t,e,n,r){Nt(this,t,e,n,r)},Ft.prototype.dispatchEvent=function(e){var n,r=this.Ua;if(r)for(n=[];r;r=r.Ua)n.push(r);r=this.Nb;var i=e.type||e;if(t(e))e=new yt(e,r);else if(e instanceof yt)e.target=e.target||r;else{var o=e;e=new yt(i,r),K(e,o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var s=e.b=n[a];o=Kt(s,i,!0,e)&&o}if(s=e.b=r,o=Kt(s,i,!0,e)&&o,o=Kt(s,i,!1,e)&&o,n)for(a=0;a<n.length;a++)s=e.b=n[a],o=Kt(s,i,!1,e)&&o;return o},Ft.prototype.ua=function(){if(Ft.lb.ua.call(this),this.m){var t,e=this.m,n=0;for(t in e.a){for(var r=e.a[t],i=0;i<r.length;i++)++n,wt(r[i]);delete e.a[t],e.b--}}this.Ua=null},Eu=Ht.prototype,Eu.S=function(){zt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Eu.U=function(){return zt(this),this.a.concat()},Eu.clear=function(){this.b={},this.c=this.a.length=0},Eu.get=function(t,e){return Qt(this.b,t)?this.b[t]:e},Eu.set=function(t,e){Qt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Eu.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ic=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Xt.prototype.toString=function(){var t=[],e=this.c;e&&t.push(oe(e,Pc,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.m)&&t.push(oe(e,Pc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(oe(n,"/"==n.charAt(0)?Oc:Nc,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",oe(n,xc)),t.join("")};var Pc=/[#\/\?@]/g,Nc=/[#\?:]/g,Oc=/[#\?]/g,Ac=/[#\?@]/g,xc=/#/g;Eu=se.prototype,Eu.add=function(t,e){ue(this),this.c=null,t=de(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Eu.clear=function(){this.a=this.c=null,this.b=0},Eu.forEach=function(t,e){ue(this),this.a.forEach(function(n,r){xu(n,function(n){t.call(e,n,r,this)},this)},this)},Eu.U=function(){ue(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Eu.S=function(e){ue(this);var n=[];if(t(e))he(this,e)&&(n=O(n,this.a.get(de(this,e))));else{e=this.a.S();for(var r=0;r<e.length;r++)n=O(n,e[r])}return n},Eu.set=function(t,e){return ue(this),this.c=null,t=de(this,t),he(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Eu.get=function(t,e){return t=t?this.S(t):[],0<t.length?String(t[0]):e},Eu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Rc=!oc||9<=Number(dc);me.prototype.ma=!0,me.prototype.la=function(){return this.a},me.prototype.toString=function(){return"Const{"+this.a+"}"};var Dc={};ge(""),ye.prototype.ma=!0,ye.prototype.la=function(){return this.a},ye.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Mc=/%{(\w+)}/g,Lc=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,Fc={};Ee.prototype.ma=!0,Ee.prototype.la=function(){return this.a},Ee.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Uc=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Bc={};Te("about:blank"),ke.prototype.ma=!0,ke.prototype.la=function(){return this.a},ke.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Kc={};Pe("<!DOCTYPE html>"),Pe(""),Pe("<br>");var jc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Vc={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Wc=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,Gc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qc="Firefox",Hc="Chrome",zc={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};gn.prototype.get=function(){var t=Tu.navigator;return(t&&"boolean"==typeof t.onLine&&(un()||"chrome-extension:"===cn()||"undefined"!=typeof t.connection)?t.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qc,Yc={};try{var Xc={};Object.defineProperty(Xc,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xc,"abcd",{configurable:!0,enumerable:!0,value:2}),Qc=2==Xc.abcd}catch(t){Qc=!1}var Jc="EMAIL_SIGNIN",$c="email",Zc="newEmail",tl="requestType",el="email",nl="fromEmail",rl="data",il="operation";p(On,Error),On.prototype.D=function(){return{code:this.code,message:this.message}},On.prototype.toJSON=function(){return this.D()};var ol="auth/",al={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.",
"missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},sl="android",ul="handleCodeInApp",cl="iOS",ll="url",hl="installApp",fl="minimumVersion",dl="packageName",pl="bundleId",ml=null,vl=null;Un.prototype.f=function(){return this.b};var gl="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),yl=["client_id","response_type","scope","redirect_uri","state"],_l={Tc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",eb:yl},Vc:{Ma:null,Ba:500,Aa:620,Na:"github.com",eb:yl},Wc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",eb:yl},bd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",eb:gl}},bl="idToken",wl="providerId";p(Gn,Wn),p(qn,Gn),p(Hn,Gn),p(zn,Gn),p(Qn,Gn),$n.prototype.ya=function(t){return Mi(t,Zn(this))},$n.prototype.c=function(t,e){var n=Zn(this);return n.idToken=e,Li(t,n)},$n.prototype.f=function(t,e){var n=Zn(this);return Jn(Fi(t,n),e)},$n.prototype.D=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},tr.prototype.Da=function(t){return this.vb=B(t),this},p(er,tr),er.prototype.ta=function(t){return I(this.a,t)||this.a.push(t),this},er.prototype.Ab=function(){return A(this.a)},er.prototype.credential=function(t,e){if(!t&&!e)throw new On("argument-error","credential failed: must provide the ID token and/or the access token.");return new $n(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},p(nr,er),Sn(nr,"PROVIDER_ID","facebook.com"),Sn(nr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),p(ir,er),Sn(ir,"PROVIDER_ID","github.com"),Sn(ir,"GITHUB_SIGN_IN_METHOD","github.com"),p(ar,er),Sn(ar,"PROVIDER_ID","google.com"),Sn(ar,"GOOGLE_SIGN_IN_METHOD","google.com"),p(ur,tr),Sn(ur,"PROVIDER_ID","twitter.com"),Sn(ur,"TWITTER_SIGN_IN_METHOD","twitter.com"),lr.prototype.ya=function(t){return this.signInMethod==hr.EMAIL_LINK_SIGN_IN_METHOD?Bi(t,eh,{email:this.a,oobCode:this.b}):Bi(t,yh,{email:this.a,password:this.b})},lr.prototype.c=function(t,e){return this.signInMethod==hr.EMAIL_LINK_SIGN_IN_METHOD?Bi(t,nh,{idToken:e,email:this.a,oobCode:this.b}):Bi(t,fh,{idToken:e,email:this.a,password:this.b})},lr.prototype.f=function(t,e){return Jn(this.ya(t),e)},lr.prototype.D=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Cn(hr,{PROVIDER_ID:"password"}),Cn(hr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Cn(hr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),pr.prototype.ya=function(t){return t.Ta(mr(this))},pr.prototype.c=function(t,e){var n=mr(this);return n.idToken=e,Bi(t,bh,n)},pr.prototype.f=function(t,e){var n=mr(this);return n.operation="REAUTH",t=Bi(t,wh,n),Jn(t,e)},pr.prototype.D=function(){var t={providerId:"phone"};return this.a.Sa&&(t.verificationId=this.a.Sa),this.a.Ra&&(t.verificationCode=this.a.Ra),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},vr.prototype.Ta=function(e,n){var r=this.a.b;return Y(n.verify()).then(function(i){if(!t(i))throw new On("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return Ai(r,{phoneNumber:e,recaptchaToken:i}).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new On("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Cn(vr,{PROVIDER_ID:"phone"}),Cn(vr,{PHONE_SIGN_IN_METHOD:"phone"}),br.prototype.D=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.D()}};var El=null;Er.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=on("universalLinks.subscribe",Tu),"function"==typeof t&&t(null,this.b))},Er.prototype.unsubscribe=function(t){N(this.a,function(e){return e==t})},p(Sr,On),p(Cr,On),Cr.prototype.D=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.D();return e&&K(t,e),t},Cr.prototype.toJSON=function(){return this.D()};var Sl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;kr.prototype.c=null;var Cl;p(Pr,kr),Pr.prototype.a=function(){var t=Nr(this);return t?new ActiveXObject(t):new XMLHttpRequest},Pr.prototype.b=function(){var t={};return Nr(this)&&(t[0]=!0,t[1]=!0),t},Cl=new Pr,p(Or,kr),Or.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ar;throw Error("Unsupported browser")},Or.prototype.b=function(){return{}},Eu=Ar.prototype,Eu.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},Eu.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},Eu.abort=function(){this.a.abort()},Eu.setRequestHeader=function(){},Eu.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},Eu.bc=function(){this.status=200,this.responseText=this.a.responseText,xr(this,4)},Eu.Bb=function(){this.status=500,this.responseText="",xr(this,4)},Eu.fc=function(){this.Bb()},Eu.cc=function(){this.status=200,xr(this,1)},Eu.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Rr.prototype.a=null;var Tl=0;Rr.prototype.reset=function(t,e,n,r,i){"number"==typeof i||Tl++,r||Pu(),delete this.a},Mr.prototype.toString=function(){return this.name};var kl=new Mr("SEVERE",1e3),Il=new Mr("WARNING",900),Pl=new Mr("CONFIG",700),Nl=new Mr("FINE",500);Dr.prototype.log=function(t,e,n){if(t.value>=Lr(this).value)for(u(e)&&(e=e()),t=new Rr(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ol={},Al=null;p(Br,kr),Br.prototype.a=function(){return new Kr(this.f)},Br.prototype.b=function(t){return function(){return t}}({}),p(Kr,Ft);var xl=0;Eu=Kr.prototype,Eu.open=function(t,e){if(this.readyState!=xl)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,jr(this)},Eu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.ec.bind(this),this.Cb.bind(this))},Eu.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,jr(this)),this.readyState=xl},Eu.ec=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,jr(this)),this.a&&(this.readyState=3,jr(this),this.a&&t.text().then(this.dc.bind(this,t),this.Cb.bind(this))))},Eu.dc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,jr(this))},Eu.Cb=function(t){var e=this.f;e&&e.log(Il,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,jr(this))},Eu.setRequestHeader=function(t,e){this.g.append(t,e)},Eu.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(Il,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},Eu.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(Il,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},p(Vr,Ft);var Rl="";Vr.prototype.b=Fr("goog.net.XhrIo");var Dl=/^https?$/i,Ml=["POST","PUT"];Eu=Vr.prototype,Eu.Ga=function(){"undefined"!=typeof Cu&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ur(this.b,ti(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},Eu.abort=function(){this.a&&this.c&&(Ur(this.b,ti(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Yr(this))},Eu.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Yr(this,!0)),Vr.lb.ua.call(this)},Eu.Fb=function(){this.pa||(this.I||this.i||this.f?Qr(this):this.tc())},Eu.tc=function(){Qr(this)},Eu.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Rl:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(kl,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return Ur(this.b,"Can not get response: "+t.message),null}},ei.prototype.cancel=function(t){if(this.a)this.c instanceof ei&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new ci(this),ri(this),ni(this,!1,t))}},ei.prototype.o=function(t,e){this.i=!1,ni(this,t,e)},ei.prototype.C=function(){ri(this),ni(this,!0,null)},ei.prototype.then=function(t,e,n){var r,i,o=new H(function(t,e){r=t,i=e});return oi(this,r,function(t){t instanceof ci?o.cancel():i(t)}),o.then(t,e,n)},m(ei),p(ui,g),ui.prototype.message="Deferred has already fired",ui.prototype.name="AlreadyCalledError",p(ci,g),ci.prototype.message="Deferred was canceled",ci.prototype.name="CanceledError",li.prototype.c=function(){throw delete Ll[this.a],this.b};var Ll={},Fl=0,Ul=1;p(mi,g),p(vi,kr),vi.prototype.a=function(){return new this.f},vi.prototype.b=function(){return{}};var Bl,Kl="idToken",jl=new gn(3e4,6e4),Vl={"Content-Type":"application/x-www-form-urlencoded"},Wl=new gn(3e4,6e4),Gl={"Content-Type":"application/json"};gi.prototype.o=function(t,e,n,r,i,o){if(Je()&&("undefined"==typeof Tu.fetch||"undefined"==typeof Tu.Headers||"undefined"==typeof Tu.Request))throw new On("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Vr(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Ut(a,"complete",function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(Zr(this))||null}catch(e){t=null}e&&e(t)}),Bt(a,"ready",function(){s&&clearTimeout(s),dt(this)}),Bt(a,"timeout",function(){s&&clearTimeout(s),dt(this),e&&e(null)}),Wr(a,t,n,r,i)};var ql=ge("https://apis.google.com/js/client.js?onload=%{onload}"),Hl="__fcb"+Math.floor(1e6*Math.random()).toString();gi.prototype.l=function(t,e,n,r,i){var o=this;Bl.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},gi.prototype.Pa=function(){return Bi(this,dh,{})},gi.prototype.mb=function(t,e){return Bi(this,hh,{idToken:t,email:e})},gi.prototype.nb=function(t,e){return Bi(this,fh,{idToken:t,password:e})};var zl={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Eu=gi.prototype,Eu.ob=function(t,e){var n={idToken:t},r=[];return F(zl,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Bi(this,hh,n)},Eu.hb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},K(t,e),Bi(this,ah,t)},Eu.ib=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},K(t,e),Bi(this,ih,t)},Eu.gb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},K(t,e),Bi(this,oh,t)},Eu.Ta=function(t){return Bi(this,_h,t)},Eu.Xa=function(t,e){return Bi(this,ch,{oobCode:t,newPassword:e})},Eu.Ja=function(t){return Bi(this,Xl,{oobCode:t})},Eu.Va=function(t){return Bi(this,Yl,{oobCode:t})};var Ql,Yl={endpoint:"setAccountInfo",B:Ui,da:"email"},Xl={endpoint:"resetPassword",B:Ui,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new On("internal-error")}},Jl={endpoint:"signupNewUser",B:function(t){if(Ci(t),!t.password)throw new On("weak-password")},J:Ni,R:!0},$l={endpoint:"createAuthUri"},Zl={endpoint:"deleteAccount",T:["idToken"]},th={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!a(t.deleteProvider))throw new On("internal-error")}},eh={endpoint:"emailLinkSignin",T:["email","oobCode"],B:Ci,J:Ni,R:!0},nh={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:Ci,J:Ni,R:!0},rh={endpoint:"getAccountInfo"},ih={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new On("internal-error");Ci(t)},da:"email"},oh={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new On("internal-error")},da:"email"},ah={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new On("internal-error");Ci(t)},da:"email"},sh={rb:!0,endpoint:"getProjectConfig",Eb:"GET"},uh={rb:!0,endpoint:"getRecaptchaParam",Eb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new On("internal-error")}},ch={endpoint:"resetPassword",B:Ui,da:"email"},lh={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},hh={endpoint:"setAccountInfo",T:["idToken"],B:Ti,R:!0},fh={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(Ti(t),!t.password)throw new On("weak-password")},J:Ni,R:!0},dh={endpoint:"signupNewUser",J:Ni,R:!0},ph={endpoint:"verifyAssertion",B:Ri,J:Di,R:!0},mh={endpoint:"verifyAssertion",B:Ri,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new On("user-not-found");if(t.errorMessage)throw Ki(t.errorMessage);if(!t[Kl])throw new On("internal-error")},R:!0},vh={endpoint:"verifyAssertion",B:function(t){if(Ri(t),!t.idToken)throw new On("internal-error")},J:Di,R:!0},gh={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new On("invalid-custom-token")},J:Ni,R:!0},yh={endpoint:"verifyPassword",B:function(t){if(Ci(t),!t.password)throw new On("wrong-password")},J:Ni,R:!0},_h={endpoint:"verifyPhoneNumber",B:Oi,J:Ni},bh={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new On("internal-error");Oi(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Tr(t);Ni(t)}},wh={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Oi,J:Ni},Eh={Yc:{Za:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{Za:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{Za:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",fb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Ql=Vi("__EID__")?"__EID__":void 0;var Sh=ge("https://apis.google.com/js/api.js?onload=%{onload}"),Ch=new gn(3e4,6e4),Th=new gn(5e3,15e3),kh=null;Qi.prototype.toString=function(){return this.f?te(this.a,"v",this.f):le(this.a.a,"v"),this.b?te(this.a,"eid",this.b):le(this.a.a,"eid"),this.c.length?te(this.a,"fw",this.c.join(",")):le(this.a.a,"fw"),this.a.toString()},Yi.prototype.toString=function(){var t=re(this.o,"/__/auth/handler");if(te(t,"apiKey",this.l),te(t,"appName",this.c),te(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Su.app(this.c).auth().ea()}catch(t){n=null}e.Ya=n,te(t,"providerId",this.a.providerId),e=this.a,n=fn(e.vb);for(var r in n)n[r]=n[r].toString();r=e.Ac,n=B(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.$a&&e.Ya&&!n[e.$a]&&(n[e.$a]=e.Ya),U(n)||te(t,"customParameters",hn(n))}if("function"==typeof this.a.Ab&&(e=this.a.Ab(),e.length&&te(t,"scopes",e.join(","))),this.i?te(t,"redirectUrl",this.i):le(t.a,"redirectUrl"),this.g?te(t,"eventId",this.g):le(t.a,"eventId"),this.h?te(t,"v",this.h):le(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!ee(t,a)&&te(t,a,this.b[a]);return this.f?te(t,"eid",this.f):le(t.a,"eid"),a=Xi(this.c),a.length&&te(t,"fw",a.join(",")),t.toString()},Eu=Ji.prototype,Eu.Ea=function(t,e,n){var r=new On("popup-closed-by-user"),i=new On("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){ro(o).then(function(n){n||(t&&Ge(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return He(t)}).then(function(){if(!a)return Vt(n).then(function(){e(r)})})},Eu.Ib=function(){var t=rn();return!ln(t)&&!mn(t)},Eu.Db=function(){return!1},Eu.zb=function(t,e,n,r,i,o,a){if(!t)return X(new On("popup-blocked"));if(a&&!ln())return this.ga().s(function(e){Ge(t),i(e)}),r(),Y();this.a||(this.a=$i(to(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw Ge(t),i(e),e});return r(),e}).then(function(){if(_r(n),!a){var r=eo(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h);Ke(r,t)}}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},Eu.Ca=function(t,e,n){this.a||(this.a=$i(to(this)));var r=this;return this.a.then(function(){_r(e);var i=eo(r.l,r.f,r.b,t,e,Be(),n,r.c,void 0,r.h);Ke(i)}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},Eu.ga=function(){var t=this;return Zi(this).then(function(){return t.i.bb}).s(function(){throw t.a=null,new On("network-request-failed")})},Eu.Mb=function(){return!0},Eu.va=function(t){this.g.push(t)},Eu.Ka=function(t){N(this.g,function(e){return e==t})},Eu=io.prototype,Eu.get=function(t){return Y(this.a.getItem(t)).then(function(t){return t&&dn(t)})},Eu.set=function(t,e){return Y(this.a.setItem(t,hn(e)))},Eu.P=function(t){return Y(this.a.removeItem(t))},Eu.Y=function(){},Eu.ca=function(){};var Ih;Eu=oo.prototype,Eu.set=function(t,e){var n,r=!1,i=this;return uo(this).then(function(e){return n=e,e=lo(ho(n,!0)),fo(e.get(t))}).then(function(o){var a=lo(ho(n,!0));return o?(o.value=e,fo(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=t,o.value=e,fo(a.add(o)))}).then(function(){i.f[t]=e}).ia(function(){r&&i.b--})},Eu.get=function(t){return uo(this).then(function(e){return fo(lo(ho(e,!1)).get(t))}).then(function(t){return t&&t.value})},Eu.P=function(t){var e=!1,n=this;return uo(this).then(function(r){return e=!0,n.b++,fo(lo(ho(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ia(function(){e&&n.b--})},Eu.Kc=function(){var t=this;return uo(this).then(function(t){var e=lo(ho(t,!1));return e.getAll?fo(e.getAll()):new H(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=je(t.f,n),t.f=n}return r})},Eu.Y=function(t){0==this.a.length&&po(this),this.a.push(t)},Eu.ca=function(t){N(this.a,function(e){return e==t}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},Eu=mo.prototype,Eu.get=function(t){return this.b.then(function(e){return e.get(t)})},Eu.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},Eu.P=function(t){return this.b.then(function(e){return e.P(t)})},Eu.Y=function(t){this.a.push(t)},Eu.ca=function(t){N(this.a,function(e){return e==t})},Eu=vo.prototype,Eu.get=function(t){return Y(this.a[t])},Eu.set=function(t,e){return this.a[t]=e,Y()},Eu.P=function(t){return delete this.a[t],Y()},Eu.Y=function(){},Eu.ca=function(){},Eu=go.prototype,Eu.get=function(t){var e=this;return Y().then(function(){var n=e.a.getItem(t);return dn(n)})},Eu.set=function(t,e){var n=this;return Y().then(function(){var r=hn(e);null===r?n.P(t):n.a.setItem(t,r)})},Eu.P=function(t){var e=this;return Y().then(function(){e.a.removeItem(t)})},Eu.Y=function(t){Tu.window&&Tt(Tu.window,"storage",t)},Eu.ca=function(t){Tu.window&&Nt(Tu.window,"storage",t)},Eu=bo.prototype,Eu.get=function(){return Y(null)},Eu.set=function(){return Y()},Eu.P=function(){return Y()},Eu.Y=function(){},Eu.ca=function(){},Eu=wo.prototype,Eu.get=function(t){var e=this;return Y().then(function(){var n=e.a.getItem(t);return dn(n)})},Eu.set=function(t,e){var n=this;return Y().then(function(){var r=hn(e);null===r?n.P(t):n.a.setItem(t,r)})},Eu.P=function(t){var e=this;return Y().then(function(){e.a.removeItem(t)})},Eu.Y=function(){},Eu.ca=function(){};var Ph,Nh,Oh={A:go,Qa:wo},Ah={A:go,Qa:wo},xh={A:io,Qa:bo},Rh={A:go,Qa:bo},Dh={Xc:"local",NONE:"none",Zc:"session"};Eu=ko.prototype,Eu.get=function(t,e){return Po(this,t.A).get(No(t,e))},Eu.set=function(t,e,n){var r=No(t,n),i=this,o=Po(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},Eu.addListener=function(t,e,n){t=No(t,e),this.m&&(this.b[t]=Tu.localStorage.getItem(t)),U(this.a)&&(Po(this,"local").Y(this.f),this.h||(Ue()||!wn())&&Tu.indexedDB||!this.m||xo(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},Eu.removeListener=function(t,e,n){t=No(t,e),this.a[t]&&(N(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),U(this.a)&&(Po(this,"local").ca(this.f),Ro(this))},Eu.Lb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"==typeof r&&(r=null);var i=Tu.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Wa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!=typeof t.a.a?Po(this,"local").ca(this.f):Ro(this),this.o)if(n=Tu.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?Tu.localStorage.setItem(e,r):Tu.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"==typeof t.a.a)return;var o=this;n=function(){"undefined"==typeof t.a.a&&o.b[e]===Tu.localStorage.getItem(e)||(o.b[e]=Tu.localStorage.getItem(e),o.Wa(e))},oc&&dc&&10==dc&&Tu.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else xu(t,f(this.Wa,this))},Eu.Wa=function(t){this.a[t]&&xu(this.a[t],function(t){t()})};var Mh,Lh={name:"authEvent",A:"local"};p(Uo,Fo);for(var Fh=64,Uh=Fh-1,Bh=[],Kh=0;Kh<Uh;Kh++)Bh[Kh]=0;var jh=O(128,Bh);Uo.prototype.reset=function(){this.g=this.c=0,this.a=Tu.Int32Array?new Int32Array(this.h):A(this.h)};var Vh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];p(jo,Uo);var Wh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Eu=Vo.prototype,Eu.ga=function(){return this.za?this.za:this.za=Qe().then(function(){if("function"!=typeof on("universalLinks.subscribe",Tu))throw Wo("cordova-universal-links-plugin is not installed");if("undefined"==typeof on("BuildInfo.packageName",Tu))throw Wo("cordova-plugin-buildinfo is not installed");if("function"!=typeof on("cordova.plugins.browsertab.openUrl",Tu))throw Wo("cordova-plugin-browsertab is not installed");if("function"!=typeof on("cordova.InAppBrowser.open",Tu))throw Wo("cordova-plugin-inappbrowser is not installed")},function(){throw new On("cordova-not-ready")})},Eu.Ea=function(t,e){return e(new On("operation-not-supported-in-this-environment")),Y()},Eu.zb=function(){return X(new On("operation-not-supported-in-this-environment"))},Eu.Mb=function(){return!1},Eu.Ib=function(){return!0},Eu.Db=function(){return!0},Eu.Ca=function(t,e,n){if(this.c)return X(new On("redirect-operation-pending"));var r=this,i=Tu.document,o=null,a=null,s=null,u=null;return this.c=Y().then(function(){return _r(e),Qo(r)}).then(function(){return Ho(r,t,e,n)}).then(function(){return new H(function(t,e){a=function(){var e=on("cordova.plugins.browsertab.close",Tu);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(a),s=function(){o||(o=Vt(2e3).then(function(){e(new On("redirect-cancelled-by-user"))}))},u=function(){yn()&&s()},i.addEventListener("resume",s,!1),rn().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(t){return Yo(r).then(function(){throw t})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ka(a),r.c=null})},Eu.va=function(t){this.b.push(t),Qo(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new br("unknown",null,null,null,new On("no-auth-event")),t(e))})},Eu.Ka=function(t){N(this.b,function(e){return e==t})};var Gh={name:"pendingRedirect",A:"session"};ea.prototype.reset=function(){this.f=!1,this.a.Ka(this.i),this.a=na(this.v,this.m,this.l)},ea.prototype.subscribe=function(t){if(I(this.h,t)||this.h.push(t),!this.f){var e=this;ta(this.g).then(function(t){t?Zo(e.g).then(function(){ra(e).s(function(t){var n=new br("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));aa(t)&&e.o(n)})}):ia(e)}).s(function(){ia(e)})}},ea.prototype.unsubscribe=function(t){N(this.h,function(e){return e==t})},ea.prototype.o=function(t){if(!t)throw new On("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.sb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return ca(this.c),e};var qh=new gn(2e3,1e4),Hh=new gn(3e4,6e4);ea.prototype.fa=function(){return this.c.fa()},ea.prototype.Ca=function(t,e,n){var r,i=this;return $o(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(aa(t))throw new On("operation-not-supported-in-this-environment");return r=t,Zo(i.g).then(function(){throw r})}).then(function(){return i.a.Mb()?new H(function(){}):Zo(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},ea.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},qh.get())};var zh={};ua.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ua.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;"unknown"!=n||i||o?t.a?(da(this,!0,null,t.a),Y()):e.wa(n,r)?la(this,t,e):X(new On("invalid-auth-event")):(da(this,!1,null,null),Y())}else X(new On("invalid-auth-event"))},ua.prototype.fa=function(){var t=this;return new H(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),pa(t))})},ma.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),Y()):e.wa(n,r)?va(t,e):X(new On("invalid-auth-event"))}else X(new On("invalid-auth-event"))},ya.prototype.confirm=function(t){return t=gr(this.verificationId,t),this.a(t)},wa.prototype.start=function(){this.a=this.c,Sa(this,!0)},wa.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ca.prototype.D=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ca.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?X(new On("user-token-expired")):t||!this.b||Pu()>this.c-3e4?this.a?Pa(this,{grant_type:"refresh_token",refresh_token:this.a}):Y(null):Y({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Na.prototype.D=function(){return{lastLoginAt:this.b,createdAt:this.a}},p(xa,yt),p(Ra,Ft),Ra.prototype.oa=function(t){this.ka=t,yi(this.b,t)},Ra.prototype.ea=function(){return this.ka},Ra.prototype.xa=function(){return A(this.O)},Ra.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Sn(Ra.prototype,"providerId","firebase"),Eu=Ra.prototype,Eu.reload=function(){var t=this;return cs(this,za(this).then(function(){return Za(t).then(function(){return Wa(t)}).then(Ha)}))},Eu.ac=function(t){return this.F(t).then(function(t){return new ba(t)})},Eu.F=function(t){var e=this;return cs(this,za(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new On("internal-error");return t.accessToken!=e.qa&&(ja(e,t.accessToken),e.dispatchEvent(new xa("tokenChanged"))),Ja(e,"refreshToken",t.refreshToken),t.accessToken}))},Eu.uc=function(t){if(t=t.users,!t||!t.length)throw new On("internal-error");t=t[0],qa(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,
phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=ns(t),n=0;n<e.length;n++)Ya(this,e[n]);Ja(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},Eu.cb=function(t){var e=this,n=null;return cs(this,t.f(this.b,this.uid).then(function(t){return ts(e,t),n=is(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},Eu.vc=function(t){return En("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.cb(t).then(function(){})},Eu.ab=function(t){var e=this,n=null;return cs(this,rs(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=is(e,t,"link"),os(e,t)}).then(function(){return n}))},Eu.mc=function(t){return En("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.ab(t).then(function(t){return t.user})},Eu.nc=function(t,e){var n=this;return cs(this,rs(this,"phone").then(function(){return _a(Fa(n),t,e,f(n.ab,n))}))},Eu.wc=function(t,e){var n=this;return cs(this,Y().then(function(){return _a(Fa(n),t,e,f(n.cb,n))}),!0)},Eu.mb=function(t){var e=this;return cs(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return ts(e,t),e.reload()}))},Eu.Pc=function(t){var e=this;return cs(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return ts(e,t),e.reload()}))},Eu.nb=function(t){var e=this;return cs(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return ts(e,t),e.reload()}))},Eu.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return za(this);var e=this;return cs(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return ts(e,t),Ja(e,"displayName",t.displayName||null),Ja(e,"photoURL",t.photoUrl||null),xu(e.providerData,function(t){"password"===t.providerId&&(Sn(t,"displayName",e.displayName),Sn(t,"photoURL",e.photoURL))}),Wa(e)}).then(Ha))},Eu.Nc=function(t){var e=this;return cs(this,Za(this).then(function(n){return I(Qa(e),t)?xi(e.b,n,[t]).then(function(t){var n={};return xu(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),xu(Qa(e),function(t){n[t]||Xa(e,t)}),n[vr.PROVIDER_ID]||Sn(e,"phoneNumber",null),Wa(e)}):Wa(e).then(function(){throw new On("no-such-provider")})}))},Eu.delete=function(){var t=this;return cs(this,this.F().then(function(e){return Bi(t.b,Zl,{idToken:e})}).then(function(){t.dispatchEvent(new xa("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Da(t,null),La(t,null),t.G=[],t.C=!0,Ka(t),Sn(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},Eu.sb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},Eu.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},Eu.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?f(this.xb,this):"reauthViaPopup"==t&&e==(this.g||null)?f(this.yb,this):"linkViaRedirect"==t&&(this.aa||null)==e?f(this.xb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?f(this.yb,this):null},Eu.oc=function(t){var e=this;return as(this,"linkViaPopup",t,function(){return rs(e,t.providerId).then(function(){return Wa(e)})},!1)},Eu.xc=function(t){return as(this,"reauthViaPopup",t,function(){return Y()},!0)},Eu.pc=function(t){var e=this;return ss(this,"linkViaRedirect",t,function(){return rs(e,t.providerId)},!1)},Eu.yc=function(t){return ss(this,"reauthViaRedirect",t,function(){return Y()},!0)},Eu.xb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null,i=this.F().then(function(r){return Li(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=is(n,t,"link"),os(n,t)}).then(function(){return r});return cs(this,i)},Eu.yb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null,i=Y().then(function(){return Jn(Fi(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=is(n,t,"reauthenticate"),ts(n,t),n.i=null,n.reload()}).then(function(){return r});return cs(this,i,!0)},Eu.gb=function(t){var e=this,n=null;return cs(this,this.F().then(function(e){return n=e,"undefined"==typeof t||U(t)?{}:Rn(new xn(t))}).then(function(t){return e.b.gb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},Eu.toJSON=function(){return this.D()},Eu.D=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.D(),redirectEventId:this.aa||null};return this.metadata&&K(t,this.metadata.D()),xu(this.providerData,function(e){t.providerData.push(kn(e))}),t};var Qh={name:"redirectUser",A:"session"};gs.prototype.g=function(){var t=this,e=bs("local");Ts(this,function(){return Y().then(function(){return t.c&&"local"!=t.c.A?t.b.get(e,t.a):null}).then(function(n){if(n)return ys(t,"local").then(function(){t.c=e})})})};var Yh={name:"persistence",A:"session"};gs.prototype.jb=function(t){var e=null,n=this;return To(t),Ts(this,function(){return t!=n.c.A?n.b.get(n.c,n.a).then(function(r){return e=r,ys(n,t)}).then(function(){if(n.c=bs(t),e)return n.b.set(n.c,e,n.a)}):Y()})},p(ks,Ft),p(Is,yt),p(Ps,yt),Eu=ks.prototype,Eu.jb=function(t){return t=this.h.jb(t),Ws(this,t)},Eu.oa=function(t){this.W===t||this.l||(this.W=t,yi(this.b,this.W),this.dispatchEvent(new Is(this.ea())))},Eu.ea=function(){return this.W},Eu.Qc=function(){var t=Tu.navigator;this.oa(t?t.languages&&t.languages[0]||t.language||t.userLanguage||null:null)},Eu.qc=function(t){this.G.push(t),_i(this.b,Su.SDK_VERSION?nn(Su.SDK_VERSION,this.G):null),this.dispatchEvent(new Ps(this.G))},Eu.xa=function(){return A(this.G)},Eu.toJSON=function(){return{apiKey:Us(this).options.apiKey,authDomain:Us(this).options.authDomain,appName:Us(this).name,currentUser:Bs(this)&&Bs(this).D()}},Eu.sb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},Eu.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},Eu.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?f(this.Xb,this):null},Eu.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=Mi(n.b,t).then(function(t){return r=yr(t),i=Vn(t),t});return t=n.V.then(function(){return o}).then(function(t){return xs(n,t)}).then(function(){return Tn({user:Bs(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}),Ws(this,t)},Eu.Hc=function(t){if(!sn())return X(new On("operation-not-supported-in-this-environment"));var e=this,n=jn(t.providerId),r=pn(),i=null;(!ln()||Xe())&&Us(this).options.authDomain&&t.isOAuthProvider&&(i=eo(Us(this).options.authDomain,Us(this).options.apiKey,Us(this).name,"signInViaPopup",t,null,r,Su.SDK_VERSION||null));var o=qe(i,n&&n.Ba,n&&n.Aa);return n=Os(this).then(function(e){return oa(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new H(function(t,n){e.ha("signInViaPopup",null,new On("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=e.a.Ea(e,"signInViaPopup",o,r)})}).then(function(t){return o&&Ge(o),t?Tn(t):null}).s(function(t){throw o&&Ge(o),t}),Ws(this,n)},Eu.Ic=function(t){if(!sn())return X(new On("operation-not-supported-in-this-environment"));var e=this,n=Os(this).then(function(){return ws(e.h)}).then(function(){return e.a.Ca("signInViaRedirect",t)});return Ws(this,n)},Eu.fa=function(){if(!sn())return X(new On("operation-not-supported-in-this-environment"));var t=this,e=Os(this).then(function(){return t.a.fa()}).then(function(t){return t?Tn(t):null});return Ws(this,e)},Eu.Oc=function(t){if(!t)return X(new On("null-user"));var e=this,n={};n.apiKey=Us(this).options.apiKey,n.authDomain=Us(this).options.authDomain,n.appName=Us(this).name;var r=ds(t,n,e.w,e.xa());return Ws(this,this.i.then(function(){if(Us(e).options.apiKey!=t.l)return r.reload()}).then(function(){return Bs(e)&&t.uid==Bs(e).uid?($a(Bs(e),t),e.Z(t)):(Rs(e,r),Ga(r),e.Z(r))}).then(function(){js(e)}))},Eu.kb=function(){var t=this,e=this.i.then(function(){return Bs(t)?(Rs(t,null),Ss(t.h).then(function(){js(t)})):Y()});return Ws(this,e)},Eu.Jc=function(){var t=this;return Cs(this.h,Us(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=Bs(t)&&e){n=Bs(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return $a(Bs(t),e),Bs(t).F();(Bs(t)||e)&&(Rs(t,e),e&&(Ga(e),e.ba=t.w),t.a&&t.a.subscribe(t),js(t))}})},Eu.Z=function(t){return Es(this.h,t)},Eu.Yb=function(){js(this),this.Z(Bs(this))},Eu.gc=function(){this.kb()},Eu.hc=function(){this.kb()},Eu.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Bs(e))})},Eu.jc=function(t){var e=this;Vs(this,function(){t.next(Bs(e))})},Eu.sc=function(t,e,n){var r=this;return this.X&&Su.Promise.resolve().then(function(){u(t)?t(Bs(r)):u(t.next)&&t.next(Bs(r))}),this.Pb(t,e,n)},Eu.rc=function(t,e,n){var r=this;return this.X&&Su.Promise.resolve().then(function(){r.O=r.getUid(),u(t)?t(Bs(r)):u(t.next)&&t.next(Bs(r))}),this.Qb(t,e,n)},Eu.$b=function(t){var e=this,n=this.i.then(function(){return Bs(e)?Bs(e).F(t).then(function(t){return{accessToken:t}}):null});return Ws(this,n)},Eu.Jb=function(t){var e=this;return this.i.then(function(){return Fs(e,Bi(e.b,gh,{token:t}))}).then(function(t){var n=t.user;return Ja(n,"isAnonymous",!1),e.Z(n),t})},Eu.Bc=function(t){return En("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Jb(t)},Eu.Cc=function(t,e){return En("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Kb(t,e)},Eu.Kb=function(t,e){var n=this;return this.i.then(function(){return Fs(n,Bi(n.b,yh,{email:t,password:e}))})},Eu.ub=function(t,e){var n=this;return this.i.then(function(){return Fs(n,Bi(n.b,Jl,{email:t,password:e}))})},Eu.Sb=function(t,e){return En("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.ub(t,e)},Eu.Ec=function(t){return En("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Oa(t).then(function(t){return t.user})},Eu.Oa=function(t){var e=this;return this.i.then(function(){return Fs(e,t.ya(e.b))})},Eu.Pa=function(){var t=this;return this.i.then(function(){var e=Bs(t);if(e&&e.isAnonymous){var n=Tn({providerId:null,isNewUser:!1});return Tn({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Fs(t,t.b.Pa()).then(function(e){var n=e.user;return Ja(n,"isAnonymous",!0),t.Z(n),e})})},Eu.Dc=function(){return En("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Pa()},Eu.getUid=function(){return Bs(this)&&Bs(this).uid||null},Eu.Rb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Bs(this)&&Ba(Bs(this))},Eu.zc=function(t){var e=this;xu(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&Bs(this)&&Ka(Bs(this)),this.removeAuthTokenListener(t)},Eu.addAuthTokenListener=function(t){var e=this;this.o.push(t),Ws(this,this.i.then(function(){e.l||I(e.o,t)&&t(Ks(e))}))},Eu.removeAuthTokenListener=function(t){N(this.o,function(e){return e==t})},Eu.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h,t.b.removeListener(bs("local"),t.a,this.ka)),this.a&&this.a.unsubscribe(this),Su.Promise.resolve()},Eu.Vb=function(t){return En("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Ws(this,ki(this.b,t))},Eu.Wb=function(t){return Ws(this,Ii(this.b,t))},Eu.kc=function(t){return!!dr(t)},Eu.ib=function(t,e){var n=this;return Ws(this,Y().then(function(){var t=new xn(e);if(!t.c)throw new On("argument-error",ul+" must be true when sending sign in link to email");return Rn(t)}).then(function(e){return n.b.ib(t,e)}).then(function(){}))},Eu.Rc=function(t){return this.Ja(t).then(function(t){return t.data.email})},Eu.Xa=function(t,e){return Ws(this,this.b.Xa(t,e).then(function(){}))},Eu.Ja=function(t){return Ws(this,this.b.Ja(t).then(function(t){return new Nn(t)}))},Eu.Va=function(t){return Ws(this,this.b.Va(t).then(function(){}))},Eu.hb=function(t,e){var n=this;return Ws(this,Y().then(function(){return"undefined"==typeof e||U(e)?{}:Rn(new xn(e))}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},Eu.Gc=function(t,e){return Ws(this,_a(this,t,e,f(this.Oa,this)))},Eu.Fc=function(t,e){var n=this;return Ws(this,Y().then(function(){var r=fr(t,e||Be());return n.Oa(r)}))},Gs.prototype.render=function(){},Gs.prototype.reset=function(){},Gs.prototype.getResponse=function(){},Gs.prototype.execute=function(){};var Xh=null;qs.prototype.render=function(t,e){return this.a[this.b.toString()]=new Qs(t,e),this.b++},qs.prototype.reset=function(t){var e=Hs(this,t);t=zs(t),e&&t&&(e.delete(),delete this.a[t])},qs.prototype.getResponse=function(t){return(t=Hs(this,t))?t.getResponse():null},qs.prototype.execute=function(t){(t=Hs(this,t))&&t.execute()},Qs.prototype.getResponse=function(){return Ys(this),this.b},Qs.prototype.execute=function(){Ys(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=tn();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},Qs.prototype.delete=function(){Ys(this),this.g=!0,clearTimeout(this.a),this.a=null,Nt(this.f,"click",this.i)},Xs.prototype.g=function(){return Xh||(Xh=new qs),Y(Xh)},Xs.prototype.c=function(){};var Jh=null,$h=ge("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Zh=new gn(3e4,6e4);Js.prototype.g=function(t){var e=this;return new H(function(n,r){var i=setTimeout(function(){r(new On("network-request-failed"))},Zh.get());if(!Tu.grecaptcha||t!==e.f&&!e.b){Tu[e.a]=function(){if(Tu.grecaptcha){e.f=t;var o=Tu.grecaptcha.render;Tu.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(Tu.grecaptcha)}else clearTimeout(i),r(new On("internal-error"));delete Tu[e.a]};var o=be($h,{onload:e.a,hl:t||""});Y(hi(o)).s(function(){clearTimeout(i),r(new On("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(Tu.grecaptcha)})},Js.prototype.c=function(){this.b--};var tf=null,ef="callback",nf="expired-callback",rf="sitekey",of="size";Eu=$s.prototype,Eu.za=function(){var t=this;return this.f?this.f:this.f=eu(this,Y().then(function(){if(un()&&!Je())return ze();throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,Bi(t.u,uh,{})}).then(function(e){t.a[rf]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},Eu.render=function(){nu(this);var t=this;return eu(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=Ne(e);e=Ae("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},Eu.verify=function(){nu(this);var t=this;return eu(this,this.render().then(function(e){return new H(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(tu(t,i),n(e))};t.m.push(i),t.i&&t.g.execute(t.c)}})}))},Eu.reset=function(){nu(this),null!==this.c&&this.g.reset(this.c)},Eu.clear=function(){nu(this),this.C=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Ne(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},p(ru,$s);var af="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");gu(ks.prototype,{Va:{name:"applyActionCode",j:[ou("code")]},Ja:{name:"checkActionCode",j:[ou("code")]},Xa:{name:"confirmPasswordReset",j:[ou("code"),ou("newPassword")]},ub:{name:"createUserWithEmailAndPassword",j:[ou("email"),ou("password")]},Sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[ou("email"),ou("password")]},Vb:{name:"fetchProvidersForEmail",j:[ou("email")]},Wb:{name:"fetchSignInMethodsForEmail",j:[ou("email")]},fa:{name:"getRedirectResult",j:[]},kc:{name:"isSignInWithEmailLink",j:[ou("emailLink")]},rc:{name:"onAuthStateChanged",j:[vu(su(),uu(),"nextOrObserver"),uu("opt_error",!0),uu("opt_completed",!0)]},sc:{name:"onIdTokenChanged",j:[vu(su(),uu(),"nextOrObserver"),uu("opt_error",!0),uu("opt_completed",!0)]},hb:{name:"sendPasswordResetEmail",j:[ou("email"),vu(su("opt_actionCodeSettings",!0),cu(null,!0),"opt_actionCodeSettings",!0)]},ib:{name:"sendSignInLinkToEmail",j:[ou("email"),su("actionCodeSettings")]},jb:{name:"setPersistence",j:[ou("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[du()]},Pa:{name:"signInAnonymously",j:[]},Dc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Ec:{name:"signInWithCredential",j:[du()]},Jb:{name:"signInWithCustomToken",j:[ou("token")]},Bc:{name:"signInAndRetrieveDataWithCustomToken",j:[ou("token")]},Kb:{name:"signInWithEmailAndPassword",j:[ou("email"),ou("password")]},Fc:{name:"signInWithEmailLink",j:[ou("email"),ou("emailLink",!0)]},Cc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[ou("email"),ou("password")]},Gc:{name:"signInWithPhoneNumber",j:[ou("phoneNumber"),mu()]},Hc:{name:"signInWithPopup",j:[pu()]},Ic:{name:"signInWithRedirect",j:[pu()]},Oc:{name:"updateCurrentUser",j:[vu(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Ra)}}}(),cu(),"user")]},kb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ou(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[ou("code")]}}),yu(ks.prototype,{lc:{name:"languageCode",qb:vu(ou(),cu(),"languageCode")}}),ks.Persistence=Dh,ks.Persistence.LOCAL="local",ks.Persistence.SESSION="session",ks.Persistence.NONE="none",gu(Ra.prototype,{delete:{name:"delete",j:[]},ac:{name:"getIdTokenResult",j:[au("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[au("opt_forceRefresh",!0)]},ab:{name:"linkAndRetrieveDataWithCredential",j:[du()]},mc:{name:"linkWithCredential",j:[du()]},nc:{name:"linkWithPhoneNumber",j:[ou("phoneNumber"),mu()]},oc:{name:"linkWithPopup",j:[pu()]},pc:{name:"linkWithRedirect",j:[pu()]},cb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[du()]},vc:{name:"reauthenticateWithCredential",j:[du()]},wc:{name:"reauthenticateWithPhoneNumber",j:[ou("phoneNumber"),mu()]},xc:{name:"reauthenticateWithPopup",j:[pu()]},yc:{name:"reauthenticateWithRedirect",j:[pu()]},reload:{name:"reload",j:[]},gb:{name:"sendEmailVerification",j:[vu(su("opt_actionCodeSettings",!0),cu(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ou(null,!0)]},Nc:{name:"unlink",j:[ou("provider")]},mb:{name:"updateEmail",j:[ou("email")]},nb:{name:"updatePassword",j:[ou("password")]},Pc:{name:"updatePhoneNumber",j:[du("phone")]},ob:{name:"updateProfile",j:[su("profile")]}}),gu(qs.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gu(Gs.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gu(H.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),yu(ga.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",qb:au("appVerificationDisabledForTesting")}}),gu(ya.prototype,{confirm:{name:"confirm",j:[ou("verificationCode")]}}),_u(hr,"credential",function(t,e){return new lr(t,e)},[ou("email"),ou("password")]),gu(nr.prototype,{ta:{name:"addScope",j:[ou("scope")]},Da:{name:"setCustomParameters",j:[su("customOAuthParameters")]}}),_u(nr,"credential",rr,[vu(ou(),su(),"token")]),_u(hr,"credentialWithLink",fr,[ou("email"),ou("emailLink")]),gu(ir.prototype,{ta:{name:"addScope",j:[ou("scope")]},Da:{name:"setCustomParameters",j:[su("customOAuthParameters")]}}),_u(ir,"credential",or,[vu(ou(),su(),"token")]),gu(ar.prototype,{ta:{name:"addScope",j:[ou("scope")]},Da:{name:"setCustomParameters",j:[su("customOAuthParameters")]}}),_u(ar,"credential",sr,[vu(ou(),vu(su(),cu()),"idToken"),vu(ou(),cu(),"accessToken",!0)]),gu(ur.prototype,{Da:{name:"setCustomParameters",j:[su("customOAuthParameters")]}}),_u(ur,"credential",cr,[vu(ou(),su(),"token"),ou("secret",!0)]),gu(er.prototype,{ta:{name:"addScope",j:[ou("scope")]},credential:{name:"credential",j:[vu(ou(),cu(),"idToken",!0),vu(ou(),cu(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[su("customOAuthParameters")]}}),_u(vr,"credential",gr,[ou("verificationId"),ou("verificationCode")]),gu(vr.prototype,{Ta:{name:"verifyPhoneNumber",j:[ou("phoneNumber"),mu()]}}),gu(On.prototype,{toJSON:{name:"toJSON",j:[ou(null,!0)]}}),gu(Cr.prototype,{toJSON:{name:"toJSON",j:[ou(null,!0)]}}),gu(Sr.prototype,{toJSON:{name:"toJSON",j:[ou(null,!0)]}}),gu(ru.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"==typeof Su||!Su.INTERNAL||!Su.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:ks,Error:On};_u(t,"EmailAuthProvider",hr,[]),_u(t,"FacebookAuthProvider",nr,[]),_u(t,"GithubAuthProvider",ir,[]),_u(t,"GoogleAuthProvider",ar,[]),_u(t,"TwitterAuthProvider",ur,[]),_u(t,"OAuthProvider",er,[ou("providerId")]),_u(t,"PhoneAuthProvider",vr,[hu()]),_u(t,"RecaptchaVerifier",ru,[vu(ou(),lu(),"recaptchaContainer"),su("recaptchaParameters",!0),fu()]),Su.INTERNAL.registerService("auth",function(t,e){return t=new ks(t),e({INTERNAL:{getUid:f(t.getUid,t),getToken:f(t.$b,t),addAuthTokenListener:f(t.Rb,t),removeAuthTokenListener:f(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),Su.INTERNAL.extendNamespace({User:Ra})}()}).call("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,function(){return this}())},/*!************************************************!*\
  !*** ./~/@firebase/database/dist/index.cjs.js ***!
  \************************************************/
function(t,e,n){(function(r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function o(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}function a(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):j("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}function s(t){m=t}function u(t){g=t}function c(t){y=t}function l(t,e){return z(t.name,e.name)}function h(t,e){return z(t,e)}function f(t,e){if(void 0===e&&(e=null),null===t)return ue.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),w.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){var n=t;return new Xt(n,f(e))}if(t instanceof Array||!he){var r=ue.EMPTY_NODE,i=t;return w.forEach(i,function(t,e){if(w.contains(i,t)&&"."!==t.substring(0,1)){var n=f(e);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(t,n))}}),r.updatePriority(f(e))}var o=[],a=!1,s=t;if(w.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=f(s[t]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new Gt(t,n)))}}),0==o.length)return ue.EMPTY_NODE;var u=oe(o,l,function(t){return t.name},h);if(a){var c=oe(o,$t.getCompare());return new ue(u,f(e),new se({".priority":c},{".priority":$t}))}return new ue(u,f(e),se.Default)}function d(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return Cr.getInstance().databaseFromApp(t,n)},{Reference:yr,Query:Ee,Database:Tr,enableLogging:L,INTERNAL:Mr,ServerValue:Gr,TEST_ACCESS:Wr},null,!0);w.isNodeSdk()&&(t.exports=n)}Object.defineProperty(e,"__esModule",{value:!0});var p,m,v,g,y,_,b,w=n(/*! @firebase/util */55),E=n(/*! @firebase/logger */84),S=n(/*! tslib */41),C=i(n(/*! @firebase/app */20)),T=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),w.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:w.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),k=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return w.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),I=function(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new T(e)}}catch(t){}return new k},P=I("localStorage"),N=I("sessionStorage"),O=new E.Logger("@firebase/database"),A=function(){var t=1;return function(){return t++}}(),x=function(t){var e=w.stringToByteArray(t),n=new w.Sha1;n.update(e);var r=n.digest();return w.base64.encodeByteArray(r)},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)n+=Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?R.apply(null,t[r]):"object"==typeof t[r]?w.stringify(t[r]):t[r],n+=" ";return n},D=null,M=!0,L=function(t,e){w.assert(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(O.logLevel=E.LogLevel.VERBOSE,D=O.log.bind(O),e&&N.set("logging_enabled",!0)):"function"==typeof t?D=t:(D=null,N.remove("logging_enabled"))},F=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(M===!0&&(M=!1,null===D&&N.get("logging_enabled")===!0&&L(!0)),D){var n=R.apply(null,t);D(n)}},U=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];F.apply(void 0,[t].concat(e))}},B=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+R.apply(void 0,t);O.error(n)},K=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+R.apply(void 0,t);throw O.error(n),new Error(n)},j=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+R.apply(void 0,t);O.warn(n)},V=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&j("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},W=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},G=function(t){if(w.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){return document.body?void(e||(e=!0,t())):void setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},q="[MIN_NAME]",H="[MAX_NAME]",z=function(t,e){if(t===e)return 0;if(t===q||e===H)return-1;if(e===q||t===H)return 1;var n=it(t),r=it(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Q=function(t,e){return t===e?0:t<e?-1:1},Y=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+w.stringify(e))},X=function(t){if("object"!=typeof t||null===t)return w.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=w.stringify(e[i]),r+=":",r+=X(t[e[i]]);return r+="}"},J=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},$=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else w.forEach(t,function(t,n){return e(n,t)})},Z=function(t){w.assert(!W(t),"Invalid JSON number");var e,n,r,i,o,a,s,u=11,c=52,l=(1<<u-1)-1;for(0===t?(n=0,r=0,e=1/t===-(1/0)?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-l)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),l),n=i+l,r=Math.round(t*Math.pow(2,c-i)-Math.pow(2,c))):(n=0,r=Math.round(t/Math.pow(2,1-l-c)))),a=[],o=c;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=u;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var h="";for(o=0;o<64;o+=8){var f=parseInt(s.substr(o,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},tt=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},et=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},nt=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},rt=new RegExp("^-?\\d{1,10}$"),it=function(t){if(rt.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ot=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw j("Exception was thrown by user callback.",e),t},Math.floor(0))}},at=function(){var t="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},st=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},ut=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(var r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=z(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=w.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=w.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=w.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt="5",ht="v",ft="s",dt="r",pt="f",mt="firebaseio.com",vt="ls",gt="websocket",yt="long_polling",_t=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=P.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&P.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){w.assert("string"==typeof t,"typeof type must == string"),w.assert("object"==typeof e,"typeof params must == object");var n;if(t===gt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==yt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return w.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),bt=function(t){var e=wt(t),n=e.subdomain;"firebase"===e.domain&&K(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||K("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||V();var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new _t(e.host,e.secure,n,r),path:new ut(e.pathString)}},wt=function(t){var e="",n="",r="",i="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");h===-1&&(h=t.length);var f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=o(t.substring(h,f)));var d=a(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,l).toLowerCase()&&(n="localhost"),""===r&&"ns"in d&&(r=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i}},Et=/[\[\].#$\/\u0000-\u001F\u007F]/,St=/[\[\].#$\u0000-\u001F\u007F]/,Ct=10485760,Tt=function(t){return"string"==typeof t&&0!==t.length&&!Et.test(t)},kt=function(t){return"string"==typeof t&&0!==t.length&&!St.test(t)},It=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kt(t)},Pt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!W(t)||t&&"object"==typeof t&&w.contains(t,".sv")},Nt=function(t,e,n,r,i){i&&void 0===n||Ot(w.errorPrefix(t,e,i),n,r)},Ot=function(t,e,n){var r=n instanceof ut?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(W(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>Ct/3&&w.stringLength(e)>Ct)throw new Error(t+"contains a string greater than "+Ct+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(w.forEach(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Tt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Ot(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},At=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Tt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ut.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},xt=function(t,e,n,r,i){if(!i||void 0!==n){var o=w.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];w.forEach(n,function(t,e){var n=new ut(t);if(Ot(o,e,r.child(n)),".priority"===n.getBack()&&!Pt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),At(o,a)}},Rt=function(t,e,n,r){if(!r||void 0!==n){if(W(n))throw new Error(w.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pt(n))throw new Error(w.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(w.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Mt=function(t,e,n,r){if(!(r&&void 0===n||Tt(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lt=function(t,e,n,r){if(!(r&&void 0===n||kt(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ft=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lt(t,e,n,r)},Ut=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Bt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Tt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!It(r))throw new Error(w.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Kt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(w.errorPrefix(t,e,r)+"must be a boolean.")},jt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){w.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),w.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){w.validateArgCount("OnDisconnect.remove",0,1,arguments.length),Ut("OnDisconnect.remove",this.path_),w.validateCallback("OnDisconnect.remove",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){w.validateArgCount("OnDisconnect.set",1,2,arguments.length),Ut("OnDisconnect.set",this.path_),Nt("OnDisconnect.set",1,t,this.path_,!1),w.validateCallback("OnDisconnect.set",2,e,!0);var n=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){w.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),Ut("OnDisconnect.setWithPriority",this.path_),Nt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Rt("OnDisconnect.setWithPriority",2,e,!1),w.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new w.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(w.validateArgCount("OnDisconnect.update",1,2,arguments.length),Ut("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,j("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xt("OnDisconnect.update",1,t,this.path_,!1),w.validateCallback("OnDisconnect.update",2,e,!0);var i=new w.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Vt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return w.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Wt=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i=r===e;e=r;var o,a=new Array(8);for(o=7;o>=0;o--)a[o]=t.charAt(r%64),r=Math.floor(r/64);w.assert(0===r,"Cannot push at time == 0");var s=a.join("");if(i){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)s+=t.charAt(n[o]);return w.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),Gt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),qt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Gt(q,t),r=new Gt(q,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Gt.MIN},t}(),Ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return z(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw w.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Gt.MIN},e.prototype.maxPost=function(){return new Gt(H,p)},e.prototype.makePost=function(t,e){return w.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Gt(t,p)},e.prototype.toString=function(){return".key"},e}(qt),zt=new Ht,Qt=function(t){return"number"==typeof t?"number:"+Z(t):"string:"+t},Yt=function(t){if(t.isLeafNode()){var e=t.val();w.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&w.contains(e,".sv"),"Priority must be a string or number.")}else w.assert(t===m||t.isEmpty(),"priority of unexpected type.");w.assert(t===m||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Xt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,w.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return v},set:function(t){v=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(w.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Z(this.value_):this.value_,this.lazyHash_=x(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(w.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return w.assert(i>=0,"Unknown leaf type: "+n),w.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?z(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Gt.MIN},e.prototype.maxPost=function(){return new Gt(H,new Xt("[PRIORITY-POST]",y))},e.prototype.makePost=function(t,e){var n=g(t);return new Gt(e,new Xt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(qt),$t=new Jt,Zt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),te=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ne.EMPTY_NODE,this.right=null!=o?o:ne.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return i=this,r=n(t,i.key),i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ne.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ne.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if(t=this.left.check_(),t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),ee=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new te(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ne=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,te.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,te.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,
n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Zt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Zt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Zt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Zt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new ee,t}(),re=Math.log(2),ie=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/re,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),oe=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new te(a,o.node,te.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new te(a,o.node,te.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new te(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,te.BLACK):(s(h,te.BLACK),s(h,te.RED))}return o},a=new ie(t.length),s=o(a);return new ne(r||e,s)},ae={},se=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return w.assert(ae&&$t,"ChildrenNode.ts has not been loaded"),_=_||new t({".priority":ae},{".priority":$t})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=w.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===ae?null:e},t.prototype.hasIndex=function(t){return w.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){w.assert(e!==zt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(Gt.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();var s;s=i?oe(r,e.getCompare()):ae;var u=e.toString(),c=w.clone(this.indexSet_);c[u]=e;var l=w.clone(this.indexes_);return l[u]=s,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this,i=w.map(this.indexes_,function(t,i){var o=w.safeGet(r.indexSet_,i);if(w.assert(o,"Missing index implementation for "+i),t===ae){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Gt.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),oe(a,o.getCompare())}return ae}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Gt(e.name,c))),l.insert(e,e.node)});return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=w.map(this.indexes_,function(t){if(t===ae)return t;var r=n.get(e.name);return r?t.remove(new Gt(e.name,r)):t});return new t(r,this.indexSet_)},t}(),ue=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&w.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return b||(b=new t(new ne(h),null,se.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||b},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?b:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(w.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Gt(e,n),i=void 0,o=void 0,a=void 0;return n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_)),a=i.isEmpty()?b:this.priorityNode_,new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;w.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild($t,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild($t,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":x(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Gt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Gt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Gt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Gt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Gt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===le?-1:0},t.prototype.withIndex=function(e){if(e===zt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===zt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator($t),r=e.getIterator($t),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===zt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ce=function(t){function e(){return t.call(this,new ne(h),ue.EMPTY_NODE,se.Default)||this}return S.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ue.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ue),le=new ce;Object.defineProperties(Gt,{MIN:{value:new Gt(q,ue.EMPTY_NODE)},MAX:{value:new Gt(H,le)}}),Ht.__EMPTY_NODE=ue.EMPTY_NODE,Xt.__childrenNodeConstructor=ue,s(le),c(le);var he=!0;u(f);var fe,de,pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?z(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Gt.MIN},e.prototype.maxPost=function(){return Gt.MAX},e.prototype.makePost=function(t,e){var n=f(t);return new Gt(e,n)},e.prototype.toString=function(){return".value"},e}(qt),me=new pe,ve=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,w.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return S.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?z(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=f(t),r=ue.EMPTY_NODE.updateChild(this.indexPath_,n);return new Gt(e,r)},e.prototype.maxPost=function(){var t=ue.EMPTY_NODE.updateChild(this.indexPath_,le);return new Gt(H,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(qt),ge=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return w.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return w.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return w.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return w.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){w.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),Lt("DataSnapshot.child",1,e,!1);var n=new ut(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,$t)},t.prototype.hasChild=function(t){w.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Lt("DataSnapshot.hasChild",1,t,!1);var e=new ut(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return w.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(w.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),w.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),$t))})},t.prototype.hasChildren=function(){return w.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return w.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return w.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),ye=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+w.stringify(this.snapshot.exportVal())},t}(),_e=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),be=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ye("value",this,new ge(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new _e(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),we=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,w.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new _e(this,t,e):null},t.prototype.createEvent=function(t,e){w.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ye(t.type,this,new ge(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=w.getCount(e.callbacks_),r=w.getCount(this.callbacks_);if(n===r){if(1===n){var i=w.getAnyKey(e.callbacks_),o=w.getAnyKey(this.callbacks_);return!(o!==i||e.callbacks_[i]&&this.callbacks_[o]&&e.callbacks_[i]!==this.callbacks_[o])}return w.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Ee=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return w.assert(fe,"Reference.ts has not been loaded"),fe},set:function(t){fe=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===zt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){var o=t.getIndexStartName();if(o!=q)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){var a=t.getIndexEndName();if(a!=H)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===$t){if(null!=e&&!Pt(e)||null!=n&&!Pt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w.assert(t.getIndex()instanceof ve||t.getIndex()===me,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(this.orderByCalled_===!0)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return w.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){w.validateArgCount("Query.on",2,4,arguments.length),Dt("Query.on",1,e,!1),w.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new be(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new we(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){w.validateArgCount("Query.off",0,3,arguments.length),Dt("Query.off",1,t,!0),w.validateCallback("Query.off",2,e,!0),w.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new be(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new we(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;w.validateArgCount("Query.once",1,4,arguments.length),Dt("Query.once",1,e,!1),w.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new w.Deferred;u.promise.catch(function(){});var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(w.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(w.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(w.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Lt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new ut(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ve(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){w.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){w.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy($t);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){w.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(me);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),w.validateArgCount("Query.startAt",0,2,arguments.length),Nt("Query.startAt",1,e,this.path,!0),Mt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),w.validateArgCount("Query.endAt",0,2,arguments.length),Nt("Query.endAt",1,e,this.path,!0),Mt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(w.validateArgCount("Query.equalTo",1,2,arguments.length),Nt("Query.equalTo",1,t,this.path,!1),Mt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return w.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return w.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=X(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(w.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,w.validateCallback(t,3,r.cancel,!0),r.context=n,w.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(w.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Se=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return w.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return w.isEmpty(this.set)},t.prototype.count=function(){return w.getCount(this.set)},t.prototype.each=function(t){w.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return w.forEach(this.set,function(e){t.push(e)}),t},t}(),Ce=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();if(t=t.popFront(),this.children_.contains(e)){var n=this.children_.get(e);return n.find(t)}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Se);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild($t,function(t,e){n.remember(new ut(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r)){var i=this.children_.get(r).forget(t);i&&this.children_.remove(r)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new ut(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),Te=function(t){return t=t||{},t.timestamp=t.timestamp||(new Date).getTime(),t},ke=function(t,e){return t&&"object"==typeof t?(w.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Ie=function(t,e){var n=new Ce;return t.forEachTree(new ut(""),function(t,r){n.remember(t,Pe(r,e))}),n},Pe=function(t,e){var n,r=t.getPriority().val(),i=ke(r,e);if(t.isLeafNode()){var o=t,a=ke(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new Xt(a,f(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Xt(i))),s.forEachChild($t,function(t,r){var i=Pe(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(de||(de={}));var Ne,Oe,Ae=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,w.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),xe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=de.ACK_USER_WRITE,this.source=Ae.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return w.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ut(e));return new t(ut.Empty,n,this.revert)}return w.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Re=function(){return Ne||(Ne=new ne(Q)),Ne},De=function(){function t(t,e){void 0===e&&(e=Re()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return w.forEach(e,function(t,e){n=n.set(new ut(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=i){var o=new ut(n).child(i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(ut.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(ut.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),Me=function(){function t(t,e){this.source=t,this.path=e,this.type=de.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ut.Empty):new t(this.source,this.path.popFront())},t}(),Le=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=de.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ut.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Fe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=de.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new ut(e));return n.isEmpty()?null:n.value?new Le(this.source,ut.Empty,n.value):new t(this.source,ut.Empty,n)}return w.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ue=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;
var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Ue(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Ue(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Ue(ue.EMPTY_NODE,!1,!1),new Ue(ue.EMPTY_NODE,!1,!1)),t}(),Ke=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),je=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){w.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ke.childRemovedChange(e,a)):w.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ke.childAddedChange(e,n)):o.trackChildChange(Ke.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild($t,function(t,r){e.hasChild(t)||n.trackChildChange(Ke.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild($t,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ke.childChangedChange(e,r,i))}else n.trackChildChange(Ke.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ue.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ve=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;w.assert(e==Ke.CHILD_ADDED||e==Ke.CHILD_CHANGED||e==Ke.CHILD_REMOVED,"Only child changes supported for tracking"),w.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=w.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==Ke.CHILD_ADDED&&i==Ke.CHILD_REMOVED)this.changeMap_[n]=Ke.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==Ke.CHILD_REMOVED&&i==Ke.CHILD_ADDED)delete this.changeMap_[n];else if(e==Ke.CHILD_REMOVED&&i==Ke.CHILD_CHANGED)this.changeMap_[n]=Ke.childRemovedChange(n,r.oldSnap);else if(e==Ke.CHILD_CHANGED&&i==Ke.CHILD_ADDED)this.changeMap_[n]=Ke.childAddedChange(n,t.snapshotNode);else{if(e!=Ke.CHILD_CHANGED||i!=Ke.CHILD_CHANGED)throw w.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=Ke.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return w.getValues(this.changeMap_)},t}(),We=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),Ge=new We,qe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ue(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),He=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),ze=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){w.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),w.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new Ve;if(n.type===de.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(w.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===de.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(w.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===de.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,s):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==de.LISTEN_COMPLETE)throw w.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new He(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ke.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(w.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof ue?u:ue.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"==f){w.assert(1==e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,s);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var m=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);v=null!=g?o.getNode().getImmediateChild(f).updateChild(m,g):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),f,v,m,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h),p=d.updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Ge,null)}var m=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new qe(r,m,i);return this.generateEventCacheAfterServerEvent_(m,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new qe(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):ue.EMPTY_NODE}if(f.equals(d))a=t;else{var m=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=t.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:De.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new ut(e),h,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new ut(e),f,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=De.Empty;return s.getNode().forEachChild(zt,function(t,e){u=u.set(new ut(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=De.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ge,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new qe(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();w.assert(l instanceof ue,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),u=null!=f?this.filter_.updateChild(s,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,ue.EMPTY_NODE,e.popFront(),a,i):s,u.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ut.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Qe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Ke.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Ke.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Ke.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Ke.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Ke.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Ke.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Ke.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw w.assertionError("Should only compare child_ events.");var n=new Gt(t.childName,t.snapshotNode),r=new Gt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ye=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new je(n.getIndex()),i=n.getNodeFilter();this.processor_=new ze(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),c=new Ue(s,o.isFullyInitialized(),r.filtersNodes()),l=new Ue(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Be(l,c),this.eventGenerator_=new Qe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){w.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===de.MERGE&&null!==t.source.queryId&&(w.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),w.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),w.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){var r=e.getNode();r.forEachChild($t,function(t,e){n.push(Ke.childAddedChange(t,e))})}return e.isFullyInitialized()&&n.push(Ke.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Xe=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return w.assert(Oe,"Reference.ts has not been loaded"),Oe},set:function(t){w.assert(!Oe,"__referenceConstructor has already been defined"),Oe=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return w.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=w.safeGet(this.views_,r);return w.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return w.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=w.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof ue?(s=n.calcCompleteEventChildren(r),u=!1):(s=ue.EMPTY_NODE,u=!1);var c=new Be(new Ue(s,u,!1),new Ue(r,i,!1));a=new Ye(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===i){var u=this;w.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=w.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this,e=Object.keys(this.views_).map(function(e){return t.views_[e]});return e.filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return w.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){var e=t.getQueryParams();if(e.loadsAllData())return this.getCompleteView();var n=t.queryIdentifier();return w.safeGet(this.views_,n)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t=w.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()});return t||null},t}(),Je=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new De(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=ut.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new De(n),u=this.writeTree_.setTree(e,s);return new t(u)},t.prototype.addWrites=function(t,e){var n=this;return w.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;var n=this.writeTree_.setTree(e,De.Empty);return new t(n)},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ut.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild($t,function(e,n){t.push(new Gt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Gt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new De(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(ut.Empty,this.writeTree_,e)},t.Empty=new t(new De(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(w.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),$e=function(){function t(){this.visibleWrites_=Je.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ze(t,this)},t.prototype.addOverwrite=function(t,e,n,r){w.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){w.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});w.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;w.forEach(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(ut.Empty)){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},s=t.layerTree_(this.allWrites_,a,e),u=n||ue.EMPTY_NODE;return s.apply(u)}return null}var c=this.visibleWrites_.getCompleteNode(e);if(null!=c)return c;var l=this.visibleWrites_.childCompoundWrite(e);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(ut.Empty)){var u=n||ue.EMPTY_NODE;return l.apply(u)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ue.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild($t,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild($t,function(t,e){var r=i.childCompoundWrite(new ut(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}var o=this.visibleWrites_.childCompoundWrite(t);return o.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){w.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(e)){var o=this.visibleWrites_.childCompoundWrite(r);return o.apply(n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(ut.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!w.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,ut.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Je.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=ut.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=ut.relativePath(a,n),r=r.addWrite(ut.Empty,o.snap.getChild(s)));else{if(!o.children)throw w.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=ut.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if(s=ut.relativePath(a,n),s.isEmpty())r=r.addWrites(ut.Empty,o.children);else{var u=w.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(ut.Empty,c)}}}}}return r},t}(),Ze=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),tn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=De.Empty,this.pendingWriteTree_=new $e,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Le(Ae.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=De.fromObject(e);return this.applyOperationToSyncPoints_(new Fe(Ae.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t),r=this.pendingWriteTree_.removeWrite(t);if(r){var i=De.Empty;return null!=n.snap?i=i.set(ut.Empty,!0):w.forEach(n.children,function(t,e){i=i.set(new ut(t),e)}),this.applyOperationToSyncPoints_(new xe(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Le(Ae.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=De.fromObject(e);return this.applyOperationToSyncPoints_(new Fe(Ae.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Me(Ae.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=ut.relativePath(a,e),c=new Le(Ae.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=ut.relativePath(a,e),c=De.fromObject(n),l=new Fe(Ae.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=ut.relativePath(o,e),u=new Me(Ae.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=ut.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(ut.Empty)):(a=new Xe,this.syncPointTree_=this.syncPointTree_.set(r,a));var s;if(null!=i)s=!0;else{s=!1,i=ue.EMPTY_NODE;var u=this.syncPointTree_.subtree(r);u.foreachChild(function(t,e){var n=e.getCompleteServerCache(ut.Empty);n&&(i=i.updateImmediateChild(t,n))})}var c=a.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);w.assert(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[l]=h,this.tagToQueryMap_["_"+h]=l}var f=this.pendingWriteTree_.childWrites(r),d=a.addEventRegistration(e,n,f,i,s);if(!c&&!o){var p=a.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var m=d[p],v=m.getQuery(),g=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){var y=null;this.listenProvider_.stopListening(t.queryForListening_(e),y)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,function(e,n){var r=ut.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return r.calcCompleteEventCache(t,i,e,n)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView()){var r=e.getCompleteView();return[r]}var i=[];return e&&(i=e.getQueryViews()),w.forEach(n,function(t,e){i=i.concat(e)}),i})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)w.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),w.forEach(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);
return{hashFn:function(){var e=t.getServerCache()||ue.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=nt(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return w.assert(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return w.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);w.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ut.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ut.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ut.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(ut.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(ut.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),en=function(){function t(){this.rootNode_=ue.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),nn=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(F("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',j(t)},t}(),rn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),w.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return w.deepCopy(this.counters_)},t}(),on=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new rn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),an=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=w.clone(t);return this.last_&&w.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),sn=1e4,un=3e4,cn=3e5,ln=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new an(t);var n=sn+(un-sn)*Math.random();st(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;w.forEach(e,function(e,i){i>0&&w.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),st(this.reportStats_.bind(this),Math.floor(2*Math.random()*cn))},t}(),hn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new fn(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){var i=r.getPath();t(i)?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),fn=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();D&&F("event: "+e.toString()),ot(n)}}},t.prototype.getPath=function(){return this.path_},t}(),dn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},w.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){w.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),pn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return S.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return w.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(dn),mn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||"undefined"==typeof window.addEventListener||w.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return S.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return w.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(dn),vn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&ot(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);return i.currentResponseNum===i.closeAfterResponse?(i.onClose&&(i.onClose(),i.onClose=null),"break"):void i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){var o=r();if("break"===o)break}},t}(),gn="start",yn="close",_n="pLPCommand",bn="pRTLPCB",wn="id",En="pw",Sn="ser",Cn="cb",Tn="seg",kn="ts",In="d",Pn="disconn",Nn="dframe",On=1870,An=30,xn=On-An,Rn=25e3,Dn=3e4,Mn=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=U(t),this.stats_=on.getCollection(e),this.urlFn=function(t){return e.connectionURL(yt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(Dn)),G(function(){if(!n.isClosed_){n.scriptTagHolder=new Ln(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r==gn)n.id=i,n.password=o;else{if(r!==yn)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={};t[gn]="t",t[Sn]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Cn]=n.scriptTagHolder.uniqueCallbackIdentifier),t[ht]=lt,n.transportSessionId&&(t[ft]=n.transportSessionId),n.lastSessionId&&(t[vt]=n.lastSessionId),!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(mt)!==-1&&(t[dt]=pt);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!tt()&&!et()&&!w.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=w.base64Encode(e),r=J(n,xn),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!w.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Nn]="t",n[wn]=t,n[En]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=w.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ln=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Se,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,w.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=A(),window[_n+this.uniqueCallbackIdentifier]=e,window[bn+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var a=document.domain;o='<script>document.domain="'+a+'";</script>'}var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){F("frame writing exception"),t.stack&&F(t.stack),F(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||F("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),w.isNodeSdk()&&this.myID){var n={};n[Pn]="t",n[wn]=this.myID,n[En]=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[wn]=this.myID,t[En]=this.myPW,t[Sn]=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){var i=this.pendingSegs[0];if(!(i.d.length+An+n.length<=On))break;var o=this.pendingSegs.shift();n=n+"&"+Tn+r+"="+o.seg+"&"+kn+r+"="+o.ts+"&"+In+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(Rn)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;w.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){F("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),Fn=16384,Un=45e3,Bn=null;"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);var Kn=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=U(this.connId),this.stats_=on.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={};return r[ht]=lt,!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(mt)!==-1&&(r[dt]=pt),e&&(r[ft]=e),n&&(r[vt]=n),t.connectionURL(gt,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,P.set("previous_websocket_failure",!0);try{if(w.isNodeSdk()){var i=w.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+lt+"/"+C.SDK_VERSION+"/"+r.platform+"/"+i}},a=r.env,s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new Bn(this.connURL,[],o)}else this.mySock=new Bn(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!t.forceDisallow_},t.previouslyFailed=function(){return P.isInMemoryStorage||P.get("previous_websocket_failure")===!0},t.prototype.markConnectionHealthy=function(){P.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=w.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(w.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=J(e,Fn);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(Un))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),jn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Mn,Kn]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Kn&&Kn.isAvailable(),r=n&&!Kn.previouslyFailed();if(e.webSocketOnly&&(n||j("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Kn];else{var i=this.transports_=[];$(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Vn=6e4,Wn=5e3,Gn=10240,qn=102400,Hn="t",zn="d",Qn="s",Yn="r",Xn="e",Jn="o",$n="a",Zn="n",tr="p",er="h",nr=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=U("c:"+this.id+":"),this.transportManager_=new jn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=st(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>qn?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Gn?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(Hn in t){var e=t[Hn];e===$n?this.upgradeIfSecondaryHealthy_():e===Yn?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Jn&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Y("t",t),n=Y("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tr,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$n,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zn,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Y("t",t),n=Y("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Y(Hn,t);if(zn in t){var n=t[zn];if(e===er)this.onHandshake_(n);else if(e===Zn){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Qn?this.onConnectionShutdown_(n):e===Yn?this.onReset_(n):e===Xn?B("Server Error: "+n):e===Jn?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):B("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),lt!==n&&j("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),st(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(Vn))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):st(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(Wn))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tr,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(P.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ir=1e3,or=3e5,ar=3e4,sr=1.3,ur=3e4,cr="server_kill",lr=3,hr=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=e.nextPersistentConnectionId_++,u.log_=U("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=ir,u.maxReconnectDelay_=or,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!w.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),pn.getInstance().on("visible",u.onVisible_,u),n.host.indexOf("fblocal")===-1&&mn.getInstance().on("online",u.onOnline_,u),u}return S.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(w.stringify(i)),w.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),w.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest(s,a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r);var c=n.listens_[i]&&n.listens_[i][o];c===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&w.contains(t,"w")){var n=w.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();j("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+r+" at ")+(i+" to your security rules for better performance."))}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||w.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ar)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=w.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";
t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i.q=n,i.t=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){var n=t.s;if("ok"!==n){var r=t.d;e.log_("reportStats","Error sending stats: "+r)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+w.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):B("Unrecognized action received from server: "+w.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;w.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>ur&&(this.reconnectDelay_=ir),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sr)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},l=function(t){w.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)};this.realtime_={close:c,sendRequest:l};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){s?F("getToken() completed but was canceled"):(F("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new nr(i,o.repoInfo_,t,n,r,function(t){j(t+" ("+o.repoInfo_.toString()+")"),o.interrupt(cr)},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(w.CONSTANTS.NODE_ADMIN&&j(t),c())})}},e.prototype.interrupt=function(t){F("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){F("Resuming connection for reason: "+t),delete this.interruptReasons_[t],w.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return X(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ut(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===w.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){F("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lr&&(this.reconnectDelay_=ar,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),w.forEach(this.listens_,function(e,n){w.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";w.CONSTANTS.NODE_ADMIN?e="admin_node":w.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+C.SDK_VERSION.replace(/\./g,"-")]=1,w.isMobileCordova()?t["framework.cordova"]=1:w.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=mn.getInstance().currentlyOnline();return w.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rr),fr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=U("p:rest:"),i.listens_={},i}return S.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(w.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(t,e){var n=e;if(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),w.safeGet(o.listens_,s)===u){var c;c=t?401==t?"permission_denied":"rest_error:"+t:"ok",i(c,null)}})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+w.querystring(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=w.jsonEval(s.responseText)}catch(t){j("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&j("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},e}(rr),dr="repo_interrupt",pr=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ce,this.persistentConnection_=null;var i=new nn(n);if(this.stats_=on.getCollection(t),e||at())this.server_=new fr(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!=typeof o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{w.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new hr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=on.getOrCreateReporter(t,function(){return new ln(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new en,this.infoSyncTree_=new tn({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new tn({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new ut(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return Te({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ut(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=w.map(e,function(t){return f(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=f(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=w.map(e,function(t){return f(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=f(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),t===!1&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;$(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new ut("/.info/"+t),r=f(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=f(e,n),s=Pe(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||j("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(w.forEach(e,function(t,e){i=!1;var n=f(e);a[t]=Pe(n,o)}),i)F("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||j("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),w.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=Ie(this.onDisconnect_,e),r=[];n.forEachTree(ut.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Ce,this.eventQueue_.raiseEventsForChangedPath(ut.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=f(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=f(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;return w.isEmpty(e)?(F("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok")):void this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&w.forEach(e,function(e,n){var i=f(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(dr)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(dr)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new an(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);w.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),F.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&ot(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Tr(this))},enumerable:!0,configurable:!0}),t}(),mr=function(){function t(e){this.indexedFilter_=new je(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Gt(e,n))||(n=ue.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ue.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ue.EMPTY_NODE);var i=this;return e.forEachChild($t,function(t,e){i.matches(new Gt(t,e))||(r=r.updateImmediateChild(t,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),vr=function(){function t(t){this.rangedFilter_=new mr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Gt(e,n))||(n=ue.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ue.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ue.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(ue.EMPTY_NODE);var u=void 0,c=void 0,l=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&l(u,a)<=0&&(f=!0);var s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;w.assert(s.numChildren()==this.limit_,"");var u=new Gt(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u),p=l&&!n.isEmpty()&&d>=0;if(p)return null!=i&&i.trackChildChange(Ke.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ke.childRemovedChange(e,h));var m=s.updateImmediateChild(e,ue.EMPTY_NODE),v=null!=f&&this.rangedFilter_.matches(f);return v?(null!=i&&i.trackChildChange(Ke.childAddedChange(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Ke.childRemovedChange(c.name,c.node)),i.trackChildChange(Ke.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,ue.EMPTY_NODE)):t},t}(),gr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:q},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:H},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return w.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==$t&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==$t},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new je(this.getIndex()):this.hasLimit()?new vr(this):new mr(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===$t?r=e.PRIORITY_INDEX:this.index_===me?r=e.VALUE_INDEX:this.index_===zt?r=e.KEY_INDEX:(w.assert(this.index_ instanceof ve,"Unrecognized index type!"),r=this.index_.toString()),n[e.ORDER_BY]=w.stringify(r),this.startSet_&&(n[e.START_AT]=w.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+w.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=w.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+w.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),yr=function(t){function e(e,n){var r=this;if(!(e instanceof pr))throw new Error("new Reference() no longer supported - use app.database().");return r=t.call(this,e,n,gr.DEFAULT,!1)||this}return S.__extends(e,t),e.prototype.getKey=function(){return w.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return w.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ut||(null===this.path.getFront()?Ft("Reference.child",1,t,!1):Lt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){w.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){w.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){w.validateArgCount("Reference.set",1,2,arguments.length),Ut("Reference.set",this.path),Nt("Reference.set",1,t,this.path,!1),w.validateCallback("Reference.set",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(w.validateArgCount("Reference.update",1,2,arguments.length),Ut("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,j("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xt("Reference.update",1,t,this.path,!1),w.validateCallback("Reference.update",2,e,!0);var i=new w.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(w.validateArgCount("Reference.setWithPriority",2,3,arguments.length),Ut("Reference.setWithPriority",this.path),Nt("Reference.setWithPriority",1,t,this.path,!1),Rt("Reference.setWithPriority",2,e,!1),w.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new w.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return w.validateArgCount("Reference.remove",0,1,arguments.length),Ut("Reference.remove",this.path),w.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(w.validateArgCount("Reference.transaction",1,3,arguments.length),Ut("Reference.transaction",this.path),w.validateCallback("Reference.transaction",1,t,!1),w.validateCallback("Reference.transaction",2,e,!0),Kt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new w.Deferred;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Vt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){w.validateArgCount("Reference.setPriority",1,2,arguments.length),Ut("Reference.setPriority",this.path),Rt("Reference.setPriority",1,t,!1),w.validateCallback("Reference.setPriority",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){w.validateArgCount("Reference.push",0,2,arguments.length),Ut("Reference.push",this.path),Nt("Reference.push",1,t,this.path,!0),w.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Wt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return Ut("Reference.onDisconnect",this.path),new jt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Ee);Ee.__referenceConstructor=yr,Xe.__referenceConstructor=yr;var _r,br=function(){function t(){this.children={},
this.childCount=0,this.value=null}return t}(),wr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new br),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof ut?e:new ut(e),i=this;null!==(n=r.getFront());){var o=w.safeGet(i.node_.children,n)||new br;i=new t(n,i,o),r=r.popFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){w.assert("undefined"!=typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;w.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new ut(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=w.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(_r||(_r={})),pr.MAX_TRANSACTION_RETRIES_=25,pr.prototype.transactions_init_=function(){this.transactionQueueTree_=new wr},pr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new yr(this,t);o.on("value",i);var a=function(){o.off("value",i)},s={path:t,update:e,onComplete:n,status:null,order:A(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new ge(s.currentInputSnapshot,new yr(this,s.path),$t);s.onComplete(null,!1,l)}}else{Ot("transaction failed: Data returned ",c,s.path),s.status=_r.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(s),h.setValue(d);var p=void 0;if("object"==typeof c&&null!==c&&w.contains(c,".priority"))p=w.safeGet(c,".priority"),w.assert(Pt(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=this.serverSyncTree_.calcCompleteEventCache(t)||ue.EMPTY_NODE;p=m.getPriority().val()}p=p;var v=this.generateServerValues(),g=f(c,p),y=Pe(g,v);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,_),this.sendReadyTransactions_()}},pr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ue.EMPTY_NODE},pr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);w.assert(n.length>0,"Sending zero length transaction queue");var r=n.every(function(t){return t.status===_r.RUN});r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},pr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];w.assert(u.status===_r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=_r.SENT,u.retryCount++;var c=ut.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=_r.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new yr(n,e[a].path),c=new ge(s,u,$t);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(var a=0;a<o.length;a++)ot(o[a])}else{if("datastale"===r)for(var a=0;a<e.length;a++)e[a].status===_r.SENT_NEEDS_ABORT?e[a].status=_r.NEEDS_ABORT:e[a].status=_r.RUN;else{j("transaction at "+h.toString()+" failed: "+r);for(var a=0;a<e.length;a++)e[a].status=_r.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}},a)},pr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},pr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===_r.RUN}),o=i.map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=ut.relativePath(e,s.path),c=!1,l=void 0;if(w.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===_r.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===_r.RUN)if(s.retryCount>=pr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Ot("transaction failed: Data returned ",d,s.path);var p=f(d),m="object"==typeof d&&null!=d&&w.contains(d,".priority");m||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,g=this.generateServerValues(),y=Pe(p,g);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(v,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[a].status=_r.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var _=new yr(this,t[a].path),b=t[a].currentInputSnapshot,E=new ge(b,_,$t);n.push(t[a].onComplete.bind(null,null,!1,E))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)ot(n[a]);this.sendReadyTransactions_()}},pr.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},pr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},pr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},pr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==_r.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},pr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},pr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===_r.SENT_NEEDS_ABORT);else if(e[o].status===_r.SENT)w.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=_r.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(w.assert(e[o].status===_r.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var a=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,a))}i===-1?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(var o=0;o<n.length;o++)ot(n[o])}};var Er,Sr="databaseURL",Cr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Er||(Er=new t),Er},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options[Sr];void 0===n&&K("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=bt(n),i=r.repoInfo;Bt("Invalid Firebase Database URL",1,r),r.path.isEmpty()||K("Database URL must point to the root of a Firebase Database (not including a child path).");var o=this.createRepo(i,t);return o.database},t.prototype.deleteRepo=function(t){var e=w.safeGet(this.repos_,t.app.name);e&&w.safeGet(e,t.repoInfo_.toURLString())===t||K("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=w.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=w.safeGet(n,t.toURLString());return r&&K("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new pr(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Tr=function(){function t(t){this.repo_=t,t instanceof pr||K("Don't call new Database() directly - please use firebase.database()."),this.root_=new yr(t,ut.Empty),this.INTERNAL=new kr(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),w.validateArgCount("database.ref",0,1,arguments.length),t instanceof yr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),w.validateArgCount(e,1,1,arguments.length);var n=bt(t);Bt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&K(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&K("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){w.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){w.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),kr=function(){function t(t){this.database=t}return t.prototype.delete=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(t){return this.database.checkDeleted_("delete"),Cr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),Ir=function(){Kn.forceDisallow(),Mn.forceAllow()},Pr=function(){Mn.forceDisallow()},Nr=function(){return Kn.isAvailable()},Or=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Ar=function(t,e){t.repo.stats(e)},xr=function(t,e){t.repo.statsIncrementCounter(e)},Rr=function(t){return t.repo.dataUpdateCount},Dr=function(t,e){return t.repo.interceptServerData_(e)},Mr=Object.freeze({forceLongPolling:Ir,forceWebSockets:Pr,isWebSocketsAvailable:Nr,setSecurityDebugCallback:Or,stats:Ar,statsIncrementCounter:xr,dataUpdateCount:Rr,interceptServerData:Dr}),Lr=hr;hr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fr=nr,Ur=function(t){var e=hr.prototype.put;return hr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){hr.prototype.put=e}},Br=_t,Kr=function(t){return t.queryIdentifier()},jr=function(t){return t.repo.persistentConnection_.listens_},Vr=function(t){Cr.getInstance().forceRestClient(t)},Wr=Object.freeze({DataConnection:Lr,RealTimeConnection:Fr,hijackHash:Ur,ConnectionTarget:Br,queryIdentifier:Kr,listens:jr,forceRestClient:Vr}),Gr=Tr.ServerValue;d(C),e.registerDatabase=d,e.Database=Tr,e.Query=Ee,e.Reference=yr,e.enableLogging=L,e.ServerValue=Gr,e.DataSnapshot=ge,e.OnDisconnect=jt}).call(e,n(/*! ./../../../process/browser.js */35))},/*!*************************************************!*\
  !*** ./~/@firebase/firestore/dist/index.cjs.js ***!
  \*************************************************/
function(t,e,n){(function(t){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(){return ae.logLevel===ne.LogLevel.DEBUG?te.DEBUG:ae.logLevel===ne.LogLevel.SILENT?te.SILENT:te.ERROR}function o(t){switch(t){case te.DEBUG:ae.logLevel=ne.LogLevel.DEBUG;break;case te.ERROR:ae.logLevel=ne.LogLevel.ERROR;break;case te.SILENT:ae.logLevel=ne.LogLevel.SILENT;break;default:ae.error("Firestore ("+oe+"): Invalid value passed to `setLogLevel`")}}function a(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(ae.logLevel<=ne.LogLevel.DEBUG){var i=n.map(u);ae.debug.apply(ae,["Firestore ("+oe+") ["+t+"]: "+e].concat(i))}}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ae.logLevel<=ne.LogLevel.ERROR){var r=e.map(u);ae.error.apply(ae,["Firestore ("+oe+"): "+t].concat(r))}}function u(t){if("string"==typeof t)return t;var e=se.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function c(t){var e="FIRESTORE ("+oe+") INTERNAL ASSERTION FAILED: "+t;throw s(e),new Error(e)}function l(t,e){t||c(e)}function h(){return se.getPlatform().emptyByteString}function f(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new ce(ue.INVALID_ARGUMENT,t)}n.prototype=t.prototype;for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t,e){return void 0!==t?t:e}function m(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function v(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g(t){l(null!=t&&"object"==typeof t,"isEmpty() expects object parameter.");for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function y(t){l(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function _(t,e,n){if(e.length!==n)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires "+B(n,"argument")+", but was called with "+B(e.length,"argument")+".")}function b(t,e,n){if(e.length<n)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires at least "+B(n,"argument")+", but was called with "+B(e.length,"argument")+".")}function w(t,e,n,r){if(e.length<n||e.length>r)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+(r+" arguments, but was called with ")+B(e.length,"argument")+".")}function E(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+(B(r,"element")+"."))}function S(t,e,n,r){A(t,e,U(n)+" argument",r)}function C(t,e,n,r){void 0!==r&&S(t,e,n,r)}function T(t,e,n,r){A(t,e,n+" option",r)}function k(t,e,n,r){void 0!==r&&T(t,e,n,r)}function I(t,e,n,r,i){if(!(r instanceof Array))throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+R(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" "+("elements to be "+n+", but the value at index "+o+" ")+("was: "+R(r[o])))}function P(t,e,n,r,i){void 0!==r&&I(t,e,n,r,i)}function N(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(R(u))}var c=R(r);throw new ce(ue.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function O(t,e,n,r,i){void 0!==r&&N(t,e,n,r,i)}function A(t,e,n,r){if(typeof r!==e||"object"===e&&!x(r)){var i=R(r);throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" "+("to be of type "+e+", but it was: "+i))}}function x(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function R(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=D(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":c("Unknown wrong type: "+typeof t)}function D(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/,n=e.exec(t.constructor.toString());if(n&&n.length>1)return n[1]}return null}function M(t,e,n){if(void 0===n)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+U(e)+" argument, but it was undefined.")}function L(t,e,n){v(e,function(e,r){if(n.indexOf(e)<0)throw new ce(ue.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function F(t,e,n,r){var i=R(r);return new ce(ue.INVALID_ARGUMENT,"Function "+t+"() requires its "+U(n)+" "+("argument to be a "+e+", but it was: "+i))}function U(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function B(t,e){return t+" "+e+(1===t?"":"s")}function K(t,e){return t<e?-1:t>e?1:0}function j(t,e){return null!==t&&void 0!==t?!(!e||!t.isEqual(e)):t===e}function V(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function W(t){var e=t.length-1;return 0===t.length?"":"\0"===t.charAt(e)?t.substring(0,e):t.substring(0,e)+String.fromCharCode(t.charCodeAt(e)-1)}function G(t){return t+"\0"}function q(){if("undefined"==typeof Uint8Array)throw new ce(ue.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function H(){if(!se.getPlatform().base64Available)throw new ce(ue.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function z(t,e){return t<e?-1:t>e?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}function Q(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function Y(t){return null===t||void 0===t}function X(t){return Je(t)&&t<=Xe&&t>=Ye}function J(t,e,n){if(n.isEqual(Me.INSTANCE)){if(e!==Ze.EQUAL)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new en(t)}if(n.isEqual(Be.NAN)){if(e!==Ze.EQUAL)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new nn(t)}return new tn(t,e,n)}function $(t){switch(t){case ue.OK:return c("Treated status OK as error");case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return c("Unknown status code: "+t)}}function Z(t){var e=mn[t];if(void 0!==e)return tt(e)}function tt(t){if(void 0===t)return s("GRPC error has no .code"),ue.UNKNOWN;switch(t){case mn.OK:return ue.OK;case mn.CANCELLED:return ue.CANCELLED;case mn.UNKNOWN:return ue.UNKNOWN;case mn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case mn.INTERNAL:return ue.INTERNAL;case mn.UNAVAILABLE:return ue.UNAVAILABLE;case mn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case mn.NOT_FOUND:return ue.NOT_FOUND;case mn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case mn.ABORTED:return ue.ABORTED;case mn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case mn.DATA_LOSS:return ue.DATA_LOSS;default:return c("Unknown status code: "+t)}}function et(t){if(void 0===t)return mn.OK;switch(t){case ue.OK:return mn.OK;case ue.CANCELLED:return mn.CANCELLED;case ue.UNKNOWN:return mn.UNKNOWN;case ue.DEADLINE_EXCEEDED:return mn.DEADLINE_EXCEEDED;case ue.RESOURCE_EXHAUSTED:return mn.RESOURCE_EXHAUSTED;case ue.INTERNAL:return mn.INTERNAL;case ue.UNAVAILABLE:return mn.UNAVAILABLE;case ue.UNAUTHENTICATED:return mn.UNAUTHENTICATED;case ue.INVALID_ARGUMENT:return mn.INVALID_ARGUMENT;case ue.NOT_FOUND:return mn.NOT_FOUND;case ue.ALREADY_EXISTS:return mn.ALREADY_EXISTS;case ue.PERMISSION_DENIED:return mn.PERMISSION_DENIED;case ue.FAILED_PRECONDITION:return mn.FAILED_PRECONDITION;case ue.ABORTED:return mn.ABORTED;case ue.OUT_OF_RANGE:return mn.OUT_OF_RANGE;case ue.UNIMPLEMENTED:return mn.UNIMPLEMENTED;case ue.DATA_LOSS:return mn.DATA_LOSS;default:return c("Unknown status code: "+t)}}function nt(t){switch(t){case 200:return ue.OK;case 400:return ue.INVALID_ARGUMENT;case 401:return ue.UNAUTHENTICATED;case 403:return ue.PERMISSION_DENIED;case 404:return ue.NOT_FOUND;case 409:return ue.ABORTED;case 416:return ue.OUT_OF_RANGE;case 429:return ue.RESOURCE_EXHAUSTED;case 499:return ue.CANCELLED;case 500:return ue.UNKNOWN;case 501:return ue.UNIMPLEMENTED;case 503:return ue.UNAVAILABLE;case 504:return ue.DEADLINE_EXCEEDED;default:return t>=200&&t<300?ue.OK:t>=400&&t<500?ue.FAILED_PRECONDITION:t>=500&&t<600?ue.INTERNAL:ue.UNKNOWN}}function rt(){return Tn}function it(){return kn}function ot(){return In}function at(){return Pn}function st(){return new ke(Se.comparator)}function ut(){return new ke(Se.comparator)}function ct(t){return t instanceof ze?t.internalValue.slice():[]}function lt(t,e){l(!Y(t),e+" is missing")}function ht(t){return"number"==typeof t?t:"string"==typeof t?Number(t):c("can't parse "+t)}function ft(t,e,n){return e===n||!e&&n in t}function dt(t){var e=t.search(lr);if(e>=0)throw new ce(ue.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(cr.bind.apply(cr,[void 0].concat(t.split("."))))}catch(e){throw new ce(ue.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function pt(t,e){var n=function(t){switch(t){case Sn.Added:return 1;case Sn.Modified:return 2;case Sn.Metadata:return 2;case Sn.Removed:return 0;default:return c("Unknown ChangeType: "+t)}};return n(t)-n(e)}function mt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gt(e)),e=vt(t.get(n),e);return gt(e)}function vt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Dr+Lr;break;case Dr:n+=Dr+Fr;break;default:n+=o}}return n}function gt(t){return t+Dr+Mr}function yt(t){var e=t.length;if(l(e>=2,"Invalid path "+t),2===e)return l(t.charAt(0)===Dr&&t.charAt(1)===Mr,"Non-empty path "+t+" had length 2"),be.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(Dr,o);(a<0||a>n)&&c('Invalid encoded resource path: "'+t+'"');var s=t.charAt(a+1);switch(s){case Mr:var u=t.substring(o,a),h=void 0;0===i.length?h=u:(i+=u,h=i,i=""),r.push(h);break;case Lr:i+=t.substring(o,a),i+="\0";break;case Fr:i+=t.substring(o,a+1);break;default:c('Invalid encoded resource path: "'+t+'"')}o=a+2}return new be(r)}function _t(t,e,n,r){l(n<r&&n>=0&&r<=2,"Unexpected schema upgrade from v${fromVersion} to v{toVersion}."),n<1&&r>=1&&(bt(t),wt(t),St(t),Et(t));var i=gr.resolve();return n<2&&r>=2&&(i=Tt(e).next(function(t){return Ct(e,t)})),i}function bt(t){t.createObjectStore(Kr.store)}function wt(t){t.createObjectStore(jr.store,{keyPath:jr.keyPath}),t.createObjectStore(Vr.store,{keyPath:Vr.keyPath}),t.createObjectStore(Wr.store)}function Et(t){t.createObjectStore(qr.store)}function St(t){var e=t.createObjectStore(zr.store,{keyPath:zr.keyPath});e.createIndex(zr.documentTargetsIndex,zr.documentTargetsKeyPath,{unique:!0});var n=t.createObjectStore(Hr.store,{keyPath:Hr.keyPath});n.createIndex(Hr.queryTargetsIndexName,Hr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Qr.store)}function Ct(t,e){var n=t.store(Qr.store),r=t.store(Hr.store);return r.count().next(function(t){return e.targetCount=t,n.put(Qr.key,e)})}function Tt(t){var e=t.store(Qr.store);return e.get(Qr.key).next(function(t){return null!=t?gr.resolve(t):(t=new Qr(0,0,cn.MIN.toTimestamp(),0),e.put(Qr.key,t).next(function(){return t}))})}function kt(t){return new gr(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}function It(e){return e instanceof Uint8Array?(l("YES"===t.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.toString()):e}function Pt(t){return $r.getStore(t,Vr.store)}function Nt(t){return $r.getStore(t,Wr.store)}function Ot(t){return $r.getStore(t,jr.store)}function At(t){return $r.getStore(t,Hr.store)}function xt(t){return $r.getStore(t,Qr.store)}function Rt(t){return $r.getStore(t,zr.store)}function Dt(t){return $r.getStore(t,qr.store)}function Mt(t){return t.path.toArray()}function Lt(t){return void 0!==t.documents}function Ft(t){if(!t)return new to;switch(t.type){case"gapi":return new ro(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new ce(ue.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function Ut(t){return Bt(t,["next","error","complete"])}function Bt(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}function Kt(t){switch(t){case Oi.Set:case Oi.MergeSet:case Oi.Update:return!0;case Oi.Argument:return!1;default:throw c("Unexpected case for UserDataSource: "+t)}}function jt(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pe||t instanceof de||t instanceof he||t instanceof mo||t instanceof io)}function Vt(t,e,n){if(!jt(n)||!x(n)){var r=R(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Wt(t,e){if(e instanceof cr)return e._internalPath;if("string"==typeof e)return Gt(t,e);var n="Field path arguments must be of type string or FieldPath.";throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}function Gt(t,e){try{return dt(e)._internalPath}catch(e){var n=qt(e);throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function qt(t){return t instanceof Error?t.message:t.toString()}function Ht(){throw new ce(ue.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function zt(t,e){if(void 0===e)return{merge:!1};if(L(t,e,["merge","mergeFields"]),k(t,"boolean","merge",e.merge),P(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof cr}),void 0!==e.mergeFields&&void 0!==e.merge)throw new ce(ue.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Qt(t,e){return void 0===e?{}:(L(t,e,["serverTimestamps"]),O(t,"options","serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Yt(t,e,n){if(e instanceof To){if(e.firestore!==n)throw new ce(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw F(t,"DocumentReference",1,e)}function Xt(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Po(t,e.doc.key,e.doc,n.fromCache);return l(e.type===Sn.Added,"Invalid event type for first snapshot"),l(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Sn.Metadata}).map(function(e){var r=new Po(t,e.doc.key,e.doc,n.fromCache),i=-1,a=-1;return e.type!==Sn.Added&&(i=o.indexOf(e.doc.key),l(i>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Sn.Removed&&(o=o.add(e.doc),a=o.indexOf(e.doc.key)),{type:Jt(e.type),doc:r,oldIndex:i,newIndex:a}})}function Jt(t){switch(t){case Sn.Added:return"added";case Sn.Modified:case Sn.Metadata:return"modified";case Sn.Removed:return"removed";default:return c("Unknown change type: "+t)}}function $t(t){t.INTERNAL.registerService("firestore",function(t){return new Eo(t)},y(Vo))}function Zt(t){$t(t)}Object.defineProperty(e,"__esModule",{value:!0});var te,ee=r(n(/*! @firebase/app */20)),ne=n(/*! @firebase/logger */84),re=n(/*! tslib */41),ie=n(/*! @firebase/webchannel-wrapper */153),oe=ee.SDK_VERSION,ae=new ne.Logger("@firebase/firestore");!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(te||(te={}));var se=function(){function t(){}return t.setPlatform=function(e){t.platform&&c("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||c("Platform not set"),t.platform},t}(),ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ce=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return re.__extends(e,t),e}(Error),le=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return l(20===e.length,"Invalid auto ID: "+e),e},t}(),he=function(){function t(t){H(),this._binaryString=t}return t.fromBase64String=function(e){_("Blob.fromBase64String",arguments,1),S("Blob.fromBase64String","string",1,e),H();try{var n=se.getPlatform().atob(e);return new t(n)}catch(t){throw new ce(ue.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(_("Blob.fromUint8Array",arguments,1),q(),!(e instanceof Uint8Array))throw F("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join("");return new t(n)},t.prototype.toBase64=function(){return _("Blob.toBase64",arguments,0),H(),se.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){_("Blob.toUint8Array",arguments,0),q();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return K(this._binaryString,t._binaryString)},t}(),fe=f(he,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),de=function(){function t(t,e){if(_("GeoPoint",arguments,2),S("GeoPoint","number",1,t),S("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new ce(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ce(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return K(this._lat,t._lat)||K(this._long,t._long)},t}(),pe=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3),r=1e6*(e-1e3*n);return new t(n,r)},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),me=function(){function t(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}return t}(),ve="(default)",ge=function(){function t(t,e){this.projectId=t,this.database=e?e:ve}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===ve},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return K(this.projectId,t.projectId)||K(this.database,t.database)},t}(),ye="__name__",_e=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&c("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&c("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):c("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,l(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return l(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return l(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return l(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return l(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new ce(ue.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");var n=t.split("/").filter(function(t){return t.length>0});return new e(n)},e.EMPTY_PATH=new e([]),e}(_e),we=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re.__extends(e,t),e.isValidIdentifier=function(t){return we.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===ye},e.keyField=function(){return new e([ye])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ce(ue.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new ce(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new ce(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(_e),Se=function(){function t(e){this.path=e,l(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===be.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return be.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2===0},t.fromSegments=function(e){return new t(new be(e.slice()))},t.fromPathString=function(e){return new t(be.fromString(e))},t.EMPTY=new t(new be([])),t}(),Ce=function(){function t(t,e,n,r){this.key=t,this.version=e,this.data=n,this.hasLocalMutations=r.hasLocalMutations}return t.prototype.field=function(t){return this.data.field(t)},t.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", "+("{hasLocalMutations: "+this.hasLocalMutations+"})")},t.compareByKey=function(t,e){return Se.comparator(t.key,e.key)},t.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):c("Trying to compare documents on fields that don't exist")},t}(),Te=function(){function t(t,e){this.key=t,this.version=e}return t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},t.prototype.isEqual=function(t){return t&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},t.compareByKey=function(t,e){return Se.comparator(t.key,e.key)},t}(),ke=function(){function t(t,e){this.comparator=t,this.root=e?e:Pe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ie(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ie(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ie(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ie(this.root,t,this.comparator,!0)},t}(),Ie=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){l(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Pe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);
return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw c("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw c("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw c("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Ne=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Pe.EMPTY=new Ne;var Oe;!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(Oe||(Oe={}));var Ae;!function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(Ae||(Ae={}));var xe,Re=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Ae.Estimate,n);case"previous":return new t(Ae.Previous,n);case"none":case void 0:return new t(Ae.Default,n);default:return c("fromSnapshotOptions() called with invalid options.")}},t}(),De=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){l(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type.");var e=K(this.typeOrder,t.typeOrder);return e},t}(),Me=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=Oe.NullValue,e.internalValue=null,e}return re.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(De),Le=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.BooleanValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(De),Fe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.NumberValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?z(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(De),Ue=function(t){function e(e){return t.call(this,e)||this}return re.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Q(this.internalValue,t.internalValue)},e}(Fe),Be=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return re.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Q(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-(1/0)),e}(Fe),Ke=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.StringValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(De),je=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.TimestampValue,n}return re.__extends(e,t),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Ve?-1:this.defaultCompareTo(t)},e}(De),Ve=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=Oe.TimestampValue,r}return re.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Ae.Estimate?new je(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Ae.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof je?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(De),We=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.BlobValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(De),Ge=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=Oe.RefValue,r}return re.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Se.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(De),qe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.GeoPointValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(De),He=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.ObjectValue,n}return re.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=K(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return K(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(l(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(l(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){l(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t)||void 0:void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new ke(K)),e}(De),ze=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Oe.ArrayValue,n}return re.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return K(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(De),Qe=Number,Ye=Qe.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Xe=Qe.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Je=Qe.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},$e=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[sn]:this.memoizedOrderBy=[new an(t),sn];else{l(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:rn.ASCENDING;this.memoizedOrderBy.push(a===rn.ASCENDING?sn:un)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){l(null==this.getInequalityFilterField()||!(e instanceof tn)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),l(!Se.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){l(!Se.isDocumentKey(this.path),"No ordering allowed for document query"),l(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];t+=r.canonicalId(),t+=","}t+="|ob:";for(var i=0,o=this.orderBy;i<o.length;i++){var a=o[i];t+=a.canonicalId(),t+=","}Y(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Y(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return l(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Y(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof tn&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof tn&&t.op===Ze.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return Se.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return Se.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(!r.matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){l(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Ze=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return c("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),tn=function(){function t(t,e,n){this.field=t,this.op=e,this.value=n}return t.prototype.matches=function(t){if(this.field.isKeyField()){l(this.value instanceof Ge,"Comparing on key, but filter value not a RefValue"),l(this.op!==Ze.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=Se.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},t.prototype.matchesValue=function(t){var e=this;return this.op===Ze.ARRAY_CONTAINS?t instanceof ze&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(t){switch(this.op){case Ze.LESS_THAN:return t<0;case Ze.LESS_THAN_OR_EQUAL:return t<=0;case Ze.EQUAL:return 0===t;case Ze.GREATER_THAN:return t>0;case Ze.GREATER_THAN_OR_EQUAL:return t>=0;default:return c("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==Ze.EQUAL&&this.op!==Ze.ARRAY_CONTAINS},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(),en=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),nn=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field).value();return"number"==typeof e&&isNaN(e)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),rn=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),on=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){var r=n[e];t+=r.toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){l(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())l(o instanceof Ge,"Bound has a non-key value where the key path is being used."),n=Se.comparator(o.key,e.key);else{var a=e.field(i.field);l(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===rn.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),an=function(){function t(t,e){this.field=t,void 0===e&&(e=rn.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ce.compareByKey(t,e):Ce.compareByField(this.field,t,e);switch(this.dir){case rn.ASCENDING:return n;case rn.DESCENDING:return-1*n;default:return c("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),sn=new an(Ee.keyField(),rn.ASCENDING),un=new an(Ee.keyField(),rn.DESCENDING),cn=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6),r=e%1e6*1e3;return new t(new pe(n,r))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new pe(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(xe||(xe={}));var ln,hn=function(){function t(t,e,n,r,i){void 0===r&&(r=cn.MIN),void 0===i&&(i=h()),this.query=t,this.targetId=e,this.purpose=n,this.snapshotVersion=r,this.resumeToken=i}return t.prototype.update=function(e){return new t(this.query,this.targetId,this.purpose,e.snapshotVersion,e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),fn=function(){function t(t){this.fields=t}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++){var r=n[e];if(r.isPrefixOf(t))return!0}return!1},t.prototype.isEqual=function(t){return V(this.fields,t.fields)},t}(),dn=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),pn=function(){function t(t,e){this.version=t,this.transformResults=e}return t}();!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(ln||(ln={}));var mn,vn=function(){function t(t,e){this.updateTime=t,this.exists=e,l(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ce&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists?t instanceof Ce:null===t||t instanceof Te:(l(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return j(this.updateTime,t.updateTime)&&this.exists===t.exists},t.NONE=new t,t}(),gn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&l(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Ce?t.version:cn.MIN},t}(),yn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=ln.Set,i}return re.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),l(null==e.transformResults,"Transform results received by SetMutation.");var n=gn.getPostMutationVersion(t);return new Ce(this.key,n,this.value,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=gn.getPostMutationVersion(t);return new Ce(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(gn),_n=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=ln.Patch,o}return re.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),l(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return t;var n=gn.getPostMutationVersion(t),r=this.patchDocument(t);return new Ce(this.key,n,r,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=gn.getPostMutationVersion(t),i=this.patchDocument(t);return new Ce(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof Ce?t.data:He.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e],i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}return t},e}(gn),bn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=ln.Transform,r.precondition=vn.exists(!0),r}return re.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),l(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return t;var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=this.transformObject(n.data,r);return new Ce(this.key,n.version,i,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new Ce(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&V(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){l(t instanceof Ce,"Unknown MaybeDocument type "+t);var e=t;return l(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];l(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") "+("should match field transform count ("+this.fieldTransforms.length+")"));for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Ce&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof Ce&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){l(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;t=t.set(i,e[n])}return t},e}(gn),wn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=ln.Delete,r}return re.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),l(null==e.transformResults,"Transform results received by DeleteMutation."),new Te(this.key,cn.MIN)},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&l(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Te(this.key,cn.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(gn),En=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(mn||(mn={}));var Sn,Cn=function(){function t(t){this.comparator=t,this.data=new ke(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){var r=n.getNext(),i=t(r.key);if(!i)return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Tn=new ke(Se.comparator),kn=new ke(Se.comparator),In=new ke(Se.comparator),Pn=new Cn(Se.comparator),Nn=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t}(),On=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Sn||(Sn={}));var An;!function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(An||(An={}));var xn,Rn=function(){function t(){this.changeMap=new ke(Se.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);return n?void(t.type!==Sn.Added&&n.type===Sn.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Sn.Metadata&&n.type!==Sn.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Sn.Modified&&n.type===Sn.Modified?this.changeMap=this.changeMap.insert(e,{type:Sn.Modified,doc:t.doc}):t.type===Sn.Modified&&n.type===Sn.Added?this.changeMap=this.changeMap.insert(e,{type:Sn.Added,doc:t.doc}):t.type===Sn.Removed&&n.type===Sn.Added?this.changeMap=this.changeMap.remove(e):t.type===Sn.Removed&&n.type===Sn.Modified?this.changeMap=this.changeMap.insert(e,{type:Sn.Removed,doc:n.doc}):t.type===Sn.Added&&n.type===Sn.Removed?this.changeMap=this.changeMap.insert(e,{type:Sn.Modified,doc:t.doc}):c("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))):void(this.changeMap=this.changeMap.insert(e,t))},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Dn=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.fromCache=i,this.hasPendingWrites=o,
this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.hasPendingWrites!==t.hasPendingWrites||this.syncStateChanged!==t.syncStateChanged||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Mn=function(){function t(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}return t}(),Ln=function(){function t(t,e){this.targetId=t,this.existenceFilter=e}return t}();!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(xn||(xn={}));var Fn=function(){function t(t,e,n,r){void 0===n&&(n=h()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}return t}(),Un=function(){function t(){this.pendingResponses=0,this.documentChanges=ut(),this._resumeToken=h(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=at(),e=at(),n=at();return this.documentChanges.forEach(function(r,i){switch(i){case Sn.Added:t=t.add(r);break;case Sn.Modified:e=e.add(r);break;case Sn.Removed:n=n.add(r);break;default:c("Encountered invalid change type: "+i)}}),new On(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ut()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Bn=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=rt(),this.pendingDocumentTargetMapping=st(),this.pendingTargetResets=new Cn(K)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ce?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Te&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;t.targetIds.forEach(function(n){var r=e.ensureTargetState(n);switch(t.state){case xn.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case xn.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case xn.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),l(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case xn.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case xn.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:c("Unknown target watch change state: "+t.state)}})},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Se(i.path);this.removeDocumentFromTarget(e,o,new Te(o,cn.forDeletedDoc()))}else l(1===n,"Single document existence filter with count: "+n);else{var a=this.getCurrentDocumentCountForTarget(e);a!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}}},t.prototype.createRemoteEvent=function(t){var e=this,n={};m(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Se(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new Te(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=at();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===xe.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Nn(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=rt(),this.pendingDocumentTargetMapping=st(),this.pendingTargetResets=new Cn(K),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Sn.Modified:Sn.Added,r=this.ensureTargetState(t);r.addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Sn.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t),n=e.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){var e=this.ensureTargetState(t);e.recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Un),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Cn(K),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;l(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Un;var n=this.metadataProvider.getRemoteKeysForTarget(t);n.forEach(function(n){e.removeDocumentFromTarget(t,n)})},t.prototype.targetContainsDocument=function(t,e){var n=this.metadataProvider.getRemoteKeysForTarget(t);return n.has(e)},t}(),Kn=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Ve(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),jn=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ct(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new ze(e)},t.prototype.isEqual=function(e){return e instanceof t&&V(e.elements,this.elements)},t}(),Vn=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ct(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new ze(e)},t.prototype.isEqual=function(e){return e instanceof t&&V(e.elements,this.elements)},t}(),Wn=function(){var t={};return t[rn.ASCENDING.name]="ASCENDING",t[rn.DESCENDING.name]="DESCENDING",t}(),Gn=function(){var t={};return t[Ze.LESS_THAN.name]="LESS_THAN",t[Ze.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[Ze.GREATER_THAN.name]="GREATER_THAN",t[Ze.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[Ze.EQUAL.name]="EQUAL",t[Ze.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t}(),qn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Hn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?ue.UNKNOWN:tt(t.code);return new ce(e,t.message||"")},t.prototype.toInt32Value=function(t){return Y(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return e="object"==typeof t?t.value:t,Y(e)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);l(!!t,"Cannot deserialize null or undefined timestamp.");var e=ht(t.seconds||"0"),n=t.nanos||0;return new pe(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=qn.exec(t);if(l(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new pe(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(l(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),he.fromBase64String(t)):(l(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),he.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return l(!!t,"Trying to deserialize version that isn't set"),cn.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=be.fromString(t);return l(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return l(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),l(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Se(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?be.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){var t=new be(["projects",this.databaseId.projectId,"databases",this.databaseId.database]);return t.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new be(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return l(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Me)return{nullValue:"NULL_VALUE"};if(t instanceof Le)return{booleanValue:t.value()};if(t instanceof Ue)return{integerValue:""+t.value()};if(t instanceof Be){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-(1/0))return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Ke?{stringValue:t.value()}:t instanceof He?{mapValue:this.toMapValue(t)}:t instanceof ze?{arrayValue:this.toArrayValue(t)}:t instanceof je?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof qe?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof We?{bytesValue:this.toBytes(t.value())}:t instanceof Ge?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:c("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(ft(t,n,"nullValue"))return Me.INSTANCE;if(ft(t,n,"booleanValue"))return Le.of(t.booleanValue);if(ft(t,n,"integerValue"))return new Ue(ht(t.integerValue));if(ft(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Be.NAN;if("Infinity"===t.doubleValue)return Be.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Be.NEGATIVE_INFINITY}return new Be(t.doubleValue)}if(ft(t,n,"stringValue"))return new Ke(t.stringValue);if(ft(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(ft(t,n,"arrayValue")){lt(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new ze(r.map(function(t){return e.fromValue(t)}))}if(ft(t,n,"timestampValue"))return lt(t.timestampValue,"timestampValue"),new je(this.fromTimestamp(t.timestampValue));if(ft(t,n,"geoPointValue")){lt(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new qe(new de(i,o))}if(ft(t,n,"bytesValue")){lt(t.bytesValue,"bytesValue");var a=this.fromBlob(t.bytesValue);return new We(a)}if(ft(t,n,"referenceValue")){lt(t.referenceValue,"referenceValue");var s=this.fromResourceName(t.referenceValue),u=new ge(s.get(1),s.get(3)),l=new Se(this.extractLocalPathFromResourceName(s));return new Ge(u,l)}return c("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return l(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t){return new Ce(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasLocalMutations:!1})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=t,r=He.EMPTY;return v(n,function(t,n){r=r.set(new Ee([t]),e.fromValue(n))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){l(!!t.found,"Tried to deserialize a found document from a missing document."),lt(t.found.name,"doc.found.name"),lt(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new Ce(e,n,r,{hasLocalMutations:!1})},t.prototype.fromMissing=function(t){l(!!t.missing,"Tried to deserialize a missing document from a found document."),l(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Te(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return ft(t,e,"found")?this.fromFound(t):ft(t,e,"missing")?this.fromMissing(t):c("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case xn.Added:return"ADD";case xn.Current:return"CURRENT";case xn.NoChange:return"NO_CHANGE";case xn.Removed:return"REMOVE";case xn.Reset:return"RESET";default:return c("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Ln)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Mn){if(t.newDoc instanceof Ce){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof Te){var e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Fn){var n=void 0;return t.cause&&(n={code:et(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return c("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(ft(t,n,"targetChange")){lt(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Fn(r,i,o,s||null)}else if(ft(t,n,"documentChange")){lt(t.documentChange,"documentChange"),lt(t.documentChange.document,"documentChange.name"),lt(t.documentChange.document.name,"documentChange.document.name"),lt(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,l=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),f=this.fromFields(u.document.fields||{}),d=new Ce(l,h,f,{hasLocalMutations:!1}),p=u.targetIds||[],m=u.removedTargetIds||[];e=new Mn(p,m,d.key,d)}else if(ft(t,n,"documentDelete")){lt(t.documentDelete,"documentDelete"),lt(t.documentDelete.document,"documentDelete.document");var v=t.documentDelete,l=this.fromName(v.document),h=v.readTime?this.fromVersion(v.readTime):cn.forDeletedDoc(),d=new Te(l,h),m=v.removedTargetIds||[];e=new Mn([],m,d.key,d)}else if(ft(t,n,"documentRemove")){lt(t.documentRemove,"documentRemove"),lt(t.documentRemove.document,"documentRemove");var g=t.documentRemove,l=this.fromName(g.document),m=g.removedTargetIds||[];e=new Mn([],m,l,null)}else{if(!ft(t,n,"filter"))return c("Unknown change type "+JSON.stringify(t));lt(t.filter,"filter"),lt(t.filter.targetId,"filter.targetId");var y=t.filter,_=y.count||0,b=new En(_),w=y.targetId;e=new Ln(w,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?xn.NoChange:"ADD"===t?xn.Added:"REMOVE"===t?xn.Removed:"CURRENT"===t?xn.Current:"RESET"===t?xn.Reset:c("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){var e=t.response_type;if(!ft(t,e,"targetChange"))return cn.MIN;var n=t.targetChange;return n.targetIds&&n.targetIds.length?cn.MIN:n.readTime?this.fromVersion(n.readTime):cn.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof yn)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof wn)e={delete:this.toName(t.key)};else if(t instanceof _n)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof bn))return c("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):vn.NONE;if(t.update){lt(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new _n(r,i,o,n)}return new yn(r,i,n)}if(t.delete){var r=this.fromName(t.delete);return new wn(r,n)}if(t.transform){var r=this.fromName(t.transform.document),a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return l(n.exists===!0,'Transforms only support precondition "exists == true"'),new bn(r,a)}return c("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return l(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:c("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?vn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?vn.exists(t.exists):vn.NONE},t.prototype.fromWriteResult=function(t){var e=this,n=t.updateTime?this.fromVersion(t.updateTime):null,r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map(function(t){return e.fromValue(t)})),new pn(n,r)},t.prototype.fromWriteResults=function(t){var e=this;return(t||[]).map(function(t){return e.fromWriteResult(t)})},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;return n instanceof Kn?{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"}:n instanceof jn?{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}}:n instanceof Vn?{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}}:void c("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(ft(t,n,"setToServerValue"))l("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=Kn.instance;else if(ft(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new jn(i.map(function(t){return e.fromValue(t)}))}else if(ft(t,n,"removeAllFromArray")){var i=t.removeAllFromArray.values||[];r=new Vn(i.map(function(t){return e.fromValue(t)}))}else c("Unknown transform proto: "+JSON.stringify(t));var o=Ee.fromServerFormat(t.fieldPath);return new dn(o,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;l(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return $e.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(be.EMPTY_PATH);else{var n=t.path;l(n.length%2!==0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;if(r>0){l(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];e=e.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new $e(e,a,o,s,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case xe.Listen:return null;case xe.ExistenceFilterMismatch:return"existence-filter-mismatch";case xe.LimboResolution:return"limbo-document";default:return c("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},e.targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof tn?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):c("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new on(r,n)},t.prototype.toDirection=function(t){return Wn[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return rn.ASCENDING;case"DESCENDING":return rn.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Gn[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Ze.EQUAL;case"GREATER_THAN":return Ze.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ze.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ze.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ze.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Ze.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return c("Unspecified relation");default:return c("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return Ee.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new an(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof tn?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:c("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new tn(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof nn?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof en?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:c("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new nn(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new en(n);case"OPERATOR_UNSPECIFIED":return c("Unspecified filter");default:return c("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=t.fieldPaths||[],n=e.map(function(t){return Ee.fromServerFormat(t)});return new fn(n)},t}(),zn=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},Qn="FirebaseError",Yn=Error.captureStackTrace,Xn=function(){function t(t,e){if(this.code=t,this.message=e,Yn)Yn(this,Jn.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=Qn,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();Xn.prototype=Object.create(Error.prototype),Xn.prototype.constructor=Xn,Xn.prototype.name=Qn;var Jn=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new Xn(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),$n=function(){function t(){this.blockSize=-1}return t}(),Zn=(function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return re.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}($n),function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){l(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){l(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){l(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){l(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){l(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){l(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}()),tr="Connection",er="google.firestore.v1beta1.Firestore",nr="v1beta1",rr={
BatchGetDocuments:"batchGet",Commit:"commit"},ir="gl-js/ fire/"+oe,or=15,ar=function(){function t(t){this.databaseId=t.databaseId,this.pool=new ie.XhrIoPool;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=ir},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){r.pool.getObject(function(u){u.listenOnce(ie.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case ie.ErrorCode.NO_ERROR:var e=u.getResponseJson();a(tr,"XHR received:",JSON.stringify(e)),o(e);break;case ie.ErrorCode.TIMEOUT:a(tr,'RPC "'+t+'" timed out'),s(new ce(ue.DEADLINE_EXCEEDED,"Request time out"));break;case ie.ErrorCode.HTTP_ERROR:var n=u.getStatus();a(tr,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0?s(new ce(nt(n),"Server responded with status "+u.getStatusText())):(a(tr,'RPC "'+t+'" failed'),s(new ce(ue.UNAVAILABLE,"Connection failed.")));break;default:c('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{a(tr,'RPC "'+t+'" completed.'),r.pool.releaseObject(u)}});var l=JSON.stringify(e);a(tr,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,or)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/",er,"/",t,"/channel"],r=ie.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),zn()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");a(tr,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new Zn({sendFn:function(t){c?a(tr,"Not sending because WebChannel is closed:",t):(u||(a(tr,"Opening WebChannel transport."),s.open(),u=!0),a(tr,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),f=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(ie.WebChannel.EventType.OPEN,function(){c||a(tr,"WebChannel transport opened.")}),f(ie.WebChannel.EventType.CLOSE,function(){c||(c=!0,a(tr,"WebChannel transport closed"),h.callOnClose())}),f(ie.WebChannel.EventType.ERROR,function(t){c||(c=!0,a(tr,"WebChannel transport errored:",t),h.callOnClose(new ce(ue.UNAVAILABLE,"The operation could not be completed")))}),f(ie.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];l(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){a(tr,"WebChannel received error:",n);var r=n.status,i=Z(r),o=n.message;void 0===i&&(i=ue.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new ce(i,o)),s.close()}else a(tr,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=rr[t];l(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/",nr];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),sr=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return t.prototype.loadConnection=function(t){return Promise.resolve(new ar(t))},t.prototype.newSerializer=function(t){return new Hn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();se.setPlatform(new sr);var ur,cr=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];E("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(S("FieldPath","string",n,t[n]),0===t[n].length)throw new ce(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(Ee.keyField().canonicalString()),t}(),lr=new RegExp("[~\\*/\\[\\]]");!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(ur||(ur={}));var hr,fr=function(){function t(t){t?this.comparator=function(e,n){return t(e,n)||Se.comparator(e.key,n.key)}:this.comparator=function(t,e){return Se.comparator(t.key,e.key)},this.keyedMap=it(),this.sortedSet=new ke(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dr=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[t,e]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){v(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}})},t.prototype.isEmpty=function(){return g(this.inner)},t}(),pr=function(){function t(){this.listeners=[]}return t}(),mr=function(){function t(t){this.syncEngine=t,this.queries=new dr(function(t){return t.canonicalId()}),this.onlineState=ur.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new pr,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return re.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return re.__generator(this,function(o){return e=t.query,n=!1,r=this.queries.get(e),r&&(i=r.listeners.indexOf(t),i>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length)),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){var u=s[a];u.onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(e)}this.queries.delete(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.applyOnlineStateChange(t)}})},t}(),vr=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=ur.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(l(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Sn.Metadata&&e.push(i)}t=new Dn(t.query,t.docs,t.oldDocs,e,t.fromCache,t.hasPendingWrites,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(l(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==ur.Offline;return this.options.waitForSyncWhenOnline&&n?(l(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===ur.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0},t.prototype.raiseInitialEvent=function(e){l(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=new Dn(e.query,e.docs,fr.emptySet(e.docs),t.getInitialViewChanges(e),e.fromCache,e.hasPendingWrites,!0,!1),this.raisedInitialEvent=!0,this.queryObserver.next(e)},t.getInitialViewChanges=function(t){var e=[];return t.docs.forEach(function(t){e.push({type:Sn.Added,doc:t})}),e},t}(),gr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&c("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){var n=e.length;if(0===n)return t.resolve();var r=0;return new t(function(t,i){for(var o=0,a=e;o<a.length;o++){var s=a[o];s.next(function(){++r,r===n&&t()},function(t){return i(t)})}})},t.map=function(e){for(var n=[],r=[],i=function(t){r[t]=e[t].next(function(e){n[t]=e})},o=0;o<e.length;++o)i(o);return t.waitFor(r).next(function(){return n})},t}(),yr=function(){function t(){this.isEager=!0,this.sources=[],this.potentialGarbage=at()}return t.prototype.addGarbageSource=function(t){this.sources.push(t),t.setGarbageCollector(this)},t.prototype.removeGarbageSource=function(t){this.sources.splice(this.sources.indexOf(t),1),t.setGarbageCollector(null)},t.prototype.addPotentialGarbageKey=function(t){this.potentialGarbage=this.potentialGarbage.add(t)},t.prototype.collectGarbage=function(t){var e=this,n=[],r=at();return this.potentialGarbage.forEach(function(i){var o=e.documentHasAnyReferences(t,i);n.push(o.next(function(t){return t||(r=r.add(i)),gr.resolve()}))}),this.potentialGarbage=at(),gr.waitFor(n).next(function(){return r})},t.prototype.documentHasAnyReferences=function(t,e){var n=gr.resolve(!1);return this.sources.map(function(n){return function(){return n.containsKey(t,e)}}).reduce(function(t,e){return t.next(function(t){return t?gr.resolve(!0):e()})},n)},t}(),_r=function(){function t(t,e,n){this.query=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e){for(var n=at(),r=at(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Sn.Added:n=n.add(a.doc.key);break;case Sn.Removed:r=r.add(a.doc.key)}}return new t(e.query,n,r)},t}(),br=function(){function t(){this.refsByKey=new Cn(wr.compareByKey),this.refsByTarget=new Cn(wr.compareByTargetId),this.garbageCollector=null}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new wr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new wr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=Se.EMPTY,r=new wr(n,t),i=new wr(n,t+1);this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t)})},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(t.key)},t.prototype.referencesForId=function(t){var e=Se.EMPTY,n=new wr(e,t),r=new wr(e,t+1),i=at();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new wr(e,0),r=this.refsByKey.firstAfterOrEqual(n);return gr.resolve(null!==r&&e.isEqual(r.key))},t}(),wr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Se.comparator(t.key,e.key)||K(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return K(t.targetOrBatchId,e.targetOrBatchId)||Se.comparator(t.key,e.key)},t}(),Er=1;!function(t){t[t.LocalStore=0]="LocalStore",t[t.SyncEngine=1]="SyncEngine"}(hr||(hr={}));var Sr,Cr=function(){function t(t,e){void 0===e&&(e=0),this.generatorId=t;var n=e>>Er<<Er,r=e-n;r>=t?this.previousId=n|this.generatorId:this.previousId=(n|this.generatorId)-(1<<Er)}return t.prototype.next=function(){return this.previousId+=1<<Er,this.previousId},t.forLocalStore=function(e){return void 0===e&&(e=0),new t(hr.LocalStore,e)},t.forSyncEngine=function(){return new t(hr.SyncEngine)},t}(),Tr=function(){function t(t){this.key=t}return t}(),kr=function(){function t(t){this.key=t}return t}(),Ir=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=at(),this.mutatedKeys=at(),this.documentSet=new fr(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Rn,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),h=e instanceof Ce?e:null;if(h&&(l(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null),h?(a=a.add(h),o=h.hasLocalMutations?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)),c&&h){var f=c.data.isEqual(h.data);f&&c.hasLocalMutations===h.hasLocalMutations||(f?r.track({type:Sn.Metadata,doc:h}):r.track({type:Sn.Modified,doc:h}),u&&n.query.docComparator(h,u)>0&&(s=!0))}else!c&&h?r.track({type:Sn.Added,doc:h}):c&&!h&&(r.track({type:Sn.Removed,doc:c}),u&&(s=!0))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),r.track({type:Sn.Removed,doc:c})}return l(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.applyChanges=function(t,e){var n=this;l(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return pt(t.type,e.type)||n.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(e);var o=this.updateLimboDocuments(),a=0===this.limboDocuments.size&&this.current,s=a?An.Synced:An.Local,u=s!==this.syncState;if(this.syncState=s,0!==i.length||u){var c=new Dn(this.query,t.documentSet,r,i,s===An.Local,!t.mutatedKeys.isEmpty(),u,!1);return{snapshot:c,limboChanges:o}}return{limboChanges:o}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===ur.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Rn,mutatedKeys:this.mutatedKeys,needsRefill:!1})):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return l(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=at(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new kr(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new Tr(t))}),n},t}(),Pr="SyncEngine",Nr=function(){function t(t,e,n,r){this.query=t,this.targetId=e,this.resumeToken=n,this.view=r}return t}(),Or=function(){function t(t,e,n){this.localStore=t,this.remoteStore=e,this.currentUser=n,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new dr(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new ke(Se.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new br,this.limboCollector=new yr,this.mutationUserCallbacks={},this.targetIdGenerator=Cr.forSyncEngine()}return t.prototype.subscribe=function(t,e){l(null!==t&&null!==e,"View and error handlers cannot be null"),l(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=t,this.errorHandler=e,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},t.prototype.listen=function(t){var e=this;return this.assertSubscribed("listen()"),l(!this.queryViewsByQuery.has(t),"We already listen to the query: "+t),this.localStore.allocateQuery(t).then(function(n){return e.localStore.executeQuery(t).then(function(r){return e.localStore.remoteDocumentKeys(n.targetId).then(function(i){var o=new Ir(t,i),a=o.computeDocChanges(r),s=o.applyChanges(a);l(0===s.limboChanges.length,"View returned limbo docs before target ack from the server."),l(!!s.snapshot,"applyChanges for new view should always return a snapshot");var u=new Nr(t,n.targetId,n.resumeToken,o);e.queryViewsByQuery.set(t,u),e.queryViewsByTarget[n.targetId]=u,e.viewHandler([s.snapshot]),e.remoteStore.listen(n)})}).then(function(){return n.targetId})})},t.prototype.unlisten=function(t){var e=this;this.assertSubscribed("unlisten()");var n=this.queryViewsByQuery.get(t);return l(!!n,"Trying to unlisten on query not found:"+t),this.localStore.releaseQuery(t).then(function(){return e.remoteStore.unlisten(n.targetId),e.removeAndCleanupQuery(n).then(function(){return e.localStore.collectGarbage()})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),l(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction(),i=function(){try{var e=t(r);return!Y(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}};return i().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return e.emitNewSnapsAndNotifyLocalStore(n,t)})},t.prototype.applyOnlineStateChange=function(t){var e=[];this.queryViewsByQuery.forEach(function(n,r){var i=r.view.applyOnlineStateChange(t);l(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&e.push(i.snapshot)}),this.viewHandler(e)},t.prototype.rejectListen=function(t,e){var n=this;this.assertSubscribed("rejectListens()");var r=this.limboKeysByTarget[t];if(r){this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboKeysByTarget[t];var i=new ke(Se.comparator);i=i.insert(r,new Te(r,cn.forDeletedDoc()));var o=at().add(r),a=new Nn(cn.MIN,{},new Cn(K),i,o);return this.applyRemoteEvent(a)}var s=this.queryViewsByTarget[t];return l(!!s,"Unknown targetId: "+t),this.localStore.releaseQuery(s.query).then(function(){return n.removeAndCleanupQuery(s).then(function(){n.errorHandler(s.query,e)})})},t.prototype.applySuccessfulWrite=function(t){var e=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t.batch.batchId,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(t){return n.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ke(K)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(l(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){return this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.limboDocumentRefs.removeReferencesForId(t.targetId),this.gcLimboDocuments()},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Tr?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof kr?(a(Pr,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t)):c("Unknown limbo change: "+JSON.stringify(i))}return this.gcLimboDocuments()},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){a(Pr,"New document in limbo: "+e);var n=this.targetIdGenerator.next(),r=$e.atPath(e.path);this.limboKeysByTarget[n]=e,this.remoteStore.listen(new hn(r,n,xe.LimboResolution)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.gcLimboDocuments=function(){var t=this;return this.limboCollector.collectGarbage(null).next(function(e){e.forEach(function(e){var n=t.limboTargetsByKey.get(e);null!==n&&(t.remoteStore.unlisten(n),t.limboTargetsByKey=t.limboTargetsByKey.remove(e),delete t.limboKeysByTarget[n])})}).toPromise()},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){var n=this,r=[],i=[],o=[];return this.queryViewsByQuery.forEach(function(a,s){o.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?n.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var o=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,o);return n.updateTrackedLimbos(s.targetId,a.limboChanges).then(function(){if(a.snapshot){r.push(a.snapshot);var t=_r.fromSnapshot(a.snapshot);i.push(t)}})}))}),Promise.all(o).then(function(){return n.viewHandler(r),n.localStore.notifyLocalViewChanges(i)}).then(function(){return n.localStore.collectGarbage()})},t.prototype.assertSubscribed=function(t){l(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleUserChange=function(t){var e=this;return this.currentUser=t,this.localStore.handleUserChange(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)}).then(function(){return e.remoteStore.handleUserChange(t)})},t.prototype.getRemoteKeysForTarget=function(t){return this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:at()},t}(),Ar=-1,xr=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&l(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;l(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&l(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=at(),e=0,n=this.mutations;e<n.length;e++){var r=n[e];t=t.add(r.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&V(this.mutations,t.mutations)},t.prototype.isTombstone=function(){return 0===this.mutations.length},t.prototype.toTombstone=function(){return new t(this.batchId,this.localWriteTime,[])},t}(),Rr=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){l(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=ot(),a=e.mutations,s=0;s<a.length;s++){var u=r[s].version;null===u&&(u=n),o=o.insert(a[s].key,u)}return new t(e,n,r,i,o)},t}(),Dr="",Mr="",Lr="",Fr="",Ur=2,Br=function(){function t(t,e){this.seconds=t,this.nanoseconds=e}return t}(),Kr=function(){function t(t,e){this.ownerId=t,this.leaseTimestampMs=e}return t.store="owner",t}(),jr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Vr=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath=["userId","batchId"],t}(),Wr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,mt(e)]},t.key=function(t,e,n){return[t,mt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Gr=function(){function t(t,e){this.path=t,this.readTime=e}return t}(),qr=function(){function t(t,e){this.noDocument=t,this.document=e}return t.store="remoteDocuments",t}(),Hr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),zr=function(){function t(t,e){this.targetId=t,this.path=e}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Qr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Yr=[jr.store,Vr.store,Wr.store,qr.store,Hr.store,Kr.store,Qr.store,zr.store],Xr=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}(),Jr="SimpleDb",$r=function(){function e(t){this.db=t}return e.openOrCreate=function(t,n,r){return l(e.isAvailable(),"IndexedDB not supported in current environment."),a(Jr,"Opening database:",t),new gr(function(i,o){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){var n=t.target.result;i(new e(n))},s.onblocked=function(){o(new ce(ue.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){o(t.target.error)},s.onupgradeneeded=function(e){a(Jr,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new ti(s.transaction);r(n,i,e.oldVersion,Ur).next(function(){a(Jr,"Database upgrade to version "+Ur+" complete")})}}).toPromise()},e.delete=function(t){return a(Jr,"Removing database:",t),kt(window.indexedDB.deleteDatabase(t)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===t.env.USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)},e.getStore=function(t,e){return t instanceof ti?t.store(e):c("Invalid transaction object provided!")},e.prototype.runTransaction=function(t,e,n){var r=ti.open(this.db,t,e),i=n(r).catch(function(t){r.abort(t)}).toPromise();return r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),Zr=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return kt(this.dbCursor.delete());
},t}(),ti=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Xr,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(a(Jr,"Aborting transaction: %s",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return l(!!e,"Object store not part of transaction: "+t),new ei(e)},t}(),ei=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(a(Jr,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(a(Jr,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),kt(n)},t.prototype.get=function(t){var e=this,n=this.store.get(t);return kt(n).next(function(n){return void 0===n&&(n=null),a(Jr,"GET",e.store.name,t,n),n})},t.prototype.delete=function(t){a(Jr,"DELETE",this.store.name,t);var e=this.store.delete(t);return kt(e)},t.prototype.count=function(){a(Jr,"COUNT",this.store.name);var t=this.store.count();return kt(t)},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){a(Jr,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateCursor=function(t,e){var n=[];return new gr(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(!i)return void r();var o=new Zr(i),a=e(i.primaryKey,i.value,o);a instanceof gr&&n.push(a),o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return gr.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(l(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}(),ni=function(){function t(t,e){this.userId=t,this.serializer=e,this.garbageCollector=null}return t.forUser=function(e,n){l(""!==e.uid,"UserID must not be an empty string.");var r=e.isAuthenticated()?e.uid:"";return new t(r,n)},t.prototype.start=function(e){var n=this;return t.loadNextBatchIdFromDb(e).next(function(t){return n.nextBatchId=t,Ot(e).get(n.userId)}).next(function(t){return t||(t=new jr(n.userId,Ar,"")),n.metadata=t,n.metadata.lastAcknowledgedBatchId>=n.nextBatchId?n.checkEmpty(e).next(function(t){return l(t,"Reset nextBatchID is only possible when the queue is empty"),n.metadata.lastAcknowledgedBatchId=Ar,Ot(e).put(n.metadata)}):gr.resolve()})},t.loadNextBatchIdFromDb=function(t){var e=Ar;return Pt(t).iterate({reverse:!0},function(t,n,r){var i=t[0],o=t[1];if(o>e&&(e=n.batchId),""===i)r.done();else{var a=W(i);r.skip([a])}}).next(function(){return e+1})},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return Pt(t).iterate({range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.getNextBatchId=function(t){return gr.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return gr.resolve(this.metadata.lastAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;return l(r>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=r,this.metadata.lastStreamToken=It(n),Ot(t).put(this.metadata)},t.prototype.getLastStreamToken=function(t){return gr.resolve(this.metadata.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.metadata.lastStreamToken=It(e),Ot(t).put(this.metadata)},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=this.nextBatchId;this.nextBatchId++;var o=new xr(i,e,n),a=this.serializer.toDbMutationBatch(this.userId,o);return Pt(t).put(a).next(function(){for(var e=[],o=0,a=n;o<a.length;o++){var s=a[o],u=Wr.key(r.userId,s.key.path,i);e.push(Nt(t).put(u,Wr.PLACEHOLDER))}return gr.waitFor(e)}).next(function(){return o})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Pt(t).get(this.keyForBatchId(e)).next(function(t){return t?n.serializer.fromDbMutationBatch(t):null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=Math.max(e,this.metadata.lastAcknowledgedBatchId)+1,i=IDBKeyRange.lowerBound(this.keyForBatchId(r)),o=null;return Pt(t).iterate({range:i},function(t,e,i){e.userId===n.userId&&(l(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound(this.keyForBatchId(Ar),this.keyForBatchId(Number.POSITIVE_INFINITY));return Pt(t).loadAll(n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(Ar),this.keyForBatchId(e));return Pt(t).loadAll(r).next(function(t){return t.map(function(t){return n.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Wr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Nt(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],l=r[2],h=yt(u);if(s!==n.userId||!e.path.isEqual(h))return void a.done();var f=n.keyForBatchId(l);return Pt(t).get(f).next(function(t){null===t&&c("Dangling document-mutation reference found: "+r+" which points to "+f),o.push(n.serializer.fromDbMutationBatch(t))})}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;l(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=Wr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Cn(K);return Nt(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[1],c=t[2],l=yt(u);return a===n.userId&&r.isPrefixOf(l)?void(l.length===i&&(s=s.add(c))):void o.done()}).next(function(){var e=[],r=[];return s.forEach(function(i){var o=n.keyForBatchId(i);r.push(Pt(t).get(o).next(function(t){null===t&&c("Dangling document-mutation reference found, which points to "+o),e.push(n.serializer.fromDbMutationBatch(t))}))}),gr.waitFor(r).next(function(){return e})})},t.prototype.removeMutationBatches=function(t,e){for(var n=Pt(t),r=Nt(t),i=[],o=function(t){var e=IDBKeyRange.only(a.keyForBatchId(t.batchId)),o=0,s=n.iterate({range:e},function(t,e,n){return o++,n.delete()});i.push(s.next(function(){l(1===o,"Dangling document-mutation reference found: Missing batch "+t.batchId)}));for(var u=0,c=t.mutations;u<c.length;u++){var h=c[u],f=Wr.key(a.userId,h.key.path,t.batchId);i.push(r.delete(f)),null!==a.garbageCollector&&a.garbageCollector.addPotentialGarbageKey(h.key)}},a=this,s=0,u=e;s<u.length;s++){var c=u[s];o(c)}return gr.waitFor(i)},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return gr.resolve();var r=IDBKeyRange.lowerBound(Wr.prefixForUser(e.userId)),i=[];return Nt(t).iterate({range:r},function(t,n,r){var o=t[0];if(o!==e.userId)return void r.done();var a=yt(t[1]);i.push(a)}).next(function(){l(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=this,r=Wr.prefixForPath(this.userId,e.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Nt(t).iterate({range:o,keysOnly:!0},function(t,e,r){var o=t[0],s=t[1];t[2];o===n.userId&&s===i&&(a=!0),r.done()}).next(function(){return a})},t.prototype.keyForBatchId=function(t){return[this.userId,t]},t}(),ri=function(){function t(t){this.serializer=t,this.lastRemoteSnapshotVersion=cn.MIN,this.metadata=null,this.garbageCollector=null}return t.prototype.start=function(t){var e=this;return xt(t).get(Qr.key).next(function(t){l(null!==t,"Missing metadata row that should be added by schema migration."),e.metadata=t;var n=t.lastRemoteSnapshotVersion;return e.lastRemoteSnapshotVersion=cn.fromTimestamp(new pe(n.seconds,n.nanoseconds)),gr.resolve()})},t.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,this.metadata.lastRemoteSnapshotVersion=e.toTimestamp(),xt(t).put(Qr.key,this.metadata)},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.metadata.targetCount+=1,n.updateMetadataFromQueryData(e),n.saveMetadata(t)})},t.prototype.updateQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.updateMetadataFromQueryData(e)?n.saveMetadata(t):gr.resolve()})},t.prototype.removeQueryData=function(t,e){var n=this;return l(this.metadata.targetCount>0,"Removing from an empty query cache"),this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return At(t).delete(e.targetId)}).next(function(){return n.metadata.targetCount-=1,n.saveMetadata(t)})},t.prototype.saveMetadata=function(t){return xt(t).put(Qr.key,this.metadata)},t.prototype.saveQueryData=function(t,e){return At(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t){var e=!1;return t.targetId>this.metadata.highestTargetId&&(this.metadata.highestTargetId=t.targetId,e=!0),e},Object.defineProperty(t.prototype,"count",{get:function(){return this.metadata.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return At(t).iterate({range:i,index:Hr.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=[],i=Rt(t);return e.forEach(function(t){var e=mt(t.path);r.push(i.put(new zr(n,e)))}),gr.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=[],o=Rt(t);return e.forEach(function(t){var e=mt(t.path);i.push(o.delete([n,e])),null!==r.garbageCollector&&r.garbageCollector.addPotentialGarbageKey(t)}),gr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Rt(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return this.notifyGCForRemovedKeys(t,r).next(function(){return n.delete(r)})},t.prototype.notifyGCForRemovedKeys=function(t,e){var n=this,r=Rt(t);return null!==this.garbageCollector&&this.garbageCollector.isEager?r.iterate({range:e,keysOnly:!0},function(t,e,r){var i=yt(t[1]),o=new Se(i);l(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(o)}):gr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Rt(t),i=at();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=yt(t[1]),o=new Se(r);i=i.add(o)}).next(function(){return i})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){l(null!==t,"Persistence Transaction cannot be null for query cache containsKey");var n=mt(e.path),r=IDBKeyRange.bound([n],[G(n)],!1,!0),i=0;return Rt(t).iterate({index:zr.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){i++,n.done()}).next(function(){return i>0})},t}(),ii=function(){function t(t){this.serializer=t}return t.prototype.addEntry=function(t,e){return Dt(t).put(Mt(e.key),this.serializer.toDbRemoteDocument(e))},t.prototype.removeEntry=function(t,e){return Dt(t).delete(Mt(e))},t.prototype.getEntry=function(t,e){var n=this;return Dt(t).get(Mt(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=it(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return Dt(t).iterate({range:o},function(t,i,o){var a=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(a.key.path)?a instanceof Ce&&e.matches(a)&&(r=r.insert(a.key,a)):o.done()}).next(function(){return r})},t}(),oi=function(){function e(t){this.remoteSerializer=t}return e.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document);if(t.noDocument){var e=Se.fromSegments(t.noDocument.path),n=t.noDocument.readTime,r=new pe(n.seconds,n.nanoseconds);return new Te(e,cn.fromTimestamp(r))}return c("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(t){if(t instanceof Ce){var e=this.remoteSerializer.toDocument(t);return new qr(null,e)}var n=t.key.path.toArray(),r=t.version.toTimestamp(),i=new Br(r.seconds,r.nanoseconds);return new qr(new Gr(n,i),null)},e.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Vr(t,e.batchId,e.localWriteTime.toMillis(),r)},e.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=pe.fromMillis(t.localWriteTimeMs);return new xr(t.batchId,r,n)},e.prototype.fromDbTarget=function(t){var e,n=new pe(t.readTime.seconds,t.readTime.nanoseconds),r=cn.fromTimestamp(n);return e=Lt(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new hn(e,t.targetId,xe.Listen,r,t.resumeToken)},e.prototype.toDbTarget=function(e){l(xe.Listen===e.purpose,"Only queries with purpose "+xe.Listen+" may be stored, got "+e.purpose);var n,r=e.snapshotVersion.toTimestamp(),i=new Br(r.seconds,r.nanoseconds);n=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query);var o;return e.resumeToken instanceof Uint8Array?(l("YES"===t.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),o=e.resumeToken.toString()):o=e.resumeToken,new Hr(e.targetId,e.query.canonicalId(),i,o,0,n)},e}(),ai="IndexedDbPersistence",si=5e3,ui=4e3,ci="zombiedOwnerId",li="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",hi="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",fi=function(){function t(e,n){this.ownerId=this.generateOwnerId(),this.dbName=e+t.MAIN_DATABASE,this.serializer=new oi(n),this.localStoragePrefix=e}return t.prototype.start=function(){var e=this;return t.isAvailable()?(l(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,$r.openOrCreate(this.dbName,Ur,_t).then(function(t){e.simpleDb=t}).then(function(){return e.tryAcquireOwnerLease()}).then(function(){e.scheduleOwnerLeaseRefreshes(),e.attachWindowUnloadHook()})):(this.persistenceError=new ce(ue.UNIMPLEMENTED,hi),Promise.reject(this.persistenceError))},t.prototype.shutdown=function(t){var e=this;return l(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then(function(){if(e.simpleDb.close(),t)return $r.delete(e.dbName)})},t.prototype.getMutationQueue=function(t){return ni.forUser(t,this.serializer)},t.prototype.getQueryCache=function(){return new ri(this.serializer)},t.prototype.getRemoteDocumentCache=function(){return new ii(this.serializer)},t.prototype.runTransaction=function(t,e){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(a(ai,"Starting transaction:",t),this.simpleDb.runTransaction("readwrite",Yr,function(t){return n.ensureOwnerLease(t).next(function(){return e(t)})}))},t.isAvailable=function(){return $r.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.tryAcquireOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[Kr.store],function(e){var n=e.store(Kr.store);return n.get("owner").next(function(e){if(t.validOwner(e))return a(ai,"Valid owner already. Failing. Current owner:",e),t.persistenceError=new ce(ue.FAILED_PRECONDITION,li),gr.reject(t.persistenceError);var r=new Kr(t.ownerId,Date.now());return a(ai,"No valid owner. Acquiring owner lease. Current owner:",e,"New owner:",r),n.put("owner",r)})})},t.prototype.releaseOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[Kr.store],function(e){var n=e.store(Kr.store);return n.get("owner").next(function(e){return null!==e&&e.ownerId===t.ownerId?(a(ai,"Releasing owner lease."),n.delete("owner")):gr.resolve()})})},t.prototype.ensureOwnerLease=function(t){var e=this,n=t.store(Kr.store);return n.get("owner").next(function(t){return null===t||t.ownerId!==e.ownerId?(e.persistenceError=new ce(ue.FAILED_PRECONDITION,li),gr.reject(e.persistenceError)):gr.resolve()})},t.prototype.validOwner=function(t){var e=Date.now(),n=e-si,r=e;return null!==t&&(!(t.leaseTimestampMs<n)&&(t.leaseTimestampMs>r?(s("Persistence owner-lease is in the future. Discarding.",t),!1):t.ownerId!==this.getZombiedOwnerId()))},t.prototype.scheduleOwnerLeaseRefreshes=function(){var t=this;this.ownerLeaseRefreshHandle=setInterval(function(){var e=t.runTransaction("Refresh owner timestamp",function(e){var n=e.store(Kr.store);return n.put("owner",new Kr(t.ownerId,Date.now()))});e.catch(function(e){s(e),t.stopOwnerLeaseRefreshes()})},ui)},t.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"object"==typeof window&&"function"==typeof window.addEventListener&&(this.windowUnloadHandler=function(){t.setZombiedOwnerId(t.ownerId),t.shutdown()},window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(l("object"==typeof window&&"function"==typeof window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.getZombiedOwnerId=function(){try{var t=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return a(ai,"Zombied ownerID from LocalStorage:",t),t}catch(t){return s("Failed to get zombie owner id.",t),null}},t.prototype.setZombiedOwnerId=function(t){try{null===t?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),t)}catch(t){s("Failed to set zombie owner id.",t)}},t.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+ci},t.prototype.generateOwnerId=function(){return le.newId()},t.MAIN_DATABASE="main",t}(),di=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.remoteDocumentCache.getEntry(t,e).next(function(r){return n.computeLocalDocument(t,e,r)})},t.prototype.getDocuments=function(t,e){var n=this,r=[],i=rt();return e.forEach(function(e){r.push(n.getDocument(t,e).next(function(t){t||(t=new Te(e,cn.forDeletedDoc())),i=i.insert(e,t)}))}),gr.waitFor(r).next(function(){return i})},t.prototype.getDocumentsMatchingQuery=function(t,e){return Se.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Se(e)).next(function(t){var e=it();return t instanceof Ce&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(e){return r.computeLocalDocuments(t,e)}).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){for(var i=at(),o=0,a=e;o<a.length;o++)for(var s=a[o],u=0,c=s.mutations;u<c.length;u++){var l=c[u];n.get(l.key)||(i=i.add(l.key))}var h=[];return i.forEach(function(e){h.push(r.getDocument(t,e).next(function(t){t instanceof Ce&&(n=n.insert(t.key,t))}))}),gr.waitFor(h)}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.computeLocalDocument=function(t,e,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];n=o.applyToLocalView(e,n)}return n})},t.prototype.computeLocalDocuments=function(t,e){var n=this,r=[];return e.forEach(function(i,o){r.push(n.computeLocalDocument(t,i,o).next(function(t){t instanceof Ce?e=e.insert(t.key,t):t instanceof Te?e=e.remove(t.key):c("Unknown MaybeDocument: "+t)}))}),gr.waitFor(r).next(function(){return e})},t}(),pi=function(){function t(t){this.remoteDocumentCache=t,this.changes=rt()}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this.assertChanges(),r=n.get(e);return r?gr.resolve(r):this.remoteDocumentCache.getEntry(t,e)},t.prototype.apply=function(t){var e=this,n=this.assertChanges(),r=[];return n.forEach(function(n,i){r.push(e.remoteDocumentCache.addEntry(t,i))}),this.changes=null,gr.waitFor(r)},t.prototype.assertChanges=function(){return l(null!==this.changes,"Changes have already been applied."),this.changes},t}(),mi="LocalStore",vi=function(){function t(t,e,n){this.persistence=t,this.garbageCollector=n,this.localViewReferences=new br,this.targetIds={},this.targetIdGenerator=Cr.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new di(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return t.prototype.start=function(){var t=this;return this.persistence.runTransaction("Start LocalStore",function(e){return t.startMutationQueue(e).next(function(){return t.startQueryCache(e)})})},t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.garbageCollector.removeGarbageSource(e.mutationQueue),e.mutationQueue=e.persistence.getMutationQueue(t),e.garbageCollector.addGarbageSource(e.mutationQueue),e.startMutationQueue(n)}).next(function(){return e.localDocuments=new di(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=at(),o=0,a=[r,t];o<a.length;o++)for(var s=a[o],u=0,c=s;u<c.length;u++)for(var l=c[u],h=0,f=l.mutations;h<f.length;h++){var d=f[h];i=i.add(d.key)}return e.localDocuments.getDocuments(n,i)})})},t.prototype.startQueryCache=function(t){var e=this;return this.queryCache.start(t).next(function(){var t=e.queryCache.getHighestTargetId();e.targetIdGenerator=Cr.forLocalStore(t)})},t.prototype.startMutationQueue=function(t){var e=this;return this.mutationQueue.start(t).next(function(){return e.heldBatchResults=[],e.mutationQueue.getHighestAcknowledgedBatchId(t)}).next(function(n){return n!==Ar?e.mutationQueue.getAllMutationBatchesThroughBatchId(t,n):gr.resolve([])}).next(function(n){return n.length>0?e.mutationQueue.removeMutationBatches(t,n):gr.resolve()})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations",function(n){var r,i=pe.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){r=t;var i=r.keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch",function(n){var r;return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){if(e.shouldHoldBatchResult(t.commitVersion))return e.heldBatchResults.push(t),r=at(),gr.resolve();var i=new pi(e.remoteDocuments);return e.releaseBatchResults(n,[t],i).next(function(t){return r=t,i.apply(n)})}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch",function(n){var r,i;return e.mutationQueue.lookupMutationBatch(n,t).next(function(i){return l(null!=i,"Attempt to reject nonexistent batch!"),r=i,e.mutationQueue.getHighestAcknowledgedBatchId(n).next(function(e){return l(t>e,"Acknowledged batches can't be rejected."),r})}).next(function(){return e.removeMutationBatch(n,r)}).next(function(t){return i=t,e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},t.prototype.applyRemoteEvent=function(t){var e=this,n=new pi(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",function(r){var i=[];m(t.targetChanges,function(n,o){var a=e.targetIds[n];if(a){i.push(e.queryCache.removeMatchingKeys(r,o.removedDocuments,n).next(function(){return e.queryCache.addMatchingKeys(r,o.addedDocuments,n)}));var s=o.resumeToken;s.length>0&&(a=a.update({resumeToken:s,snapshotVersion:t.snapshotVersion}),e.targetIds[n]=a,i.push(e.queryCache.updateQueryData(r,a)))}});var o=at();t.documentUpdates.forEach(function(t,s){o=o.add(t),i.push(n.getEntry(r,t).next(function(r){null==r||s.version.isEqual(cn.MIN)||s.version.compareTo(r.version)>=0?n.addEntry(s):a(mi,"Ignoring outdated watch update for ",t,". Current version:",r.version," Watch version:",s.version),e.garbageCollector.addPotentialGarbageKey(t)}))});var s=e.queryCache.getLastRemoteSnapshotVersion(),u=t.snapshotVersion;u.isEqual(cn.MIN)||(l(u.compareTo(s)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+s),i.push(e.queryCache.setLastRemoteSnapshotVersion(r,u)));var c;return gr.waitFor(i).next(function(){return e.releaseHeldBatchResults(r,n)}).next(function(t){return c=t,n.apply(r)}).next(function(){return e.localDocuments.getDocuments(r,o.unionWith(c))})})},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("Notify local view changes",function(n){for(var r=[],i=function(t){r.push(e.queryCache.getQueryData(n,t.query).next(function(n){l(null!==n,"Local view changes contain unallocated query.");var r=n.targetId;e.localViewReferences.addReferences(t.addedKeys,r),e.localViewReferences.removeReferences(t.removedKeys,r)}))},o=0,a=t;o<a.length;o++){var s=a[o];i(s)}return gr.waitFor(r)})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch",function(n){return void 0===t&&(t=Ar),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){if(i)return r=i,gr.resolve();var o=e.targetIdGenerator.next();return r=new hn(t,o,xe.Listen),e.queryCache.addQueryData(n,r)}).next(function(){return l(!e.targetIds[r.targetId],"Tried to allocate an already allocated query: "+t),e.targetIds[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t){var e=this;return this.persistence.runTransaction("Release query",function(n){return e.queryCache.getQueryData(n,t).next(function(r){return l(null!=r,"Tried to release nonexistent query: "+t),e.localViewReferences.removeReferencesForId(r.targetId),delete e.targetIds[r.targetId],e.garbageCollector.isEager?e.queryCache.removeQueryData(n,r):gr.resolve()}).next(function(){if(g(e.targetIds)){var t=new pi(e.remoteDocuments);return e.releaseHeldBatchResults(n,t).next(function(){t.apply(n)})}return gr.resolve()})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.collectGarbage=function(){var t=this;return this.persistence.runTransaction("Garbage collection",function(e){return t.garbageCollector.collectGarbage(e).next(function(n){var r=[];return n.forEach(function(n){r.push(t.remoteDocuments.removeEntry(e,n))}),gr.waitFor(r)})})},t.prototype.releaseHeldBatchResults=function(t,e){for(var n=[],r=0,i=this.heldBatchResults;r<i.length;r++){var o=i[r];if(!this.isRemoteUpToVersion(o.commitVersion))break;n.push(o)}return 0===n.length?gr.resolve(at()):(this.heldBatchResults.splice(0,n.length),this.releaseBatchResults(t,n,e))},t.prototype.isRemoteUpToVersion=function(t){var e=this.queryCache.getLastRemoteSnapshotVersion();return t.compareTo(e)<=0||g(this.targetIds)},t.prototype.shouldHoldBatchResult=function(t){return!this.isRemoteUpToVersion(t)||this.heldBatchResults.length>0},t.prototype.releaseBatchResults=function(t,e,n){for(var r=this,i=gr.resolve(),o=function(e){i=i.next(function(){return r.applyWriteToRemoteDocuments(t,e,n)})},a=0,s=e;a<s.length;a++){var u=s[a];o(u)}return i.next(function(){return r.removeMutationBatches(t,e.map(function(t){return t.batch}))})},t.prototype.removeMutationBatch=function(t,e){return this.removeMutationBatches(t,[e])},t.prototype.removeMutationBatches=function(t,e){for(var n=at(),r=0,i=e;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;n=n.add(c)}return this.mutationQueue.removeMutationBatches(t,e).next(function(){return n})},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=e.batch,i=r.keys(),o=gr.resolve();return i.forEach(function(i){o=o.next(function(){return n.getEntry(t,i)}).next(function(t){var o=t,a=e.docVersions.get(i);l(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=r.applyToRemoteDocument(i,o,e),o?n.addEntry(o):l(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))})}),o},t}(),gi=function(){function t(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Ar,this.lastStreamToken=h(),
this.garbageCollector=null,this.batchesByDocumentKey=new Cn(wr.compareByKey)}return t.prototype.start=function(t){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=Ar),l(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),gr.resolve()},t.prototype.checkEmpty=function(t){return gr.resolve(0===this.mutationQueue.length)},t.prototype.getNextBatchId=function(t){return gr.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return gr.resolve(this.highestAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;l(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return l(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),l(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,gr.resolve()},t.prototype.getLastStreamToken=function(t){return gr.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,gr.resolve()},t.prototype.addMutationBatch=function(t,e,n){l(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){var i=this.mutationQueue[this.mutationQueue.length-1];l(i.batchId<r,"Mutation batchIDs must be monotonically increasing order")}var o=new xr(r,e,n);this.mutationQueue.push(o);for(var a=0,s=n;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new wr(u.key,r))}return gr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return gr.resolve(this.findMutationBatch(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){for(var n=this.mutationQueue.length,r=Math.max(e,this.highestAcknowledgedBatchId)+1,i=this.indexOfBatchId(r),o=i<0?0:i;o<n;o++){var a=this.mutationQueue[o];if(!a.isTombstone())return gr.resolve(a)}return gr.resolve(null)},t.prototype.getAllMutationBatches=function(t){return gr.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this.mutationQueue.length,r=this.indexOfBatchId(e);return r<0?r=0:r>=n?r=n:r++,gr.resolve(this.getAllLiveMutationBatchesBeforeIndex(r))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new wr(e,0),i=new wr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){l(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);l(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),gr.resolve(o)},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=r;Se.isDocumentKey(o)||(o=o.child(""));var a=new wr(new Se(o),0),s=new Cn(K);this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!r.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.targetOrBatchId)),!0)},a);var u=[];return s.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&u.push(e)}),gr.resolve(u)},t.prototype.removeMutationBatches=function(t,e){var n=e.length;l(n>0,"Should not remove mutations when none exist.");var r=e[0].batchId,i=this.mutationQueue.length,o=this.indexOfExistingBatchId(r,"removed");l(this.mutationQueue[o].batchId===r,"Removed batches must exist in the queue");for(var a=1,s=o+1;a<n&&s<i;){var u=this.mutationQueue[s];u.isTombstone()?s++:(l(u.batchId===e[a].batchId,"Removed batches must be contiguous in the queue"),a++,s++)}if(0===o){for(;s<i;s++){var u=this.mutationQueue[s];if(!u.isTombstone())break}var c=s-o;this.mutationQueue.splice(o,c)}else for(var h=o;h<s;h++)this.mutationQueue[h]=this.mutationQueue[h].toTombstone();for(var f=this.batchesByDocumentKey,d=0,p=e;d<p.length;d++)for(var u=p[d],m=u.batchId,v=0,g=u.mutations;v<g.length;v++){var y=g[v],_=y.key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(_);var b=new wr(_,m);f=f.delete(b)}return this.batchesByDocumentKey=f,gr.resolve()},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new wr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return gr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&l(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),gr.resolve()},t.prototype.getAllLiveMutationBatchesBeforeIndex=function(t){for(var e=[],n=0;n<t;n++){var r=this.mutationQueue[n];r.isTombstone()||e.push(r)}return e},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return l(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){if(0===this.mutationQueue.length)return 0;var e=this.mutationQueue[0].batchId;return t-e},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return l(n.batchId===t,"If found batch must match"),n.isTombstone()?null:n},t}(),yi=function(){function t(){this.queries=new dr(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=cn.MIN,this.highestTargetId=0,this.references=new br,this.targetCount=0}return t.prototype.start=function(t){return gr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.getHighestTargetId=function(){return this.highestTargetId},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,gr.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e)},t.prototype.addQueryData=function(t,e){return l(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,gr.resolve()},t.prototype.updateQueryData=function(t,e){return l(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),gr.resolve()},t.prototype.removeQueryData=function(t,e){return l(this.targetCount>0,"Removing a target from an empty cache"),l(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,gr.resolve()},Object.defineProperty(t.prototype,"count",{get:function(){return this.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return gr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.references.addReferences(e,n),gr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){return this.references.removeReferences(e,n),gr.resolve()},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),gr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return gr.resolve(n)},t.prototype.setGarbageCollector=function(t){this.references.setGarbageCollector(t)},t.prototype.containsKey=function(t,e){return this.references.containsKey(t,e)},t}(),_i=function(){function t(){this.docs=rt()}return t.prototype.addEntry=function(t,e){return this.docs=this.docs.insert(e.key,e),gr.resolve()},t.prototype.removeEntry=function(t,e){return this.docs=this.docs.remove(e),gr.resolve()},t.prototype.getEntry=function(t,e){return gr.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=it(),r=new Se(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value;if(!e.path.isPrefixOf(a.path))break;s instanceof Ce&&e.matches(s)&&(n=n.insert(s.key,s))}return gr.resolve(n)},t}(),bi="MemoryPersistence",wi=function(){function t(){this.mutationQueues={},this.remoteDocumentCache=new _i,this.queryCache=new yi,this.started=!1}return t.prototype.start=function(){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return l(!this.started,"MemoryPersistence double-started!"),this.started=!0,[2]})})},t.prototype.shutdown=function(t){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return l(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,[2]})})},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new gi,this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e){return a(bi,"Starting transaction:",t),e(new Ei).toPromise()},t}(),Ei=function(){function t(){}return t}(),Si=function(){function t(){this.isEager=!1}return t.prototype.addGarbageSource=function(t){},t.prototype.removeGarbageSource=function(t){},t.prototype.addPotentialGarbageKey=function(t){},t.prototype.collectGarbage=function(t){return gr.resolve(at())},t}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout"}(Sr||(Sr={}));var Ci,Ti=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=Date.now()+r,s=new t(e,n,a,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(ue.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueue(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ki=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw s("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),l(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=Ti.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&c("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){l(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){return this.delayedOperations.findIndex(function(e){return e.timerId===t})>=0},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){l(t===Sr.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Sr.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);l(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Ii="ExponentialBackoff",Pi=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){this.cancel();var e=this.currentBaseMs+this.jitterDelayMs();this.currentBaseMs>0&&a(Ii,"Backing off for "+e+" ms "+("(base delay: "+this.currentBaseMs+" ms)")),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,e,t),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),Ni="PersistentStream";!function(t){t[t.Initial=0]="Initial",t[t.Auth=1]="Auth",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t[t.Stopped=5]="Stopped"}(Ci||(Ci={}));var Oi,Ai=1e3,xi=6e4,Ri=1.5,Di=6e4,Mi=function(){function t(t,e,n,r,i){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.inactivityTimerPromise=null,this.stream=null,this.listener=null,this.backoff=new Pi(t,e,Ai,Ri,xi),this.state=Ci.Initial}return t.prototype.isStarted=function(){return this.state===Ci.Backoff||this.state===Ci.Auth||this.state===Ci.Open},t.prototype.isOpen=function(){return this.state===Ci.Open},t.prototype.start=function(t){return this.state===Ci.Error?void this.performBackoff(t):(l(this.state===Ci.Initial,"Already started"),this.listener=t,void this.auth())},t.prototype.stop=function(){this.isStarted()&&this.close(Ci.Stopped)},t.prototype.inhibitBackoff=function(){l(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Ci.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.inactivityTimerPromise&&(this.inactivityTimerPromise=this.queue.enqueueAfterDelay(this.idleTimerId,Di,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return this.isOpen()?[2,this.close(Ci.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.inactivityTimerPromise&&(this.inactivityTimerPromise.cancel(),this.inactivityTimerPromise=null)},t.prototype.close=function(t,e){return re.__awaiter(this,void 0,void 0,function(){var n;return re.__generator(this,function(r){return l(t===Ci.Error||Y(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),t!==Ci.Error?this.backoff.reset():e&&e.code===ue.RESOURCE_EXHAUSTED&&(s(e.toString()),s("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,n=this.listener,this.listener=null,t!==Ci.Stopped?[2,n.onClose(e)]:[2]})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;l(this.state===Ci.Initial,"Must be in initial state to auth"),this.state=Ci.Auth,this.credentialsProvider.getToken(!1).then(function(e){t.startStream(e)},function(e){t.queue.enqueue(function(){return re.__awaiter(t,void 0,void 0,function(){var t;return re.__generator(this,function(n){return this.state!==Ci.Stopped?(t=new ce(ue.UNKNOWN,"Fetching auth token failed: "+e.message),[2,this.handleStreamClose(t)]):[2]})})})})},t.prototype.startStream=function(t){var e=this;if(this.state!==Ci.Stopped){l(this.state===Ci.Auth,"Trying to start stream in a non-auth state");var n=function(t,n){e.queue.enqueue(function(){return re.__awaiter(e,void 0,void 0,function(){return re.__generator(this,function(e){return this.stream===t?[2,n()]:[2]})})})};if(null!==this.listener){var r=this.startRpc(t);this.stream=r,this.stream.onOpen(function(){n(r,function(){return l(e.state===Ci.Auth,"Expected stream to be in state auth, but was "+e.state),e.state=Ci.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(r,function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(r,function(){return e.onMessage(t)})})}}},t.prototype.performBackoff=function(t){var e=this;l(this.state===Ci.Error,"Should only perform backoff in an error case"),this.state=Ci.Backoff,this.backoff.backoffAndRun(function(){return re.__awaiter(e,void 0,void 0,function(){return re.__generator(this,function(e){return this.state===Ci.Stopped?[2]:(this.state=Ci.Initial,this.start(t),l(this.isStarted(),"PersistentStream should have started"),[2])})})})},t.prototype.handleStreamClose=function(t){return l(this.isStarted(),"Can't handle server close on non-started stream"),a(Ni,"close with error: "+t),this.stream=null,this.close(Ci.Error,t)},t}(),Li=function(t){function e(e,n,r,i){var o=t.call(this,e,Sr.ListenStreamConnectionBackoff,Sr.ListenStreamIdle,n,r)||this;return o.serializer=i,o}return re.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Mi),Fi=function(t){function e(e,n,r,i){var o=t.call(this,e,Sr.WriteStreamConnectionBackoff,Sr.WriteStreamIdle,n,r)||this;return o.serializer=i,o.handshakeComplete_=!1,o}return re.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this.handshakeComplete_=!1,t.prototype.start.call(this,e)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(l(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return l(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){l(this.isOpen(),"Writing handshake requires an opened stream"),l(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;l(this.isOpen(),"Writing mutations requires an opened stream"),l(this.handshakeComplete_,"Handshake must be complete before writing mutations"),l(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Mi),Ui=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(){return new Fi(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.newPersistentWatchStream=function(){return new Li(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=rt();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);l(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeRPC(t,e,r)})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeStreamingRPC(t,e,r)})},t}(),Bi=function(){function t(t){this.datastore=t,this.readVersions=ot(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e=t.version;t instanceof Te&&(e=cn.forDeletedDoc());var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new ce(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){return e.recordVersion(t)}),t})},t.prototype.write=function(t){if(this.committed)throw new ce(ue.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?vn.updateTime(e):vn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(cn.forDeletedDoc()))throw new ce(ue.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?vn.updateTime(e):vn.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new wn(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,cn.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),Ki="OnlineStateTracker",ji=2,Vi=1e4,Wi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=ur.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ur.Unknown),l(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Sr.OnlineStateTimeout,Vi,function(){return t.onlineStateTimer=null,l(t.state===ur.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within "+Vi/1e3+" seconds."),t.setAndBroadcast(ur.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===ur.Online?(this.setAndBroadcast(ur.Unknown),l(0===this.watchStreamFailures,"watchStreamFailures must be 0"),l(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=ji&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed "+ji+" times. Most recent error: "+t.toString()),this.setAndBroadcast(ur.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===ur.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(s(e),this.shouldWarnClientIsOffline=!1):a(Ki,e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),Gi="RemoteStore",qi=10,Hi=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.pendingWrites=[],this.lastBatchSeen=Ar,this.listenTargets={},this.watchStream=null,this.writeStream=null,this.watchChangeAggregator=null,this.onlineStateTracker=new Wi(n,r)}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.isNetworkEnabled=function(){return l(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},t.prototype.enableNetwork=function(){var t=this;return this.isNetworkEnabled()?Promise.resolve():(this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then(function(e){return t.writeStream.lastStreamToken=e,t.shouldStartWatchStream()?t.startWatchStream():t.onlineStateTracker.set(ur.Unknown),t.fillWritePipeline()}))},t.prototype.disableNetwork=function(){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return this.disableNetworkInternal(),this.onlineStateTracker.set(ur.Offline),[2]})})},t.prototype.disableNetworkInternal=function(){this.isNetworkEnabled()&&(this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null)},t.prototype.shutdown=function(){return a(Gi,"RemoteStore shutting down."),this.disableNetworkInternal(),this.onlineStateTracker.set(ur.Unknown),Promise.resolve()},t.prototype.listen=function(t){l(!d(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){l(d(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(t),g(this.listenTargets)&&this.watchStream.markIdle())},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){l(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Bn(this),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!g(this.listenTargets)},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return re.__awaiter(this,void 0,void 0,function(){var t=this;return re.__generator(this,function(e){return m(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(e){return l(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(t&&this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(ur.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(n){switch(n.label){case 0:return this.onlineStateTracker.set(ur.Online),t instanceof Fn&&t.state===xn.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Mn?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Ln?this.watchChangeAggregator.handleExistenceFilter(t):(l(t instanceof Fn,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),!e.isEqual(cn.MIN)&&e.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0?[4,this.raiseWatchSnapshot(e)]:[3,2]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;l(!t.isEqual(cn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return m(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.update({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){n.resumeToken=h(),e.sendUnwatchRequest(t);var r=new hn(n.query,t,xe.ExistenceFilterMismatch);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;l(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return re.__awaiter(e,void 0,void 0,function(){return re.__generator(this,function(e){return d(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=Ar,a(Gi,"Stopping write stream with "+this.pendingWrites.length+" pending writes"),this.pendingWrites=[]},t.prototype.fillWritePipeline=function(){return re.__awaiter(this,void 0,void 0,function(){var t=this;return re.__generator(this,function(e){return this.canWriteMutations()?[2,this.localStore.nextMutationBatch(this.lastBatchSeen).then(function(e){return null!==e?(t.commit(e),t.fillWritePipeline()):void(0===t.pendingWrites.length&&t.writeStream.markIdle())})]:[2]})})},t.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<qi},t.prototype.outstandingWrites=function(){return this.pendingWrites.length},t.prototype.commit=function(t){l(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=t.batchId,this.pendingWrites.push(t),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},t.prototype.startWriteStream=function(){l(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),
this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},t.prototype.onWriteStreamOpen=function(){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.pendingWrites;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})},t.prototype.onMutationResult=function(t,e){var n=this;l(this.pendingWrites.length>0,"Got result for empty pending writes");var r=this.pendingWrites.shift(),i=Rr.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return re.__awaiter(this,void 0,void 0,function(){var e,n=this;return re.__generator(this,function(r){return l(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),t&&this.pendingWrites.length>0?(l(!!t,"We have pending writes, but the write stream closed without an error"),e=void 0,e=this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t),[2,e.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(e){return $(t.code)||t.code===ue.ABORTED?(a(Gi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=h(),[2,this.localStore.setLastStreamToken(h())]):[2]})})},t.prototype.handleWriteError=function(t){return re.__awaiter(this,void 0,void 0,function(){var e,n=this;return re.__generator(this,function(r){return $(t.code)?(e=this.pendingWrites.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new Bi(this.datastore)},t.prototype.handleUserChange=function(t){if(a(Gi,"RemoteStore changing users: uid=",t.uid),this.isNetworkEnabled())return this.disableNetworkInternal(),this.onlineStateTracker.set(ur.Unknown),this.enableNetwork()},t}(),zi="FirestoreClient",Qi=20,Yi=22,Xi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r}return t.prototype.start=function(t){var e=this,n=new Xr,r=new Xr,i=!1;return this.credentials.setUserChangeListener(function(o){i?e.asyncQueue.enqueue(function(){return e.handleUserChange(o)}):(i=!0,e.initializePersistence(t,r).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueue(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.enableNetwork()})},t.prototype.initializePersistence=function(t,e){var n=this;return t?this.startIndexedDbPersistence().then(e.resolve).catch(function(t){return e.reject(t),n.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),n.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof ce?t.code===ue.FAILED_PRECONDITION||t.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(t.code===Yi||t.code===Qi)},t.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new Si;var t=fi.buildStoragePrefix(this.databaseInfo),e=new Hn(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new fi(t,e),this.persistence.start()},t.prototype.startMemoryPersistence=function(){return this.garbageCollector=new yr,this.persistence=new wi,this.persistence.start()},t.prototype.initializeRest=function(t){var e=this;return this.platform.loadConnection(this.databaseInfo).then(function(n){e.localStore=new vi(e.persistence,t,e.garbageCollector);var r=e.platform.newSerializer(e.databaseInfo.databaseId),i=new Ui(e.asyncQueue,n,e.credentials,r),o=function(t){e.syncEngine.applyOnlineStateChange(t),e.eventMgr.applyOnlineStateChange(t)};return e.remoteStore=new Hi(e.localStore,i,e.asyncQueue,o),e.syncEngine=new Or(e.localStore,e.remoteStore,t),e.remoteStore.syncEngine=e.syncEngine,e.eventMgr=new mr(e.syncEngine),e.localStore.start()}).then(function(){return e.remoteStore.start()})},t.prototype.handleUserChange=function(t){return this.asyncQueue.verifyOperationInProgress(),a(zi,"User Changed: "+t.uid),this.syncEngine.handleUserChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.credentials.removeUserChangeListener(),e.remoteStore.shutdown()}).then(function(){return e.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)})},t.prototype.listen=function(t,e,n){var r=this,i=new vr(t,e,n);return this.asyncQueue.enqueue(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueue(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof Ce)return t;throw new ce(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=at(),r=new Ir(t,n),i=r.computeDocChanges(e);return r.applyChanges(i).snapshot})},t.prototype.write=function(t){var e=this,n=new Xr;return this.asyncQueue.enqueue(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return re.__awaiter(e,void 0,void 0,function(){return re.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Ji=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),$i=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Zi=function(){function t(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}return t}(),to=function(){function t(){this.userListener=null}return t.prototype.getToken=function(t){return Promise.resolve(null)},t.prototype.setUserChangeListener=function(t){l(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,t($i.UNAUTHENTICATED)},t.prototype.removeUserChangeListener=function(){l(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},t}(),eo=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var t=e.getUser();e.currentUser&&t.isEqual(e.currentUser)||(e.currentUser=t,e.userCounter++,e.userListener&&e.userListener(e.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(t){var e=this;l(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.userCounter;return this.app.INTERNAL.getToken(t).then(function(t){if(e.userCounter!==n)throw new ce(ue.ABORTED,"getToken aborted due to uid change.");return t?(l("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new Zi(t.accessToken,e.currentUser)):null})},t.prototype.setUserChangeListener=function(t){l(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeUserChangeListener=function(){l(null!=this.tokenListener,"removeUserChangeListener() called twice"),l(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},t.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&c("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var t=this.app.INTERNAL.getUid();return l(null===t||"string"==typeof t,"Received invalid UID: "+t),new $i(t)},t}(),no=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=$i.FIRST_PARTY,l(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),ro=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,l(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(t){return Promise.resolve(new no(this.gapi,this.sessionIndex))},t.prototype.setUserChangeListener=function(t){t($i.FIRST_PARTY)},t.prototype.removeUserChangeListener=function(){},t}(),io=function(){function t(t){this.methodName=t}return t.delete=function(){return oo.instance},t.serverTimestamp=function(){return ao.instance},t._arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return b("FieldValue.arrayUnion",arguments,1),new so(t)},t._arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return b("FieldValue.arrayRemove",arguments,1),new uo(t)},t.prototype.isEqual=function(t){return this===t},t}(),oo=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return re.__extends(e,t),e.instance=new e,e}(io),ao=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return re.__extends(e,t),e.instance=new e,e}(io),so=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return re.__extends(e,t),e}(io),uo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return re.__extends(e,t),e}(io),co=f(io,"Use FieldValue.<field>() instead."),lo=/^__.*__$/,ho=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new _n(t,this.data,this.fieldMask,e)):n.push(new yn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new bn(t,this.fieldTransforms)),n},t}(),fo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new _n(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new bn(t,this.fieldTransforms)),n},t}();!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(Oi||(Oi={}));var po=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new ce(ue.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(Kt(this.dataSource)&&lo.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),mo=function(){function t(t,e){this.databaseId=t,this.key=e}return t}(),vo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new po(Oi.Set,t,Ee.EMPTY_PATH);Vt("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new ho(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new po(Oi.MergeSet,t,Ee.EMPTY_PATH);Vt("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=[],u=0,l=n;u<l.length;u++){var h=l[u],f=void 0;if(h instanceof cr?f=h:"string"==typeof h?f=Gt(t,h):c("Expected stringOrFieldPath to be a string or a FieldPath"),!r.contains(f))throw new ce(ue.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");s.push(f)}i=new fn(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=new fn(r.fieldMask),o=r.fieldTransforms;return new ho(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new po(Oi.Update,t,Ee.EMPTY_PATH);Vt("Data must be an object, but it was:",r,e);var i=[],o=He.EMPTY;v(e,function(e,a){var s=Gt(t,e),u=r.childContextForFieldPath(s);if(a=n.runPreConverter(a,u),a instanceof oo)i.push(s);else{var c=n.parseData(a,u);null!=c&&(i.push(s),o=o.set(s,c))}});var a=new fn(i);return new fo(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new po(Oi.Update,t,Ee.EMPTY_PATH),o=[Wt(t,e)],a=[n];if(r.length%2!==0)throw new ce(ue.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Wt(t,r[s])),a.push(r[s+1]);for(var u=[],c=He.EMPTY,s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof oo)u.push(l);else{var d=this.parseData(f,h);null!=d&&(u.push(l),c=c.set(l,d))}}var p=new fn(u);return new fo(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new po(Oi.Argument,t,Ee.EMPTY_PATH),r=this.parseData(e,n);return l(null!=r,"Parsed data should not be null."),l(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=qt(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(t=this.runPreConverter(t,e),jt(t))return Vt("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof io)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new ke(K);return v(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new He(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=Me.INSTANCE),n.push(s),r++}return new ze(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!Kt(e.dataSource))throw e.createError(t.methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t.methodName+"() is not currently supported inside arrays");if(t instanceof oo){if(e.dataSource!==Oi.MergeSet)throw e.dataSource===Oi.Update?(l(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ao)e.fieldTransforms.push(new dn(e.path,Kn.instance));else if(t instanceof so){var n=this.parseArrayTransformElements(t.methodName,t._elements),r=new jn(n);e.fieldTransforms.push(new dn(e.path,r))}else if(t instanceof uo){var n=this.parseArrayTransformElements(t.methodName,t._elements),i=new Vn(n);e.fieldTransforms.push(new dn(e.path,i))}else c("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Me.INSTANCE;if("number"==typeof t)return X(t)?new Ue(t):new Be(t);if("boolean"==typeof t)return Le.of(t);if("string"==typeof t)return new Ke(t);if(t instanceof Date)return new je(pe.fromDate(t));if(t instanceof pe)return new je(new pe(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof de)return new qe(t);if(t instanceof he)return new We(t);if(t instanceof mo)return new Ge(t.databaseId,t.key);throw e.createError("Unsupported field value: "+R(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new po(Oi.Argument,t,Ee.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}(),go="firestore.googleapis.com",yo=!0,_o=!1,bo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new ce(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=go,this.ssl=yo}else T("settings","string","host",t.host),this.host=t.host,k("settings","boolean","ssl",t.ssl),this.ssl=p(t.ssl,yo);L("settings",t,["host","ssl","credentials","timestampsInSnapshots"]),k("settings","object","credentials",t.credentials),this.credentials=t.credentials,k("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=p(t.timestampsInSnapshots,_o)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials},t}(),wo=function(){function t(){}return t}(),Eo=function(){function t(e){var n=this;this._queue=new ki,this.INTERNAL={delete:function(t){return re.__awaiter(n,void 0,void 0,function(){return re.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new wo;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new eo(i)}else{var o=e;if(!o.projectId)throw new ce(ue.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new ge(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new to}r.settings=new bo({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(_("Firestore.settings",arguments,1),S("Firestore.settings","object",1,t),d(t,"persistence"))throw new ce(ue.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new bo(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new ce(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=Ft(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(){if(this._firestoreClient)throw new ce(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;l(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||s("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),l(!this._firestoreClient,"configureClient() called multiple times");var n=new me(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl),r=function(t){if(t instanceof To){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new ce(ue.INVALID_ARGUMENT,"Document reference is for database "+(r.projectId+"/"+r.database+" but should be ")+("for database "+n.projectId+"/"+n.database));return new mo(e._config.databaseId,t._key)}return t};return this._dataConverter=new vo(r),this._firestoreClient=new Xi(se.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!d(e,"projectId")){if(d(e,"firestoreId"))throw new ce(ue.INVALID_ARGUMENT,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new ce(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.')}if(d(e,"firestoreOptions"))throw new ce(ue.INVALID_ARGUMENT,'"firestoreOptions" values are now specified with Firestore.settings()');var n=e.projectId;if(!n||"string"!=typeof n)throw new ce(ue.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ge(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new ce(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(_("Firestore.collection",arguments,1),S("Firestore.collection","string",1,t),!t)throw new ce(ue.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new xo(be.fromString(t),this)},t.prototype.doc=function(t){if(_("Firestore.doc",arguments,1),S("Firestore.doc","string",1,t),!t)throw new ce(ue.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),To.forPath(be.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return _("Firestore.runTransaction",arguments,1),S("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new So(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Co(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(i()){case te.DEBUG:return"debug";case te.ERROR:return"error";case te.SILENT:return"silent";default:return c("Unknown log level: "+i())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(_("Firestore.setLogLevel",arguments,1),S("Firestore.setLogLevel","string",1,t),t){case"debug":o(te.DEBUG);break;case"error":o(te.ERROR);break;case"silent":o(te.SILENT);break;default:throw new ce(ue.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),So=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;_("Transaction.get",arguments,1);var n=Yt("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return c("Mismatch in docs returned from document lookup.");var r=t[0];return r instanceof Te?new Io(e._firestore,n._key,null,!1):new Io(e._firestore,n._key,r,!1)})},t.prototype.set=function(t,e,n){w("Transaction.set",arguments,2,3);var r=Yt("Transaction.set",t,this._firestore);n=zt("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a;return"string"==typeof e||e instanceof cr?(b("Transaction.update",arguments,3),o=Yt("Transaction.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,r)):(_("Transaction.update",arguments,2),o=Yt("Transaction.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(o._key,a),this},t.prototype.delete=function(t){_("Transaction.delete",arguments,1);var e=Yt("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Co=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){w("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Yt("WriteBatch.set",t,this._firestore);n=zt("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,vn.NONE)),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,a;return"string"==typeof e||e instanceof cr?(b("WriteBatch.update",arguments,3),o=Yt("WriteBatch.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,r)):(_("WriteBatch.update",arguments,2),o=Yt("WriteBatch.update",t,this._firestore),a=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(a.toMutations(o._key,vn.exists(!0))),this},t.prototype.delete=function(t){_("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Yt("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new wn(e._key,vn.NONE)),this},t.prototype.commit=function(){return re.__awaiter(this,void 0,void 0,function(){return re.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new ce(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),To=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!==0)throw new ce(ue.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+(e.canonicalString()+" has "+e.length));return new t(new Se(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(_("DocumentReference.collection",arguments,1),S("DocumentReference.collection","string",1,t),!t)throw new ce(ue.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=be.fromString(t);return new xo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){w("DocumentReference.set",arguments,1,2),e=zt("DocumentReference.set",e);var n=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,vn.NONE))},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"==typeof t||t instanceof cr?(b("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,n)):(_("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(i.toMutations(this._key,vn.exists(!0)))},t.prototype.delete=function(){return _("DocumentReference.delete",arguments,0),this._firestoreClient.write([new wn(this._key,vn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];w("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ut(t[i])||(r=t[i],L("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),k("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ut(t[i])?n=t[i]:(S("DocumentReference.onSnapshot","function",i,t[i]),C("DocumentReference.onSnapshot","function",i+1,t[i+1]),C("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ji({next:function(t){if(e.next){l(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Io(n.firestore,n._key,r,t.fromCache))}},error:r}),o=this._firestoreClient.listen($e.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return L("DocumentReference.get",t,["source"]),t&&O("DocumentReference.get","options","source",t.source,["default","server","cache"]),new Promise(function(n,r){
t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Io(e.firestore,e._key,t,!0))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new ce(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new ce(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),ko=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Io=function(){function t(t,e,n,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=r}return t.prototype.data=function(t){return w("DocumentSnapshot.data",arguments,0,1),t=Qt("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,Re.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(w("DocumentSnapshot.get",arguments,1,2),e=Qt("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(Wt("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,Re.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new To(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ko(null!==this._document&&this._document.hasLocalMutations,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof He)return this.convertObject(t,e);if(t instanceof ze)return this.convertArray(t,e);if(t instanceof Ge){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||s("Document "+this._key.path+" contains a document reference within a different database ("+(t.databaseId.projectId+"/"+t.databaseId.database+") which is not ")+"supported. It will be treated as a reference in the current "+("database ("+r.projectId+"/"+r.database+") ")+"instead."),new To(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Po=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return re.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return l("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Io),No=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){_("Query.where",arguments,3),S("Query.where","string",2,n),M("Query.where",3,r);var i,o=Wt("Query.where",e),a=Ze.fromString(n);if(o.isKeyField()){if(a===Ze.ARRAY_CONTAINS)throw new ce(ue.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(r.indexOf("/")!==-1)throw new ce(ue.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new ce(ue.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new be([r]));l(s.length%2===0,"Path should be a document key"),i=new Ge(this.firestore._databaseId,new Se(s))}else{if(!(r instanceof To))throw new ce(ue.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+(R(r)+"."));var u=r;i=new Ge(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=J(o,a,i);return this.validateNewFilter(c),new t(this._query.addFilter(c),this.firestore)},t.prototype.orderBy=function(e,n){w("Query.orderBy",arguments,1,2),C("Query.orderBy","string",2,n);var r;if(void 0===n||"asc"===n)r=rn.ASCENDING;else{if("desc"!==n)throw new ce(ue.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=rn.DESCENDING}if(null!==this._query.startAt)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Wt("Query.orderBy",e),o=new an(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(_("Query.limit",arguments,1),S("Query.limit","number",1,e),e<=0)throw new ce(ue.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];b("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];b("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];b("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];b("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(M(t,1,e),e instanceof Io){if(n.length>0)throw new ce(ue.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new ce(ue.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+(t+"()."));return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Ge(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a "+("document for which the field '"+u+"' (used as the ")+"orderBy) does not exist.")}r.push(s)}}return new on(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new ce(ue.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o],s=r[o];if(s.field.isKeyField()){if("string"!=typeof a)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+(t+"(), but got a "+typeof a));if(a.indexOf("/")!==-1)throw new ce(ue.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+(t+"()"));var u=new Se(this._query.path.child(a));i.push(new Ge(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new on(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];w("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ut(t[i])||(r=t[i],L("Query.onSnapshot",r,["includeMetadataChanges"]),k("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ut(t[i])?n=t[i]:(S("Query.onSnapshot","function",i,t[i]),C("Query.onSnapshot","function",i+1,t[i+1]),C("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ji({next:function(t){e.next&&e.next(new Oo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return w("Query.get",arguments,0,1),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Oo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new ce(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof tn)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new ce(ue.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have"+(" inequality filters on '"+e.toString()+"'")+(" and '"+t.field.toString()+"'"));var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Ze.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new ce(ue.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new ce(ue.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality "+("(<, <=, >, or >=) on field '"+t.toString()+"' ")+("and so you must also use '"+t.toString()+"' ")+"as your first Query.orderBy(), but your first Query.orderBy() "+("is on field '"+e.toString()+"' instead."))},t}(),Oo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new ko(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;w("QuerySnapshot.forEach",arguments,1,2),S("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new No(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){L("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),t&&k("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges);var e=t&&t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ce(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=Xt(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw F("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Po(this._firestore,t.key,t,this.metadata.fromCache)},t}(),Ao=["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]);Ao.forEach(function(t){try{Object.defineProperty(Oo.prototype.docChanges,t,{get:function(){return Ht()}})}catch(t){}});var xo=function(t){function e(e,n){var r=t.call(this,$e.atPath(e),n)||this;if(e.length%2!==1)throw new ce(ue.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+(e.canonicalString()+" has "+e.length));return r}return re.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new To(new Se(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(w("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=le.newId()),S("CollectionReference.doc","string",1,t),""===t)throw new ce(ue.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=be.fromString(t);return To.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){_("CollectionReference.add",arguments,1),S("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(No),Ro=f(Eo,"Use firebase.firestore() instead."),Do=f(So,"Use firebase.firestore().runTransaction() instead."),Mo=f(Co,"Use firebase.firestore().batch() instead."),Lo=f(To,"Use firebase.firestore().doc() instead."),Fo=f(Io),Uo=f(Po),Bo=f(No),Ko=f(Oo),jo=f(xo,"Use firebase.firestore().collection() instead."),Vo={Firestore:Ro,GeoPoint:de,Timestamp:pe,Blob:fe,Transaction:Do,WriteBatch:Mo,DocumentReference:Lo,DocumentSnapshot:Fo,Query:Bo,QueryDocumentSnapshot:Uo,QuerySnapshot:Ko,CollectionReference:jo,FieldPath:cr,FieldValue:co,setLogLevel:Eo.setLogLevel};Zt(ee),e.registerFirestore=Zt}).call(e,n(/*! ./../../../process/browser.js */35))},/*!*************************************************!*\
  !*** ./~/@firebase/functions/dist/index.cjs.js ***!
  \*************************************************/
function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function o(t,e,n){var r=i(t),o=r,a=void 0;try{var s=e.error;if(s){var u=s.status;if("string"==typeof u){if(!h[u])return new f("internal","internal");r=h[u]}o=u;var c=s.message;"string"==typeof c&&(o=c),a=s.details,void 0!==a&&(a=n.decode(a))}}catch(t){}return"ok"===r?null:new f(r,o,a)}function a(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function s(t,e,n){return new g(t,n)}function u(t){var e={Functions:g};t.INTERNAL.registerService(y,s,e,void 0,!0)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(/*! tslib */41),l=r(n(/*! @firebase/app */20)),h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},f=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return c.__extends(e,t),e}(Error),d=function(){function t(t){this.app=t}return t.prototype.getAuthToken=function(){return c.__awaiter(this,void 0,void 0,function(){var t,e;return c.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 2:return e=n.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getInstanceIdToken=function(){return c.__awaiter(this,void 0,void 0,function(){var t,e,n;return c.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.app.messaging?(t=this.app.messaging(),[4,t.getToken()]):[2,void 0];case 1:return e=r.sent(),e?[2,e]:[2,void 0];case 2:return n=r.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getContext=function(){return c.__awaiter(this,void 0,void 0,function(){var t,e;return c.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}(),p="type.googleapis.com/google.protobuf.Int64Value",m="type.googleapis.com/google.protobuf.UInt64Value",v=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null===t||void 0===t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(t===!0||t===!1)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return a(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null===t)return t;if(t["@type"])switch(t["@type"]){case p:case m:var n=parseFloat(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?a(t,function(t){return e.decode(t)}):t},t}(),g=function(){function t(t,e){void 0===e&&(e="us-central1"),this.app_=t,this.region_=e,this.serializer=new v,this.emulatorOrigin=null,this.contextProvider=new d(t)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){var r=this.emulatorOrigin;return r+"/"+e+"/"+n+"/"+t}return"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t){var e=this,n=function(n){return e.call(t,n)};return n},t.prototype.postJSON=function(t,e,n){return c.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return c.__generator(this,function(s){switch(s.label){case 0:n.append("Content-Type","application/json"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=s.sent(),[3,4];case 3:return i=s.sent(),[2,{status:0,json:null}];case 4:o=null,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,r.json()];case 6:return o=s.sent(),[3,8];case 7:return a=s.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}})})},t.prototype.call=function(t,e){return c.__awaiter(this,void 0,void 0,function(){var n,r,i,a,s,u,l,h;return c.__generator(this,function(c){switch(c.label){case 0:return n=this._url(t),e=this.serializer.encode(e),r={data:e},i=new Headers,[4,this.contextProvider.getContext()];case 1:return a=c.sent(),a.authToken&&i.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&i.append("Firebase-Instance-ID-Token",a.instanceIdToken),[4,this.postJSON(n,r,i)];case 2:if(s=c.sent(),u=o(s.status,s.json,this.serializer))throw u;if(!s.json)throw new f("internal","Response is not valid JSON object.");if(l=s.json.data,"undefined"==typeof l&&(l=s.json.result),"undefined"==typeof l)throw new f("internal","Response is missing data field.");return h=this.serializer.decode(l),[2,{data:h}]}})})},t}(),y="functions";u(l),e.registerFunctions=u},/*!*************************************************!*\
  !*** ./~/@firebase/messaging/dist/index.cjs.js ***!
  \*************************************************/
function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function o(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(null,e))}function a(t){var e=o(t);return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}function u(t){if(t.objectStoreNames.contains(R)){var e=t.transaction(R),n=e.objectStore(R),r=new A,i=n.openCursor();i.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},i.onsuccess=function(){var e=i.result;if(e){var n=e.value;r.deleteToken(n.fcmSenderId,n.fcmToken,n.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase(x)}}}function c(){var t=indexedDB.open(x);t.onerror=function(t){},t.onsuccess=function(e){var n=t.result;u(n)}}function l(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw I.create(T.BAD_TOKEN);if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw I.create(T.BAD_SCOPE);if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw I.create(T.BAD_VAPID_KEY);if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw I.create(T.BAD_SUBSCRIPTION);if(t.auth&&!(t.auth instanceof ArrayBuffer))throw I.create(T.BAD_SUBSCRIPTION);if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw I.create(T.BAD_SUBSCRIPTION);if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw I.create(T.BAD_SENDER_ID);if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw I.create(T.BAD_PUSH_SET)}function f(t,e,n){if(!n.vapidKey||!i(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,o=i(t.getKey("auth"),n.auth),a=i(t.getKey("p256dh"),n.p256dh);return r&&o&&a}function d(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function p(t,e){return n={},n[w.TYPE_OF_MSG]=t,n[w.DATA]=e,n;var n}function m(){return S.__awaiter(this,void 0,void 0,function(){var t,e,n,r;return S.__generator(this,function(i){switch(i.label){case 0:if(t=document.querySelector('link[rel="manifest"]'),!t)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return n=i.sent(),[4,n.json()];case 3:return e=i.sent(),[3,5];case 4:return r=i.sent(),[2];case 5:if(!e||!e.gcm_sender_id)return[2];if("103953800507"!==e.gcm_sender_id)throw I.create(T.INCORRECT_GCM_SENDER_ID);return[2]}})})}function v(t){var e="messaging",n=function(t){if(!g())throw I.create(T.UNSUPPORTED_BROWSER);return self&&"ServiceWorkerGlobalScope"in self?new V(t):new q(t)},r={isSupported:g};t.INTERNAL.registerService(e,n,r)}function g(){return self&&"ServiceWorkerGlobalScope"in self?_():y()}function y(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function _(){return"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Object.defineProperty(e,"__esModule",{value:!0});var b,w,E=n(/*! @firebase/util */55),S=n(/*! tslib */41),C=r(n(/*! @firebase/app */20)),T={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},k=(b={},b[T.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",b[T.AVAILABLE_IN_SW]="This method is available in a service worker context.",b[T.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",b[T.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",b[T.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",b[T.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",b[T.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",b[T.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",b[T.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",b[T.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",b[T.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",b[T.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",b[T.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",b[T.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",b[T.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",b[T.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",b[T.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",b[T.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",b[T.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",b[T.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",b[T.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",b[T.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",b[T.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",b[T.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",b[T.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",b[T.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",b[T.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",b[T.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",b[T.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",b[T.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",b[T.BAD_SCOPE]="The service worker scope must be a string with at least one character.",b[T.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",b[T.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",b[T.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",b[T.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",b[T.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",b[T.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",b[T.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",b),I=new E.ErrorFactory("messaging","Messaging",k),P=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),N="https://fcm.googleapis.com";!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(w||(w={}));var O;!function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(O||(O={}));var A=function(){function t(){}return t.prototype.getToken=function(t,e,n){return S.__awaiter(this,void 0,void 0,function(){var r,o,s,u,c,l,h,f,d,p;return S.__generator(this,function(m){switch(m.label){case 0:r=a(e.getKey("p256dh")),o=a(e.getKey("auth")),s="authorized_entity="+t+"&"+("endpoint="+e.endpoint+"&")+("encryption_key="+r+"&")+("encryption_auth="+o),i(n.buffer,P.buffer)||(u=a(n),s+="&application_pub_key="+u),c=new Headers,c.append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:c,body:s},m.label=1;case 1:return m.trys.push([1,4,,5]),[4,fetch(N+"/fcm/connect/subscribe",l)];case 2:return f=m.sent(),[4,f.json()];case 3:return h=m.sent(),[3,5];case 4:throw d=m.sent(),I.create(T.TOKEN_SUBSCRIBE_FAILED);case 5:if(h.error)throw p=h.error.message,I.create(T.TOKEN_SUBSCRIBE_FAILED,{message:p});if(!h.token)throw I.create(T.TOKEN_SUBSCRIBE_NO_TOKEN);if(!h.pushSet)throw I.create(T.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:h.token,pushSet:h.pushSet}]}})})},t.prototype.updateToken=function(t,e,n,r,o){return S.__awaiter(this,void 0,void 0,function(){var s,u,c,l,h,f,d,p,m,v;return S.__generator(this,function(g){switch(g.label){case 0:s=a(r.getKey("p256dh")),u=a(r.getKey("auth")),c="push_set="+n+"&"+("token="+e+"&")+("authorized_entity="+t+"&")+("endpoint="+r.endpoint+"&")+("encryption_key="+s+"&")+("encryption_auth="+u),i(o.buffer,P.buffer)||(l=a(o),c+="&application_pub_key="+l),h=new Headers,h.append("Content-Type","application/x-www-form-urlencoded"),f={method:"POST",headers:h,body:c},g.label=1;case 1:return g.trys.push([1,4,,5]),[4,fetch(N+"/fcm/connect/subscribe",f)];case 2:return p=g.sent(),[4,p.json()];case 3:return d=g.sent(),[3,5];case 4:throw m=g.sent(),I.create(T.TOKEN_UPDATE_FAILED);case 5:if(d.error)throw v=d.error.message,I.create(T.TOKEN_UPDATE_FAILED,{message:v});if(!d.token)throw I.create(T.TOKEN_UPDATE_NO_TOKEN);return[2,d.token]}})})},t.prototype.deleteToken=function(t,e,n){return S.__awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u,c;return S.__generator(this,function(l){switch(l.label){case 0:r="authorized_entity="+t+"&"+("token="+e+"&")+("pushSet="+n),i=new Headers,i.append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(N+"/fcm/connect/unsubscribe",o)];case 2:return a=l.sent(),[4,a.json()];case 3:if(s=l.sent(),s.error)throw u=s.error.message,I.create(T.TOKEN_UNSUBSCRIBE_FAILED,{message:u});return[3,5];case 4:throw c=l.sent(),I.create(T.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},t}(),x="undefined",R="fcm_token_object_Store",D=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){function n(n){var r=n.index(t);return r.get(e)}return this.createTransaction(n)},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return S.__awaiter(this,void 0,void 0,function(){var t;return S.__generator(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t=e.sent(),t.close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return void 0===e&&(e="readonly"),S.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return S.__generator(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,e),i=r.objectStore(this.objectStoreName),[4,l(t(i))];case 2:return o=a.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}(),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return S.__extends(e,t),e.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:var r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"});r.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:c();case 2:var r=t.transaction.objectStore(this.objectStoreName),i=r.openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=S.__assign({},e);e.createTime||(n.createTime=Date.now()),"string"==typeof e.vapidKey&&(n.vapidKey=s(e.vapidKey)),"string"==typeof e.auth&&(n.auth=s(e.auth).buffer),"string"==typeof e.auth&&(n.p256dh=s(e.p256dh).buffer),t.update(n),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){if(!t)throw I.create(T.BAD_TOKEN);return h({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){if(!t)throw I.create(T.BAD_SCOPE);return h({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){if(!t.swScope)throw I.create(T.BAD_SCOPE);if(!t.vapidKey)throw I.create(T.BAD_VAPID_KEY);if(!t.endpoint||!t.auth||!t.p256dh)throw I.create(T.BAD_SUBSCRIPTION);if(!t.fcmSenderId)throw I.create(T.BAD_SENDER_ID);if(!t.fcmToken)throw I.create(T.BAD_TOKEN);if(!t.fcmPushSet)throw I.create(T.BAD_PUSH_SET);return h(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return S.__awaiter(this,void 0,void 0,function(){var e;return S.__generator(this,function(n){switch(n.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(I.create(T.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(e=n.sent(),!e)throw I.create(T.DELETE_TOKEN_NOT_FOUND);return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(D),L=65,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return S.__extends(e,t),e.prototype.onDbUpgrade=function(t){var e=t.result;e.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return S.__awaiter(this,void 0,void 0,function(){var e;return S.__generator(this,function(n){switch(n.label){case 0:if("string"!=typeof t||0===t.length)throw I.create(T.BAD_SCOPE);return[4,this.get(t)];case 1:return e=n.sent(),[2,e?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return S.__awaiter(this,void 0,void 0,function(){var n;return S.__generator(this,function(r){if("string"!=typeof t||0===t.length)throw I.create(T.BAD_SCOPE);if(null===e||e.length!==L)throw I.create(T.BAD_VAPID_KEY);return n={swScope:t,vapidKey:e},[2,this.put(n)]})})},e.prototype.deleteVapidDetails=function(t){return S.__awaiter(this,void 0,void 0,function(){var e;return S.__generator(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(e=n.sent(),!e)throw I.create(T.DELETE_SCOPE_NOT_FOUND);return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(D),U="messagingSenderId",B=6048e5,K=function(){function t(t){var e=this;if(!t.options[U]||"string"!=typeof t.options[U])throw I.create(T.BAD_SENDER_ID);this.messagingSenderId=t.options[U],this.tokenDetailsModel=new M,this.vapidDetailsModel=new F,this.iidModel=new A,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return S.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i;return S.__generator(this,function(o){switch(o.label){case 0:if(t=this.getNotificationPermission_(),"denied"===t)throw I.create(T.NOTIFICATIONS_BLOCKED);return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return e=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return i=o.sent(),i?[2,this.manageExistingToken(e,r,n,i)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return S.__awaiter(this,void 0,void 0,function(){var i,o;return S.__generator(this,function(a){switch(a.label){case 0:return i=f(e,n,r),i?(o=Date.now(),o<r.createTime+B?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]):[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return a.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.updateToken=function(t,e,n,r){return S.__awaiter(this,void 0,void 0,function(){var i,o,a;return S.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,e,n)];case 1:return i=s.sent(),o={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return S.__awaiter(this,void 0,void 0,function(){var r,i;return S.__generator(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,n)];case 1:return r=o.sent(),i={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return o.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){return S.__awaiter(this,void 0,void 0,function(){var e,n;return S.__generator(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return e=r.sent(),e?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return S.__awaiter(this,void 0,void 0,function(){var e;return S.__generator(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n?n:t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw I.create(T.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(t){throw I.create(T.AVAILABLE_IN_WINDOW)},t.prototype.usePublicVapidKey=function(t){throw I.create(T.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw I.create(T.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw I.create(T.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw I.create(T.AVAILABLE_IN_SW)},t.prototype.delete=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}(),j="FCM_MSG",V=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return S.__extends(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return S.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return S.__generator(this,function(u){switch(u.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return(n=u.sent())?[2,this.sendMessageToWindowClients_(e)]:(r=this.getNotificationData_(e))?(i=r.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return o=u.sent(),a=r.actions,s=Notification.maxActions,a&&s&&a.length>s&&console.warn("This browser only supports "+s+" actions.The remaining actions will not be displayed."),[2,o.showNotification(i,r)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return u.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return S.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i;return S.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=o.sent(),[3,3];case 2:throw e=o.sent(),I.create(T.UNABLE_TO_RESUBSCRIBE,{message:e});case 3:return o.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return o.sent(),[3,8];case 5:return n=o.sent(),r=this.getTokenDetailsModel(),[4,r.getTokenDetailsFromSWScope(t.scope)];case 6:if(i=o.sent(),!i)throw n;return[4,this.deleteToken(i.fcmToken)];case 7:throw o.sent(),n;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return S.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return S.__generator(this,function(o){switch(o.label){case 0:return t.notification&&t.notification.data&&t.notification.data[j]?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),e=t.notification.data[j],e.notification?(n=e.fcmOptions&&e.fcmOptions.link||e.notification.click_action,n?[4,this.getWindowClient_(n)]:[2]):[2]):[2];case 1:return r=o.sent(),r?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete e.notification,delete e.fcmOptions,i=p(O.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e=S.__assign({},t.notification);return e.data=S.__assign({},t.notification.data,(n={},n[j]=t,n)),e;var n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw I.create(T.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return S.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return S.__generator(this,function(a){switch(a.label){case 0:return e=new URL(t,self.location.href).href,[4,d()];case 1:for(n=a.sent(),r=null,i=0;i<n.length;i++)if(o=new URL(n[i].url,self.location.href).href,o===e){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,e){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(n){if(!t)throw I.create(T.NO_WINDOW_CLIENT_TO_MSG);return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return S.__awaiter(this,void 0,void 0,function(){var t;return S.__generator(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return t=e.sent(),[2,t.some(function(t){return"visible"===t.visibilityState})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return S.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return S.__generator(this,function(i){switch(i.label){case 0:return[4,d()];case 1:return e=i.sent(),n=p(O.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return i.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return S.__awaiter(this,void 0,void 0,function(){var t,e;return S.__generator(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(t=n.sent(),!t)throw I.create(T.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return e=n.sent(),null==e?[2,P]:[2,e]}})})},e}(K),W="/firebase-messaging-sw.js",G="/firebase-cloud-messaging-push-scope",q=function(t){function e(e){var n=t.call(this,e)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=E.createSubscribe(function(t){n.messageObserver=t}),n.onTokenRefreshInternal=E.createSubscribe(function(t){n.tokenRefreshObserver=t}),n.setupSWMessageListener_(),n}return S.__extends(e,t),e.prototype.getToken=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=m()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,t.prototype.getToken.call(this)]}})})},e.prototype.requestPermission=function(){return S.__awaiter(this,void 0,void 0,function(){var t;return S.__generator(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?I.create(T.PERMISSION_BLOCKED):I.create(T.PERMISSION_DEFAULT)}})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw I.create(T.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw I.create(T.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw I.create(T.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw I.create(T.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var e=s(t);if(65!==e.length)throw I.create(T.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(!e)return void r(I.create(T.NO_SW_IN_REG));if("activated"===e.state)return void n(t);if("redundant"===e.state)return void r(I.create(T.SW_REG_REDUNDANT));var i=function(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(I.create(T.SW_REG_REDUNDANT))}e.removeEventListener("statechange",i)};e.addEventListener("statechange",i)})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register(W,{scope:G}).catch(function(t){throw I.create(T.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(t){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,P]})})},e.prototype.setupSWMessageListener_=function(){var t=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[w.TYPE_OF_MSG]){var n=e.data;switch(n[w.TYPE_OF_MSG]){case O.PUSH_MSG_RECEIVED:case O.NOTIFICATION_CLICKED:var r=n[w.DATA];t.messageObserver&&t.messageObserver.next(r)}}},!1)},e}(K);v(C),e.registerMessaging=v,e.isSupported=g},/*!************************************************!*\
  !*** ./~/@firebase/polyfill/dist/index.cjs.js ***!
  \************************************************/
function(t,e,n){(function(t,e){"use strict";function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?s:u)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}function f(t,e){return e={exports:{}},t(e,e.exports),e.exports}n(/*! whatwg-fetch */151);var d=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return a(this,new l(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}i[t]=a,0===--o&&e(i)}catch(t){n(t)}}if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){d(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof e)return e;throw new Error("unable to locate global object")}();p.Promise||(p.Promise=o);var m=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),g=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),y=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},_=function(t){try{return!!t()}catch(t){return!0}},b=!_(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),w=m.document,E=g(w)&&g(w.createElement),S=function(t){return E?w.createElement(t):{}},C=!b&&!_(function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a}),T=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,I=b?Object.defineProperty:function(t,e,n){if(y(t),e=T(e,!0),y(n),C)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},P={f:I},N=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=b?function(t,e,n){return P.f(t,e,N(1,n))}:function(t,e,n){return t[e]=n,t},A={}.hasOwnProperty,x=function(t,e){return A.call(t,e)},R=0,D=Math.random(),M=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++R+D).toString(36))},L=f(function(t){var e=M("src"),n="toString",r=Function[n],i=(""+r).split(n);v.inspectSource=function(t){return r.call(t)},(t.exports=function(t,n,r,o){var a="function"==typeof r;a&&(x(r,"name")||O(r,"name",n)),t[n]!==r&&(a&&(x(r,e)||O(r,e,t[n]?""+t[n]:i.join(String(n)))),t===m?t[n]=r:o?t[n]?t[n]=r:O(t,n,r):(delete t[n],O(t,n,r)))})(Function.prototype,n,function(){return"function"==typeof this&&this[e]||r.call(this)})}),F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},U=function(t,e,n){if(F(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},B="prototype",K=function(t,e,n){var r,i,o,a,s=t&K.F,u=t&K.G,c=t&K.S,l=t&K.P,h=t&K.B,f=u?m:c?m[e]||(m[e]={}):(m[e]||{})[B],d=u?v:v[e]||(v[e]={}),p=d[B]||(d[B]={});u&&(n=e);for(r in n)i=!s&&f&&void 0!==f[r],o=(i?f:n)[r],a=h&&i?U(o,m):l&&"function"==typeof o?U(Function.call,o):o,f&&L(f,r,o,t&K.U),d[r]!=o&&O(d,r,a),l&&p[r]!=o&&(p[r]=o)};m.core=v,K.F=1,K.G=2,K.S=4,K.P=8,K.B=16,K.W=32,K.U=64,K.R=128;var j=K,V={}.toString,W=function(t){return V.call(t).slice(8,-1)},G=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==W(t)?t.split(""):Object(t)},q=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},H=function(t){return Object(q(t))},z=Math.ceil,Q=Math.floor,Y=function(t){return isNaN(t=+t)?0:(t>0?Q:z)(t)},X=Math.min,J=function(t){return t>0?X(Y(t),9007199254740991):0},$=Array.isArray||function(t){return"Array"==W(t)},Z="__core-js_shared__",tt=m[Z]||(m[Z]={}),et=function(t){return tt[t]||(tt[t]={})},nt=f(function(t){var e=et("wks"),n=m.Symbol,r="function"==typeof n,i=t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:M)("Symbol."+t))};i.store=e}),rt=nt("species"),it=function(t){var e;return $(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!$(e.prototype)||(e=void 0),g(e)&&(e=e[rt],null===e&&(e=void 0))),void 0===e?Array:e},ot=function(t,e){return new(it(t))(e)},at=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||ot;return function(e,c,l){for(var h,f,d=H(e),p=G(d),m=U(c,l,3),v=J(p.length),g=0,y=n?u(e,v):r?u(e,0):void 0;v>g;g++)if((s||g in p)&&(h=p[g],f=m(h,g,d),t))if(n)y[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:y.push(h)}else if(o)return!1;return a?-1:i||o?o:y}},st=nt("unscopables"),ut=Array.prototype;void 0==ut[st]&&O(ut,st,{});var ct=function(t){ut[st][t]=!0},lt=at(5),ht="find",ft=!0;ht in[]&&Array(1)[ht](function(){ft=!1}),j(j.P+j.F*ft,"Array",{find:function(t){return lt(this,t,arguments.length>1?arguments[1]:void 0)}}),ct(ht);var dt=(v.Array.find,at(6)),pt="findIndex",mt=!0;pt in[]&&Array(1)[pt](function(){mt=!1}),j(j.P+j.F*mt,"Array",{findIndex:function(t){return dt(this,t,arguments.length>1?arguments[1]:void 0)}}),ct(pt);var vt=(v.Array.findIndex,function(t){return G(q(t))}),gt=Math.max,yt=Math.min,_t=function(t,e){return t=Y(t),t<0?gt(t+e,0):yt(t,e)},bt=function(t){return function(e,n,r){var i,o=vt(e),a=J(o.length),s=_t(r,a);if(t&&n!=n){for(;a>s;)if(i=o[s++],i!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},wt=et("keys"),Et=function(t){return wt[t]||(wt[t]=M(t))},St=bt(!1),Ct=Et("IE_PROTO"),Tt=function(t,e){var n,r=vt(t),i=0,o=[];for(n in r)n!=Ct&&x(r,n)&&o.push(n);for(;e.length>i;)x(r,n=e[i++])&&(~St(o,n)||o.push(n));return o},kt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),It=Object.keys||function(t){return Tt(t,kt)},Pt=Object.getOwnPropertySymbols,Nt={f:Pt},Ot={}.propertyIsEnumerable,At={f:Ot},xt=Object.assign,Rt=!xt||_(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=xt({},t)[n]||Object.keys(xt({},e)).join("")!=r})?function(t,e){for(var n=H(t),r=arguments.length,i=1,o=Nt.f,a=At.f;r>i;)for(var s,u=G(arguments[i++]),c=o?It(u).concat(o(u)):It(u),l=c.length,h=0;l>h;)a.call(u,s=c[h++])&&(n[s]=u[s]);return n}:xt;j(j.S+j.F,"Object",{assign:Rt});var Dt=(v.Object.assign,nt("match")),Mt=function(t){var e;return g(t)&&(void 0!==(e=t[Dt])?!!e:"RegExp"==W(t))},Lt=function(t,e,n){if(Mt(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(q(t))},Ft=nt("match"),Ut=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Ft]=!1,!"/./"[t](e)}catch(t){}}return!0},Bt="startsWith",Kt=""[Bt];j(j.P+j.F*Ut(Bt),"String",{startsWith:function(t){var e=Lt(this,t,Bt),n=J(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Kt?Kt.call(e,r,n):e.slice(n,n+r.length)===r}});var jt=(v.String.startsWith,function(t){var e=String(q(this)),n="",r=Y(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n});j(j.P,"String",{repeat:jt});var Vt=(v.String.repeat,f(function(t){var e=M("meta"),n=P.f,r=0,i=Object.isExtensible||function(){return!0},o=!_(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=function(t,n){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!x(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},u=function(t,n){if(!x(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},c=function(t){return o&&l.NEED&&i(t)&&!x(t,e)&&a(t),t},l=t.exports={KEY:e,NEED:!1,fastKey:s,getWeak:u,onFreeze:c}})),Wt=(Vt.KEY,Vt.NEED,Vt.fastKey,Vt.getWeak,Vt.onFreeze,P.f),Gt=nt("toStringTag"),qt=function(t,e,n){t&&!x(t=n?t:t.prototype,Gt)&&Wt(t,Gt,{configurable:!0,value:e})},Ht=nt,zt={f:Ht},Qt=!1,Yt=P.f,Xt=function(t){var e=v.Symbol||(v.Symbol=Qt?{}:m.Symbol||{});"_"==t.charAt(0)||t in e||Yt(e,t,{value:zt.f(t)})},Jt=function(t){var e=It(t),n=Nt.f;if(n)for(var r,i=n(t),o=At.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e},$t=b?Object.defineProperties:function(t,e){y(t);for(var n,r=It(e),i=r.length,o=0;i>o;)P.f(t,n=r[o++],e[n]);return t},Zt=m.document,te=Zt&&Zt.documentElement,ee=Et("IE_PROTO"),ne=function(){},re="prototype",ie=function(){var t,e=S("iframe"),n=kt.length,r="<",i=">";for(e.style.display="none",te.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+i+"document.F=Object"+r+"/script"+i),t.close(),ie=t.F;n--;)delete ie[re][kt[n]];return ie()},oe=Object.create||function(t,e){var n;return null!==t?(ne[re]=y(t),n=new ne,ne[re]=null,n[ee]=t):n=ie(),void 0===e?n:$t(n,e)},ae=kt.concat("length","prototype"),se=Object.getOwnPropertyNames||function(t){return Tt(t,ae)},ue={f:se},ce=ue.f,le={}.toString,he="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],fe=function(t){try{return ce(t)}catch(t){return he.slice()}},de=function(t){return he&&"[object Window]"==le.call(t)?fe(t):ce(vt(t))},pe={f:de},me=Object.getOwnPropertyDescriptor,ve=b?me:function(t,e){if(t=vt(t),e=T(e,!0),C)try{return me(t,e)}catch(t){}if(x(t,e))return N(!At.f.call(t,e),t[e])},ge={f:ve},ye=Vt.KEY,_e=ge.f,be=P.f,we=pe.f,Ee=m.Symbol,Se=m.JSON,Ce=Se&&Se.stringify,Te="prototype",ke=nt("_hidden"),Ie=nt("toPrimitive"),Pe={}.propertyIsEnumerable,Ne=et("symbol-registry"),Oe=et("symbols"),Ae=et("op-symbols"),xe=Object[Te],Re="function"==typeof Ee,De=m.QObject,Me=!De||!De[Te]||!De[Te].findChild,Le=b&&_(function(){return 7!=oe(be({},"a",{get:function(){return be(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=_e(xe,e);r&&delete xe[e],be(t,e,n),r&&t!==xe&&be(xe,e,r)}:be,Fe=function(t){var e=Oe[t]=oe(Ee[Te]);return e._k=t,e},Ue=Re&&"symbol"==typeof Ee.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ee},Be=function(t,e,n){return t===xe&&Be(Ae,e,n),y(t),e=T(e,!0),y(n),x(Oe,e)?(n.enumerable?(x(t,ke)&&t[ke][e]&&(t[ke][e]=!1),n=oe(n,{enumerable:N(0,!1)})):(x(t,ke)||be(t,ke,N(1,{})),t[ke][e]=!0),Le(t,e,n)):be(t,e,n)},Ke=function(t,e){y(t);for(var n,r=Jt(e=vt(e)),i=0,o=r.length;o>i;)Be(t,n=r[i++],e[n]);return t},je=function(t,e){return void 0===e?oe(t):Ke(oe(t),e)},Ve=function(t){var e=Pe.call(this,t=T(t,!0));return!(this===xe&&x(Oe,t)&&!x(Ae,t))&&(!(e||!x(this,t)||!x(Oe,t)||x(this,ke)&&this[ke][t])||e)},We=function(t,e){if(t=vt(t),e=T(e,!0),t!==xe||!x(Oe,e)||x(Ae,e)){var n=_e(t,e);return!n||!x(Oe,e)||x(t,ke)&&t[ke][e]||(n.enumerable=!0),n}},Ge=function(t){for(var e,n=we(vt(t)),r=[],i=0;n.length>i;)x(Oe,e=n[i++])||e==ke||e==ye||r.push(e);return r},qe=function(t){for(var e,n=t===xe,r=we(n?Ae:vt(t)),i=[],o=0;r.length>o;)!x(Oe,e=r[o++])||n&&!x(xe,e)||i.push(Oe[e]);return i};Re||(Ee=function(){if(this instanceof Ee)throw TypeError("Symbol is not a constructor!");var t=M(arguments.length>0?arguments[0]:void 0),e=function(n){this===xe&&e.call(Ae,n),x(this,ke)&&x(this[ke],t)&&(this[ke][t]=!1),Le(this,t,N(1,n))};return b&&Me&&Le(xe,t,{configurable:!0,set:e}),Fe(t)},L(Ee[Te],"toString",function(){return this._k}),ge.f=We,P.f=Be,ue.f=pe.f=Ge,At.f=Ve,Nt.f=qe,b&&!Qt&&L(xe,"propertyIsEnumerable",Ve,!0),zt.f=function(t){return Fe(nt(t))}),j(j.G+j.W+j.F*!Re,{Symbol:Ee});for(var He="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ze=0;He.length>ze;)nt(He[ze++]);for(var Qe=It(nt.store),Ye=0;Qe.length>Ye;)Xt(Qe[Ye++]);j(j.S+j.F*!Re,"Symbol",{for:function(t){return x(Ne,t+="")?Ne[t]:Ne[t]=Ee(t)},keyFor:function(t){if(!Ue(t))throw TypeError(t+" is not a symbol!");for(var e in Ne)if(Ne[e]===t)return e},useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),j(j.S+j.F*!Re,"Object",{create:je,defineProperty:Be,defineProperties:Ke,getOwnPropertyDescriptor:We,getOwnPropertyNames:Ge,getOwnPropertySymbols:qe}),Se&&j(j.S+j.F*(!Re||_(function(){var t=Ee();return"[null]"!=Ce([t])||"{}"!=Ce({a:t})||"{}"!=Ce(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Ue(t))return $(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ue(e))return e}),r[1]=e,Ce.apply(Se,r)}}),Ee[Te][Ie]||O(Ee[Te],Ie,Ee[Te].valueOf),qt(Ee,"Symbol"),qt(Math,"Math",!0),qt(m.JSON,"JSON",!0);var Xe=nt("toStringTag"),Je="Arguments"==W(function(){return arguments}()),$e=function(t,e){try{return t[e]}catch(t){}},Ze=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=$e(e=Object(t),Xe))?n:Je?W(e):"Object"==(r=W(e))&&"function"==typeof e.callee?"Arguments":r},tn={};tn[nt("toStringTag")]="z",tn+""!="[object z]"&&L(Object.prototype,"toString",function(){return"[object "+Ze(this)+"]"},!0),Xt("asyncIterator"),Xt("observable");var en=(v.Symbol,function(t){return function(e,n){var r,i,o=String(q(e)),a=Y(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a),r<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):(r-55296<<10)+(i-56320)+65536)}}),nn={},rn={};O(rn,nt("iterator"),function(){return this});var on=function(t,e,n){t.prototype=oe(rn,{next:N(1,n)}),qt(t,e+" Iterator")},an=Et("IE_PROTO"),sn=Object.prototype,un=Object.getPrototypeOf||function(t){return t=H(t),x(t,an)?t[an]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?sn:null},cn=nt("iterator"),ln=!([].keys&&"next"in[].keys()),hn="@@iterator",fn="keys",dn="values",pn=function(){return this},mn=function(t,e,n,r,i,o,a){on(n,e,r);var s,u,c,l=function(t){if(!ln&&t in p)return p[t];switch(t){case fn:return function(){return new n(this,t)};case dn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f=i==dn,d=!1,p=t.prototype,m=p[cn]||p[hn]||i&&p[i],v=m||l(i),g=i?f?l("entries"):v:void 0,y="Array"==e?p.entries||m:m;if(y&&(c=un(y.call(new t)),c!==Object.prototype&&c.next&&(qt(c,h,!0),Qt||"function"==typeof c[cn]||O(c,cn,pn))),f&&m&&m.name!==dn&&(d=!0,v=function(){return m.call(this)}),Qt&&!a||!ln&&!d&&p[cn]||O(p,cn,v),nn[e]=v,nn[h]=pn,i)if(s={values:f?v:l(dn),keys:o?v:l(fn),entries:g},a)for(u in s)u in p||L(p,u,s[u]);else j(j.P+j.F*(ln||d),e,s);return s},vn=en(!0);mn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=vn(e,n),this._i+=t.length,{value:t,done:!1})});var gn=function(t,e){return{value:e,done:!!t}},yn=mn(Array,"Array",function(t,e){this._t=vt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,gn(1)):"keys"==e?gn(0,n):"values"==e?gn(0,t[n]):gn(0,[n,t[n]])},"values");nn.Arguments=nn.Array,ct("keys"),ct("values"),ct("entries");for(var _n=nt("iterator"),bn=nt("toStringTag"),wn=nn.Array,En={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Sn=It(En),Cn=0;Cn<Sn.length;Cn++){var Tn,kn=Sn[Cn],In=En[kn],Pn=m[kn],Nn=Pn&&Pn.prototype;if(Nn&&(Nn[_n]||O(Nn,_n,wn),Nn[bn]||O(Nn,bn,kn),nn[kn]=wn,In))for(Tn in yn)Nn[Tn]||L(Nn,Tn,yn[Tn],!0)}zt.f("iterator")}).call(e,n(/*! ./../../../timers-browserify/main.js */339).setImmediate,function(){return this}())},/*!******************************************************!*\
  !*** ./~/@firebase/polyfill/~/whatwg-fetch/fetch.js ***!
  \******************************************************/
function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g.arrayBuffer&&g.blob&&_(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t){var e=new i,n=t.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];v.redirect=function(t,e){if(E.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=v,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new v(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},/*!***********************************************!*\
  !*** ./~/@firebase/storage/dist/index.cjs.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t){return"storage/"+t}function o(){var t="An unknown error occurred, please check the error payload for server response.";return new oe(ae.UNKNOWN,t)}function a(t){return new oe(ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function s(t){return new oe(ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new oe(ae.UNAUTHENTICATED,t)}function c(t){return new oe(ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function l(){return new oe(ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h(){return new oe(ae.CANCELED,"User canceled the upload/download.")}function f(t){return new oe(ae.INVALID_URL,"Invalid URL '"+t+"'.")}function d(t){return new oe(ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function p(){return new oe(ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m(){return new oe(ae.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function v(){return new oe(ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function g(t,e,n){return new oe(ae.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function y(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new oe(ae.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function _(){return new oe(ae.APP_DELETED,"The Firebase app was deleted.")}function b(t){return new oe(ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function w(t,e){return new oe(ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function E(t){throw new oe(ae.INTERNAL_ERROR,"Internal error: "+t)}function S(t){switch(t){case se.RAW:case se.BASE64:case se.BASE64URL:case se.DATA_URL:return;default:throw"Expected one of the event types: ["+se.RAW+", "+se.BASE64+", "+se.BASE64URL+", "+se.DATA_URL+"]."}}function C(t,e){switch(t){case se.RAW:return new ue(T(e));case se.BASE64:case se.BASE64URL:return new ue(I(t,e));case se.DATA_URL:return new ue(P(e),N(e))}throw o()}function T(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r)){var i=n<t.length-1&&56320==(64512&t.charCodeAt(n+1));if(i){var o=r,a=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function k(t){var e;try{e=decodeURIComponent(t)}catch(t){throw w(se.DATA_URL,"Malformed data URL.")}return T(e)}function I(t,e){switch(t){case se.BASE64:var n=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw w(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case se.BASE64URL:var o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a){var i=o?"+":"/";throw w(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw w(t,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}function P(t){var e=new ce(t);return e.base64?I(se.BASE64,e.rest):k(e.rest)}function N(t){var e=new ce(t);return e.contentType}function O(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}function A(t){switch(t){case he.RUNNING:case he.PAUSING:case he.CANCELING:return fe.RUNNING;case he.PAUSED:return fe.PAUSED;case he.SUCCESS:return fe.SUCCESS;case he.CANCELED:return fe.CANCELED;case he.ERROR:return fe.ERROR;default:return fe.ERROR}}function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){for(var n in t)x(t,n)&&e(n,t[n])}function D(t){if(null==t)return{};var e={};return R(t,function(t,n){e[t]=n}),e}function M(t){return new Promise(t)}function L(t){return Promise.resolve(t)}function F(t){return Promise.reject(t)}function U(t){return null!=t}function B(t){return void 0!==t}function K(t){return"function"==typeof t}function j(t){return"object"==typeof t}function V(t){return j(t)&&null!==t}function W(t){return j(t)&&!Array.isArray(t)}function G(t){return"string"==typeof t||t instanceof String}function q(t){return"number"==typeof t||t instanceof Number}function H(t){return z()&&t instanceof Blob}function z(){return"undefined"!=typeof Blob}function Q(t){var e;try{e=JSON.parse(t)}catch(t){return null}return W(e)?e:null}function Y(t){if(0==t.length)return null;var e=t.lastIndexOf("/");if(e===-1)return"";var n=t.slice(0,e);return n}function X(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}function J(t){var e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function $(t){return Jt+Zt+t}function Z(t){return $t+Zt+t}function tt(t){return Jt+te+t}function et(t){var e=encodeURIComponent,n="?";return R(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function nt(t,e){return e}function rt(t){var e=G(t);return!e||t.length<2?t:(t=t,J(t))}function it(){function t(t,e){return rt(e)}function e(t,e){return U(e)?+e:e}if(ge)return ge;var n=[];n.push(new ve("bucket")),n.push(new ve("generation")),n.push(new ve("metageneration")),n.push(new ve("name","fullPath",!0));var r=new ve("name");r.xform=t,n.push(r);var i=new ve("size");return i.xform=e,n.push(i),n.push(new ve("timeCreated")),n.push(new ve("updated")),n.push(new ve("md5Hash",null,!0)),n.push(new ve("cacheControl",null,!0)),n.push(new ve("contentDisposition",null,!0)),n.push(new ve("contentEncoding",null,!0)),n.push(new ve("contentLanguage",null,!0)),n.push(new ve("contentType",null,!0)),n.push(new ve("metadata","customMetadata",!0)),ge=n}function ot(t,e){function n(){var n=t.bucket,r=t.fullPath,i=new me(n,r);return e.makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function at(t,e,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return ot(r,t),r}function st(t,e,n){var r=Q(e);if(null===r)return null;var i=r;return at(t,i,n)}function ut(t,e){var n=Q(e);if(null===n)return null;if(!G(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent,o=r.split(","),a=o.map(function(e){var n=t.bucket,r=t.fullPath,o="/b/"+i(n)+"/o/"+i(r),a=Z(o),s=et({alt:"media",token:e});return a+s});return a[0]}function ct(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function lt(t){var e=t&&j(t);if(!e)throw"Expected Metadata object.";for(var n in t){var r=t[n];if("customMetadata"===n){if(!j(r))throw"Expected object for 'customMetadata' mapping."}else if(V(r))throw"Mapping for '"+n+"' cannot be an object."}}function ht(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a=r<=n.length&&n.length<=i;if(!a)throw y(r,i,t,n.length);for(var o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?g(o,t,e.message):g(o,t,e)}}function ft(t,e){return function(n){t(n),e(n)}}function dt(t,e){function n(t){if(!G(t))throw"Expected string."}var r;return r=t?ft(n,t):n,new ye(r,e)}function pt(){function t(t){var e=t instanceof Uint8Array||t instanceof ArrayBuffer||z()&&t instanceof Blob;if(!e)throw"Expected Blob or File."}return new ye(t)}function mt(t){return new ye(lt,t)}function vt(){function t(t){var e=q(t)&&t>=0;if(!e)throw"Expected a number 0 or greater."}return new ye(t)}function gt(t,e){function n(e){var n=null===e||U(e)&&e instanceof Object;if(!n)throw"Expected an Object.";void 0!==t&&null!==t&&t(e)}return new ye(n,e)}function yt(t){function e(t){var e=null===t||K(t);if(!e)throw"Expected a Function."}return new ye(e,t)}function _t(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_t();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(z())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}function wt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Et(t,e){return t.indexOf(e)!==-1}function St(t){return Array.prototype.slice.call(t)}function Ct(t,e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}function Tt(t){if(!t)throw o()}function kt(t,e){function n(n,r){var i=st(t,r,e);return Tt(null!==i),i}return n}function It(t,e){function n(n,r){var i=st(t,r,e);return Tt(null!==i),ut(i,r)}return n}function Pt(t){function e(e,n){var r;return r=401===e.getStatus()?u():402===e.getStatus()?s(t.bucket):403===e.getStatus()?c(t.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return e}function Nt(t){function e(e,r){var i=n(e,r);return 404===e.getStatus()&&(i=a(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}var n=Pt(t);return e}function Ot(t,e,n){var r=e.fullServerUrl(),i=$(r),o="GET",a=t.maxOperationRetryTime(),s=new be(i,o,kt(t,n),a);return s.errorHandler=Nt(e),s}function At(t,e,n){var r=e.fullServerUrl(),i=$(r),o="GET",a=t.maxOperationRetryTime(),s=new be(i,o,It(t,n),a);return s.errorHandler=Nt(e),s}function xt(t,e,n,r){var i=e.fullServerUrl(),o=$(i),a="PATCH",s=ct(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime(),l=new be(o,a,kt(t,r),c);return l.headers=u,l.body=s,l.errorHandler=Nt(e),l}function Rt(t,e){function n(t,e){}var r=e.fullServerUrl(),i=$(r),o="DELETE",a=t.maxOperationRetryTime(),s=new be(i,o,n,a);return s.successCodes=[200,204],s.errorHandler=Nt(e),s}function Dt(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Mt(t,e,n){var r=D(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Dt(null,e)),r}function Lt(t,e,n,r,i){function o(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=o();s["Content-Type"]="multipart/related; boundary="+u;var c=Mt(e,r,i),l=ct(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",f="\r\n--"+u+"--",d=_e.getBlob(h,r,f);if(null===d)throw p();var m={name:c.fullPath},v=tt(a),g="POST",y=t.maxUploadRetryTime(),_=new be(v,g,kt(t,n),y);return _.urlParams=m,_.headers=s,_.body=d.uploadData(),_.errorHandler=Pt(e),_}function Ft(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Tt(!1)}var r=e||["active"];return Tt(Et(r,n)),n}function Ut(t,e,n,r,i){function o(t,e){Ft(t);var n;try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Tt(!1)}return Tt(G(n)),n}var a=e.bucketOnlyServerUrl(),s=Mt(e,r,i),u={name:s.fullPath},c=tt(a),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=ct(s,n),d=t.maxUploadRetryTime(),p=new be(c,l,o,d);return p.urlParams=u,p.headers=h,p.body=f,p.errorHandler=Pt(e),p}function Bt(t,e,n,r){function i(t,e){var n,i=Ft(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Tt(!1)}var o=parseInt(n,10);return Tt(!isNaN(o)),new we(o,r.size(),"final"===i)}var o={"X-Goog-Upload-Command":"query"},a="POST",s=t.maxUploadRetryTime(),u=new be(n,a,i,s);return u.headers=o,u.errorHandler=Pt(e),u}function Kt(t,e,n,r,i,o,a,s){function u(t,n){var i,a=Ft(t,["active","final"]),s=c.current+h,u=r.size();return i="final"===a?kt(e,o)(t,n):null,new we(s,u,"final"===a,i)}var c=new we(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw m();var l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));var f=c.current,d=f+h,v=h===l?"upload, finalize":"upload",g={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":c.current},y=r.slice(f,d);if(null===y)throw p();var _="POST",b=e.maxUploadRetryTime(),w=new be(n,_,u,b);return w.headers=g,w.body=y.uploadData(),w.progressCallback=s||null,w.errorHandler=Pt(t),w}function jt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];L(!0).then(function(){t.apply(null,e)})}}function Vt(t,e,n){function r(){return 2===h}function i(){f||(f=!0,e.apply(null,arguments))}function o(e){c=setTimeout(function(){c=null,t(a,r())},e)}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!f){if(t)return void i.apply(null,arguments);var a=r()||l;if(a)return void i.apply(null,arguments);u<64&&(u*=2);var s;1===h?(h=2,s=0):s=1e3*(u+Math.random()),o(s)}}function s(t){d||(d=!0,f||(null!==c?(t||(h=2),clearTimeout(c),o(0)):t||(h=1)))}var u=1,c=null,l=!1,h=0,f=!1,d=!1;return o(0),setTimeout(function(){l=!0,s(!0)},n),s}function Wt(t){t(!1)}function Gt(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}function qt(t){var e="undefined"!=typeof Xt?Xt.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}function Ht(t,e,n){var r=et(t.urlParams),i=t.url+r,o=D(t.headers);return Gt(o,e),qt(o),new Oe(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}function zt(t,e,n){return new xe(t,new pe,n)}function Qt(t){var e={TaskState:fe,TaskEvent:le,StringFormat:se,Storage:xe,Reference:ke};t.INTERNAL.registerService(De,zt,e,void 0,!0)}Object.defineProperty(e,"__esModule",{value:!0});var Yt,Xt=r(n(/*! @firebase/app */20)),Jt="https://firebasestorage.googleapis.com",$t="https://firebasestorage.googleapis.com",Zt="/v0",te="/v0",ee="storageBucket",ne=12e4,re=6e4,ie=-9007199254740991,oe=function(){function t(t,e){this.code_=i(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return i(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),ae={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},se={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ue=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}(),ce=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw w(se.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=O(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}(),le={STATE_CHANGED:"state_changed"},he={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},fe={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Yt||(Yt={}));var de=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Yt.NO_ERROR,this.sendPromise_=M(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=Yt.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=Yt.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw E("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),U(r)){var o=r;R(o,function(t,e){i.xhr_.setRequestHeader(t,e.toString())})}return U(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw E("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw E("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw E("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){U(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){U(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),pe=function(){function t(){}return t.prototype.createXhrIo=function(){return new de},t}(),me=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw d(e)},t.makeFromUrl=function(e){function n(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}function r(t){t.path_=decodeURIComponent(t.path)}for(var i=null,o="([A-Za-z0-9.\\-]+)",a="(/(.*))?$",s="(/([^?#]*).*)?$",u=new RegExp("^gs://"+o+a,"i"),c={bucket:1,path:3},l="v[A-Za-z0-9_]+",h=new RegExp("^https?://firebasestorage\\.googleapis\\.com/"+l+"/b/"+o+"/o"+s,"i"),d={bucket:1,path:3},p=[{regex:u,indices:c,postModify:n},{regex:h,indices:d,postModify:r}],m=0;m<p.length;m++){var v=p[m],g=v.regex.exec(e);if(g){var y=g[v.indices.bucket],_=g[v.indices.path];_||(_=""),i=new t(y,_),v.postModify(i);break}}if(null==i)throw f(e);return i},t}(),ve=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||nt}return t}(),ge=null,ye=function(){function t(t,e){var n=this;this.validator=function(e){n.optional&&!B(e)||t(e)},this.optional=!!e}return t}(),_e=function(){function t(t,e){var n=0,r="";H(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(H(this.data_)){var r=this.data_,i=wt(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(z()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(bt.apply(null,r))}var i=e.map(function(t){return G(t)?C(se.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),be=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}(),we=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}(),Ee=262144,Se=function(){function t(t,e,n){var r=K(t)||U(e)||U(n);if(r)this.next=t,this.error=e||null,this.complete=n||null;else{var i=t;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}return t}(),Ce=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return t}(),Te=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=he.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(ae.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(he.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(ae.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(he.ERROR))},this.promise_=M(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===he.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case he.RUNNING:t(n);break;case he.CANCELING:e.transition_(he.CANCELED);break;case he.PAUSING:e.transition_(he.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=Ut(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=Bt(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=Ee*this.chunkMultiplier_,n=new we(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=Kt(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(he.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(he.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){var t=Ee*this.chunkMultiplier_;t<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=Ot(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(he.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=Lt(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(he.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case he.CANCELING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case he.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case he.RUNNING:var e=this.state_===he.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case he.PAUSED:this.state_=t,this.notifyObservers_();break;case he.CANCELED:this.error_=h(),this.state_=t,this.notifyObservers_();break;case he.ERROR:this.state_=t,this.notifyObservers_();break;case he.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case he.PAUSING:this.transition_(he.PAUSED);break;case he.CANCELING:this.transition_(he.CANCELED);break;case he.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=A(this.state_);return new Ce(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(e){if(t!==le.STATE_CHANGED)throw"Expected one of the event types: ["+le.STATE_CHANGED+"]."}function o(t){try{return void c(t)}catch(t){}try{l(t);var e=B(t.next)||B(t.error)||B(t.complete);if(!e)throw"";return}catch(t){throw u}}function a(t){function e(e,n,i){null!==t&&ht("on",t,arguments);var o=new Se(e,n,r);return f.addObserver_(o),function(){f.removeObserver_(o)}}return e}function s(t){if(null===t)throw u;o(t)}void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=yt(!0).validator,l=gt(null,!0).validator,h=[dt(i),gt(o,!0),yt(!0),yt(!0)];ht("on",h,arguments);var f=this,d=[gt(s),yt(!0),yt(!0)],p=!(B(e)||B(n)||B(r));return p?a(d):a(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){Ct(this.observers_,t)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_();var e=St(this.observers_);e.forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(A(this.state_)){case fe.SUCCESS:jt(this.resolve_.bind(null,this.snapshot))();break;case fe.CANCELED:case fe.ERROR:var e=this.reject_;jt(e.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){var e=A(this.state_);switch(e){case fe.RUNNING:case fe.PAUSED:null!==t.next&&jt(t.next.bind(t,this.snapshot))();break;case fe.SUCCESS:null!==t.complete&&jt(t.complete.bind(t))();break;case fe.CANCELED:case fe.ERROR:null!==t.error&&jt(t.error.bind(t,this.error_))();break;default:null!==t.error&&jt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){ht("resume",[],arguments);var t=this.state_===he.PAUSED||this.state_===he.PAUSING;return t&&this.transition_(he.RUNNING),t},t.prototype.pause=function(){ht("pause",[],arguments);var t=this.state_===he.RUNNING;return t&&this.transition_(he.PAUSING),t},t.prototype.cancel=function(){ht("cancel",[],arguments);var t=this.state_===he.RUNNING||this.state_===he.PAUSING;return t&&this.transition_(he.CANCELING),t},t}(),ke=function(){function t(t,e){this.authWrapper=t,e instanceof me?this.location=e:this.location=me.makeFromUrl(e)}return t.prototype.toString=function(){return ht("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return it()},t.prototype.child=function(t){ht("child",[dt()],arguments);var e=X(this.location.path,t),n=new me(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=Y(this.location.path);if(null===t)return null;var e=new me(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new me(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return J(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),ht("put",[pt(),mt(!0)],arguments),this.throwIfRoot_("put"),new Te(this,this.authWrapper,this.location,this.mappings(),new _e(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=se.RAW),ht("putString",[dt(),dt(S,!0),mt(!0)],arguments),this.throwIfRoot_("putString");var r=C(e,t),i=D(n);return!U(i.contentType)&&U(r.contentType)&&(i.contentType=r.contentType),new Te(this,this.authWrapper,this.location,this.mappings(),new _e(r.data,!0),i)},t.prototype.delete=function(){ht("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Rt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){ht("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Ot(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){ht("updateMetadata",[mt()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=xt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){ht("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=At(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw v();return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw b(t)},t}(),Ie=function(){function t(t){this.promise_=F(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Pe=function(){function t(){this.map_={},this.id_=ie}return t.prototype.addRequest=function(t){function e(){delete r.map_[n]}var n=this.id_;this.id_++,this.map_[n]=t;var r=this;t.getPromise().then(e,e)},t.prototype.clear=function(){
R(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ne=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;U(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=ne,this.maxUploadRetryTime_=re,this.requestMap_=new Pe}return t.extractBucket_=function(t){var e=t[ee]||null;if(null==e)return null;var n=me.makeFromBucketSpec(e);return n.bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&U(this.app_.INTERNAL)&&U(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):L(null)},t.prototype.bucket=function(){if(this.deleted_)throw _();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Ie(_());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Oe=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=M(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){function t(t,e){function r(t){var e=t.loaded,r=t.lengthComputable?t.total:-1;null!==n.progressCallback_&&n.progressCallback_(e,r)}if(e)return void t(!1,new Ae(!1,null,!0));var i=n.pool_.createXhrIo();n.pendingXhr_=i,null!==n.progressCallback_&&i.addUploadProgressListener(r),i.send(n.url_,n.method_,n.body_,n.headers_).then(function(e){null!==n.progressCallback_&&e.removeUploadProgressListener(r),n.pendingXhr_=null,e=e;var i=e.getErrorCode()===Yt.NO_ERROR,o=e.getStatus();if(!i||n.isRetryStatusCode_(o)){var a=e.getErrorCode()===Yt.ABORT;return void t(!1,new Ae(!1,null,a))}var s=Et(n.successCodes_,o);t(!0,new Ae(s,e))})}function e(t,e){var r=n.resolve_,i=n.reject_,a=e.xhr;if(e.wasSuccessCode)try{var s=n.callback_(a,a.getResponseText());B(s)?r(s):r()}catch(t){i(t)}else if(null!==a){var u=o();u.setServerResponseProp(a.getResponseText()),i(n.errorCallback_?n.errorCallback_(a,u):u)}else if(e.canceled){var u=n.appDelete_?_():h();i(u)}else{var u=l();i(u)}}var n=this;this.canceled_?e(!1,new Ae(!1,null,!0)):this.backoffId_=Vt(t,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Wt(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=Et(n,t),i=Et(this.additionalRetryCodes_,t);return e||r||i},t}(),Ae=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}(),xe=function(){function t(t,e,n){function r(t,e){return new ke(t,e)}if(this.bucket_=null,this.authWrapper_=new Ne(t,r,Ht,this,e),this.app_=t,null!=n)this.bucket_=me.makeFromBucketSpec(n);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new me(i,""))}this.internals_=new Re(this)}return t.prototype.ref=function(t){function e(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(ht("ref",[dt(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new ke(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{me.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}return ht("refFromURL",[dt(e,!1)],arguments),new ke(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){ht("setMaxUploadRetryTime",[vt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){ht("setMaxOperationRetryTime",[vt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Re=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),L(void 0)},t}(),De="storage";Qt(Xt),e.registerStorage=Qt},/*!******************************************************!*\
  !*** ./~/@firebase/webchannel-wrapper/dist/index.js ***!
  \******************************************************/
function(module,exports,__webpack_require__){(function(global){(function(){function l(t){return"string"==typeof t}function n(t,e){t=t.split("."),e=e||k;for(var n=0;n<t.length;n++)if(e=e[t[n]],null==e)return null;return e}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function p(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function da(t){return"function"==ba(t)}function ea(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ha(t,e,n){return t.call.apply(t.bind,arguments)}function ia(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,e,n){return r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia,r.apply(null,arguments)}function ja(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function u(t,e){function n(){}n.prototype=e.prototype,t.H=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ib=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ka(t){if(Error.captureStackTrace)Error.captureStackTrace(this,ka);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function la(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");ka.call(this,n+t[r])}function ma(t,e){throw new la("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function w(){0!=na&&(pa[this[q]||(this[q]=++fa)]=this),this.i=this.i,this.m=this.m}function sa(t){t:{for(var e=ta,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function ua(t){if(!p(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function va(t){return Array.prototype.concat.apply([],arguments)}function wa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function xa(t){return/^[\s\xa0]*$/.test(t)}function za(t,e){return t<e?-1:t>e?1:0}function y(t){return-1!=x.indexOf(t)}function Ca(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Da(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Ea(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Fa(t){var e,n={};for(e in t)n[e]=t[e];return n}function Ha(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<Ga.length;o++)n=Ga[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ia(t){return Ia[" "](t),t}function Ja(t,e){var n=Ka;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function Qa(){var t=k.document;return t?t.documentMode:void 0}function Va(t){return Ja(t,function(){for(var e=0,n=ya(String(Ra)).split("."),r=ya(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=za(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||za(0==a[2].length,0==s[2].length)||za(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}function A(t,e){this.type=t,this.a=this.target=e,this.Ra=!0}function bb(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oa){t:{try{Ia(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:cb[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}function fb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ga=i,this.key=++eb,this.Z=this.ba=!1}function gb(t){t.Z=!0,t.listener=null,t.proxy=null,t.src=null,t.ga=null}function hb(t){this.src=t,this.a={},this.b=0}function jb(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(gb(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ib(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Z&&o.listener==e&&o.capture==!!n&&o.ga==r)return i}return-1}function nb(t,e,n,r,i){if(r&&r.once)return ob(t,e,n,r,i);if(p(e)){for(var o=0;o<e.length;o++)nb(t,e[o],n,r,i);return null}return n=pb(n),t&&t[db]?t.Ia(e,n,ea(r)?!!r.capture:!!r,i):qb(t,e,n,!1,r,i)}function qb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=ea(i)?!!i.capture:!!i,s=rb(t);if(s||(t[kb]=s=new hb(t)),n=s.add(e,n,r,a,o),n.proxy)return n;if(r=sb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ab||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tb(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return mb++,n}function sb(){var t=ub,e=Za?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function ob(t,e,n,r,i){if(p(e)){for(var o=0;o<e.length;o++)ob(t,e[o],n,r,i);return null}return n=pb(n),t&&t[db]?t.Ja(e,n,ea(r)?!!r.capture:!!r,i):qb(t,e,n,!0,r,i)}function vb(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)vb(t,e[o],n,r,i);else r=ea(r)?!!r.capture:!!r,n=pb(n),t&&t[db]?(t=t.f,e=String(e).toString(),e in t.a&&(o=t.a[e],n=ib(o,n,r,i),-1<n&&(gb(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=rb(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ib(e,n,r,i)),(n=-1<t?e[t]:null)&&wb(n))}function wb(t){if("number"!=typeof t&&t&&!t.Z){var e=t.src;if(e&&e[db])jb(e.f,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),mb--,(n=rb(e))?(jb(n,t),0==n.b&&(n.src=null,e[kb]=null)):gb(t)}}}function tb(t){return t in lb?lb[t]:lb[t]="on"+t}function xb(t,e,n,r){var i=!0;if((t=rb(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Z&&(o=yb(o,r),i=i&&!1!==o)}return i}function yb(t,e){var n=t.listener,r=t.ga||t.src;return t.ba&&wb(t),n.call(r,e)}function ub(t,e){if(t.Z)return!0;if(!Za){var r=e||n("window.event");e=new bb(r,this);var i=!0;if(!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.a;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.a=r[o];var a=xb(r[o],t,!0,e);i=i&&a}for(o=0;o<r.length;o++)e.a=r[o],a=xb(r[o],t,!1,e),i=i&&a}return i}return yb(t,new bb(e,this))}function rb(t){return t=t[kb],t instanceof hb?t:null}function pb(t){return da(t)?t:(t[zb]||(t[zb]=function(e){return t.handleEvent(e)}),t[zb])}function B(){w.call(this),this.f=new hb(this),this.N=this,this.J=null}function Ab(t,e,n,r){if(e=t.f.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Z&&a.capture==n){var s=a.listener,u=a.ga||a.src;a.ba&&jb(t.f,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ra}function Bb(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Db(t){var e=[];return Eb(new Fb,t,e),e.join("")}function Fb(){}function Eb(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(p(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Eb(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){n.push("{"),i="";for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Gb(r,n),n.push(":"),Eb(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Gb(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}function Gb(t,e){e.push('"',t.replace(Ib,function(t){var e=Hb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hb[t]=e),e}),'"')}function Jb(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Kb(){this.b=this.a=null}function Ob(){var t=Pb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lb(){this.next=this.b=this.a=null}function Qb(t){k.setTimeout(function(){throw t},0)}function Sb(){var t=k.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=r(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!=typeof t&&!y("Trident")&&!y("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.za;n.za=null,t()}},function(t){i.next={za:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){k.setTimeout(t,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var t=k.Promise.resolve(void 0);Tb=function(){t.then(Vb)}}else Tb=function(){var t=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(t)):k.setImmediate(t)}}function Vb(){for(var t;t=Ob();){try{t.a.call(t.b)}catch(t){Qb(t)}var e=Nb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.c=r(this.qb,this),this.g=t()}function Yb(t){t.ea=!1,t.O&&(t.a.clearTimeout(t.O),t.O=null)}function Zb(t,e,n){if(da(t))n&&(t=r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=r(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function $b(t,e,n){w.call(this),this.f=null!=n?r(t,n):t,this.c=e,this.b=r(this.kb,this),this.a=[]}function ac(t){t.Y=Zb(t.b,t.c),t.f.apply(null,t.a)}function bc(t){w.call(this),this.b=t,this.a={}}function dc(t,e,n,r){p(n)||(n&&(cc[0]=n.toString()),n=cc);for(var i=0;i<n.length;i++){var o=nb(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ec(t){Ca(t.a,function(t,e){this.a.hasOwnProperty(e)&&wb(t)},t),t.a={}}function fc(t,e,n){this.reset(t,e,n,void 0,void 0)}function hc(t){this.f=t,this.b=this.c=this.a=null}function C(t,e){this.name=t,this.value=e}function nc(t){return t.c?t.c:t.a?nc(t.a):(ma("Root logger has no level set."),null)}function qc(t){pc||(pc=new hc(""),oc[""]=pc,pc.c=lc);var e;if(!(e=oc[t])){e=new hc(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=qc(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,oc[t]=e}return e}function D(t,e){t&&t.log(jc,e,void 0)}function rc(t,e){t&&t.log(kc,e,void 0)}function E(t,e){t&&t.log(mc,e,void 0)}function sc(){this.a=qc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function tc(t,e,n,r,i,o){F(t,function(){if(t.b)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"="+c+"&"):a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a})}function uc(t,e,n,r,i,o,a){F(t,function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a})}function G(t,e,n,r){F(t,function(){return"XMLHTTP TEXT ("+e+"): "+vc(t,n)+(r?" "+r:"")})}function wc(t,e){F(t,function(){return"TIMEOUT: "+e})}function H(t,e){E(t.a,e)}function xc(t,e,n){(t=t.a)&&t.log(ic,n||"Exception",e)}function F(t,e){rc(t.a,e)}function J(t,e){(t=t.a)&&t.log(ic,e,void 0)}function vc(t,e){if(!t.b)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(var r=0;r<n.length;r++)if(p(n[r])){var i=n[r];if(!(2>i.length)){var o=i[1];if(p(o)&&!(1>o.length)){var a=o[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<o.length;s++)o[s]=""}}}return Db(n)}catch(n){return H(t,"Exception parsing expected JS array - probably was not JS"),e}}function zc(t){A.call(this,"serverreachability",t)}function Ac(t){yc.dispatchEvent(new zc(yc,t))}function Bc(t){A.call(this,"statevent",t)}function K(t){yc.dispatchEvent(new Bc(yc,t))}function Cc(t){A.call(this,"timingevent",t)}function Dc(t,e,n){yc.dispatchEvent(new Cc(yc,t,e,n))}function Ec(t,e){if(!da(t))throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}function Hc(){}function Ic(t){var e;return(e=t.a)||(e={},Jc(t)&&(e[0]=!0,e[1]=!0),e=t.a=e),e}function Kc(){}function Mc(){A.call(this,"d")}function Nc(){A.call(this,"c")}function Pc(){}function Qc(t){return(t=Jc(t))?new ActiveXObject(t):new XMLHttpRequest}function Jc(t){if(!t.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.b=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.b}function L(t,e,n,r){this.i=t,this.b=e,this.c=n,this.T=r||1,this.L=new bc(this),this.R=Rc,t=Na?125:void 0,this.S=new Xb(t),this.j=null,this.f=!1,this.l=this.g=this.h=this.J=this.D=this.U=this.s=null,this.u=[],this.a=null,this.G=0,this.m=this.o=null,this.C=-1,this.B=!1,this.N=0,this.I=null,this.v=this.X=this.K=!1}function Sc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}function Vc(t,e,n){t.J=1,t.h=Wc(M(e)),t.l=n,t.K=!0,Xc(t,null)}function Yc(t,e,n,r){t.J=1,t.h=Wc(M(e)),t.l=null,t.K=n,Xc(t,r)}function Xc(e,n){e.D=t(),Zc(e),e.g=M(e.h),$c(e.g,"t",e.T),e.G=0,e.a=e.i.ca(e.i.ia()?n:null),0<e.N&&(e.I=new $b(r(e.Sa,e,e.a),e.N)),dc(e.L,e.a,"readystatechange",e.nb),n=e.j?Fa(e.j):{},e.l?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.l,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),tc(e.b,e.o,e.g,e.c,e.T,e.l)}function ad(t){var e=N(t.a),n=t.a.Ga(),r=t.a.W();if(!(3>e||3==e&&!Na&&!t.a.V())){t.B||4!=e||7==n||Ac(8==n||0>=r?3:2),bd(t);var i=t.a.W();t.C=i,(n=t.a.V())||H(t.b,function(){return"No response text for uri "+t.g+" status "+i}),t.f=200==i,uc(t.b,t.o,t.g,t.c,t.T,e,i),t.f?((r=cd(t))&&(G(t.b,t.c,r,"Initial handshake response via X-HTTP-Initial-Response"),t.v=!0,dd(t,r)),t.K?(ed(t,e,n),Na&&t.f&&3==e&&fd(t)):(G(t.b,t.c,n,null),dd(t,n)),4==e&&gd(t),t.f&&!t.B&&(4==e?t.i.ta(t):(t.f=!1,Zc(t)))):(400==i&&0<n.indexOf("Unknown SID")?(t.m=3,K(12),D(t.b.a,"XMLHTTP Unknown SID ("+t.c+")")):(t.m=0,K(13),D(t.b.a,"XMLHTTP Bad status "+i+" ("+t.c+")")),gd(t),hd(t))}}function cd(t){return!t.X||t.v?null:t.a&&(t=id(t.a,"X-HTTP-Initial-Response"))&&!xa(t)?t:null}function ed(t,e,n){for(var r=!0;!t.B&&t.G<n.length;){var i=jd(t,n);if(i==Uc){4==e&&(t.m=4,K(14),r=!1),G(t.b,t.c,null,"[Incomplete Response]");break}if(i==Tc){t.m=4,K(15),G(t.b,t.c,n,"[Invalid Chunk]"),r=!1;break}G(t.b,t.c,i,null),dd(t,i)}4==e&&0==n.length&&(t.m=1,K(16),r=!1),t.f=t.f&&r,r||(G(t.b,t.c,n,"[Invalid Chunked Response]"),gd(t),hd(t))}function fd(t){dc(t.L,t.S,"tick",t.mb),t.S.start()}function jd(t,e){var n=t.G,r=e.indexOf("\n",n);return-1==r?Uc:(n=Number(e.substring(n,r)),isNaN(n)?Tc:(r+=1,r+n>e.length?Uc:(e=e.substr(r,n),t.G=r+n,e)))}function Zc(e){e.U=t()+e.R,kd(e,e.R)}function kd(t,e){if(null!=t.s)throw Error("WatchDog timer not null");t.s=Ec(r(t.lb,t),e)}function bd(t){t.s&&(k.clearTimeout(t.s),t.s=null)}function hd(t){t.i.La()||t.B||t.i.ta(t)}function gd(t){bd(t);var e=t.I;e&&"function"==typeof e.$&&e.$(),t.I=null,Yb(t.S),ec(t.L),t.a&&(e=t.a,t.a=null,e.abort(),e.$())}function dd(t,e){try{t.i.Oa(t,e),Ac(4)}catch(e){xc(t.b,e,"Error in httprequest callback")}}function ld(t){if(t.A&&"function"==typeof t.A)return t.A();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Da(t)}function md(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||l(t))ra(t,e,void 0);else{if(t.M&&"function"==typeof t.M)var n=t.M();else if(t.A&&"function"==typeof t.A)n=void 0;else if(ca(t)||l(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else n=Ea(t);r=ld(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function O(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof O)for(n=t.M(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function od(t){t.b={},t.a.length=0,t.c=0}function pd(t,e){return!!P(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&nd(t),!0)}function nd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];P(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],P(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rd(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Q(t,e){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;t instanceof Q?(this.h=void 0!==e?e:t.h,sd(this,t.f),this.j=t.j,td(this,t.b),ud(this,t.i),this.a=t.a,vd(this,wd(t.c)),this.g=t.g):t&&(n=String(t).match(qd))?(this.h=!!e,sd(this,n[1]||"",!0),this.j=xd(n[2]||""),td(this,n[3]||"",!0),ud(this,n[4]),this.a=xd(n[5]||"",!0),vd(this,n[6]||"",!0),this.g=xd(n[7]||"")):(this.h=!!e,this.c=new yd(null,this.h))}function M(t){return new Q(t)}function sd(t,e,n){t.f=n?xd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function td(t,e,n){t.b=n?xd(e,!0):e}function ud(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function vd(t,e,n){e instanceof yd?(t.c=e,Ed(t.c,t.h)):(n||(e=zd(e,Fd)),t.c=new yd(e,t.h))}function R(t,e,n){t.c.set(e,n)}function $c(t,e,n){p(n)||(n=[String(n)]),Gd(t.c,e,n)}function Wc(e){return R(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Hd(t){return t instanceof Q?M(t):new Q(t,void 0)}function Id(t,e,n,r){var i=new Q(null,void 0);return t&&sd(i,t),e&&td(i,e),n&&ud(i,n),r&&(i.a=r),i}function xd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zd(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Jd),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Jd(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function yd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function S(t){t.a||(t.a=new O,t.b=0,t.c&&rd(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ld(t,e){S(t),e=Kd(t,e),P(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pd(t.a,e))}function Md(t,e){return S(t),e=Kd(t,e),P(t.a.b,e)}function Gd(t,e,n){Ld(t,e),0<n.length&&(t.c=null,t.a.set(Kd(t,e),wa(n)),t.b+=n.length)}function wd(t){var e=new yd;return e.c=t.c,t.a&&(e.a=new O(t.a),e.b=t.b),e}function Kd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ed(t,e){e&&!t.f&&(S(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ld(this,e),Gd(this,n,t))},t)),t.f=e}function Nd(){this.a=t()}function Pd(){Od||(Od=new Nd)}function Qd(){Od||(Od=new Nd)}function Rd(t,e){this.a=t,this.b=e,this.c=this.i=null,this.h=!1,this.m=null,this.f=-1,this.l=this.g=null}function Sd(t){H(t.b,"TestConnection: starting stage 2");var e=t.a.I.a;if(null!=e)H(t.b,function(){return"Buffered"}),K(4),e?(K(10),Td(t.a,t,!1)):(K(11),Td(t.a,t,!0));else{t.c=new L(t,t.b,void 0,void 0),t.c.j=t.i;var n=Ud(t.a,t.g,t.m);K(4),$c(n,"TYPE","xmlhttp");var r=t.a.j,i=t.a.K;r&&i&&R(n,r,i),Yc(t.c,n,!1,t.g)}}function Wd(){this.a=this.b=null}function Xd(){this.a=new O}function Yd(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[q]||(t[q]=++fa)):e.charAt(0)+t}function Zd(t,e){this.a=t,this.b=e}function $d(t){this.g=t||ae,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(k.oa&&k.oa.Ma&&k.oa.Ma()&&k.oa.Ma().Jb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Xd),this.b=null,this.c=[]}function be(t,e){t.a||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(t.f=t.g,t.a=new Xd,t.b&&(ce(t,t.b),t.b=null))}function de(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function ee(t,e){return t.b?t=t.b==e:t.a?(e=Yd(e),t=P(t.a.a.b,e)):t=!1,t}function ce(t,e){t.a?t.a.add(e):t.b=e}function fe(t,e){if(t.b&&t.b==e)t.b=null;else{var n;(n=t.a)&&(n=Yd(e),n=P(t.a.a.b,n)),n&&pd(t.a.a,Yd(e))}}function ge(t){if(null!=t.b)return t.c.concat(t.b.u);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return ra(t.a.A(),function(t){e=e.concat(t.u)}),e}return wa(t.c)}function he(t,e){t.c=t.c.concat(e)}function ie(){}function je(){this.a=new ie}function ke(t,e,n){var r=n||"";try{md(t,function(t,n){var i=t;ea(t)&&(i=Db(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function le(t,e){var n=new sc;H(n,"TestLoadImage: loading "+t);var r=new Image;r.onload=ja(me,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ja(me,n,r,"TestLoadImage: error",!1,e),r.onabort=ja(me,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ja(me,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}function me(t,e,n,r,i){try{H(t,n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){xc(t,e)}}function T(t){B.call(this),this.headers=new O,this.s=t||null,this.c=!1,this.D=this.a=null,this.K=this.B="",this.j=0,this.g="",this.h=this.I=this.u=this.G=!1,this.l=0,this.C=null,this.L=ne,this.v=this.o=!1}function se(t){return z&&Va(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function ta(t){return"content-type"==t.toLowerCase()}function qe(t,e){t.c=!1,t.a&&(t.h=!0,t.a.abort(),t.h=!1),t.g=e,t.j=5,te(t),ue(t)}function te(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ve(t){if(t.c&&"undefined"!=typeof goog)if(t.D[1]&&4==N(t)&&2==t.W())E(t.b,U(t,"Local request error detected and ignored"));else if(t.u&&4==N(t))Zb(t.Na,0,t);else if(t.dispatchEvent("readystatechange"),4==N(t)){E(t.b,U(t,"Request complete")),t.c=!1;try{var e=t.W();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=0===e){var o=String(t.B).match(qd)[1]||null;if(!o&&k.self&&k.self.location){var a=k.self.location.protocol;o=a.substr(0,a.length-1)}i=!oe.test(o?o.toLowerCase():"")}r=i}r?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.j=6,t.g=t.Ha()+" ["+t.W()+"]",te(t))}finally{ue(t)}}}function ue(t,e){if(t.a){re(t);var n=t.a,r=t.D[0]?aa:null;t.a=null,t.D=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ic,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function re(t){t.a&&t.v&&(t.a.ontimeout=null),t.C&&(k.clearTimeout(t.C),t.C=null)}function N(t){return t.a?t.a.readyState:0}function id(t,e){return t.a?t.a.getResponseHeader(e):null}function U(t,e){return e+" ["+t.K+" "+t.B+" "+t.W()+"]"}function we(t){var e="";return Ca(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function xe(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=we(n),l(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),r=t.indexOf("?"),0>r||r>n){r=n;var i=""}else i=t.substring(r+1,n);t=[t.substr(0,r),i,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return R(t,e,n),t}function ye(t){this.ya=0,this.g=[],this.a=new sc,this.I=new Wd,this.X=this.ua=this.D=this.ja=this.b=this.K=this.j=this.U=this.h=this.L=this.i=null,this.Za=this.R=0,this.Xa=!!n("internalChannelParams.failFast",t),this.ka=this.C=this.s=this.l=this.m=this.f=null,this.u=this.xa=this.N=-1,this.T=this.B=this.v=0,this.Wa=n("internalChannelParams.baseRetryDelayMs",t)||5e3,this.$a=n("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Ya=n("internalChannelParams.forwardChannelMaxRetries",t)||2,this.wa=n("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ta=t&&t.Kb||void 0,this.G=void 0,this.S=t&&t.supportsCrossDomainXhr||!1,this.J="",this.c=new $d(t&&t.concurrentRequestLimit),this.la=new je,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.va=t&&t.fastHandshake||!1)&&!this.o&&(D(this.a.a,"Force backgroundChannelTest when fastHandshake is enabled."),this.o=!0),t&&t.Fa&&this.a.Fa()}function ze(e){if(H(e.a,"disconnect()"),Ae(e),3==e.F){var n=e.R++,r=M(e.D);R(r,"SID",e.J),R(r,"RID",n),R(r,"TYPE","terminate"),Be(e,r),n=new L(e,e.a,n,void 0),n.J=2,n.h=Wc(M(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(n.h.toString(),"")),!r&&k.Image&&((new Image).src=n.h,r=!0),r||(n.a=n.i.ca(null),n.a.fa(n.h)),n.D=t(),Zc(n)}Ce(e)}function Ae(t){t.C&&(t.C.abort(),t.C=null),t.b&&(t.b.cancel(),t.b=null),t.l&&(k.clearTimeout(t.l),t.l=null),De(t),t.c.cancel(),t.m&&(k.clearTimeout(t.m),t.m=null)}function Ee(t,e){1e3==t.g.length&&J(t.a,function(){return"Already have 1000 queued maps upon queueing "+Db(e)}),t.g.push(new Zd(t.Za++,e)),3==t.F&&Fe(t)}function Fe(t){de(t.c)||t.m||(t.m=Ec(r(t.Qa,t),0),t.v=0)}function Ge(t,e){var n=t.c;return(n.b?1:n.a?n.a.a.c:0)>=t.c.f-(t.m?1:0)?(J(t.a,"Unexpected retry request is scheduled."),!1):t.m?(H(t.a,"Use the retry request that is already scheduled."),t.g=e.u.concat(t.g),!0):!(1==t.F||2==t.F||t.v>=(t.Xa?0:t.Ya))&&(H(t.a,"Going to retry POST"),t.m=Ec(r(t.Qa,t,e),He(t,t.v)),t.v++,!0)}function Je(t,e){var n;n=e?e.c:t.R++;var r=M(t.D);R(r,"SID",t.J),R(r,"RID",n),R(r,"AID",t.N),Be(t,r),t.h&&t.i&&xe(r,t.h,t.i),n=new L(t,t.a,n,t.v+1),null===t.h&&(n.j=t.i),e&&(t.g=e.u.concat(t.g)),e=Ie(t,n),n.setTimeout(Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random())),ce(t.c,n),Vc(n,r,e)}function Be(t,e){t.f&&md({},function(t,n){R(e,n,t)})}function Ie(t,e){var n=Math.min(t.g.length,1e3),i=t.f?r(t.f.ab,t.f,t):null;t:for(var o=t.g,a=-1;;){var s=["count="+n];-1==a?0<n?(a=o[0].a,s.push("ofs="+a)):a=0:s.push("ofs="+a);for(var u=!0,c=0;c<n;c++){var l=o[c].a,h=o[c].b;if(l-=a,0>l)a=Math.max(0,o[c].a-100),u=!1;else try{ke(h,s,"req"+l+"_")}catch(t){i&&i(h)}}if(u){i=s.join("&");break t}}return t=t.g.splice(0,n),e.u=t,i}function Ke(t){if(!t.b&&!t.l){t.T=1;var e=t.Pa;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(e,t),t.B=0}}function Le(t){return t.b||t.l?(J(t.a,"Request already in progress"),!1):!(3<=t.B)&&(H(t.a,"Going to retry GET"),t.T++,t.l=Ec(r(t.Pa,t),He(t,t.B)),t.B++,!0)}function Td(t,e,n){H(t.a,"Test Connection Finished");var r=e.l;r&&be(t.c,r),t.ka=n,t.u=e.f,H(t.a,"connectChannel_()"),t.D=Me(t,t.ja),Fe(t)}function Vd(t,e){H(t.a,"Test Connection Failed"),t.u=e.f,V(t,2)}function De(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function He(t,e){var n=t.Wa+Math.floor(Math.random()*t.$a);return t.qa()||(H(t.a,"Inactive channel"),n*=2),n*e}function V(t,e){if(F(t.a,"Error code "+e),2==e){var n=null;t.f&&(n=null);var i=r(t.pb,t);n||(n=new Q("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||sd(n,"https"),Wc(n)),le(n.toString(),i)}else K(2);H(t.a,"HttpChannel: error - "+e),t.F=0,t.f&&t.f.Ba(e),Ce(t),Ae(t)}function Ce(t){if(t.F=0,t.u=-1,t.f){var e=ge(t.c);0==e.length&&0==t.g.length||(H(t.a,function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.g.length}),t.c.c.length=0,wa(t.g),t.g.length=0),t.f.Aa()}}function Me(t,e){return e=Ne(t,null,e),H(t.a,"GetForwardChannelUri: "+e),e}function Ud(t,e,n){return e=Ne(t,t.ia()?e:null,n),H(t.a,"GetBackChannelUri: "+e),e}function Ne(t,e,n){var r=Hd(n);if(""!=r.b)e&&td(r,e+"."+r.b),ud(r,r.i);else{var i,o=k.location;i=e?e+"."+o.hostname:o.hostname,r=Id(o.protocol,i,o.port,n)}return t.U&&Ca(t.U,function(t,e){R(r,e,t)}),e=t.j,n=t.K,e&&n&&R(r,e,n),R(r,"VER",t.na),Be(t,r),r}function Oe(){}function Pe(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))e=r;else{var i;(i=""==e)||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),e+=i?r:"/"+r}}return e}function Qe(){if(z&&!(10<=Number(Wa)))throw Error("Environmental error: no available transport.")}function W(t,e){B.call(this),this.a=new ye(e),this.b=t,this.o=e&&e.testUrl?e.testUrl:Pe(this.b,"test"),this.c=qc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ea&&(t?t["X-WebChannel-Client-Profile"]=e.Ea:t={"X-WebChannel-Client-Profile":e.Ea}),this.a.L=t,(t=e&&e.httpHeadersOverwriteParam)&&!xa(t)&&(this.a.h=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.j=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.a.j=e,t=this.g,null!==t&&e in t&&(t=this.g,e in t&&delete t[e],D(this.c,"Ignore httpSessionIdParam also specified with messageUrlParams: "+e))),this.h=new Re(this)}function Se(t){Mc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Te(){Nc.call(this),this.status=1}function Re(t){this.a=t}function Ve(){this.b=[],this.a=[]}function We(t){return 0==t.b.length&&(t.b=t.a,t.b.reverse(),t.a=[]),t.b.pop()}function Xe(t){return t.b.length+t.a.length}function Ye(t,e){
if(w.call(this),this.h=t||0,this.c=e||10,this.h>this.c)throw Error(Ze);this.a=new Ve,this.b=new Xd,this.g=null,this.aa()}function af(t){if("function"==typeof t.$)t.$();else for(var e in t)t[e]=null}function $e(t){return Xe(t.a)+t.b.a.c}function bf(t,e){this.a=t,this.b=e}function cf(t){if(this.a=[],t)t:{if(t instanceof cf){var e=t.M();if(t=t.A(),0>=this.a.length){for(var n=this.a,r=0;r<e.length;r++)n.push(new bf(e[r],t[r]));break t}}else e=Ea(t),t=Da(t);for(r=0;r<e.length;r++)df(this,e[r],t[r])}}function df(t,e,n){var r=t.a;for(r.push(new bf(e,n)),e=r.length-1,t=t.a,n=t[e];0<e&&(r=e-1>>1,t[r].a>n.a);)t[e]=t[r],e=r;t[e]=n}function ef(){cf.call(this)}function Y(t,e){this.f=new ef,Ye.call(this,t,e)}function Z(t,e,n,r){this.l=t,this.j=!!r,Y.call(this,e,n)}var g,goog=goog||{},k=this,q="closure_uid_"+(1e9*Math.random()>>>0),fa=0,t=Date.now||function(){return+new Date};u(ka,Error),ka.prototype.name="CustomError",u(la,ka),la.prototype.name="AssertionError";var na=0,pa={};w.prototype.i=!1,w.prototype.$=function(){if(!this.i&&(this.i=!0,this.w(),0!=na)){var t=this[q]||(this[q]=++fa);if(0!=na&&this.m&&0<this.m.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pa[t]}},w.prototype.w=function(){if(this.m)for(;this.m.length;)this.m.shift()()};var qa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ra=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},ya=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},x;t:{var Aa=k.navigator;if(Aa){var Ba=Aa.userAgent;if(Ba){x=Ba;break t}}x=""}var Ga="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Ia[" "]=aa;var La=y("Opera"),z=y("Trident")||y("MSIE"),Ma=y("Edge"),Na=Ma||z,Oa=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Pa=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Ra;t:{var Sa="",Ta=function(){var t=x;return Oa?/rv:([^\);]+)(\)|;)/.exec(t):Ma?/Edge\/([\d\.]+)/.exec(t):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Pa?/WebKit\/(\S+)/.exec(t):La?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ta&&(Sa=Ta?Ta[1]:""),z){var Ua=Qa();if(null!=Ua&&Ua>parseFloat(Sa)){Ra=String(Ua);break t}}Ra=Sa}var Ka={},Wa,Xa=k.document;Wa=Xa&&z?Qa()||("CSS1Compat"==Xa.compatMode?parseInt(Ra,10):5):void 0;var Ya=Object.freeze||function(t){return t},Za=!z||9<=Number(Wa),$a=z&&!Va("9"),ab=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e),t}();A.prototype.b=function(){this.Ra=!1},u(bb,A);var cb=Ya({2:"touch",3:"pen",4:"mouse"});bb.prototype.b=function(){bb.H.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$a)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var db="closure_listenable_"+(1e6*Math.random()|0),eb=0;hb.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=ib(t,e,r,i);return-1<a?(e=t[a],n||(e.ba=!1)):(e=new fb(e,this.src,o,!!r,i),e.ba=n,t.push(e)),e};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0,zb="__closure_events_fn_"+(1e9*Math.random()>>>0);u(B,w),B.prototype[db]=!0,g=B.prototype,g.addEventListener=function(t,e,n,r){nb(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){vb(this,t,e,n,r)},g.dispatchEvent=function(t){var e,n=this.J;if(n)for(e=[];n;n=n.J)e.push(n);n=this.N;var r=t.type||t;if(l(t))t=new A(t,n);else if(t instanceof A)t.target=t.target||n;else{var i=t;t=new A(r,n),Ha(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ab(a,r,!0,t)&&i}if(a=t.a=n,i=Ab(a,r,!0,t)&&i,i=Ab(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.a=e[o],i=Ab(a,r,!1,t)&&i;return i},g.w=function(){if(B.H.w.call(this),this.f){var t,e=this.f,n=0;for(t in e.a){for(var r=e.a[t],i=0;i<r.length;i++)++n,gb(r[i]);delete e.a[t],e.b--}}this.J=null},g.Ia=function(t,e,n,r){return this.f.add(String(t),e,!1,n,r)},g.Ja=function(t,e,n,r){return this.f.add(String(t),e,!0,n,r)};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;Jb.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nb=new Jb(function(){return new Lb},function(t){t.reset()});Kb.prototype.add=function(t,e){var n=Nb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Rb,Tb,Wb=!1,Pb=new Kb;u(Xb,B),g=Xb.prototype,g.ea=!1,g.O=null,g.qb=function(){if(this.ea){var e=t()-this.g;0<e&&e<.8*this.b?this.O=this.a.setTimeout(this.c,this.b-e):(this.O&&(this.a.clearTimeout(this.O),this.O=null),this.dispatchEvent("tick"),this.ea&&(this.O=this.a.setTimeout(this.c,this.b),this.g=t()))}},g.start=function(){this.ea=!0,this.O||(this.O=this.a.setTimeout(this.c,this.b),this.g=t())},g.w=function(){Xb.H.w.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.Y=null,g.cb=function(t){this.a=arguments,this.Y?this.ha=!0:ac(this)},g.w=function(){$b.H.w.call(this),this.Y&&(k.clearTimeout(this.Y),this.Y=null,this.ha=!1,this.a=[])},g.kb=function(){this.Y=null,this.ha&&(this.ha=!1,ac(this))},u(bc,w);var cc=[];bc.prototype.w=function(){bc.H.w.call(this),ec(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fc.prototype.a=null;var gc=0;fc.prototype.reset=function(e,n,r,i,o){"number"==typeof o||gc++,i||t(),delete this.a},C.prototype.toString=function(){return this.name};var ic=new C("SEVERE",1e3),jc=new C("WARNING",900),kc=new C("INFO",800),lc=new C("CONFIG",700),mc=new C("FINE",500);hc.prototype.log=function(t,e,n){if(t.value>=nc(this).value)for(da(e)&&(e=e()),t=new fc(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var oc={},pc=null;sc.prototype.Fa=function(){this.b=!1};var yc=new B;u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,rb:1,yb:2,xb:3,ub:4,wb:5,zb:6,Ua:7,TIMEOUT:8,Cb:9},Gc={tb:"complete",Gb:"success",Va:"error",Ua:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",vb:"downloadprogress",Hb:"uploadprogress"};Hc.prototype.a=null;var Lc={OPEN:"a",sb:"b",Va:"c",Bb:"d"};u(Mc,A),u(Nc,A);var Oc;u(Pc,Hc),Oc=new Pc;var Rc=45e3,Tc={},Uc={};g=L.prototype,g.setTimeout=function(t){this.R=t},g.nb=function(t){t=t.target;var e=this.I;e&&3==N(t)?(H(this.b,"Throttling readystatechange."),e.cb()):this.Sa(t)},g.Sa=function(t){try{t==this.a?ad(this):D(this.b.a,"Called back with an unexpected xmlhttp")}catch(t){if(H(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var e=this;xc(this.b,t,function(){return"ResponseText: "+e.a.V()})}else xc(this.b,t,"No response text")}finally{}},g.mb=function(){if(this.a){var t=N(this.a),e=this.a.V();this.G<e.length&&(bd(this),ed(this,t,e),this.f&&4!=t&&Zc(this))}},g.cancel=function(){this.B=!0,gd(this)},g.lb=function(){this.s=null;var e=t();0<=e-this.U?(this.f&&J(this.b,"Received watchdog timeout even though request loaded successfully"),wc(this.b,this.g),2!=this.J&&(Ac(3),K(17)),gd(this),this.m=2,hd(this)):(D(this.b.a,"WatchDog timer called too early"),kd(this,this.U-e))},g=O.prototype,g.A=function(){nd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.M=function(){return nd(this),this.a.concat()},g.get=function(t,e){return P(this.b,t)?this.b[t]:e},g.set=function(t,e){P(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.M(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qd=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Q.prototype.toString=function(){var t=[],e=this.f;e&&t.push(zd(e,Ad,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(zd(e,Ad,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(zd(n,"/"==n.charAt(0)?Bd:Cd,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",zd(n,Dd)),t.join("")},Q.prototype.resolve=function(t){var e=M(this),n=!!t.f;n?sd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?td(e,t.b):n=null!=t.i;var r=t.a;if(n)ud(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?vd(e,wd(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ad=/[#\/\?@]/g,Cd=/[#\?:]/g,Bd=/[#\?]/g,Fd=/[#\?@]/g,Dd=/#/g;g=yd.prototype,g.add=function(t,e){S(this),this.c=null,t=Kd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){S(this),this.a.forEach(function(n,r){ra(n,function(n){t.call(e,n,r,this)},this)},this)},g.M=function(){S(this);for(var t=this.a.A(),e=this.a.M(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.A=function(t){S(this);var e=[];if(l(t))Md(this,t)&&(e=va(e,this.a.get(Kd(this,t))));else{t=this.a.A();for(var n=0;n<t.length;n++)e=va(e,t[n])}return e},g.set=function(t,e){return S(this),this.c=null,t=Kd(this,t),Md(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return t=t?this.A(t):[],0<t.length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.M(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.A(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Od=null;Nd.prototype.set=function(t){this.a=t},Nd.prototype.reset=function(){this.set(t())},Nd.prototype.get=function(){return this.a},u(Qd,Pd),g=Rd.prototype,g.P=null,g.ca=function(t){return this.a.ca(t)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.La=function(){return!1},g.Oa=function(t,e){if(this.f=t.C,0==this.P){if(H(this.b,"TestConnection: Got data for stage 1"),!this.a.o&&(t=t.a)){var n=id(t,"X-Client-Wire-Protocol");this.l=n?n:null,this.a.j&&((t=id(t,"X-HTTP-Session-Id"))?this.a.K=t:D(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(e){try{var r=this.a.la.a.parse(e)}catch(t){return xc(this.b,t),void Vd(this.a,this)}this.g=r[0]}else H(this.b,"TestConnection: Null responseText"),Vd(this.a,this)}else 1==this.P&&(this.h?K(6):"11111"==e?(K(5),this.h=!0,(!z||10<=Number(Wa))&&(this.f=200,this.c.cancel(),H(this.b,"Test connection succeeded; using streaming connection"),K(11),Td(this.a,this,!0))):(K(7),this.h=!1))},g.ta=function(){this.f=this.c.C,this.c.f?0==this.P?(this.P=1,H(this.b,"TestConnection: request complete for initial check"),Sd(this)):1==this.P&&(H(this.b,"TestConnection: request complete for stage 2"),this.h?(H(this.b,"Test connection succeeded; using streaming connection"),K(11),Td(this.a,this,!0)):(H(this.b,"Test connection failed; not using streaming"),K(10),Td(this.a,this,!1))):(H(this.b,"TestConnection: request failed, in state "+this.P),0==this.P?K(8):1==this.P&&K(9),Vd(this.a,this))},g.ia=function(){return this.a.ia()},g.qa=function(){return this.a.qa()},Xd.prototype.add=function(t){this.a.set(Yd(t),t)},Xd.prototype.A=function(){return this.a.A()};var ae=10;$d.prototype.cancel=function(){this.c=ge(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ra(this.a.A(),function(t){t.cancel()}),od(this.a.a))},ie.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},ie.prototype.parse=function(t){return k.JSON.parse(t,void 0)},u(T,B);var ne="";T.prototype.b=qc("goog.net.XhrIo");var oe=/^https?$/i,pe=["POST","PUT"];g=T.prototype,g.fa=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.g="",this.j=0,this.K=e,this.G=!1,this.c=!0,this.a=Qc(this.s?this.s:Oc),this.D=Ic(this.s?this.s:Oc),this.a.onreadystatechange=r(this.Na,this);try{E(this.b,U(this,"Opening Xhr")),this.I=!0,this.a.open(e,String(t),!0),this.I=!1}catch(t){return E(this.b,U(this,"Error opening Xhr: "+t.message)),void qe(this,t)}t=n||"";var o=new O(this.headers);i&&md(i,function(t,e){o.set(e,t)}),i=sa(o.M()),n=k.FormData&&t instanceof k.FormData,!(0<=qa(pe,e))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.L&&(this.a.responseType=this.L),"withCredentials"in this.a&&this.a.withCredentials!==this.o&&(this.a.withCredentials=this.o);try{re(this),0<this.l&&(this.v=se(this.a),E(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.v)),this.v?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ka,this)):this.C=Zb(this.Ka,this.l,this)),E(this.b,U(this,"Sending request")),this.u=!0,this.a.send(t),this.u=!1}catch(t){E(this.b,U(this,"Send error: "+t.message)),qe(this,t)}},g.Ka=function(){"undefined"!=typeof goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,E(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.c&&(E(this.b,U(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ue(this))},g.w=function(){this.a&&(this.c&&(this.c=!1,this.h=!0,this.a.abort(),this.h=!1),ue(this,!0)),T.H.w.call(this)},g.Na=function(){this.i||(this.I||this.u||this.h?ve(this):this.jb())},g.jb=function(){ve(this)},g.W=function(){try{return 2<N(this)?this.a.status:-1}catch(t){return-1}},g.Ha=function(){try{return 2<N(this)?this.a.statusText:""}catch(t){return E(this.b,"Can not get status: "+t.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(t){return E(this.b,"Can not get responseText: "+t.message),""}},g.eb=function(t){if(this.a){var e=this.a.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,k.JSON)try{var n=k.JSON.parse(t);break t}catch(t){}n=Cb(t)}return n}},g.Ga=function(){return this.j},g.hb=function(){return l(this.g)?this.g:String(this.g)},g=ye.prototype,g.na=8,g.F=1,g.La=function(){return 0==this.F},g.Qa=function(t){if(this.m=null,H(this.a,"startForwardChannel_"),1==this.F)if(t)J(this.a,"Not supposed to retry the open");else{H(this.a,"open_()"),this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new L(this,this.a,t,void 0),n=this.i;this.L&&(n?(n=Fa(n),Ha(n,this.L)):n=this.L),null===this.h&&(e.j=n);var r=Ie(this,e),i=M(this.D);R(i,"RID",t),R(i,"CVER",22),this.o&&this.j&&R(i,"X-HTTP-Session-Id",this.j),Be(this,i),this.h&&n&&xe(i,this.h,n),ce(this.c,e),this.va?(R(i,"$req",r),R(i,"SID","null"),e.X=!0,Vc(e,i,null)):Vc(e,i,r),this.F=2}else 3==this.F&&(t?Je(this,t):0==this.g.length?H(this.a,"startForwardChannel_ returned: nothing to send"):de(this.c)?J(this.a,"startForwardChannel_ returned: connection already in progress"):(Je(this),H(this.a,"startForwardChannel_ finished, sent request")))},g.Pa=function(){this.l=null,H(this.a,"Creating new HttpRequest"),this.b=new L(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.N=0;var t=M(this.ua);R(t,"RID","rpc"),R(t,"SID",this.J),R(t,"CI",this.ka?"0":"1"),R(t,"AID",this.N),Be(this,t),R(t,"TYPE","xmlhttp"),this.h&&this.i&&xe(t,this.h,this.i),this.G&&this.b.setTimeout(this.G),Yc(this.b,t,!0,this.X),H(this.a,"New Request created")},g.Oa=function(t,e){if(0!=this.F&&(this.b==t||ee(this.c,t)))if(this.u=t.C,!t.v&&ee(this.c,t)&&3==this.F){try{var n=this.la.a.parse(e)}catch(t){n=null}if(p(n)&&3==n.length)if(e=n,0==e[0])t:if(H(this.a,"Server claims our backchannel is missing."),this.l)H(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<t.D))break t;De(this),this.b.cancel(),this.b=null}else D(this.a.a,"We do not have a BackChannel established");Le(this),K(18)}else this.xa=e[1],t=this.xa-this.N,0<t&&(e=e[2],H(this.a,e+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),37500>e&&this.ka&&0==this.B&&!this.s&&(this.s=Ec(r(this.ib,this),6e3)));else H(this.a,"Bad POST response data returned"),V(this,11)}else if((t.v||this.b==t)&&De(this),!xa(e))for(e=n=this.la.a.parse(e),n=0;n<e.length;n++){var i=e[n];if(this.N=i[0],i=i[1],2==this.F)if("c"==i[0]){this.J=i[1],this.X=i[2];var o=i[3];null!=o&&(this.na=o,F(this.a,"VER="+this.na)),o=i[4],null!=o&&(this.ya=o,F(this.a,"SVER="+this.ya)),i=i[5],null!=i&&"number"==typeof i&&0<i&&(this.G=i*=1.5,F(this.a,"backChannelRequestTimeoutMs_="+i)),this.o&&(i=t.a)&&((o=id(i,"X-Client-Wire-Protocol"))&&be(this.c,o),this.j&&((i=id(i,"X-HTTP-Session-Id"))?(this.K=i,R(this.D,this.j,i)):D(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.F=3,this.f&&this.f.Da(),i=t,this.ua=Ud(this,this.X,this.ja),i.v?(H(this.a,"Upgrade the handshake request to a backchannel."),fe(this.c,i),(o=this.G)&&i.setTimeout(o),i.s&&(bd(i),Zc(i)),this.b=i):Ke(this)}else"stop"!=i[0]&&"close"!=i[0]||V(this,7);else 3==this.F&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?V(this,7):ze(this):"noop"!=i[0]&&this.f&&this.f.Ca(i),this.B=0)}},g.ib=function(){null!=this.s&&(this.s=null,this.b.cancel(),this.b=null,Le(this),K(19))},g.ta=function(e){H(this.a,"Request complete");var n=null;if(this.b==e){De(this),this.b=null;var r=2}else{if(!ee(this.c,e))return;n=e.u,fe(this.c,e),r=1}if(this.u=e.C,0!=this.F)if(e.f)1==r?(Dc(e.l?e.l.length:0,t()-e.D,this.v),Fe(this)):Ke(this);else{var i=e.m;if(3==i||0==i&&0<this.u)H(this.a,"Not retrying due to error type");else{var o=this;if(H(this.a,function(){return"Maybe retrying, last error: "+Sc(i,o.u)}),1==r&&Ge(this,e)||2==r&&Le(this))return;H(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&he(this.c,n),H(this.a,"Error: HTTP request failed"),i){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.pb=function(t){t?(F(this.a,"Successfully pinged google.com"),K(2)):(F(this.a,"Failed to ping google.com"),K(1))},g.ca=function(t){if(t&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return t=new T(this.Ta),t.o=this.S,t},g.qa=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Qd,g=Oe.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.ab=function(){},Qe.prototype.a=function(t,e){return new W(t,e)},u(W,B),g=W.prototype,g.addEventListener=function(t,e,n,r){W.H.addEventListener.call(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){W.H.removeEventListener.call(this,t,e,n,r)},g.fb=function(){this.a.f=this.h,this.l&&(this.a.S=!0);var t=this.a,e=this.o,n=this.b,r=this.g||void 0;H(t.a,"connect()"),K(0),t.ja=n,t.U=r||{},t.o&&(H(t.a,"connect() bypassed channel-test."),t.I.b=[],t.I.a=!1),H(t.a,"connectTest_()"),t.C=new Rd(t,t.a),null===t.h&&(t.C.i=t.i),n=e,t.h&&t.i&&(n=xe(e,t.h,t.i)),t=t.C,t.m=n,e=Me(t.a,t.m),K(3),n=t.a.I.b,null!=n?(t.g=n[0],t.P=1,Sd(t)):($c(e,"MODE","init"),!t.a.o&&t.a.j&&$c(e,"X-HTTP-Session-Id",t.a.j),t.c=new L(t,t.b,void 0,void 0),t.c.j=t.i,Yc(t.c,e,!1,null),t.P=0)},g.close=function(){ze(this.a)},g.gb=function(t){if(l(t)){var e={};e.__data__=t,Ee(this.a,e)}else this.j?(e={},e.__data__=Db(t),Ee(this.a,e)):Ee(this.a,t)},g.w=function(){this.a.f=null,delete this.h,ze(this.a),delete this.a,W.H.w.call(this)},u(Se,Mc),u(Te,Nc),u(Re,Oe),Re.prototype.Da=function(){rc(this.a.c,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Re.prototype.Ca=function(t){this.a.dispatchEvent(new Se(t))},Re.prototype.Ba=function(t){rc(this.a.c,"WebChannel aborted on "+this.a.b+" due to channel error: "+t),this.a.dispatchEvent(new Te(t))},Re.prototype.Aa=function(){rc(this.a.c,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Ue=ja(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Qe);Ve.prototype.A=function(){for(var t=[],e=this.b.length-1;0<=e;--e)t.push(this.b[e]);var n=this.a.length;for(e=0;e<n;++e)t.push(this.a[e]);return t},u(Ye,w);var Ze="[goog.structs.Pool] Min can not be greater than max";g=Ye.prototype,g.da=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<Xe(this.a)&&(n=We(this.a),!this.sa(n));)this.aa();return!n&&$e(this)<this.c&&(n=this.pa()),n&&(this.g=e,this.b.add(n)),n}},g.ob=function(t){return!!pd(this.b.a,Yd(t))&&(this.ma(t),!0)},g.ma=function(t){pd(this.b.a,Yd(t)),this.sa(t)&&$e(this)<this.c?this.a.a.push(t):af(t)},g.aa=function(){for(var t=this.a;$e(this)<this.h;){var e=this.pa();t.a.push(e)}for(;$e(this)>this.c&&0<Xe(this.a);)af(We(t))},g.pa=function(){return{}},g.sa=function(t){return"function"!=typeof t.bb||t.bb()},g.w=function(){if(Ye.H.w.call(this),0<this.b.a.c)throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var t=this.a;0!=t.b.length||0!=t.a.length;)af(We(t));delete this.a},cf.prototype.A=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].b);return e},cf.prototype.M=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].a);return e},u(ef,cf),u(Y,Ye),g=Y.prototype,g.da=function(t,e){return t?(df(this.f,void 0!==e?e:100,t),void this.ra()):Y.H.da.call(this)},g.ra=function(){for(var t=this.f;0<t.a.length;){var e=this.da();if(!e)break;var n=t,r=n.a,i=r.length,o=r[0];if(0>=i)o=void 0;else{if(1==i)ua(r);else{r[0]=r.pop(),r=0,n=n.a,i=n.length;for(var a=n[r];r<i>>1;){var s=2*r+1,u=2*r+2;if(s=u<i&&n[u].a<n[s].a?u:s,n[s].a>a.a)break;n[r]=n[s],r=s}n[r]=a}o=o.b}o.apply(this,[e])}},g.ma=function(t){Y.H.ma.call(this,t),this.ra()},g.aa=function(){Y.H.aa.call(this),this.ra()},g.w=function(){Y.H.w.call(this),k.clearTimeout(void 0),ua(this.f.a),this.f=null},u(Z,Y),Z.prototype.pa=function(){var t=new T,e=this.l;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.j&&(t.o=!0),t},Z.prototype.sa=function(t){return!t.i&&!t.a},Qe.prototype.createWebChannel=Qe.prototype.a,W.prototype.send=W.prototype.gb,W.prototype.open=W.prototype.fb,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Kc.EventType=Lc,Lc.OPEN="a",Lc.CLOSE="b",Lc.ERROR="c",Lc.MESSAGE="d",B.prototype.listen=B.prototype.Ia,Z.prototype.getObject=Z.prototype.da,Z.prototype.releaseObject=Z.prototype.ob,T.prototype.listenOnce=T.prototype.Ja,T.prototype.getLastError=T.prototype.hb,T.prototype.getLastErrorCode=T.prototype.Ga,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ha,T.prototype.getResponseJson=T.prototype.eb,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Ue,ErrorCode:Fc,EventType:Gc,WebChannel:Kc,XhrIoPool:Z}}).call("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(exports,function(){return this}())},/*!****************************************!*\
  !*** ./src/components/AddTeamPopUp.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! react-skylight */54),h=r(l),f=n(/*! ./TeamInputForm */89),d=r(f),p=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"hideInput",value:function(){this.customDialog.hide()}},{key:"render",value:function(){var t=this,e={backgroundColor:"#303030",color:"#494949",width:"100%",height:"100%",position:"fixed",top:"0%",left:"50%",marginTop:"0px",marginLeft:"-50%",padding:"0px"},n={fontSize:"0em"};return c.default.createElement("div",{className:"row",onClick:function(){return t.customDialog.show()}},c.default.createElement("div",{className:"picture"},c.default.createElement("img",{src:"./img/buttons/addUser.png"})),c.default.createElement("div",{className:"desc"},"Add Team"),c.default.createElement(h.default,{closeButtonStyle:n,dialogStyles:e,hideOnOverlayClicked:!0,ref:function(e){return t.customDialog=e}},c.default.createElement(d.default,{addTeamClick:this.props.addTeamClick,geo:e,hideInput:this.hideInput.bind(this),name:"",country:null,editPlayer:this.props.editPlayer,mode:"add"})))}}]),e}(c.default.Component);p.displayName="Add Team",e.default=p},/*!*************************************!*\
  !*** ./src/components/AppRoutes.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! react-router */39),h=n(/*! ../routes */211),f=r(h),d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return c.default.createElement(l.Router,{history:l.browserHistory,routes:f.default,onUpdate:function(){return window.scrollTo(0,0)}})}}]),e}(c.default.Component);e.default=d},/*!**********************************!*\
  !*** ./src/components/Button.js ***!
  \**********************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l="#786B9C",h=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={hover:!1},t}return a(e,t),s(e,[{key:"handleOnMouseOver",value:function(){this.setState({hover:!0})}},{key:"handleOnMouseOut",value:function(){this.setState({hover:!1})}},{key:"handleOnClick",value:function(){this.props.clickHandle(this.props.title)}},{key:"render",value:function(){var t={margin:"5px",borderRadius:"5px",background:this.state.hover===!0?"red":l};return c.default.createElement("div",{className:"inner-square",style:t,onMouseOver:this.handleOnMouseOver.bind(this),onMouseOut:this.handleOnMouseOut.bind(this),onClick:this.handleOnClick.bind(this)},this.props.title)}}]),e}(c.default.Component);e.default=h},/*!******************************************!*\
  !*** ./src/components/FrontPageTable.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! ./TimeTrialLine */164),h=r(l),f=n(/*! ./TimeTrialHeaderLine */163),d=r(f),p=n(/*! ./TeamInputForm */89),m=r(p),v=n(/*! react-skylight */54),g=r(v),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.setSplitTimes=n.setSplitTimes.bind(n),n.state={name:"",country:null,time:""},n}return a(e,t),s(e,[{key:"setSplitTimes",value:function(t){for(var e in t)t[e].seed=Number(e)+1,"-"==t[e].timeTrial?t[e].splitTime="":t[e].splitTime=Math.round(100*(t[e].timeTrial-this.props.bestTime))/100}},{key:"clickHandle",value:function(t,e,n){this.setState({name:t,country:e,time:n}),this.customDialog.show()}},{key:"hideInput",value:function(){this.customDialog.hide()}},{key:"handleRemovePlayer",value:function(t){this.props.removePlayer(t)}},{key:"render",value:function(){function t(t,e){return"-"==t.timeTrial?1:"-"==e.timeTrial?-1:t.timeTrial-e.timeTrial}var e=this,n={backgroundColor:"#303030",color:"#494949",width:"100%",height:"100%",position:"fixed",top:"0%",left:"50%",marginTop:"0px",marginLeft:"-50%",padding:"0px"},r={fontSize:"0em"},i=[];for(var o in this.props.players)i.push(this.props.players[o]);i.sort(t),this.setSplitTimes(i);var a=[];a.push(c.default.createElement(d.default,null));for(var s in i)a.push(c.default.createElement("hr",{className:"style14",width:"100%"})),a.push(c.default.createElement(h.default,{seed:i[s].seed,country:i[s].country.name,flagPath:i[s].country.flagPathSVG,name:i[s].name,timeTrial:i[s].timeTrial,splitTime:i[s].splitTime,clickHandle:this.clickHandle.bind(this),handleRemovePlayer:this.handleRemovePlayer.bind(this)}));return c.default.createElement("div",{className:"country-chart"},a.map(function(t){return t}),c.default.createElement(g.default,{closeButtonStyle:r,dialogStyles:n,hideOnOverlayClicked:!0,ref:function(t){return e.customDialog=t}},c.default.createElement(m.default,{addTeamClick:this.props.addTeamClick,geo:n,hideInput:this.hideInput.bind(this),name:this.state.name,country:this.state.country,time:this.state.time,editPlayer:this.props.editPlayer,mode:"edit"})))}}]),e}(u.Component);e.default=y},/*!*************************************!*\
  !*** ./src/components/IndexPage.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(/*! react */1),l=r(c),h=n(/*! ./FrontPageTable */157),f=r(h),d=n(/*! ./AddTeamPopUp */154),p=r(d),m=n(/*! ./CountryKeyVal */87),v=r(m),g=n(/*! ./TimeTrialPopUp */165),y=r(g),_=n(/*! ./VsTournament */90),b=(r(_),n(/*! react-router */39)),w=n(/*! ../data/demoNames */208),E=r(w),S=n(/*! ../data/countries */59),C=r(S),T=n(/*! ../static/Settings */16),k=r(T),I=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.getBestTime=t.getBestTime.bind(t),t.state={nRows:0,players:{},bestTime:null},t}return s(e,t),u(e,[{key:"randomIntFromInterval",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"addTeam",value:function(t,e,n){n=n||"-",this.state.players[t]={name:t,country:v.default[e],seed:0,timeTrial:n,wins:0,losses:0,totalTime:0,avgTime:0,splitTime:0,bestTime:"-"==n?0:n,index:1,avgCupTime:0,maxRound:0,vsGroupAvg:0,avgPlacement:"-",final4Spot:999,mascot:null,nLastPlace:0},this.setState({nRows:this.state.nRows+1})}},{key:"addTimeTrial",value:function(t,e){this.state.players[t].timeTrial=Number(e),this.state.players[t].bestTime=Number(e),this.state.players[t].avgTime=Number(e),this.state.players[t].avgCupTime=Math.round(100*e/k.default.cupsPerPerson)/100,this.setState({players:this.state.players},function(){this.getBestTime(this.state.players)})}},{key:"getBestTime",value:function(t){for(var e in t)"-"!=t[e].timeTrial&&(null==this.state.bestTime?this.setState({bestTime:t[e].timeTrial}):Number(t[e].timeTrial)<Number(this.state.bestTime)&&this.setState({bestTime:t[e].timeTrial}))}},{key:"removePlayer",value:function(t){for(var e in this.state.players)this.state.players[e].name==t&&delete this.state.players[e];this.forceUpdate()}},{key:"editPlayer",value:function(t,e,n,r){if(t!==e||n!==r)for(var i in this.state.players)this.state.players[i].name==t&&(t!==e&&(this.state.players[i].name=e),n!==r&&(this.state.players[i].country=v.default[r]));this.forceUpdate()}},{key:"componentDidMount",value:function(){var t=16,e=[];for(var n in C.default[0])e.push(C.default[0][n].name);for(var r=0;r<t;r++){var i=E.default[this.randomIntFromInterval(0,E.default.length)]+this.randomIntFromInterval(1,999);this.addTeam(i,e[this.randomIntFromInterval(0,e.length)],0),this.addTimeTrial(i,Math.round(this.randomIntFromInterval(1500,2500))/100)}this.getBestTime(this.state.players)}},{key:"render",value:function(){var t,e,n,r,o,a,s,u,c,h,d=0,m="#D3D3D3",v="#9489b0";for(var g in this.state.players)null!==this.state.players[g].timeTrial&&0!==this.state.players[g].timeTrial&&"-"!==this.state.players[g].timeTrial&&(d+=1);return Object.keys(this.state.players).length>3?(t={background:v,color:"white"},o={pathname:"/VsTournament",state:{players:this.state.players,mode:"VS",seeding:"blind",order:"random"}}):(t={background:m,color:"#888888"},o=null),Object.keys(this.state.players).length>7?(n={background:v,color:"white"},u={pathname:"/VsTournament",state:{players:this.state.players,mode:"4P",seeding:"blind",order:"random"}}):(n={background:m,color:"#888888"},u=null),Object.keys(this.state.players).length==d&&Object.keys(this.state.players).length>3?(e={background:v,color:"white"},a={pathname:"/VsTournament",state:{players:this.state.players,mode:"VS",seeding:"blind",order:"timeTrial"}},s={pathname:"/VsTournament",state:{players:this.state.players,mode:"VS",seeding:"seeded",order:"timeTrial"}}):(e={background:m,color:"#888888"},a=null,s=null),Object.keys(this.state.players).length==d&&Object.keys(this.state.players).length>7?(r={background:v,color:"white"},c={pathname:"/VsTournament",state:{players:this.state.players,mode:"4P",seeding:"blind",order:"timeTrial"}},h={pathname:"/VsTournament",state:{players:this.state.players,mode:"4P",seeding:"seeded",order:"timeTrial"}}):(r={background:m,color:"#888888"},c=null,h=null),l.default.createElement("div",{className:"main-page"},l.default.createElement("div",{className:"menu"},l.default.createElement(p.default,{addTeamClick:this.addTeam.bind(this),editPlayer:this.editPlayer.bind(this)}),l.default.createElement(y.default,{players:this.state.players,addTimeTrial:this.addTimeTrial.bind(this)}),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"picture"},l.default.createElement("img",{src:"./img/buttons/tournament.png"})),l.default.createElement("div",{className:"desc"},"VS Tournament")),l.default.createElement(b.Link,{className:"secondary-row",style:t,to:o},"Blind Draw - Loser Jumble"),l.default.createElement(b.Link,{className:"secondary-row",style:e,to:a},"Seeded Draw - Loser Jumble"),l.default.createElement(b.Link,{className:"secondary-row",style:e,to:s},"Seeded Draw - Division Structured"),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"picture"},l.default.createElement("img",{src:"./img/buttons/4P.png"})),l.default.createElement("div",{className:"desc"},"4P Tournament")),l.default.createElement(b.Link,{className:"secondary-row",style:n,to:u},"Blind Draw - Loser Jumble"),l.default.createElement(b.Link,{className:"secondary-row",style:r,to:c},"Seeded Draw - Loser Jumble"),l.default.createElement(b.Link,{className:"secondary-row",style:r,to:h},"Seeded Draw - Division Structured")),l.default.createElement("div",{className:"home"},l.default.createElement(f.default,i({teamRows:this.state.nRows,players:this.state.players,bestTime:this.state.bestTime,removePlayer:this.removePlayer.bind(this),editPlayer:this.editPlayer.bind(this)},"removePlayer",this.removePlayer.bind(this)))))}}]),e}(l.default.Component);e.default=I},/*!**********************************!*\
  !*** ./src/components/Layout.js ***!
  \**********************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=(n(/*! react-router */39),function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return c.default.createElement("div",{className:"app-container"},c.default.createElement("header",null,c.default.createElement("img",{className:"logo",src:"/img/headers/bracketTitle.png"})),c.default.createElement("div",{className:"app-content"},this.props.children))}}]),e}(c.default.Component));e.default=l},/*!****************************************!*\
  !*** ./src/components/NotFoundPage.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! react-router */39),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return c.default.createElement("div",{className:"not-found"},c.default.createElement("h1",null,"404"),c.default.createElement("h2",null,"Page not found!"),c.default.createElement("p",null,c.default.createElement(l.Link,{to:"/"},"Go back to the main page")))}}]),e}(c.default.Component);e.default=h},/*!************************************!*\
  !*** ./src/components/TileFlag.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! konva */8),h=(r(l),n(/*! react-konva */6)),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={image:null},t}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this,e=new window.Image;e.src=this.props.img,e.onload=function(){t.setState({image:e})}}},{key:"componentWillReceiveProps",value:function(t){var e=this;if(t.img!==this.props.img){var n=new window.Image;n.src=t.img,n.onload=function(){e.setState({image:n})}}}},{key:"render",value:function(){var t=this,e=this.props.flagHeight,n=this.props.flagWidth,r=5+this.props.rectX,i=this.props.stageHeight/2-e/2;return c.default.createElement(h.Image,{image:this.state.image,height:e,width:n,ref:function(e){return t.imageNode=e},x:r,y:i,shadowBlur:3})}}]),e}(c.default.Component);e.default=f},/*!************************************!*\
  !*** ./src/components/TileTeam.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! konva */8),h=(r(l),n(/*! react-konva */6)),f=n(/*! ./TileFlag */161),d=r(f),p=n(/*! ../static/Colors */44),m=r(p),v=m.default.tileColor,g=m.default.byeColor,y=m.default.hoverColor,_=m.default.seedColor,b=m.default.timeColor,w=m.default.eliminatedColor,E=m.default.byeColor,S=m.default.gameNotReadyColor,C=m.default.gold,T=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"BackgroundColor",value:function(t,e,n){return"BYE"===t?g:"VS"==this.props.mode?t==this.props.loser&&this.props.loserEliminated?w:t==this.props.loser?E:""===t||"Winne"==t.slice(0,5)||"Loser"==t.slice(0,5)?S:e===!0?y:v:t==this.props.loser1&&this.props.loserEliminated1||t==this.props.loser2&&this.props.loserEliminated2?w:t==this.props.loser1||t==this.props.loser2?E:""===t||"Winne"==t.slice(0,5)||"Loser"==t.slice(0,5)?S:e===!0?y:v}},{key:"TextDecoration",value:function(t,e){return"VS"==this.props.mode?t==this.props.loser?"line-through":"":t==this.props.loser1||t==this.props.loser2?"line-through":""}},{key:"nameDisplay",value:function(t,e,n){return n===!0?e:t}},{key:"timeDisplay",value:function(t,e,n,r,i){return"COMPLETE"==r?0==i?"-":"*"+i:n===!0?e+"%":t}},{key:"displayPlace",value:function(t,e,n,r,i){return"VS"==i?_:null==t||""==t||"BYE"==t?_:t==e?C:t==n?C:_}},{key:"render",value:function(){var t=this.props.width,e=this.props.height,n=e,r=12,i=16;return c.default.createElement(h.Group,{x:this.props.globalX,y:this.props.globalY,ref:"group"},c.default.createElement(h.Group,null,c.default.createElement(h.Rect,{width:t,height:e,fill:this.BackgroundColor(this.props.name,this.props.hover,this.props.mode),stroke:"black",strokeWidth:.5,cornerRadius:5})),c.default.createElement(h.Group,{clipX:0,clipY:0,clipWidth:n,clipHeight:e},c.default.createElement(h.Rect,{width:t,height:e,fill:this.displayPlace(this.props.name,this.props.winner1,this.props.winner2,this.props.loser1,this.props.mode),stroke:"black",strokeWidth:.5,cornerRadius:5})),c.default.createElement(h.Group,{clipX:t-n,clipY:0,clipWidth:n,clipHeight:e},c.default.createElement(h.Rect,{width:t,height:e,fill:b,stroke:"black",strokeWidth:.5,cornerRadius:5})),c.default.createElement(h.Group,null,c.default.createElement(h.Text,{text:this.props.seed,x:n/2-9,y:(e-i)/2,fontSize:i,fontStyle:"bold",shadowBlur:2,fill:"white",width:18,align:"center"}),c.default.createElement(h.Text,{text:this.nameDisplay(this.props.name,this.props.country,this.props.hover),x:n+48+10,y:(e-r)/2,fontSize:r,fill:"black",width:t-2*e,fontFamily:"Open Sans",fontStyle:"bold",align:"left",textDecoration:this.TextDecoration(this.props.name,this.props.mode),ellipsis:"true",wrap:"none"}),c.default.createElement(h.Text,{text:this.timeDisplay(this.props.time,this.props.winChance,this.props.hover,this.props.status,this.props.finishTime),x:t-n,y:(e-r)/2,fontSize:r,fill:"COMPLETE"==this.props.status?C:"white",width:n,align:"center",shadowBlur:2,fontFamily:"Open Sans",fontStyle:"bold"}),c.default.createElement(d.default,{img:this.props.img,rectHeight:e,rectWidth:t,rectX:n,stageHeight:e,flagHeight:48,flagWidth:48})))}}]),e}(c.default.Component);e.default=T},/*!***********************************************!*\
  !*** ./src/components/TimeTrialHeaderLine.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l={color:"black",fontStyle:"normal",fontFamily:"sans-serif",fontWeight:"bolder"},h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return c.default.createElement("div",{className:"cTile"},c.default.createElement("div",{className:"cSeed",style:l},"Seed"),c.default.createElement("div",{className:"cFlag"}),c.default.createElement("div",{className:"cInfo"},c.default.createElement("div",{className:"cName",style:l},"Player Name"),c.default.createElement("div",{className:"cTimes"},c.default.createElement("div",{className:"cTimeTrial",style:l},"Time"),c.default.createElement("div",{className:"cSplit",style:l},"Split"))),c.default.createElement("div",{className:"cDelete"}))}}]),e}(u.Component);e.default=h},/*!*****************************************!*\
  !*** ./src/components/TimeTrialLine.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"clickHandle",value:function(){this.props.clickHandle(this.props.name,this.props.country,this.props.timeTrial)}},{key:"removePlayerHandle",value:function(){var t=window.confirm("Are you sure you wish to delete this item?");1==t&&this.props.handleRemovePlayer(this.props.name)}},{key:"render",value:function(){return c.default.createElement("div",{className:"cTile"},c.default.createElement("div",{className:"cMain",onClick:this.clickHandle.bind(this),onTap:this.clickHandle.bind(this)},c.default.createElement("div",{className:"cSeed"},this.props.seed),c.default.createElement("div",{className:"cFlag"},c.default.createElement("img",{src:this.props.flagPath})),c.default.createElement("div",{className:"cInfo"},c.default.createElement("div",{className:"cName"},this.props.name),c.default.createElement("div",{className:"cTimes"},c.default.createElement("div",{className:"cTimeTrial"},"-"==this.props.timeTrial?"-":this.props.timeTrial.toFixed(2)),c.default.createElement("div",{className:"cSplit"},""==this.props.splitTime?"":"+"+String(this.props.splitTime.toFixed(2)))))),c.default.createElement("div",{className:"cDelete",onClick:this.removePlayerHandle.bind(this)},c.default.createElement("img",{src:"/img/buttons/trash.svg"})))}}]),e}(u.Component);e.default=l},/*!******************************************!*\
  !*** ./src/components/TimeTrialPopUp.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! react-skylight */54),h=r(l),f=n(/*! ./TimeTrialTemplate */166),d=r(f),p=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={timeElapsed:0,lastClearedIncrementer:null,completions:0,nTeams:0,timeSwitch:0,timerOn:!1,keyPress:null},n.incrementer=null,n}return a(e,t),s(e,[{key:"handleStartClick",value:function(t){var e=this;this.setState({keyPress:t.key})," "==t.key&&0==this.state.timerOn&&(this.incrementer=setInterval(function(){return e.setState({timeElapsed:e.state.timeElapsed+.01,timerOn:!0},function(){this.setState({keyPress:null})})},10))}},{key:"handleStartButton",value:function(){var t=this;0==this.state.timerOn&&(this.incrementer=setInterval(function(){return t.setState({timeElapsed:t.state.timeElapsed+.01,timerOn:!0})},10))}},{key:"handleStopMainTimer",value:function(){this.state.completions>=Number(this.state.nTeams)-1?(clearInterval(this.incrementer),this.setState({timeSwitch:1})):this.setState({completions:this.state.completions+1})}},{key:"handleReset",value:function(){clearInterval(this.incrementer),this.setState({nTeams:0,timeElapsed:0,timeSwitch:0,completions:0,keyPress:null,timerOn:!1},function(){this.customDialog.hide()})}},{key:"hideInput",value:function(){this.setState({},function(){this.customDialog.hide()})}},{key:"cancelGroup",value:function(){this.handleReset(),this.hideInput()}},{key:"render",value:function(){for(var t=this,e={backgroundColor:"#303030",color:"white",width:"100%",height:"100%",position:"fixed",top:"0%",left:"50%",marginTop:"0px",marginLeft:"-50%",padding:"0px"},n={fontSize:"0em"},r={color:0==this.state.timeSwitch?"grey":"black"},i=[],o=0;o<this.state.nTeams;o++)i.push(c.default.createElement(d.default,{players:this.props.players,timeElapsed:this.state.timeElapsed,finishHandle:this.handleStopMainTimer.bind(this),addTimeTrial:this.props.addTimeTrial,position:Number(o)+1,key:o,stopTime:this.state.keyPress}));return c.default.createElement("div",{className:"row",onClick:function(){return t.customDialog.show()}},c.default.createElement("div",{className:"picture"},c.default.createElement("img",{src:"./img/buttons/timeTrials.png"})),c.default.createElement("div",{className:"desc"},"Timetrial"),c.default.createElement(h.default,{closeButtonStyle:n,dialogStyles:e,hideOnOverlayClicked:!0,ref:function(e){return t.customDialog=e}},c.default.createElement("div",{className:"ttWrap"},c.default.createElement("div",{className:"timeTrialTop"},c.default.createElement("p",{className:"switch-title"},"Select Number of Time Trials"),c.default.createElement("label",{for:"switch_1"},c.default.createElement("input",{type:"radio",id:"switch_1",name:"nPlayerSelection",onChange:function(e){t.setState({nTeams:1})}}),c.default.createElement("span",null,"1")),c.default.createElement("label",{for:"switch_1"},c.default.createElement("input",{type:"radio",id:"switch_2",name:"nPlayerSelection",onChange:function(e){t.setState({nTeams:2})}}),c.default.createElement("span",null,"2")),c.default.createElement("label",{for:"switch_3"},c.default.createElement("input",{type:"radio",id:"switch_3",name:"nPlayerSelection",onChange:function(e){t.setState({nTeams:3})}}),c.default.createElement("span",null,"3")),c.default.createElement("label",{for:"switch_4"},c.default.createElement("input",{type:"radio",id:"switch_4",name:"nPlayerSelection",onChange:function(e){t.setState({nTeams:4})}}),c.default.createElement("span",null,"4"))),c.default.createElement("div",{className:"timeTrialMid"},i),c.default.createElement("div",{className:"timeTrialBot"},c.default.createElement("input",{className:"ttControls",type:"text",id:"one",placeholder:"Controls Area",onKeyPress:this.handleStartClick.bind(this),fontSize:"8px",value:this.state.keyPress}),c.default.createElement("button",{className:"ttButton",onClick:this.handleStartButton.bind(this)},"Start Time"),c.default.createElement("button",{className:"ttButton",style:r,onClick:0!==this.state.timeSwitch?this.handleReset.bind(this):null},"Submit Times"),c.default.createElement("button",{className:"ttButton",onClick:this.cancelGroup.bind(this)},"Cancel")))))}}]),e}(c.default.Component);p.displayName="Time Trials",e.default=p},/*!*********************************************!*\
  !*** ./src/components/TimeTrialTemplate.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! ./Flag */88),h=(r(l),function(t){return Math.floor(t)+"."+(t<1?Math.round(Math.floor(10*t)):Math.round(10*(Math.floor(10*t)/10%Math.floor(t))))+Math.floor(t%.1*100)}),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={name:"",country:"Select Country",players:n.props.players,timeElapsed:n.props.timeElapsed,stopSwitch:null,stopTime:null,finish:0},n}return a(e,t),s(e,[{key:"handleStopClick",value:function(){1!=this.state.finish&&this.props.position==this.props.stopTime?this.setState({stopSwitch:1,stopTime:this.props.timeElapsed,finish:1},function(){this.props.addTimeTrial(this.state.name,h(this.state.stopTime)),this.props.finishHandle()}):console.log("ALREADY INPUT")}},{key:"handleStopTap",value:function(){1!=this.state.finish?this.setState({stopSwitch:1,stopTime:this.props.timeElapsed,finish:1},function(){this.props.addTimeTrial(this.state.name,h(this.state.stopTime)),this.props.finishHandle()}):console.log("ALREADY INPUT")}},{key:"componentWillReceiveProps",value:function(t){t.stopTime!==this.props.stopTime&&this.handleStopClick()}},{key:"render",value:function(){var t=this,e=[];for(var n in this.state.players)e.push({name:this.state.players[n].name,timeTrial:this.state.players[n].timeTrial});return c.default.createElement("div",{className:"ttQuad","background-color":0==this.state.finish?"#584E72":"#FFD700"},c.default.createElement("div",{className:"ttInputName"},c.default.createElement("input",{className:"ttInputBoxStyle",list:"playerList",placeholder:"Select Player",value:this.props.name,onChange:function(e){t.setState({name:e.target.value})},type:"text",id:"name"}),c.default.createElement("datalist",{id:"playerList"},e.map(function(t,e){return c.default.createElement("option",{"data-id":e,value:t.name,label:t.timeTrial})}))),c.default.createElement("div",{className:"ttSector"},c.default.createElement("div",{className:"ttZone"},c.default.createElement("div",{className:"ttFlag"},c.default.createElement("img",{width:"50%",src:"undefined"!=typeof this.state.players[this.state.name]?this.state.players[this.state.name].country.flagPathXL:"/img/flagsXL/XX.png"})),c.default.createElement("div",{className:"ttTime"},h(null==this.state.stopSwitch?this.props.timeElapsed:this.state.stopTime))),c.default.createElement("div",{className:"ttControlButton"},c.default.createElement("button",{className:"ttFinishButton",onClick:this.handleStopTap.bind(this)},"Finish"))))}}]),e}(c.default.Component);e.default=f},/*!*************************************!*\
  !*** ./src/components/VsMatchup.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e,n=[];if("VS"==t.mode)for(e=0;e<t.players.length;e++)n.push((0,p.default)(t.Geo,t.players[e],t.dialogHeight-t.dialogHeight/(e+1),t.Geo.alphaArr[e],t.Geo.colorArr[e],t.dialogWidth,t.dialogHeight,t.winnerClick,t.winTime1,t.winner1,t.selectedPlayer,t.keyPress,t.stopHandler,t.keySeq,t.mode,t.allAvgTime));else for(e=0;e<t.players.length;e++)n.push((0,v.default)(t.Geo,t.players[e],t.Geo.topPad+e*(O.margin+O.tileHeight),t.Geo.alphaArr[e],t.Geo.colorArr[e],t.dialogWidth,t.dialogHeight,t.winner1,t.winner2,t.loser1,t.loser2,t.keyPress,t.stopHandler4P,t.keySeq,t.mode,t.handlePlacementSelect,t.players,e,t.winTime1,t.winTime2,t.loseTime1,t.loseTime2,t.gameNumber,t.bracketSpots,t.allAvgTime));return n}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(/*! react */1),h=r(l),f=n(/*! react-konva */6),d=n(/*! ./matchup/MatchupTile */170),p=r(d),m=n(/*! ./matchup/MatchupTile4P */171),v=r(m),g=n(/*! ../static/Colors */44),y=r(g),_=n(/*! ./matchup/WinChanceTile */173),b=r(_),w=n(/*! ./matchup/WinChanceTile4P */174),E=r(w),S=function(t){return Math.floor(t)+"."+(t<1?Math.round(Math.floor(10*t)):Math.round(10*(Math.floor(10*t)/10%Math.floor(t))))+Math.floor(t%.1*100)},C=128,T=192,k=192,I=200,P=30,N=0,O={mainFontfamily:"Open Sans",flagHeight:T,flagWidth:k,margin4P:16,margin:20,tileHeight:C,tileHeight4P:.75*C,topPad:86,positionFontSize:30,positionWidth:64,seedFontSize:20,nameSize:28,finishFontSize:16,paleAmber:y.default.paleAmber,deSatOrng:y.default.deSatOrng,borderColor:y.default.matchupBorder,seedColor:y.default.seedColor,statTileColor:y.default.tileColor,statColor:y.default.smokeGray,gold:y.default.gold,silver:y.default.silver,bronze:y.default.bronze,statLabelSize:16,timeCircleRadius:64,timeCircleRadius4P:64,timeFont:36,finishBox:36,flagClip:{xs:0,ys:80,x1:0,y1:C,x2:92,y2:C,x3:k,y3:28,x4:k,y4:0,x5:0,y5:0},seedShape:{xs:106,ys:C,x1:k,y1:C,x2:k,y2:42},seedPos:{x:167,y:105},alphaArr:[1,2,3,4],colorArr:["#ff6961","#61f7ff","#61ff69","#ff61f7"]},A=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={simHover:!1,subHover:!1,winner1:null,winner2:null,loser1:null,loser2:null,winTime1:0,winTime2:0,loseTime1:0,loseTime2:0,selectedPlayer:null,keyPress:null,timeElapsed:0,keySeq:0,stopCount:0},n}return a(e,t),c(e,[{key:"componentWillReceiveProps",value:function(t){u({},t)!==u({},this.props)&&(this.props=t)}},{key:"randomIntFromInterval",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"handleOnMouseOverSim",value:function(){this.setState({simHover:!0})}},{key:"handleOnMouseOutSim",value:function(){this.setState({simHover:!1})}},{key:"handleOnMouseOverSub",value:function(){this.setState({subHover:!0})}},{key:"handleOnMouseOutSub",value:function(){this.setState({subHover:!1})}},{key:"handleStartClick",value:function(t){this.setState({keyPress:t.key})," "==t.key&&0==this.state.keySeq?(this.incrementer=setInterval(function(){N+=.01},10),this.setState({keySeq:1},function(){this.setState({keyPress:null})})):" "==t.key&&1==this.state.keySeq?this.setState({keySeq:2,keyPress:null},function(){clearInterval(this.incrementer)}):" "==t.key&&2==this.state.keySeq&&(N=0,this.setState({keySeq:0,keyPress:null,winTime1:0,winTime2:0,loseTime1:0,loseTime2:0,winner1:null,winner2:null,loser1:null,loser2:null,selectedPlayer:null}))}},{key:"handleStopMainTimer",value:function(t){clearInterval(this.incrementer);var e;e=t.name==this.props.players[0].name?this.props.players[1]:this.props.players[0],this.setState({winner1:t,selectedPlayer:t,loser1:e,winTime1:Number(S(N)),keySeq:2,keyPress:null})}},{key:"handleStopTimer4P",value:function(t){var e=this;return 0==this.state.stopCount?void this.setState({winner1:t,winTime1:S(N),stopCount:1,keyPress:null}):1==this.state.stopCount&&t.name!==this.state.winner1.name?void this.setState({winner2:t,winTime2:S(N),stopCount:2,keyPress:null}):2==this.state.stopCount&&t.name!==this.state.winner1.name&&t.name!==this.state.winner2.name?(clearInterval(this.incrementer),void this.setState({loser1:t,loseTime1:S(N),keySeq:2,keyPress:null,stopCount:0},function(){return e.callBackSetLast()})):void 0}},{key:"simulateClick",value:function(){var t=Math.round(100*(this.props.players[0].timeTrial+this.randomIntFromInterval(-5,5)))/100,e=Math.round(100*(this.props.players[1].timeTrial+this.randomIntFromInterval(-5,5)))/100;if("VS"==this.props.mode)t<=e?this.setState({selectedPlayer:this.props.players[0],winner1:this.props.players[0],loser1:this.props.players[1],winTime1:t,loseTime1:e}):t>e&&this.setState({selectedPlayer:this.props.players[1],winner1:this.props.players[1],loser1:this.props.players[0],winTime1:e,loseTime1:t});else{var n=[],r={},i={},o={},a={},s=Math.round(100*(this.props.players[2].timeTrial+this.randomIntFromInterval(-5,5)))/100,u=Math.round(100*(this.props.players[3].timeTrial+this.randomIntFromInterval(-5,5)))/100;r={player:this.props.players[0],time:"BYE"==this.props.players[0].name?"-":t},i={player:this.props.players[1],time:"BYE"==this.props.players[1].name?"-":e},o={player:this.props.players[2],time:"BYE"==this.props.players[2].name?"-":s},a={player:this.props.players[3],time:"BYE"==this.props.players[3].name?"-":u},n=[r,i,o,a],n.sort(function(t,e){return"-"==t.time?1:t.time<e.time?-1:t.time>e.time?1:0}),this.setState({winner1:n[0].player,winner2:n[1].player,loser1:n[2].player,loser2:n[3].player,winTime1:n[0].time,winTime2:n[1].time,loseTime1:n[2].time,loseTime2:n[3].time})}}},{key:"handleSubmitClick",value:function(){null!==this.state.winner1&&(this.winnerClick(this.state.winner1,this.state.winner2,this.state.loser1,this.state.loser2,this.state.winTime1,this.state.winTime2,this.state.loseTime1,this.state.loseTime2),N=0,this.setState({winTime1:0,winTime2:0,loseTime1:0,loseTime2:0,winner1:null,winner2:null,loser1:null,loser2:null,selectedPlayer:null,keySeq:0,keyPress:null},function(){this.props.hideMatchup()}))}},{key:"handlePlayerSelect",value:function(t){var e;e=this.props.players[0].name==t.name?this.props.players[1]:this.props.players[0],this.setState({selectedPlayer:t,winner1:t,loser1:e})}},{key:"handlePlacementSelect",value:function(t,e){var n=this,r=0,i=[];null!==this.state.winner1?i.push(this.state.winner1):i.push({name:"pass"}),null!==this.state.winner2?i.push(this.state.winner2):i.push({name:"pass"}),null!==this.state.loser1?i.push(this.state.loser1):i.push({name:"pass"}),null!==this.state.loser2?i.push(this.state.loser2):i.push({name:"pass"});for(var o=1;o<=i.length;o++)i[o-1].name==e.name&&(r=o);if(r>=1)switch(r){case 1:this.setState({winner1:null},function(){this.handlePlacementSelect(t,e)});break;case 2:this.setState({winner2:null},function(){this.handlePlacementSelect(t,e)});break;case 3:this.setState({loser1:null},function(){this.handlePlacementSelect(t,e)});break;default:this.setState({loser2:null})}else switch(t){case"1":this.setState({winner1:e},function(){return n.callBackSetLast()});break;case"2":this.setState({winner2:e},function(){return n.callBackSetLast()});break;case"3":this.setState({loser1:e},function(){return n.callBackSetLast()});break;default:this.setState({loser2:e},function(){return n.callBackSetLast()})}}},{key:"callBackSetLast",value:function(){var t=[];null!==this.state.winner1?t.push(this.state.winner1):t.push({name:"pass"}),null!==this.state.winner2?t.push(this.state.winner2):t.push({name:"pass"}),null!==this.state.loser1?t.push(this.state.loser1):t.push({name:"pass"}),null!==this.state.loser2?t.push(this.state.loser2):t.push({name:"pass"});for(var e=0,n=0;n<t.length;n++)"pass"==t[n].name&&(e+=1);if(1==e)for(var n=0;n<this.props.players.length;n++)this.props.players[n].name!==this.state.winner1.name&&this.props.players[n].name!==this.state.winner2.name&&this.props.players[n].name!==this.state.loser1.name&&this.setState({loser2:this.props.players[n]})}},{key:"winnerClick",value:function(t,e,n,r,i,o,a,s){var u={gameNumber:this.props.gameNumber,bracketSpots:this.props.bracketSpots,byeRound:!1},c={};if("VS"==this.props.mode)u.mode="VS",u.winner1=t,u.loser1=n,this.props.players[0].name==t.name?(u.playerAtime=i,u.playerBtime=a):(u.playerBtime=i,u.playerAtime=a),c.winner1time=i,c.loser1time=a;else{u.mode="4P",u.winner1=t,u.winner2=e,u.loser1=n,u.loser2=r,c.winner1time=i,c.winner2time=o,c.loser1time=a,c.loser2time=s;for(var l=["playerAtime","playerBtime","playerCtime","playerDtime"],h=0;h<l.length;h++)this.props.players[h].name==t.name?u[l[h]]=i:this.props.players[h].name==e.name?u[l[h]]=o:this.props.players[h].name==n.name?u[l[h]]=a:this.props.players[h].name==r.name?u[l[h]]=s:u[l[h]]="-"}this.props.WinnerLoserHandler(u,c)}},{key:"render",value:function(){var t={players:this.props.players,Geo:O,dialogHeight:this.props.dialogHeight,dialogWidth:this.props.dialogWidth,winnerClick:this.handlePlayerSelect.bind(this),winTime1:this.state.winTime1,winTime2:this.state.winTime2,loseTime1:this.state.loseTime1,loseTime2:this.state.loseTime2,winner1:this.state.winner1,winner2:this.state.winner2,loser1:this.state.loser1,loser2:this.state.loser2,selectedPlayer:this.state.selectedPlayer,keyPress:this.state.keyPress,stopHandler:this.handleStopMainTimer.bind(this),keySeq:this.state.keySeq,mode:this.props.mode,handlePlacementSelect:this.handlePlacementSelect.bind(this),stopHandler4P:this.handleStopTimer4P.bind(this),gameNumber:this.props.gameNumber,bracketSpots:this.props.bracketSpots,allAvgTime:this.props.allAvgTime},e=null;return e="VS"==this.props.mode?(0,b.default)(O,this.props.players,this.props.dialogWidth,this.props.dialogHeight,this.state.winTime1,this.state.keySeq,this.state.keySeq,this.props.mode):(0,E.default)(O,this.props.players,this.props.dialogWidth,this.props.dialogHeight,this.state.winTime1,this.state.keySeq,this.state.keySeq,this.props.mode),h.default.createElement("div",null,h.default.createElement("input",{className:"controls",type:"text",id:"one",placeholder:"Controls Area",onKeyPress:this.handleStartClick.bind(this),value:this.state.keyPress}),h.default.createElement(f.Stage,{width:this.props.dialogWidth,height:this.props.dialogHeight},h.default.createElement(f.Layer,null,h.default.createElement(f.Group,null,s(t).map(function(t){return t}),e,h.default.createElement(f.Group,{onClick:this.simulateClick.bind(this),onmouseover:this.handleOnMouseOverSim.bind(this),onmouseout:this.handleOnMouseOutSim.bind(this)},h.default.createElement(f.Rect,{x:this.props.dialogWidth/4-I/2,y:this.props.dialogHeight-2*O.margin-P,width:I,height:P,fill:this.state.simHover===!0?y.default.hoverColor:"white",stroke:O.borderColor,strokeWidth:0,shadowBlur:10,shadowOpacity:.1,cornerRadius:5}),h.default.createElement(f.Text,{x:this.props.dialogWidth/4-I/2,y:this.props.dialogHeight-2*O.margin-P/2-O.seedFontSize/2,width:I,text:"simulate",align:"center",fill:"black",fontSize:O.seedFontSize,shadowBlur:2,shadowOpacity:.5}),h.default.createElement(f.Text,{x:3*this.props.dialogWidth/4-I/2,y:this.props.dialogHeight-2*O.margin-P/2-O.seedFontSize/2,width:I,text:"submit",align:"center",fill:"black",fontSize:O.seedFontSize,shadowBlur:2,shadowOpacity:.5})),h.default.createElement(f.Group,{onClick:this.handleSubmitClick.bind(this),onTap:this.handleSubmitClick.bind(this),onmouseover:this.handleOnMouseOverSub.bind(this),onmouseout:this.handleOnMouseOutSub.bind(this)},h.default.createElement(f.Rect,{x:3*this.props.dialogWidth/4-I/2,y:this.props.dialogHeight-2*O.margin-P,width:I,height:P,fill:this.state.subHover===!0?y.default.hoverColor:"white",stroke:O.borderColor,strokeWidth:0,shadowBlur:10,shadowOpacity:.1,cornerRadius:5}),h.default.createElement(f.Text,{x:3*this.props.dialogWidth/4-I/2,y:this.props.dialogHeight-2*O.margin-P/2-O.seedFontSize/2,width:I,text:"submit",align:"center",fill:"black",fontVariant:"small-caps",fontSize:O.seedFontSize,shadowBlur:2,shadowOpacity:.5}))))))}}]),e}(h.default.Component);e.default=A},/*!***************************************************!*\
  !*** ./src/components/matchup/FinishIndicator.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,s,c){function l(t,e){r(t,e)}var h=0,f=0,d=0,p=t.borderColor,m=t.borderColor,v=t.borderColor;switch(i){case o:h=1,f=0,d=0,p="black",m=t.borderColor,v=t.borderColor;break;case s:h=0,f=1,d=0,p=t.borderColor,m="black",v=t.borderColor;break;case c:h=0,f=0,d=1,p=t.borderColor,m=t.borderColor,v="black";break;default:h=0,f=0,d=0,p=t.borderColor,m=t.borderColor,v=t.borderColor}return u.default.createElement(a.Group,{x:t.positionWidth+t.margin/2},u.default.createElement(a.Rect,{y:0,width:t.finishBox,height:t.finishBox,fill:t.gold,stroke:t.borderColor,strokeWidth:1,shadowBlur:n.shadowBlur,shadowOpacity:n.shadowOpacity,shadowColor:n.shadowColor,opacity:h}),u.default.createElement(a.Text,{onClick:function(){return l("1",i)},onTap:function(){return l("1",i)},text:"1",y:(t.finishBox-t.finishFontSize)/2,fontSize:t.finishFontSize,fontStyle:"bold",shadowBlur:1,shadowOpacity:.8,fill:p,width:t.finishBox,align:"center"}),u.default.createElement(a.Rect,{y:t.finishBox+t.margin/2,width:t.finishBox,height:t.finishBox,fill:t.silver,stroke:t.borderColor,strokeWidth:1,shadowBlur:n.shadowBlur,shadowOpacity:n.shadowOpacity,shadowColor:n.shadowColor,opacity:f}),u.default.createElement(a.Text,{onClick:function(){return l("2",i)},onTap:function(){return l("2",i)},text:"2",y:t.finishBox+t.margin/2+(t.finishBox-t.finishFontSize)/2,fontSize:t.finishFontSize,fontStyle:"bold",shadowBlur:1,shadowOpacity:.8,fill:m,width:t.finishBox,align:"center"}),u.default.createElement(a.Rect,{y:2*(t.finishBox+t.margin/2),width:t.finishBox,height:t.finishBox,fill:t.bronze,stroke:t.borderColor,strokeWidth:1,shadowBlur:n.shadowBlur,shadowOpacity:n.shadowOpacity,shadowColor:n.shadowColor,opacity:d}),u.default.createElement(a.Text,{onClick:function(){return l("3",i)},onTap:function(){return l("3",i)},text:"3",y:2*(t.finishBox+t.margin/2)+(t.finishBox-t.finishFontSize)/2,fontSize:t.finishFontSize,fontStyle:"bold",shadowBlur:1,shadowOpacity:.8,fill:v,width:t.finishBox,align:"center"}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!*********************************************!*\
  !*** ./src/components/matchup/FlagImage.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=n(/*! konva */8),h=(r(l),n(/*! react-konva */6)),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={image:null},t}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this,e=new window.Image;e.src=this.props.img,e.onload=function(){t.setState({image:e})}}},{key:"componentWillReceiveProps",value:function(t){var e=this;if(t.img!==this.props.img){var n=new window.Image;n.src=t.img,n.onload=function(){e.setState({image:n})}}}},{key:"render",value:function(){var t=this,e=this.props.flagHeight,n=this.props.flagWidth;return c.default.createElement(h.Image,{y:-e/6,image:this.state.image,height:e,width:n,ref:function(e){return t.imageNode=e}})}}]),e}(c.default.Component);e.default=f},/*!***********************************************!*\
  !*** ./src/components/matchup/MatchupTile.js ***!
  \***********************************************/
function(t,e,n){"use strict";"use Strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,u,l,f,p,v,y,b,E,S,C){function T(){l(e)}var k,I=!1;k=null==v?"":v.name,y==r&&1==E&&(b(e),I=!0);var P;return P=k==e.name||1==I?{shadowBlur:10,shadowOpacity:1,shadowColor:"yellow"}:{shadowBlur:2,shadowOpacity:.5,shadowColor:"black"},a.default.createElement(s.Group,{x:t.margin,y:t.topPad+n,onClick:T,onTap:T},(0,h.default)(t,r,i,e,P,S),(0,m.default)(t,P,S),(0,c.default)(t,e,S),(0,g.default)(t,S),(0,d.default)(t,e,S),(0,w.default)(t,e,o,P,S,null,null,null,null,null,null,C),(0,_.default)(t,e,o,p))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! react-konva */6),u=n(/*! ./FlagCuts */94),c=r(u),l=n(/*! ./PositionTile */95),h=r(l),f=n(/*! ./SeedShape */96),d=r(f),p=n(/*! ./FlagClipShadow */93),m=r(p),v=n(/*! ./FlagClipBorder */92),g=r(v),y=n(/*! ./WinnerHighlight */175),_=r(y),b=n(/*! ./StatsTile */97),w=r(b)},/*!*************************************************!*\
  !*** ./src/components/matchup/MatchupTile4P.js ***!
  \*************************************************/
function(t,e,n){"use strict";"use Strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,u,l,f,p,v,y,b,E,C,k,P,N,O,A,x,R,D,M,L){var F,U,B,K=!1;F=null==l?"":l.name,U=null==f?"":f.name;var j;j=F==e.name||U==e.name||1==K?{shadowBlur:10,shadowOpacity:1,shadowColor:"yellow"}:{shadowBlur:2,shadowOpacity:.5,shadowColor:"black"},y==r&&1==E&&"BYE"!==e.name&&b(e),null!==l&&e==l&&"BYE"!==e.name?B=O:null!==f&&e==f&&"BYE"!==e.name?B=A:null!==p&&e==p&&"BYE"!==e.name?B=x:null!==v&&e==v&&"BYE"!==e.name&&(B=R);var V=e.mascot;return a.default.createElement(s.Group,{x:t.margin,y:n},(0,h.default)(t,r,i,e,j,"4P"),(0,w.default)(t,r,j,k,e,l,f,p),"BYE"==e.name?null:(0,m.default)(t,j,"4P"),"BYE"==e.name?null:(0,c.default)(t,e,"4P"),"BYE"==e.name?null:(0,g.default)(t,"4P"),(0,d.default)(t,e,"4P"),(0,S.default)(t,e,o,j,"4P",l,f,P,N,D,M,L),(0,_.default)(t,e,l,f,j),"BYE"==e.name?null:a.default.createElement(I.default,{x:o-(5*t.margin+2*t.timeCircleRadius4P-.75*t.tileHeight/2),y:.75*-t.tileHeight/6,opacity:.5,imgHeight:.75*t.tileHeight,img:"/img/divisions/"+V+".svg"}),(0,T.default)(t,o,j,B))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! react-konva */6),u=n(/*! ./FlagCuts */94),c=r(u),l=n(/*! ./PositionTile */95),h=r(l),f=n(/*! ./SeedShape */96),d=r(f),p=n(/*! ./FlagClipShadow */93),m=r(p),v=n(/*! ./FlagClipBorder */92),g=r(v),y=n(/*! ./WinnerHighlight4P */176),_=r(y),b=n(/*! ./FinishIndicator */168),w=r(b),E=n(/*! ./StatsTile */97),S=r(E),C=n(/*! ./Time */172),T=r(C),k=n(/*! ./DivisionImage */91),I=r(k)},/*!****************************************!*\
  !*** ./src/components/matchup/Time.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=2*t.timeCircleRadius4P,o=e-(4*t.margin+2*t.timeCircleRadius4P);return u.default.createElement(a.Group,{x:o},u.default.createElement(a.Text,{text:r,y:t.margin,fontSize:t.timeFont,fontStyle:"bold",fontFamily:t.mainFontfamily,shadowBlur:5,shadowOpacity:.8,fill:t.paleAmber,width:i,align:"center"}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!*************************************************!*\
  !*** ./src/components/matchup/WinChanceTile.js ***!
  \*************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,s){var c=[];console.log("playersNull",null===e[0]);for(var h=0;h<e.length;h++)c.push(e[h].avgTime);var f,d,p=n-(3*t.margin+t.timeCircleRadius),m=(0,l.default)(e,c,0,"VS"),v=(0,l.default)(e,c,1,"VS"),g=1.5*t.margin;return 0==o?(f="white",d="Ready"):1==o?(f="green",d="GO!"):(f="#fdfd96",d=i),u.default.createElement(a.Group,{x:t.margin+t.timeCircleRadius,y:r/2-2.5*t.margin},u.default.createElement(a.Rect,{width:p*m/100,height:2*t.margin,fill:t.colorArr[0],stroke:t.borderColor,strokeWidth:.5,shadowBlur:2,shadowOpacity:.5}),u.default.createElement(a.Rect,{y:3*t.margin,width:p*v/100,height:2*t.margin,fill:t.colorArr[1],stroke:t.borderColor,strokeWidth:.5,shadowBlur:2,shadowOpacity:.5}),u.default.createElement(a.Circle,{y:2.5*t.margin,radius:t.timeCircleRadius,fill:f,stroke:t.borderColor,strokeWidth:5,shadowBlur:2,shadowOpacity:.5}),u.default.createElement(a.Text,{y:(2*t.margin-g)/2,x:p*m/100+t.margin,text:m+"%",align:"left",fill:"white",fontVariant:"small-caps",fontSize:g,shadowBlur:4,shadowOpacity:.5}),u.default.createElement(a.Text,{y:3*t.margin+(2*t.margin-g)/2,x:p*v/100+t.margin,text:v+"%",align:"left",fill:"white",fontVariant:"small-caps",fontSize:g,shadowBlur:4,shadowOpacity:.5}),u.default.createElement(a.Text,{y:2.5*t.margin-g/2,x:-t.timeCircleRadius,text:d,align:"center",fill:"black",width:2*t.timeCircleRadius,fontVariant:"small-caps",fontSize:g,shadowBlur:4,shadowOpacity:.5}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s),c=n(/*! ../vsBracketMethods/baseMethods/DetermineWinChance */58),l=r(c)},/*!***************************************************!*\
  !*** ./src/components/matchup/WinChanceTile4P.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,s){var c,l,h=1.5*t.margin;return 0==o?(c="white",l="Ready"):1==o?(c="green",l="GO!"):(c="#fdfd96",l="Finish!"),u.default.createElement(a.Group,{x:n-(2*t.margin+t.timeCircleRadius4P),y:t.topPad+4*(t.margin+t.tileHeight)},u.default.createElement(a.Circle,{radius:t.timeCircleRadius4P,fill:c,stroke:t.borderColor,strokeWidth:5,shadowBlur:2,shadowOpacity:.5}),u.default.createElement(a.Text,{y:-Math.round(h/2),x:-t.timeCircleRadius,text:l,align:"center",fill:"black",width:2*t.timeCircleRadius,fontVariant:"small-caps",fontSize:Math.round(h),shadowBlur:4,shadowOpacity:.5}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!***************************************************!*\
  !*** ./src/components/matchup/WinnerHighlight.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i,o=0;return null==r?(i="",o=0):(i=r.name,o=i==e.name?1:0),u.default.createElement(a.Group,null,u.default.createElement(a.Rect,{x:-t.margin/2,width:1,height:t.tileHeight,stroke:"yellow",strokeWidth:5,shadowBlur:10,shadowOpacity:.1,opacity:o}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!*****************************************************!*\
  !*** ./src/components/matchup/WinnerHighlight4P.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){var o,s,c=0;return o=null==n?"":n.name,s=null==r?"":r.name,e.name!=o&&e.name!=s||(c=1),u.default.createElement(a.Group,null,u.default.createElement(a.Rect,{x:-t.margin/2,width:1,height:t.tileHeight,stroke:"yellow",strokeWidth:5,shadowBlur:i.shadowBlur,shadowOpacity:i.shadowOpacity,shadowColor:i.shadowColor,opacity:c}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! konva */8),a=(r(o),n(/*! react-konva */6)),s=n(/*! react */1),u=r(s)},/*!**********************************************************!*\
  !*** ./src/components/outcomes/SendLoserStartBracket.js ***!
  \**********************************************************/
function(t,e){"use strict";function n(t,e,n,r){var i=.5*(t%2==0?t:t+1)+n,o=2*(i-n)-1,a=2*(i-n);this.SetPlayerInDestGame(t,i,o,a,e,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!************************************************************!*\
  !*** ./src/components/outcomes/SendLoserStartBracket4P.js ***!
  \************************************************************/
function(t,e){"use strict";function n(t,e,n,r,i){var o=.5*(t%2==0?t:t+1)+r/2,a=2*(o-r/2)-1,s=2*(o-r/2);this.SetPlayerInDestGame4P(t,o,a,s,e,n,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!********************************************************!*\
  !*** ./src/components/outcomes/SendLoserWinBracket.js ***!
  \********************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n,r,i,o){var a;a="blind"!==h.default.seedMode||t==r-1?0:t%2==0?-1:1;var u,l,f=t+r-s.winnerBracket(r,e,i)+a,d=(0,c.default)(f,r,"loserBracket");d%2==0?(u=f-s.loserBracket(r,d,i),l=t):(u=2*(f-r+s.loserBracket(r,d,i))-1,l=2*(f-r+s.loserBracket(r,d,i))),this.SetPlayerInDestGame(t,f,u,l,n,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(/*! ../vsBracketMethods/baseMethods/NgamesInRound */33),s=i(a),u=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),c=r(u),l=n(/*! ../../static/Settings */16),h=r(l)},/*!**********************************************************!*\
  !*** ./src/components/outcomes/SendLoserWinBracket4P.js ***!
  \**********************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n,r,i,o,a){var u;u="blind"!==h.default.seedMode||t==i/2-1?0:t%2==0?-1:1;var l,f,d=t+i/2-s.winnerBracket(i,e,o)+u,p=(0,c.default)(d,i/2,"loserBracket");console.log("destGame",d),console.log("seedMode",h.default.seedMode),p%2==0?(l=d-s.loserBracket(i,p,o),f=t):(l=2*(d-i/2+s.loserBracket(i,p,o))-1,f=2*(d-i/2+s.loserBracket(i,p,o))),this.SetPlayerInDestGame4P(t,d,l,f,n,r,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(/*! ../vsBracketMethods/baseMethods/NgamesInRound */33),s=i(a),u=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),c=r(u),l=n(/*! ../../static/Settings */16),h=r(l)},/*!**********************************************************!*\
  !*** ./src/components/outcomes/SendWinnerLoseBracket.js ***!
  \**********************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n,r,i,o){var a;a=e%2==0?.5*(t%2==0?t:t+1)+r-s.loserBracket(r,e,i)/2:t+s.loserBracket(r,e,i);var u,l,h=(0,c.default)(a,r,"loserBracket");h%2==0?(u=a-s.loserBracket(r,h,i),l=a+s.loserBracket(r,h,i)-r):(u=2*(a-r+s.loserBracket(r,h,i))-1,l=2*(a-r+s.loserBracket(r,h,i))),this.SetPlayerInDestGame(t,a,u,l,n,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(/*! ../vsBracketMethods/baseMethods/NgamesInRound */33),s=i(a),u=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),c=r(u)},/*!************************************************************!*\
  !*** ./src/components/outcomes/SendWinnerLoseBracket4P.js ***!
  \************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n,r,i,o,a){var u;u=e%2==0?.5*(t%2==0?t:t+1)+i/2-s.loserBracket(i,e,o)/2:t+s.loserBracket(i,e,o);var l,h,f=(0,c.default)(u,i/2,"loserBracket");f%2==0?(l=u-s.loserBracket(i,f,o),h=u+s.loserBracket(i,f,o)-i):(l=2*(u-i/2+s.loserBracket(i,f,o))-1,h=2*(u-i/2+s.loserBracket(i,f,o))),this.SetPlayerInDestGame4P(t,u,l,h,n,r,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(/*! ../vsBracketMethods/baseMethods/NgamesInRound */33),s=i(a),u=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),c=r(u)},/*!******************************************************************!*\
  !*** ./src/components/outcomes/SendWinnerSpecialLoserBracket.js ***!
  \******************************************************************/
function(t,e){"use strict";function n(t,e,n,r){var i=n,o=n-1,a=2*n-2;this.SetPlayerInDestGame(t,i,o,a,e,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!********************************************************************!*\
  !*** ./src/components/outcomes/SendWinnerSpecialLoserBracket4P.js ***!
  \********************************************************************/
function(t,e){"use strict";function n(t,e,n,r,i){var o=r/2,a=r/2-1,s=r/2*2-2;this.SetPlayerInDestGame4P(t,o,a,s,e,n,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!*******************************************************************!*\
  !*** ./src/components/outcomes/SendWinnerSpecialWinnerBracket.js ***!
  \*******************************************************************/
function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,r,o,a){var s=2*o-1,u=2==r.losses;0==u?this.setState({masterGameObject:i({},this.state.masterGameObject,n({},s,i({},this.state.masterGameObject[s],{playerA:e,playerB:r,spotsFilled:2})))}):this.setState({masterGameObject:i({},this.state.masterGameObject,n({},s,i({},this.state.masterGameObject[s],{playerA:e,playerB:{name:"BYE",country:"",seed:"-",timeTrial:"-",wins:0,losses:0,totalTime:0,avgTime:0,splitTIme:0},spotsFilled:2,status:"COMPLETE"})))})}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=r},/*!*********************************************************!*\
  !*** ./src/components/outcomes/SendWinnerWinBracket.js ***!
  \*********************************************************/
function(t,e){"use strict";function n(t,e,n,r,i){var o=.5*((t%2==0?t:t+1)+r),a=2*o-r-1,s=2*o-r;this.SetPlayerInDestGame(t,o,a,s,n,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!***********************************************************!*\
  !*** ./src/components/outcomes/SendWinnerWinBracket4P.js ***!
  \***********************************************************/
function(t,e){"use strict";function n(t,e,n,r,i,o){var a=.5*((t%2==0?t:t+1)+i/2),s=2*a-i/2-1,u=2*a-i/2;this.SetPlayerInDestGame4P(t,a,s,u,n,r,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!********************************************************!*\
  !*** ./src/components/outcomes/SetPlayerInDestGame.js ***!
  \********************************************************/
function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,r,o,a,s){1==s?(t==r&&(this.state.masterGameObject=i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerA:i({},this.state.masterGameObject[e].playerA,{name:a})})))),t==o&&(this.state.masterGameObject=i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerB:i({},this.state.masterGameObject[e].playerA,{name:a})}))))):t==r?this.setState({masterGameObject:i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerA:a,spotsFilled:this.state.masterGameObject[e].spotsFilled+1})))}):t==o&&this.setState({masterGameObject:i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerB:a,spotsFilled:this.state.masterGameObject[e].spotsFilled+1})))})}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=r},/*!**********************************************************!*\
  !*** ./src/components/outcomes/SetPlayerInDestGame4P.js ***!
  \**********************************************************/
function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,r,o,a,s,u){1==u?(t==r&&(this.state.masterGameObject=i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerA:i({},this.state.masterGameObject[e].playerA,{name:a}),playerB:i({},this.state.masterGameObject[e].playerB,{name:s})})))),t==o&&(this.state.masterGameObject=i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerC:i({},this.state.masterGameObject[e].playerC,{name:a}),playerD:i({},this.state.masterGameObject[e].playerD,{name:s})}))))):t==r?this.setState({masterGameObject:i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerA:a,playerB:s,spotsFilled:this.state.masterGameObject[e].spotsFilled+2})))}):t==o&&this.setState({masterGameObject:i({},this.state.masterGameObject,n({},e,i({},this.state.masterGameObject[e],{playerC:a,playerD:s,spotsFilled:this.state.masterGameObject[e].spotsFilled+2})))})}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=r},/*!**************************************************!*\
  !*** ./src/components/outcomes/StartOutcomes.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o){var s;if("VS"==i){s=(0,a.default)(t,e,n);var u="Winner of "+t,c="Loser of "+t;"startBracket"==n?(this.SendWinnerWinBracket(t,s,u,e,o),this.SendLoserStartBracket(t,c,e,o)):"winnerBracket"==n?(this.SendWinnerWinBracket(t,s,u,e,o),this.SendLoserWinBracket(t,s,c,e,i,o)):"specialBracket"==n?t==e?this.SendWinnerSpecialWinnerBracket(t,u,c,e,o):this.SendWinnerSpecialLoserBracket(t,u,e,o):this.SendWinnerLoseBracket(t,s,u,e,i,o)}else{s=(0,a.default)(t,e/2,n);var l="WinnerA of "+t,h="WinnerB of "+t,f="LoserA of "+t,d="LoserB of "+t;"startBracket"==n?(this.SendWinnerWinBracket4P(t,s,l,h,e,o),this.SendLoserStartBracket4P(t,f,d,e,o)):"winnerBracket"==n?(this.SendWinnerWinBracket4P(t,s,l,h,e,o),this.SendLoserWinBracket4P(t,s,f,d,e,i,o)):"specialBracket"==n?this.SendWinnerSpecialLoserBracket4P(t,l,h,e,o):this.SendWinnerLoseBracket4P(t,s,l,h,e,i,o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),a=r(o)},/*!*******************************************************!*\
  !*** ./src/components/outcomes/WinnerLoserHandler.js ***!
  \*******************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n,r=t.gameNumber,o=t.bracketSpots,s=(0,f.default)(r,o,t.mode),c=(0,p.default)(o),h=t.mode;if("VS"==t.mode){n=(0,u.default)(r,o,s);var d=t.winner1,m=t.loser1,g=e.winner1time,y=e.loser1time;if(null!=g&&0!=g||"-"===d.timeTrial||(g=d.timeTrial),t.byeRound===!1){d.wins+=1,m.losses+=1,d.totalTime=Number(d.totalTime)+Number(g),m.totalTime=Number(m.totalTime)+Number(y),m.nLastPlace+=1,0==d.bestTime&&"-"==d.timeTrial?d.bestTime=g:d.bestTime=d.bestTime>g?g:d.bestTime,"-"!=d.timeTrial||0!=d.avgTime&&null!=d.avgTime&&"-"!=d.avgTime?(console.log("part 2"),d.avgTime=(0,l.default)(d.timeTrial,d.totalTime,d.wins,d.losses,d.nLastPlace)):(console.log("part 1"),d.avgTime=g),d.avgCupTime=Math.round(100*d.avgTime/v.default.cupsPerPerson)/100;var _=2==m.losses;"loserBracket"==s?m.maxRound=n:"specialBracket"==s&&(r==2*o-2?m.maxRound=2*(c-1):r==o?m.maxRound=2*(c-1)+1:m.maxRound=2*(c-1)+2)}this.setState({masterGameObject:a({},this.state.masterGameObject,i({},r,a({},this.state.masterGameObject[r],{status:"COMPLETE",winner:d.name,loser:m.name,loserEliminated:_,playerAtime:t.playerAtime,playerBtime:t.playerBtime})))}),"startBracket"==s?(this.SendWinnerWinBracket(r,n,d,o),this.SendLoserStartBracket(r,m,o)):"winnerBracket"==s?(this.SendWinnerWinBracket(r,n,d,o),this.SendLoserWinBracket(r,n,m,o,h)):"specialBracket"==s?r==o?this.SendWinnerSpecialWinnerBracket(r,d,m,o):this.SendWinnerSpecialLoserBracket(r,d,o):this.SendWinnerLoseBracket(r,n,d,o,h)}else{if(n=(0,u.default)(r,o/2,s),t.byeRound===!1){var b=["winner1","winner2","loser1","loser2"],w=["winner1time","winner2time","loser1time","loser2time"];t.winner1.wins+=1,t.winner2.wins+=1,t.loser1.losses+=1,t.loser2.losses+=1,t.loser2.nLastPlace+=1;for(var E=0;E<b.length;E++)"-"==e[w[E]]||null==e[w[E]]?t[b[E]].totalTime=t[b[E]].totalTime:t[b[E]].totalTime=Number(t[b[E]].totalTime)+Number(e[w[E]]),0==t[b[E]].bestTime&&"-"==t[b[E]].timeTrial?null!==e[w[E]]&&"-"!==e[w[E]]&&(t[b[E]].bestTime=e[w[E]]):null!==e[w[E]]&&"-"!==e[w[E]]&&0!==e[w[E]]&&(t[b[E]].bestTime=t[b[E]].bestTime>e[w[E]]?e[w[E]]:t[b[E]].bestTime),0==t[b[E]].avgTime||null==t[b[E]].avgTime||"-"==t[b[E]].avgTime?null!==e[w[E]]&&"-"!==e[w[E]]&&0!==e[w[E]]&&(t[b[E]].avgTime=e[w[E]]):t[b[E]].avgTime=(0,l.default)(t[b[E]].timeTrial,t[b[E]].totalTime,t[b[E]].wins,t[b[E]].losses,t[b[E]].nLastPlace),t[b[E]].index=Math.round(100*("-"==t[b[E]].timeTrial?0:t[b[E]].timeTrial)/t[b[E]].avgTime)/100,t[b[E]].avgCupTime=Math.round(100*t[b[E]].avgTime/v.default.cupsPerPerson)/100,t[b[E]].avgPlacement=Math.round(100*(E+1+(t[b[E]].wins+t[b[E]].losses-1)*("-"==t[b[E]].avgPlacement?0:t[b[E]].avgPlacement))/(t[b[E]].wins+t[b[E]].losses))/100;var S=2==t.loser1.losses,C=2==t.loser2.losses;"loserBracket"==s?(t.loser1.maxRound=n,t.loser2.maxRound=n):"specialBracket"==s&&(r==o-2?(t.loser1.maxRound=2*(c-1-1),t.loser2.maxRound=2*(c-1-1)):r==o/2&&(t.loser1.maxRound=2*(c-1-1)+1,t.loser2.maxRound=2*(c-1-1)+1,t.winner1.final4Spot=1,t.winner2.final4Spot=2,t.loser1.final4Spot=3,t.loser2.final4Spot=4))}this.setState({masterGameObject:a({},this.state.masterGameObject,i({},r,a({},this.state.masterGameObject[r],{status:"COMPLETE",winner1:t.winner1.name,winner2:t.winner2.name,loser1:t.loser1.name,loser2:t.loser2.name,loserEliminated1:S,loserEliminated2:C,playerAtime:t.playerAtime,playerBtime:t.playerBtime,playerCtime:t.playerCtime,playerDtime:t.playerDtime})))}),"startBracket"==s?(this.SendWinnerWinBracket4P(r,n,t.winner1,t.winner2,o),this.SendLoserStartBracket4P(r,t.loser1,t.loser2,o)):"winnerBracket"==s?(this.SendWinnerWinBracket4P(r,n,t.winner1,t.winner2,o),this.SendLoserWinBracket4P(r,n,t.loser1,t.loser2,o,h)):"specialBracket"==s?this.SendWinnerSpecialLoserBracket4P(r,t.winner1,t.winner2,o):this.SendWinnerLoseBracket4P(r,n,t.winner1,t.winner2,o,h)}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=o;var s=n(/*! ../vsBracketMethods/higherOrderMethods/DetermineRoundNumber */25),u=r(s),c=n(/*! ../vsBracketMethods/baseMethods/DetermineAvgTime */56),l=r(c),h=n(/*! ../vsBracketMethods/baseMethods/DetermineBracket */98),f=r(h),d=n(/*! ../vsBracketMethods/baseMethods/DetermineBracketPower */57),p=r(d),m=n(/*! ../../static/Settings */16),v=r(m)},/*!*******************************************************!*\
  !*** ./src/components/sideChart/AvgTimeSplitChart.js ***!
  \*******************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=[],r=[],i=[];for(var o in t)"BYE"!==t[o].name&&(r.push(t[o].country),r.push(t[o].name),r.push(Math.round(100*(t[o].avgTime-e))/100),r.push(t[o].seed),r.push(t[o].losses),n.push(r),r=[]);n.sort(function(t,e){var n,r;return n=t[2],r=e[2],n<r?-11:n>r?1:0});for(var s=[],u={background:"red"},c=0;c<n.length;c++)s.push(a.default.createElement("div",{className:"rank"},c+1)),s.push(a.default.createElement("div",{className:"flag"},a.default.createElement("img",{src:n[c][0].flagPathSVG,width:32}))),s.push(a.default.createElement("div",{className:"seed"},n[c][3])),s.push(a.default.createElement("div",{className:"player-name"},n[c][1])),s.push(a.default.createElement("div",{className:"time"},n[c][2])),i.push(a.default.createElement("div",{className:"chart-row",style:2==n[c][2]?u:null},s)),s=[];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o)},/*!******************************************************!*\
  !*** ./src/components/sideChart/ChartDataManager.js ***!
  \******************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(/*! react */1),l=r(c),h=n(/*! ./StackChartData */198),f=r(h),d=n(/*! ./PlaceChart */196),p=r(d),m=n(/*! ./AvgTimeSplitChart */192),v=r(m),g=n(/*! ./SeedChart */197),y=r(g),_=[],b=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.StackChartData=f.default.bind(n),n.PlaceChart=p.default.bind(n),n.AvgTimeSplitChart=v.default.bind(n),n.SeedChart=y.default.bind(n),n}return a(e,t),u(e,[{key:"ScrapeStats",value:function(t,e){var n=[];return"Place"==e?n=this.PlaceChart(this.props.seededArray,this.props.mode):"% Chance"==e||(n="Median Time Split"==e?this.AvgTimeSplitChart(this.props.seededArray,this.props.allAvgTime):"Seed"==e?this.SeedChart(this.props.seededArray):this.StackChartData(this.props.seededArray,this.props.query)),n}},{key:"componentWillReceiveProps",value:function(t){s({},t)!==s({},this.props)&&this.ScrapeStats(t.seededArray,t.query)}},{key:"render",value:function(){return _=this.ScrapeStats(this.props.seededArray,this.props.query),l.default.createElement("div",{className:"chart-main"},_.map(function(t){return t}))}}]),e}(l.default.Component);e.default=b},/*!**************************************************!*\
  !*** ./src/components/sideChart/ChartHeaders.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(/*! react */1),c=r(u),l=[],h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.query;return l="Place"==t?[c.default.createElement("div",{className:"rank"},"Place"),c.default.createElement("div",{className:"flag"}),c.default.createElement("div",{className:"time"},"Name"),c.default.createElement("div",{className:"time"},"W"),c.default.createElement("div",{className:"time"},"L")]:"% Chance"==t?[c.default.createElement("div",{className:"rank"},"Chance"),c.default.createElement("div",{className:"flag"}),c.default.createElement("div",{className:"player-name"},"Name"),c.default.createElement("div",{className:"time"},"Seed")]:"Median Time Split"==t?[c.default.createElement("div",{className:"rank"},"Rank"),c.default.createElement("div",{className:"flag"}),c.default.createElement("div",{className:"player-name"},"Name"),c.default.createElement("div",{className:"time"},"Split")]:"Seed"==t?[c.default.createElement("div",{className:"rank"},"Seed"),c.default.createElement("div",{className:"flag"}),c.default.createElement("div",{className:"player-name"},"Name"),c.default.createElement("div",{className:"time"})]:[c.default.createElement("div",{className:"rank"},"Rank"),c.default.createElement("div",{className:"flag"}),c.default.createElement("div",{className:"player-name"},"Name"),c.default.createElement("div",{className:"time"},"Time")],c.default.createElement("div",{className:"chart-header"},l.map(function(t){return t}))}}]),e}(c.default.Component);e.default=h},/*!************************************************!*\
  !*** ./src/components/sideChart/ChartTitle.js ***!
  \************************************************/
function(t,e){"use strict";function n(t,e){switch(t){case"Seed":return"Seed";case"Time Trial":return"Time Trial";case"Best Times":return"Best Times";case"Median Time Split":return"Median = "+e;case"Avg Times":return"Avg Times";case"Cup Time":return"Avg Cup Time";case"W & L":return"Wins & Losses";case"Place":return"Place";case"Avg Place":return"Avg Place";default:return"Time Trial"}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!************************************************!*\
  !*** ./src/components/sideChart/PlaceChart.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=[],r=[],i=[];for(var o in t)"BYE"!==t[o].name&&(r.push(t[o].country),r.push(t[o].wins),r.push(t[o].losses),r.push(t[o].seed),r.push(t[o].name),r.push(t[o].maxRound),r.push(t[o].final4Spot),"VS"!==e&&r.push(t[o].avgPlacement),n.push(r),r=[]);n.sort(function(t,n){if(t[6]<n[6])return-1;if(t[6]>n[6])return 1;if(t[2]<n[2])return-1;if(t[2]>n[2])return 1;if(t[5]<n[5])return 1;if(t[5]>n[5])return-1;if("VS"!==e){if(t[7]<n[7])return-1;if(t[7]>n[7])return 1}return t[3]<n[3]?-1:t[3]>n[3]?1:0});for(var s=[],u={width:"60px"},c={background:"red"},l=0;l<n.length;l++)s.push(a.default.createElement("div",{className:"rank"},l+1)),s.push(a.default.createElement("div",{className:"flag"},a.default.createElement("img",{src:n[l][0].flagPathSVG,width:32}))),s.push(a.default.createElement("div",{className:"seed"},n[l][3])),s.push(a.default.createElement("div",{className:"time",style:u},n[l][4])),s.push(a.default.createElement("div",{className:"time"},n[l][1])),s.push(a.default.createElement("div",{className:"time"},n[l][2])),i.push(a.default.createElement("div",{className:"chart-row",style:2==n[l][2]?c:null},s)),s=[];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o)},/*!***********************************************!*\
  !*** ./src/components/sideChart/SeedChart.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=[],n=[],r=[];for(var i in t)"BYE"!==t[i].name&&(n.push(t[i].country),n.push(t[i].name),n.push(t[i].seed),e.push(n),n=[]);e.sort(function(t,e){var n,r;return n=t[2],r=e[2],n<r?-1:n>r?1:0});for(var o=[],s=0;s<e.length;s++)o.push(a.default.createElement("div",{className:"rank"},s+1)),o.push(a.default.createElement("div",{className:"flag"},a.default.createElement("img",{src:e[s][0].flagPathSVG,width:32}))),o.push(a.default.createElement("div",{className:"player-name"},e[s][1])),o.push(a.default.createElement("div",{className:"time"})),r.push(a.default.createElement("div",{className:"chart-row"},o)),o=[];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o)},/*!****************************************************!*\
  !*** ./src/components/sideChart/StackChartData.js ***!
  \****************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=[],r=[],i=[];switch(e){case"Time Trial":e="timeTrial";break;case"Best Times":e="bestTime";break;case"Avg Times":e="avgTime";break;case"Cup Time":e="avgCupTime";break;case"Avg Place":e="avgPlacement";break;default:e="timeTrial"}for(var o in t)0===t[o][e]||isNaN(t[o][e])||(r.push(t[o].country),r.push(t[o].name),r.push(t[o][e]),r.push(t[o].seed),r.push(t[o].losses),n.push(r),r=[]);n.sort(function(t,e){var n,r;return n=t[2],r=e[2],n<r?-1:n>r?1:0});for(var s=[],u={background:"red"},c=0;c<n.length;c++)s.push(a.default.createElement("div",{className:"rank"},c+1)),s.push(a.default.createElement("div",{className:"flag"},a.default.createElement("img",{src:n[c][0].flagPathSVG,width:32}))),s.push(a.default.createElement("div",{className:"seed"},n[c][3])),s.push(a.default.createElement("div",{className:"player-name"},n[c][1])),s.push(a.default.createElement("div",{className:"time"},n[c][2])),i.push(a.default.createElement("div",{className:"chart-row",style:2==n[c][4]?u:null},s)),s=[];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o)},/*!*****************************************************!*\
  !*** ./src/components/viewMethods/StabilizeView.js ***!
  \*****************************************************/
function(t,e){"use strict";function n(t){var e={x:t.target.getStage().getPointerPosition().x-t.target.getStage().x(),y:t.target.getStage().getPointerPosition().y-t.target.getStage().y()};return{x:-(e.x-t.target.getStage().getPointerPosition().x),y:-(e.y-t.target.getStage().getPointerPosition().y)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!*******************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/GetRootVal.js ***!
  \*******************************************************************/
function(t,e){"use strict";function n(t){return Array.isArray(t)?n(t[0]):t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!*******************************************************************!*\
  !*** ./src/components/vsBracketMethods/baseMethods/PopMastArr.js ***!
  \*******************************************************************/
function(t,e){"use strict";function n(t,e,r){e=e||[];for(var i in t)Array.isArray(t[i])?n(t[i],e,r):e.push(t[i]);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},/*!**************************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/CreateGmsFinalsBracket.js ***!
  \**************************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=t.gameWidth,u=t.gameHeight,l=t.boardHeight,f=t.winnerArr,p=t.loserArr,m=t.vizGeo,v=t.bracketSpots,g=[];for(o=0;o<1;o++)a=(f.length+p.length+1)*(i+m.horizSpace)+m.horizSpace+(i+m.horizSpace)*o,s=l/2-u/2,g.push(c.default.createElement(h.default,{gProps:(0,d.default)(t,e,n,v,m,a,s,r)})),e+=1;return{finalsBracket:g,gameCounter:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o,a,s,u=n(/*! react */1),c=r(u),l=n(/*! ../../GameComponent */42),h=r(l),f=n(/*! ../baseMethods/GameComponentProps */43),d=r(f)},/*!************************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/CreateGmsLoseBracket.js ***!
  \************************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=t.gameWidth,l=t.gameHeight,f=t.boardHeight,p=t.loserArr,v=t.winnerArr,y=t.vizGeo,b=t.bracketPower,w=t.bracketSpots,E=[],S=[];for(o=0;o<p.length;o++)for(a=0;a<p[o];a++){s=(l+y.vertSpace)*Math.pow(2,o%2==0?o/2+1:(o+1)/2),u=2*(b-("VS"==r?0:1)-1)*y.horizSpace+(2*(b-("VS"==r?0:1)-1)-1)*i-o*(i+y.horizSpace),c=f-(p[o]-a)*(l+y.vertSpace)*Math.pow(2,o%2==0?o/2+1:(o+1)/2)-y.vertSpace+((l+y.vertSpace)*Math.pow(2,o%2==0?o/2+1:(o+1)/2)-y.vertSpace)/2-l/2,E.push(h.default.createElement(d.default,{gProps:(0,m.default)(t,e,n,w,y,u,c,r)}));var C=a%2==0?c+(l+s)/2:c+(l-s)/2;if(o%2==0&&(C=c+l/2),o==p.length-1){var T=u+(p.length+v.length+1)*(i+y.horizSpace)-y.horizSpace-i/2;S.push(h.default.createElement(_.default,{xs:u+i/2,ys:c,x1:u+i/2,y1:y.vertSpace/2,x2:T,y2:y.vertSpace/2,x3:T,y3:c,radius:y.radius,color:"#121212",stroke:4,direction:"clockwise",arc1s:Math.PI,arc1e:1.5*Math.PI,arc2s:1.5*Math.PI,arc2e:0,gameCounter:e,bracketSpots:w,mode:r,class:"final",dashEnabled:!1}))}else S.push(h.default.createElement(g.default,{xs:u,ys:c+l/2,xe:u-y.horizSpace,ye:C,color:"#121212",stroke:4,dashEnabled:!1}));e+=1}return{loserBracket:E,bezArr:S,gameCounter:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o,a,s,u,c,l=n(/*! react */1),h=r(l),f=n(/*! ../../GameComponent */42),d=r(f),p=n(/*! ../baseMethods/GameComponentProps */43),m=r(p),v=n(/*! ../../BezierCurves */85),g=r(v),y=n(/*! ../../BracketLine */86),_=r(y)},/*!******************************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/CreateGmsSpecialWinBracket.js ***!
  \******************************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=t.gameWidth,o=t.gameHeight,s=t.boardHeight,c=t.winnerArr,h=t.vizGeo,f=t.bracketPower,d=t.bracketSpots,p=(c.length+2*(f-("VS"==r?0:1)-1))*(i+h.horizSpace)+h.horizSpace,m=(s-o)/2;return a.default.createElement(u.default,{gProps:(0,l.default)(t,e,n,d,h,p,m,r)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! react */1),a=r(o),s=n(/*! ../../GameComponent */42),u=r(s),c=n(/*! ../baseMethods/GameComponentProps */43),l=r(c)},/*!***********************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/CreateGmsWinBracket.js ***!
  \***********************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=t.gameWidth,h=t.gameHeight,d=t.boardHeight,m=t.winnerArr,g=t.vizGeo,_=t.bracketPower,w=t.bracketSpots,C=[],T=[];for(o=0;o<m.length;o++)for(a=0;a<m[o];a++){s=(h+g.vertSpace)*Math.pow(2,o),u=((h+g.vertSpace)*Math.pow(2,o)-g.vertSpace)/2,c=(o+2*(_-("VS"==r?0:1)-1))*(i+g.horizSpace)+g.horizSpace,l=d-(m[o]-a)*(h+g.vertSpace)*Math.pow(2,o)-g.vertSpace+u-h/2,C.push(f.default.createElement(p.default,{gProps:(0,v.default)(t,e,n,w,g,c,l,r)}));var k=a%2==0?l+(h+s)/2:l+(h-s)/2;if(o==m.length-1&&a==m[o]-1&&(k=l+h/2),0==o&&T.push(f.default.createElement(y.default,{xs:c,ys:l+h/2,xe:c-g.horizSpace,ye:k,color:"red",stroke:4,dashEnabled:!0})),0!==o){var I,P,N,O,A,x,R,D,M;"blind"!==E.default.seedMode||e==w/("VS"==r?1:2)-1?(I=l+h,P=l+(h+s)/2,N=l+(h+s)/2,O=l+h,A="clockwise",x=0,D=.5*Math.PI):e%2==0?(I=l,P=l+h/2-s/2,N=l+h/2-s/2,O=l+(h-s),A="counter-clockwise",x=1.5*Math.PI,D=.5*Math.PI):(I=l+h,P=l+(h+s)/2,N=l+(h+s)/2,O=l+s,A="clockwise",x=2*Math.PI,D=Math.PI);var L=c-3*o*(i+g.horizSpace)+i/2;T.push(f.default.createElement(b.default,{xs:c+i/2,ys:I,x1:c+i/2,y1:P,x2:L,y2:N,x3:L,y3:O,radius:g.radius,color:g.lColAr[S],stroke:8*o,direction:A,arc1s:x,arc1e:R,arc2s:D,arc2e:M,gameCounter:e,bracketSpots:w,mode:r,class:"non-final",dashEnabled:!0}))}T.push(f.default.createElement(y.default,{xs:c+i,ys:l+h/2,xe:c+i+g.horizSpace,ye:k,color:"#121212",stroke:4,bracket:n[e].bracket,dashEnabled:!1})),e+=1,S+=1}return S=0,{winnerBracket:C,bezArr:T,gameCounter:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o,a,s,u,c,l,h=n(/*! react */1),f=r(h),d=n(/*! ../../GameComponent */42),p=r(d),m=n(/*! ../baseMethods/GameComponentProps */43),v=r(m),g=n(/*! ../../BezierCurves */85),y=r(g),_=n(/*! ../../BracketLine */86),b=r(_),w=n(/*! ../../../static/Settings */16),E=r(w),S=0},/*!**************************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/CreateMasterGameObject.js ***!
  \**************************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){for(var r={},i={name:"",country:"",seed:"",timeTrial:0,wins:0,losses:0,totalTime:0,avgTime:0,splitTime:0,bestTime:0,index:1,maxRound:0},o=1;o<=t;o++)"VS"==n?r[o]={gameNumber:o,playerA:i,playerB:i,bracket:(0,a.default)(o,e,n),status:"",spotsFilled:0,winner:"",loser:"",loserEliminated:!1,playerAtime:0,playerBtime:0,gameTitle:null}:r[o]={gameNumber:o,playerA:i,playerB:i,playerC:i,playerD:i,bracket:(0,a.default)(o,e,n),status:"",spotsFilled:0,winner1:"",winner2:"",loser1:"",loser2:"",loser1Eliminated:!1,loser2Eliminated:!1,playerAtime:0,playerBtime:0,playerCtime:0,playerDtime:0,gameTitle:null};return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! ../baseMethods/DetermineBracket */98),a=r(o)},/*!*********************************************************************************!*\
  !*** ./src/components/vsBracketMethods/higherOrderMethods/PropogateSeedsArr.js ***!
  \*********************************************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){for(var r=[],i=[],o=1;o<=n;o++){for(var s=Math.pow(2,n-o+1)+1,c=1;c<=Math.pow(2,n)/Math.pow(2,o);c++)if(1==o)r.push([c,s-c]),i=r;else for(var l in r)s-(0,u.default)(r[c-1])==(0,u.default)(r[l])&&i.push([r[c-1],r[l]]);if(o==n)return(0,a.default)(i,e,t);r=i,i=[]}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(/*! ../baseMethods/PopMastArr */201),a=r(o),s=n(/*! ../baseMethods/GetRootVal */200),u=r(s)},/*!*******************************!*\
  !*** ./src/data/demoNames.js ***!
  \*******************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["Chana Cranston","Mark Morgan","Lillie Lizaola","Lorenza Leyva","Anton Ayres","Stan Stefaniak","Tinisha Ton","Loura Lord","Garnet Graber","Karly Kidder","Bertram Britt","Tabitha Tirado","Ashleigh Akana","Janet Jefcoat","Bonnie Brow","Joy Jarman","Nu Neitzel","Ramon Rahe","Melita Mckeen","Lakendra Laverdiere","Harriett Heffley","Josette Jeanbart","Racquel Riera","Odis Ostlund","Ermelinda Espy","Willard Woodby","Vannesa Vogan","Fairy Farnes","Ghislaine Greco","Bart Bondy","Nell Neyman","Annamaria Ahmad","Gino Garmany","Carroll Combs","Matilda Mallow","Vida Vann","Lucienne Landin","Golda Grammer","Adalberto Archuleta","Chanell Chow","Juliann Justiniano","Columbus Crail","Salome Scheerer","Spring Sack","Natalya Nuckles","Zenaida Zachery","Bronwyn Brunetti","Noah Newton","Teisha Tang","Shanti Scoby"];e.default=n},/*!***********************************!*\
  !*** ./src/data/divisionNames.js ***!
  \***********************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Gold:{name1:"Spades",name2:"Clubs"},Black:{name1:"Hearts",name2:"Diamonds"}};e.default=n},/*!*************************!*\
  !*** ./src/firebase.js ***!
  \*************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! firebase */228),o=r(i),a={apiKey:"AIzaSyDU1zKwkZuQz2_-4p8HITJgAB2oSbvDZG4",authDomain:"bracket-viewer.firebaseapp.com",databaseURL:"https://bracket-viewer.firebaseio.com",projectId:"bracket-viewer",storageBucket:"bracket-viewer.appspot.com",messagingSenderId:"475580612732"};o.default.initializeApp(a),e.default=o.default},/*!***********************!*\
  !*** ./src/routes.js ***!
  \***********************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! react */1),o=r(i),a=n(/*! react-router */39),s=n(/*! ./components/Layout */159),u=r(s),c=n(/*! ./components/IndexPage */158),l=r(c),h=n(/*! ./components/NotFoundPage */160),f=r(h),d=n(/*! ./components/VsTournament */90),p=r(d),m=o.default.createElement(a.Route,{path:"/",component:u.default},o.default.createElement(a.IndexRoute,{component:l.default}),o.default.createElement(a.Route,{path:"VsTournament",component:p.default}),o.default.createElement(a.Route,{path:"*",component:f.default}));e.default=m},/*!***************************************!*\
  !*** ./~/create-react-class/index.js ***!
  \***************************************/
function(t,e,n){"use strict";var r=n(/*! react */1),i=n(/*! ./factory */99);if("undefined"==typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;t.exports=i(r.Component,r.isValidElement,o)},/*!*******************************!*\
  !*** ./~/deep-equal/index.js ***!
  \*******************************/
function(t,e,n){function r(t){return null===t||void 0===t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function o(t,e,n){var o,l;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return!!u(e)&&(t=a.call(t),e=a.call(e),c(t,e,n));if(i(t)){if(!i(e))return!1;if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}try{var h=s(t),f=s(e)}catch(t){return!1}if(h.length!=f.length)return!1;for(h.sort(),f.sort(),o=h.length-1;o>=0;o--)if(h[o]!=f[o])return!1;for(o=h.length-1;o>=0;o--)if(l=h[o],!c(t[l],e[l],n))return!1;return typeof t==typeof e}var a=Array.prototype.slice,s=n(/*! ./lib/keys.js */215),u=n(/*! ./lib/is_arguments.js */214),c=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:o(t,e,n))}},/*!******************************************!*\
  !*** ./~/deep-equal/lib/is_arguments.js ***!
  \******************************************/
function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=i?n:r,e.supported=n,e.unsupported=r},/*!**********************************!*\
  !*** ./~/deep-equal/lib/keys.js ***!
  \**********************************/
function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},/*!********************************!*\
  !*** ./~/fbjs/lib/camelize.js ***!
  \********************************/
function(t,e){"use strict";function n(t){return t.replace(r,function(t,e){return e.toUpperCase()})}var r=/-(.)/g;t.exports=n},/*!*****************************************!*\
  !*** ./~/fbjs/lib/camelizeStyleName.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(/*! ./camelize */216),o=/^-ms-/;t.exports=r},/*!************************************!*\
  !*** ./~/fbjs/lib/containsNode.js ***!
  \************************************/
function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(/*! ./isTextNode */226);t.exports=r},/*!********************************************!*\
  !*** ./~/fbjs/lib/createArrayFromMixed.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?a(!1):void 0,"number"!=typeof e?a(!1):void 0,0===e||e-1 in t?void 0:a(!1),"function"==typeof t.callee?a(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(t){}for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return i(t)?Array.isArray(t)?t.slice():r(t):[t]}var a=n(/*! ./invariant */2);t.exports=o},/*!*********************************************!*\
  !*** ./~/fbjs/lib/createNodesFromMarkup.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){var e=t.match(l);return e&&e[1].toLowerCase()}function i(t,e){var n=c;c?void 0:u(!1);var i=r(t),o=i&&s(i);if(o){n.innerHTML=o[1]+t+o[2];for(var l=o[0];l--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e?void 0:u(!1),a(h).forEach(e));for(var f=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return f}var o=n(/*! ./ExecutionEnvironment */11),a=n(/*! ./createArrayFromMixed */219),s=n(/*! ./getMarkupWrap */221),u=n(/*! ./invariant */2),c=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i},/*!*************************************!*\
  !*** ./~/fbjs/lib/getMarkupWrap.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return a?void 0:o(!1),f.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?f[t]:null}var i=n(/*! ./ExecutionEnvironment */11),o=n(/*! ./invariant */2),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){f[t]=h,s[t]=!0}),t.exports=r},/*!**************************************************!*\
  !*** ./~/fbjs/lib/getUnboundedScrollPosition.js ***!
  \**************************************************/
function(t,e){"use strict";function n(t){return t.Window&&t instanceof t.Window?{x:t.pageXOffset||t.document.documentElement.scrollLeft,y:t.pageYOffset||t.document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},/*!*********************************!*\
  !*** ./~/fbjs/lib/hyphenate.js ***!
  \*********************************/
function(t,e){"use strict";function n(t){return t.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},/*!******************************************!*\
  !*** ./~/fbjs/lib/hyphenateStyleName.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(/*! ./hyphenate */223),o=/^ms-/;t.exports=r},/*!******************************!*\
  !*** ./~/fbjs/lib/isNode.js ***!
  \******************************/
function(t,e){"use strict";function n(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"==typeof n.Node?t instanceof n.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},/*!**********************************!*\
  !*** ./~/fbjs/lib/isTextNode.js ***!
  \**********************************/
function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(/*! ./isNode */225);t.exports=r},/*!*****************************************!*\
  !*** ./~/fbjs/lib/memoizeStringOnly.js ***!
  \*****************************************/
function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},/*!**************************************!*\
  !*** ./~/firebase/dist/index.cjs.js ***!
  \**************************************/
function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}n(/*! @firebase/polyfill */150);var i=r(n(/*! @firebase/app */20));n(/*! @firebase/auth */145),n(/*! @firebase/database */146),n(/*! @firebase/firestore */147),n(/*! @firebase/functions */148),n(/*! @firebase/messaging */149),n(/*! @firebase/storage */152),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),t.exports=i},/*!*************************************!*\
  !*** ./~/history/lib/AsyncUtils.js ***!
  \*************************************/
function(t,e){"use strict";function n(t,e,n){function i(){return s=!0,u?void(l=[].concat(r.call(arguments))):void n.apply(this,arguments)}function o(){if(!s&&(c=!0,!u)){for(u=!0;!s&&a<t&&c;)c=!1,e.call(this,a++,o,i);return u=!1,s?void n.apply(this,l):void(a>=t&&c&&(s=!0,n()))}}var a=0,s=!1,u=!1,c=!1,l=void 0;o()}e.__esModule=!0;var r=Array.prototype.slice;e.loopAsync=n},/*!***********************************************!*\
  !*** ./~/history/lib/createBrowserHistory.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){function t(t){try{t=t||window.history.state||{}}catch(e){t={}}var e=h.getWindowPath(),n=t,r=n.key,i=void 0;r?i=f.readState(r):(i=null,r=_.createKey(),g&&window.history.replaceState(o({},t,{key:r}),null));var a=c.parsePath(e);return _.createLocation(o({},a,{state:i}),void 0,r)}function e(e){function n(e){void 0!==e.state&&r(t(e.state))}var r=e.transitionTo;return h.addEventListener(window,"popstate",n),function(){h.removeEventListener(window,"popstate",n)}}function n(t){var e=t.basename,n=t.pathname,r=t.search,i=t.hash,o=t.state,a=t.action,s=t.key;if(a!==u.POP){f.saveState(s,o);var c=(e||"")+n+r+i,l={key:s};if(a===u.PUSH){if(y)return window.location.href=c,!1;window.history.pushState(l,null,c)}else{if(y)return window.location.replace(c),!1;window.history.replaceState(l,null,c)}}}function r(t){1===++b&&(w=e(_));var n=_.listenBefore(t);return function(){n(),0===--b&&w()}}function i(t){1===++b&&(w=e(_));var n=_.listen(t);return function(){n(),0===--b&&w()}}function a(t){1===++b&&(w=e(_)),_.registerTransitionHook(t)}function d(t){_.unregisterTransitionHook(t),0===--b&&w()}var m=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l.canUseDOM?void 0:s.default(!1);var v=m.forceRefresh,g=h.supportsHistory(),y=!g||v,_=p.default(o({},m,{getCurrentLocation:t,finishTransition:n,saveState:f.saveState})),b=0,w=void 0;return o({},_,{listenBefore:r,listen:i,registerTransitionHook:a,unregisterTransitionHook:d})}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(/*! invariant */10),s=r(a),u=n(/*! ./Actions */26),c=n(/*! ./PathUtils */21),l=n(/*! ./ExecutionEnvironment */45),h=n(/*! ./DOMUtils */61),f=n(/*! ./DOMStateStorage */103),d=n(/*! ./createDOMHistory */104),p=r(d);e.default=i,t.exports=e.default},/*!*****************************************!*\
  !*** ./~/history/lib/createLocation.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],e=arguments.length<=1||void 0===arguments[1]?s.POP:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3];"string"==typeof t&&(t=u.parsePath(t)),"object"==typeof e&&(t=o({},t,{state:e}),e=n||s.POP,n=r);var i=t.pathname||"/",a=t.search||"",c=t.hash||"",l=t.state||null;return{pathname:i,search:a,hash:c,state:l,action:e,key:n}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(/*! warning */15),s=(r(a),n(/*! ./Actions */26)),u=n(/*! ./PathUtils */21);e.default=i,t.exports=e.default},/*!**********************************************!*\
  !*** ./~/history/lib/createMemoryHistory.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.filter(function(t){return t.state}).reduce(function(t,e){return t[e.key]=e.state,t},{})}function o(){function t(t,e){g[t]=e}function e(t){return g[t]}function n(){var t=m[v],n=t.basename,r=t.pathname,i=t.search,o=(n||"")+r+(i||""),s=void 0,u=void 0;t.key?(s=t.key,u=e(s)):(s=f.createKey(),u=null,t.key=s);var c=l.parsePath(o);return f.createLocation(a({},c,{state:u}),void 0,s)}function r(t){var e=v+t;return e>=0&&e<m.length}function o(t){if(t){if(!r(t))return;v+=t;var e=n();f.transitionTo(a({},e,{action:h.POP}))}}function s(e){switch(e.action){case h.PUSH:v+=1,v<m.length&&m.splice(v),m.push(e),t(e.key,e.state);break;case h.REPLACE:m[v]=e,t(e.key,e.state)}}var u=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(u)?u={entries:u}:"string"==typeof u&&(u={entries:[u]});var f=d.default(a({},u,{getCurrentLocation:n,finishTransition:s,saveState:t,go:o})),p=u,m=p.entries,v=p.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(t){var e=f.createKey();return"string"==typeof t?{pathname:t,key:e}:"object"==typeof t&&t?a({},t,{key:e}):void c.default(!1)}),null==v?v=m.length-1:v>=0&&v<m.length?void 0:c.default(!1);var g=i(m);return f}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(/*! warning */15),u=(r(s),n(/*! invariant */10)),c=r(u),l=n(/*! ./PathUtils */21),h=n(/*! ./Actions */26),f=n(/*! ./createHistory */106),d=r(f);e.default=o,t.exports=e.default},/*!********************************************!*\
  !*** ./~/hoist-non-react-statics/index.js ***!
  \********************************************/
function(t,e){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;t.exports=function(t,e,o){if("string"!=typeof e){var a=Object.getOwnPropertyNames(e);i&&(a=a.concat(Object.getOwnPropertySymbols(e)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||o&&o[a[s]]))try{t[a[s]]=e[a[s]]}catch(t){}}return t}},/*!****************************************!*\
  !*** ./~/prop-types/checkPropTypes.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t,e,n,r,i){}t.exports=r},/*!**************************************************!*\
  !*** ./~/prop-types/factoryWithThrowingShims.js ***!
  \**************************************************/
function(t,e,n){"use strict";var r=n(/*! fbjs/lib/emptyFunction */12),i=n(/*! fbjs/lib/invariant */2),o=n(/*! ./lib/ReactPropTypesSecret */109);t.exports=function(){function t(t,e,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},/*!*************************************************!*\
  !*** ./~/prop-types/factoryWithTypeCheckers.js ***!
  \*************************************************/
function(t,e,n){"use strict";var r=n(/*! fbjs/lib/emptyFunction */12),i=n(/*! fbjs/lib/invariant */2),o=n(/*! fbjs/lib/warning */3),a=n(/*! object-assign */5),s=n(/*! ./lib/ReactPropTypesSecret */109),u=n(/*! ./checkPropTypes */234);t.exports=function(t,e){function n(t){var e=t&&(N&&t[N]||t[O]);if("function"==typeof e)return e}function c(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function l(t){this.message=t,this.stack=""}function h(t){function n(n,r,o,a,u,c,h){if(a=a||A,c=c||o,h!==s)if(e)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[o]?n?new l(null===r[o]?"The "+u+" `"+c+"` is marked as required "+("in `"+a+"`, but its value is `null`."):"The "+u+" `"+c+"` is marked as required in "+("`"+a+"`, but its value is `undefined`.")):null:t(r,o,a,u,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(t){function e(e,n,r,i,o,a){var s=e[n],u=T(s);if(u!==t){var c=k(s);return new l("Invalid "+i+" `"+o+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return h(e)}function d(){return h(r.thatReturnsNull)}function p(t){function e(e,n,r,i,o){if("function"!=typeof t)return new l("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=e[n];if(!Array.isArray(a)){var u=T(a);return new l("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<a.length;c++){var h=t(a,c,r,i,o+"["+c+"]",s);if(h instanceof Error)return h}return null}return h(e)}function m(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){var s=T(a);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return h(e)}function v(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||A,s=P(e[n]);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return h(e)}function g(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(c(a,t[s]))return null;var u=JSON.stringify(t);return new l("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return Array.isArray(t)?h(e):r.thatReturnsNull}function y(t){function e(e,n,r,i,o){if("function"!=typeof t)return new l("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=e[n],u=T(a);if("object"!==u)return new l("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var c in a)if(a.hasOwnProperty(c)){var h=t(a,c,r,i,o+"."+c,s);if(h instanceof Error)return h}return null}return h(e)}function _(t){function e(e,n,r,i,o){for(var a=0;a<t.length;a++){var u=t[a];if(null==u(e,n,r,i,o,s))return null}return new l("Invalid "+i+" `"+o+"` supplied to "+("`"+r+"`."))}if(!Array.isArray(t))return r.thatReturnsNull;for(var n=0;n<t.length;n++){var i=t[n];if("function"!=typeof i)return o(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",I(i),n),r.thatReturnsNull}return h(e)}function b(){function t(t,e,n,r,i){return S(t[e])?null:new l("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return h(t)}function w(t){function e(e,n,r,i,o){var a=e[n],u=T(a);if("object"!==u)return new l("Invalid "+i+" `"+o+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var c in t){var h=t[c];if(h){var f=h(a,c,r,i,o+"."+c,s);if(f)return f}}return null}return h(e)}function E(t){function e(e,n,r,i,o){var u=e[n],c=T(u);if("object"!==c)return new l("Invalid "+i+" `"+o+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `object`."));var h=a({},e[n],t);for(var f in h){var d=t[f];if(!d)return new l("Invalid "+i+" `"+o+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var p=d(u,f,r,i,o+"."+f,s);if(p)return p}return null}return h(e)}function S(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(S);if(null===e||t(e))return!0;var r=n(e);if(!r)return!1;var i,o=r.call(e);if(r!==e.entries){for(;!(i=o.next()).done;)if(!S(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!S(a[1]))return!1}return!0;default:return!1}}function C(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function T(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":C(e,t)?"symbol":e}function k(t){if("undefined"==typeof t||null===t)return""+t;var e=T(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function I(t){var e=k(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function P(t){return t.constructor&&t.constructor.name?t.constructor.name:A}var N="function"==typeof Symbol&&Symbol.iterator,O="@@iterator",A="<<anonymous>>",x={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(),arrayOf:p,element:m(),instanceOf:v,node:b(),objectOf:y,oneOf:g,oneOfType:_,shape:w,exact:E};return l.prototype=Error.prototype,x.checkPropTypes=u,x.PropTypes=x,x}},/*!*********************************!*\
  !*** ./~/query-string/index.js ***!
  \*********************************/
function(t,e,n){"use strict";var r=n(/*! strict-uri-encode */338);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;return r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),t.hasOwnProperty(r)?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return void 0===n?"":null===n?e:Array.isArray(n)?n.slice().sort().map(function(t){return r(e)+"="+r(t)}).join("&"):r(e)+"="+r(n)}).filter(function(t){return t.length>0}).join("&"):""}},/*!******************************!*\
  !*** ./~/react-dom/index.js ***!
  \******************************/
function(t,e,n){"use strict";t.exports=n(/*! ./lib/ReactDOM */252)},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ARIADOMPropertyConfig.js ***!
  \**************************************************/
function(t,e){"use strict";var n={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=n},/*!*******************************************!*\
  !*** ./~/react-dom/lib/AutoFocusUtils.js ***!
  \*******************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactDOMComponentTree */7),i=n(/*! fbjs/lib/focusNode */101),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};t.exports=o},/*!***************************************************!*\
  !*** ./~/react-dom/lib/BeforeInputEventPlugin.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case"topCompositionStart":return k.compositionStart;case"topCompositionEnd":return k.compositionEnd;case"topCompositionUpdate":return k.compositionUpdate}}function a(t,e){return"topKeyDown"===t&&e.keyCode===_}function s(t,e){switch(t){case"topKeyUp":return y.indexOf(e.keyCode)!==-1;case"topKeyDown":return e.keyCode!==_;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function c(t,e,n,r){var i,c;if(b?i=o(t):P?s(t,n)&&(i=k.compositionEnd):a(t,n)&&(i=k.compositionStart),!i)return null;S&&(P||i!==k.compositionStart?i===k.compositionEnd&&P&&(c=P.getData()):P=m.getPooled(r));var l=v.getPooled(i,e,n,r);if(c)l.data=c;else{var h=u(n);null!==h&&(l.data=h)}return d.accumulateTwoPhaseDispatches(l),l}function l(t,e){switch(t){case"topCompositionEnd":return u(e);case"topKeyPress":var n=e.which;return n!==C?null:(I=!0,T);case"topTextInput":var r=e.data;return r===T&&I?null:r;default:return null}}function h(t,e){if(P){if("topCompositionEnd"===t||!b&&s(t,e)){var n=P.getData();return m.release(P),P=null,n}return null}switch(t){case"topPaste":return null;case"topKeyPress":return e.which&&!i(e)?String.fromCharCode(e.which):null;case"topCompositionEnd":return S?null:e.data;default:return null}}function f(t,e,n,r){var i;if(i=E?l(t,n):h(t,n),!i)return null;var o=g.getPooled(k.beforeInput,e,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var d=n(/*! ./EventPropagators */37),p=n(/*! fbjs/lib/ExecutionEnvironment */11),m=n(/*! ./FallbackCompositionState */247),v=n(/*! ./SyntheticCompositionEvent */283),g=n(/*! ./SyntheticInputEvent */286),y=[9,13,27,32],_=229,b=p.canUseDOM&&"CompositionEvent"in window,w=null;p.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var E=p.canUseDOM&&"TextEvent"in window&&!w&&!r(),S=p.canUseDOM&&(!b||w&&w>8&&w<=11),C=32,T=String.fromCharCode(C),k={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},I=!1,P=null,N={eventTypes:k,extractEvents:function(t,e,n,r){return[c(t,e,n,r),f(t,e,n,r)]}};t.exports=N},/*!**************************************************!*\
  !*** ./~/react-dom/lib/CSSPropertyOperations.js ***!
  \**************************************************/
function(t,e,n){"use strict";var r=n(/*! ./CSSProperty */110),i=n(/*! fbjs/lib/ExecutionEnvironment */11),o=(n(/*! ./ReactInstrumentation */13),n(/*! fbjs/lib/camelizeStyleName */217),n(/*! ./dangerousStyleValue */292)),a=n(/*! fbjs/lib/hyphenateStyleName */224),s=n(/*! fbjs/lib/memoizeStringOnly */227),u=(n(/*! fbjs/lib/warning */3),s(function(t){return a(t)})),c=!1,l="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(t){c=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var f={createMarkupForStyles:function(t,e){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),a=t[r];null!=a&&(n+=u(r)+":",n+=o(r,a,e,i)+";")}return n||null},setValueForStyles:function(t,e,n){var i=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=0===a.indexOf("--"),u=o(a,e[a],n,s);if("float"!==a&&"cssFloat"!==a||(a=l),s)i.setProperty(a,u);else if(u)i[a]=u;else{var h=c&&r.shorthandPropertyExpansions[a];if(h)for(var f in h)i[f]="";else i[a]=""}}}};t.exports=f},/*!**********************************************!*\
  !*** ./~/react-dom/lib/ChangeEventPlugin.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t,e,n){var r=k.getPooled(A.change,t,e,n);return r.type="change",E.accumulateTwoPhaseDispatches(r),r}function i(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function o(t){var e=r(R,t,P(t));T.batchedUpdates(a,e)}function a(t){w.enqueueEvents(t),w.processEventQueue(!1)}function s(t,e){x=t,R=e,x.attachEvent("onchange",o)}function u(){x&&(x.detachEvent("onchange",o),x=null,R=null)}function c(t,e){var n=I.updateValueIfChanged(t),r=e.simulated===!0&&L._allowSimulatedPassThrough;if(n||r)return t}function l(t,e){if("topChange"===t)return e}function h(t,e,n){"topFocus"===t?(u(),s(e,n)):"topBlur"===t&&u()}function f(t,e){x=t,R=e,x.attachEvent("onpropertychange",p)}function d(){x&&(x.detachEvent("onpropertychange",p),x=null,R=null)}function p(t){"value"===t.propertyName&&c(R,t)&&o(t)}function m(t,e,n){"topFocus"===t?(d(),f(e,n)):"topBlur"===t&&d()}function v(t,e,n){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return c(R,n)}function g(t){var e=t.nodeName;return e&&"input"===e.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function y(t,e,n){if("topClick"===t)return c(e,n)}function _(t,e,n){if("topInput"===t||"topChange"===t)return c(e,n)}function b(t,e){if(null!=t){var n=t._wrapperState||e._wrapperState;if(n&&n.controlled&&"number"===e.type){var r=""+e.value;e.getAttribute("value")!==r&&e.setAttribute("value",r)}}}var w=n(/*! ./EventPluginHub */36),E=n(/*! ./EventPropagators */37),S=n(/*! fbjs/lib/ExecutionEnvironment */11),C=n(/*! ./ReactDOMComponentTree */7),T=n(/*! ./ReactUpdates */14),k=n(/*! ./SyntheticEvent */17),I=n(/*! ./inputValueTracking */127),P=n(/*! ./getEventTarget */77),N=n(/*! ./isEventSupported */78),O=n(/*! ./isTextInputElement */129),A={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},x=null,R=null,D=!1;S.canUseDOM&&(D=N("change")&&(!document.documentMode||document.documentMode>8));var M=!1;S.canUseDOM&&(M=N("input")&&(!document.documentMode||document.documentMode>9));var L={eventTypes:A,_allowSimulatedPassThrough:!0,_isInputEventSupported:M,extractEvents:function(t,e,n,o){var a,s,u=e?C.getNodeFromInstance(e):window;if(i(u)?D?a=l:s=h:O(u)?M?a=_:(a=v,s=m):g(u)&&(a=y),a){var c=a(t,e,n);if(c){var f=r(c,n,o);return f}}s&&s(t,u,e),"topBlur"===t&&b(e,u)}};t.exports=L},/*!***********************************!*\
  !*** ./~/react-dom/lib/Danger.js ***!
  \***********************************/
function(t,e,n){"use strict";var r=n(/*! ./reactProdInvariant */4),i=n(/*! ./DOMLazyTree */27),o=n(/*! fbjs/lib/ExecutionEnvironment */11),a=n(/*! fbjs/lib/createNodesFromMarkup */220),s=n(/*! fbjs/lib/emptyFunction */12),u=(n(/*! fbjs/lib/invariant */2),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM?void 0:r("56"),e?void 0:r("57"),"HTML"===t.nodeName?r("58"):void 0,"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else i.replaceChildWithTree(t,e)}});t.exports=u},/*!****************************************************!*\
  !*** ./~/react-dom/lib/DefaultEventPluginOrder.js ***!
  \****************************************************/
function(t,e){"use strict";var n=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=n},/*!**************************************************!*\
  !*** ./~/react-dom/lib/EnterLeaveEventPlugin.js ***!
  \**************************************************/
function(t,e,n){"use strict";var r=n(/*! ./EventPropagators */37),i=n(/*! ./ReactDOMComponentTree */7),o=n(/*! ./SyntheticMouseEvent */48),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(t,e,n,s){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==t&&"topMouseOver"!==t)return null;var u;if(s.window===s)u=s;else{var c=s.ownerDocument;u=c?c.defaultView||c.parentWindow:window}var l,h;if("topMouseOut"===t){l=e;var f=n.relatedTarget||n.toElement;h=f?i.getClosestInstanceFromNode(f):null}else l=null,h=e;if(l===h)return null;var d=null==l?u:i.getNodeFromInstance(l),p=null==h?u:i.getNodeFromInstance(h),m=o.getPooled(a.mouseLeave,l,n,s);m.type="mouseleave",m.target=d,m.relatedTarget=p;var v=o.getPooled(a.mouseEnter,h,n,s);return v.type="mouseenter",v.target=p,v.relatedTarget=d,r.accumulateEnterLeaveDispatches(m,v,l,h),[m,v]}};t.exports=s},/*!*****************************************************!*\
  !*** ./~/react-dom/lib/FallbackCompositionState.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(/*! object-assign */5),o=n(/*! ./PooledClass */22),a=n(/*! ./getTextContentAccessor */126);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),t.exports=r},/*!**************************************************!*\
  !*** ./~/react-dom/lib/HTMLDOMPropertyConfig.js ***!
  \**************************************************/
function(t,e,n){"use strict";var r=n(/*! ./DOMProperty */28),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(t,e){return null==e?t.removeAttribute("value"):void("number"!==t.type||t.hasAttribute("value")===!1?t.setAttribute("value",""+e):t.validity&&!t.validity.badInput&&t.ownerDocument.activeElement!==t&&t.setAttribute("value",""+e))}}};t.exports=c},/*!*************************************************!*\
  !*** ./~/react-dom/lib/ReactChildReconciler.js ***!
  \*************************************************/
function(t,e,n){(function(e){"use strict";function r(t,e,n,r){var i=void 0===t[n];null!=e&&i&&(t[n]=o(e,!0))}var i=n(/*! ./ReactReconciler */30),o=n(/*! ./instantiateReactComponent */128),a=(n(/*! ./KeyEscapeUtils */69),n(/*! ./shouldUpdateReactComponent */79)),s=n(/*! ./traverseAllChildren */131);n(/*! fbjs/lib/warning */3);"undefined"!=typeof e&&e.env,1;var u={instantiateChildren:function(t,e,n,i){if(null==t)return null;var o={};return s(t,r,o),o},updateChildren:function(t,e,n,r,s,u,c,l,h){if(e||t){var f,d;for(f in e)if(e.hasOwnProperty(f)){d=t&&t[f];var p=d&&d._currentElement,m=e[f];if(null!=d&&a(p,m))i.receiveComponent(d,m,s,l),e[f]=d;else{d&&(r[f]=i.getHostNode(d),i.unmountComponent(d,!1));var v=o(m,!0);e[f]=v;var g=i.mountComponent(v,s,u,c,l,h);n.push(g)}}for(f in t)!t.hasOwnProperty(f)||e&&e.hasOwnProperty(f)||(d=t[f],r[f]=i.getHostNode(d),i.unmountComponent(d,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}};t.exports=u}).call(e,n(/*! ./../../process/browser.js */35))},/*!*************************************************************!*\
  !*** ./~/react-dom/lib/ReactComponentBrowserEnvironment.js ***!
  \*************************************************************/
function(t,e,n){"use strict";var r=n(/*! ./DOMChildrenOperations */65),i=n(/*! ./ReactDOMIDOperations */257),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=o},/*!****************************************************!*\
  !*** ./~/react-dom/lib/ReactCompositeComponent.js ***!
  \****************************************************/
function(t,e,n){"use strict";function r(t){}function i(t,e){}function o(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var s=n(/*! ./reactProdInvariant */4),u=n(/*! object-assign */5),c=n(/*! react/lib/React */24),l=n(/*! ./ReactComponentEnvironment */71),h=n(/*! react/lib/ReactCurrentOwner */18),f=n(/*! ./ReactErrorUtils */72),d=n(/*! ./ReactInstanceMap */29),p=(n(/*! ./ReactInstrumentation */13),n(/*! ./ReactNodeTypes */121)),m=n(/*! ./ReactReconciler */30),v=n(/*! fbjs/lib/emptyObject */34),g=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/shallowEqual */60)),y=n(/*! ./shouldUpdateReactComponent */79),_=(n(/*! fbjs/lib/warning */3),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var t=d.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return i(t,e),e};var b=1,w={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,u){this._context=u,this._mountOrder=b++,this._hostParent=e,this._hostContainerInfo=n;var l,h=this._currentElement.props,f=this._processContext(u),p=this._currentElement.type,m=t.getUpdateQueue(),g=o(p),y=this._constructComponent(g,h,f,m);g||null!=y&&null!=y.render?a(p)?this._compositeType=_.PureClass:this._compositeType=_.ImpureClass:(l=y,i(p,l),null===y||y===!1||c.isValidElement(y)?void 0:s("105",p.displayName||p.name||"Component"),y=new r(p),this._compositeType=_.StatelessFunctional);y.props=h,y.context=f,y.refs=v,y.updater=m,this._instance=y,d.set(y,this);var w=y.state;void 0===w&&(y.state=w=null),"object"!=typeof w||Array.isArray(w)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var E;return E=y.unstable_handleError?this.performInitialMountWithErrorHandling(l,e,n,t,u):this.performInitialMount(l,e,n,t,u),y.componentDidMount&&t.getReactMountReady().enqueue(y.componentDidMount,y),E},_constructComponent:function(t,e,n,r){return this._constructComponentWithoutOwner(t,e,n,r)},_constructComponentWithoutOwner:function(t,e,n,r){var i=this._currentElement.type;return t?new i(e,n,r):i(e,n,r)},performInitialMountWithErrorHandling:function(t,e,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(t,e,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(t,e,n,r,i)}return o},performInitialMount:function(t,e,n,r,i){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var s=p.getType(t);this._renderedNodeType=s;var u=this._instantiateReactComponent(t,s!==p.EMPTY);this._renderedComponent=u;var c=m.mountComponent(u,r,e,n,this._processChildContext(i),a);return c},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return v;var r={};for(var i in n)r[i]=t[i];return r},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(e=r.getChildContext()),e){"object"!=typeof n.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in e)i in n.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return u({},t,e)}return t},_checkContextTypes:function(t,e,n){},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,i){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u=!1;this._context===i?a=o.context:(a=this._processContext(i),u=!0);var c=e.props,l=n.props;e!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(l,a);var h=this._processPendingState(l,a),f=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?f=o.shouldComponentUpdate(l,h,a):this._compositeType===_.PureClass&&(f=!g(c,l)||!g(o.state,h))),this._updateBatchNumber=null,f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,l,h,a,t,i)):(this._currentElement=n,this._context=i,o.props=l,o.state=h,o.context=a)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=u({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];u(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a,s,u,c=this._instance,l=Boolean(c.componentDidUpdate);l&&(a=c.props,s=c.state,u=c.context),c.componentWillUpdate&&c.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,c.props=e,c.state=n,c.context=r,this._updateRenderedComponent(i,o),l&&i.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,u),c)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent(),o=0;if(y(r,i))m.receiveComponent(n,i,t,this._processChildContext(e));else{var a=m.getHostNode(n);m.unmountComponent(n,!1);var s=p.getType(i);this._renderedNodeType=s;var u=this._instantiateReactComponent(i,s!==p.EMPTY);this._renderedComponent=u;var c=m.mountComponent(u,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),o);this._replaceNodeWithMarkup(a,c,n)}},_replaceNodeWithMarkup:function(t,e,n){l.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t,e=this._instance;return t=e.render()},_renderValidatedComponent:function(){var t;if(this._compositeType!==_.StatelessFunctional){h.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{h.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||c.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=e.getPublicInstance(),i=n.refs===v?n.refs={}:n.refs;i[t]=r},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===_.StatelessFunctional?null:t},_instantiateReactComponent:null};t.exports=w},/*!*************************************!*\
  !*** ./~/react-dom/lib/ReactDOM.js ***!
  \*************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactDOMComponentTree */7),i=n(/*! ./ReactDefaultInjection */265),o=n(/*! ./ReactMount */119),a=n(/*! ./ReactReconciler */30),s=n(/*! ./ReactUpdates */14),u=n(/*! ./ReactVersion */277),c=n(/*! ./findDOMNode */293),l=n(/*! ./getHostComponentFromComposite */125),h=n(/*! ./renderSubtreeIntoContainer */300);n(/*! fbjs/lib/warning */3);i.inject();var f={findDOMNode:c,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=l(t)),t?r.getNodeFromInstance(t):null}},Mount:o,Reconciler:a});t.exports=f},/*!**********************************************!*\
  !*** ./~/react-dom/lib/ReactDOMComponent.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t,e){e&&(X[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?v("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?v("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&G in e.dangerouslySetInnerHTML?void 0:v("61")),null!=e.style&&"object"!=typeof e.style?v("62",r(t)):void 0)}function o(t,e,n,r){if(!(r instanceof D)){var i=t._hostContainerInfo,o=i._node&&i._node.nodeType===H,s=o?i._node:i._ownerDocument;K(e,s),r.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;C.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;N.postMountWrapper(t)}function u(){var t=this;x.postMountWrapper(t)}function c(){var t=this;O.postMountWrapper(t)}function l(){L.track(this)}function h(){var t=this;t._rootNodeID?void 0:v("63");var e=B(t);switch(e?void 0:v("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[k.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in z)z.hasOwnProperty(n)&&t._wrapperState.listeners.push(k.trapBubbledEvent(n,z[n],e));break;case"source":t._wrapperState.listeners=[k.trapBubbledEvent("topError","error",e)];break;case"img":t._wrapperState.listeners=[k.trapBubbledEvent("topError","error",e),k.trapBubbledEvent("topLoad","load",e)];break;case"form":t._wrapperState.listeners=[k.trapBubbledEvent("topReset","reset",e),k.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[k.trapBubbledEvent("topInvalid","invalid",e)]}}function f(){A.postUpdateWrapper(this)}function d(t){Z.call($,t)||(J.test(t)?void 0:v("65",t),$[t]=!0)}function p(t,e){return t.indexOf("-")>=0||null!=e.is}function m(t){var e=t.type;d(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var v=n(/*! ./reactProdInvariant */4),g=n(/*! object-assign */5),y=n(/*! ./AutoFocusUtils */240),_=n(/*! ./CSSPropertyOperations */242),b=n(/*! ./DOMLazyTree */27),w=n(/*! ./DOMNamespaces */66),E=n(/*! ./DOMProperty */28),S=n(/*! ./DOMPropertyOperations */112),C=n(/*! ./EventPluginHub */36),T=n(/*! ./EventPluginRegistry */67),k=n(/*! ./ReactBrowserEventEmitter */47),I=n(/*! ./ReactDOMComponentFlags */113),P=n(/*! ./ReactDOMComponentTree */7),N=n(/*! ./ReactDOMInput */258),O=n(/*! ./ReactDOMOption */259),A=n(/*! ./ReactDOMSelect */114),x=n(/*! ./ReactDOMTextarea */262),R=(n(/*! ./ReactInstrumentation */13),n(/*! ./ReactMultiChild */120)),D=n(/*! ./ReactServerRenderingTransaction */275),M=(n(/*! fbjs/lib/emptyFunction */12),n(/*! ./escapeTextContentForBrowser */50)),L=(n(/*! fbjs/lib/invariant */2),n(/*! ./isEventSupported */78),n(/*! fbjs/lib/shallowEqual */60),n(/*! ./inputValueTracking */127)),F=(n(/*! ./validateDOMNesting */80),n(/*! fbjs/lib/warning */3),I),U=C.deleteListener,B=P.getNodeFromInstance,K=k.listenTo,j=T.registrationNameModules,V={string:!0,number:!0},W="style",G="__html",q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},H=11,z={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Y={listing:!0,pre:!0,textarea:!0},X=g({menuitem:!0},Q),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$={},Z={}.hasOwnProperty,tt=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(t,e,n,r){this._rootNodeID=tt++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(h,this);break;case"input":N.mountWrapper(this,o,e),o=N.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(h,this);break;case"option":O.mountWrapper(this,o,e),o=O.getHostProps(this,o);break;case"select":A.mountWrapper(this,o,e),o=A.getHostProps(this,o),t.getReactMountReady().enqueue(h,this);break;case"textarea":x.mountWrapper(this,o,e),o=x.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(h,this)}i(this,o);var a,f;null!=e?(a=e._namespaceURI,f=e._tag):n._tag&&(a=n._namespaceURI,f=n._tag),(null==a||a===w.svg&&"foreignobject"===f)&&(a=w.html),a===w.html&&("svg"===this._tag?a=w.svg:"math"===this._tag&&(a=w.mathml)),this._namespaceURI=a;var d;if(t.useCreateElement){var p,m=n._ownerDocument;if(a===w.html)if("script"===this._tag){var v=m.createElement("div"),g=this._currentElement.type;v.innerHTML="<"+g+"></"+g+">",p=v.removeChild(v.firstChild)}else p=o.is?m.createElement(this._currentElement.type,o.is):m.createElement(this._currentElement.type);else p=m.createElementNS(a,this._currentElement.type);P.precacheNode(this,p),this._flags|=F.hasCachedChildNodes,this._hostParent||S.setAttributeForRoot(p),this._updateDOMProperties(null,o,t);var _=b(p);this._createInitialChildren(t,o,r,_),d=_}else{var E=this._createOpenTagMarkupAndPutListeners(t,o),C=this._createContentMarkup(t,o,r);d=!C&&Q[this._tag]?E+"/>":E+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(u,this),o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"button":o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(c,this)}return d},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i)if(j.hasOwnProperty(r))i&&o(this,r,i,t);else{r===W&&(i&&(i=this._previousStyleCopy=g({},e.style)),i=_.createMarkupForStyles(i,this));var a=null;null!=this._tag&&p(this._tag,e)?q.hasOwnProperty(r)||(a=S.createMarkupForCustomAttribute(r,i)):a=S.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+S.createMarkupForRoot()),n+=" "+S.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var r="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=V[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)r=M(o);else if(null!=a){var s=this.mountChildren(a,t,n);r=s.join("")}}return Y[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(r,i.__html);else{var o=V[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)""!==o&&b.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,t,n),u=0;u<s.length;u++)b.queueChild(r,s[u])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var o=e.props,a=this._currentElement.props;switch(this._tag){case"input":o=N.getHostProps(this,o),a=N.getHostProps(this,a);break;case"option":o=O.getHostProps(this,o),a=O.getHostProps(this,a);break;case"select":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"textarea":o=x.getHostProps(this,o),a=x.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,t),this._updateDOMChildren(o,a,t,r),this._tag){case"input":N.updateWrapper(this),L.updateValueIfChanged(this);break;case"textarea":x.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(f,this)}},_updateDOMProperties:function(t,e,n){var r,i,a;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if(r===W){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else j.hasOwnProperty(r)?t[r]&&U(this,r):p(this._tag,t)?q.hasOwnProperty(r)||S.deleteValueForAttribute(B(this),r):(E.properties[r]||E.isCustomAttribute(r))&&S.deleteValueForProperty(B(this),r);for(r in e){var u=e[r],c=r===W?this._previousStyleCopy:null!=t?t[r]:void 0;if(e.hasOwnProperty(r)&&u!==c&&(null!=u||null!=c))if(r===W)if(u?u=this._previousStyleCopy=g({},u):this._previousStyleCopy=null,c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(a=a||{},a[i]=u[i])}else a=u;else if(j.hasOwnProperty(r))u?o(this,r,u,n):c&&U(this,r);else if(p(this._tag,e))q.hasOwnProperty(r)||S.setValueForAttribute(B(this),r,u);else if(E.properties[r]||E.isCustomAttribute(r)){var l=B(this);null!=u?S.setValueForProperty(l,r,u):S.deleteValueForProperty(l,r)}}a&&_.setValueForStyles(B(this),a,this)},_updateDOMChildren:function(t,e,n,r){var i=V[typeof t.children]?t.children:null,o=V[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=i?null:t.children,c=null!=o?null:e.children,l=null!=i||null!=a,h=null!=o||null!=s;null!=u&&null==c?this.updateChildren(null,n,r):l&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,r)},getHostNode:function(){return B(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"input":case"textarea":L.stopTracking(this);break;case"html":case"head":case"body":v("66",this._tag)}this.unmountChildren(t),P.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return B(this)}},g(m.prototype,m.Mixin,R.Mixin),t.exports=m},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMContainerInfo.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===i?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var i=(n(/*! ./validateDOMNesting */80),9);t.exports=r},/*!***************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMEmptyComponent.js ***!
  \***************************************************/
function(t,e,n){"use strict";var r=n(/*! object-assign */5),i=n(/*! ./DOMLazyTree */27),o=n(/*! ./ReactDOMComponentTree */7),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(t,e,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,c=u.createComment(s);return o.precacheNode(this,c),i(c)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},/*!*************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMFeatureFlags.js ***!
  \*************************************************/
function(t,e){"use strict";var n={useCreateElement:!0,useFiber:!1};t.exports=n},/*!*************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMIDOperations.js ***!
  \*************************************************/
function(t,e,n){"use strict";var r=n(/*! ./DOMChildrenOperations */65),i=n(/*! ./ReactDOMComponentTree */7),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);r.processUpdates(n,e)}};t.exports=o},/*!******************************************!*\
  !*** ./~/react-dom/lib/ReactDOMInput.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(){this._rootNodeID&&f.updateWrapper(this)}function i(t){var e="checkbox"===t.type||"radio"===t.type;return e?null!=t.checked:null!=t.value}function o(t){var e=this._currentElement.props,n=c.executeOnChange(e,t);h.asap(r,this);var i=e.name;if("radio"===e.type&&null!=i){for(var o=l.getNodeFromInstance(this),s=o;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0;f<u.length;f++){var d=u[f];if(d!==o&&d.form===o.form){var p=l.getInstanceFromNode(d);p?void 0:a("90"),h.asap(r,p)}}}return n}var a=n(/*! ./reactProdInvariant */4),s=n(/*! object-assign */5),u=n(/*! ./DOMPropertyOperations */112),c=n(/*! ./LinkedValueUtils */70),l=n(/*! ./ReactDOMComponentTree */7),h=n(/*! ./ReactUpdates */14),f=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),{getHostProps:function(t,e){var n=c.getValue(e),r=c.getChecked(e),i=s({type:void 0,step:void 0,min:void 0,max:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:o.bind(t),controlled:i(e)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&u.setValueForProperty(l.getNodeFromInstance(t),"checked",n||!1);var r=l.getNodeFromInstance(t),i=c.getValue(e);if(null!=i)if(0===i&&""===r.value)r.value="0";else if("number"===e.type){var o=parseFloat(r.value,10)||0;(i!=o||i==o&&r.value!=i)&&(r.value=""+i)}else r.value!==""+i&&(r.value=""+i);else null==e.value&&null!=e.defaultValue&&r.defaultValue!==""+e.defaultValue&&(r.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(r.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=f},/*!*******************************************!*\
  !*** ./~/react-dom/lib/ReactDOMOption.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){var e="";return o.Children.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:u||(u=!0))}),e}var i=n(/*! object-assign */5),o=n(/*! react/lib/React */24),a=n(/*! ./ReactDOMComponentTree */7),s=n(/*! ./ReactDOMSelect */114),u=(n(/*! fbjs/lib/warning */3),!1),c={mountWrapper:function(t,e,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var u;if(u=null!=e.value?e.value+"":r(e.children),a=!1,Array.isArray(i)){for(var c=0;c<i.length;c++)if(""+i[c]===u){a=!0;break}}else a=""+i===u}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=a.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var o=r(e.children);return o&&(n.children=o),n}};t.exports=c},/*!**********************************************!*\
  !*** ./~/react-dom/lib/ReactDOMSelection.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(t){return null}var u=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(t),l.setEnd(s.startContainer,s.startOffset);var h=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),f=h?0:l.toString().length,d=f+c,p=document.createRange();p.setStart(n,i),p.setEnd(o,a);var m=p.collapsed;return{start:m?d:f,end:m?f:d}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[l()].length,i=Math.min(e.start,r),o=void 0===e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(t,i),u=c(t,o);if(s&&u){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}var u=n(/*! fbjs/lib/ExecutionEnvironment */11),c=n(/*! ./getNodeForCharacterOffset */297),l=n(/*! ./getTextContentAccessor */126),h=u.canUseDOM&&"selection"in document&&!("getSelection"in window),f={getOffsets:h?i:o,setOffsets:h?a:s};t.exports=f},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMTextComponent.js ***!
  \**************************************************/
function(t,e,n){"use strict";var r=n(/*! ./reactProdInvariant */4),i=n(/*! object-assign */5),o=n(/*! ./DOMChildrenOperations */65),a=n(/*! ./DOMLazyTree */27),s=n(/*! ./ReactDOMComponentTree */7),u=n(/*! ./escapeTextContentForBrowser */50),c=(n(/*! fbjs/lib/invariant */2),n(/*! ./validateDOMNesting */80),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(c.prototype,{mountComponent:function(t,e,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",c=" /react-text ";if(this._domID=i,this._hostParent=e,t.useCreateElement){var l=n._ownerDocument,h=l.createComment(o),f=l.createComment(c),d=a(l.createDocumentFragment());return a.queueChild(d,a(h)),this._stringText&&a.queueChild(d,a(l.createTextNode(this._stringText))),a.queueChild(d,a(f)),s.precacheNode(this,h),this._closingComment=f,d}var p=u(this._stringText);return t.renderToStaticMarkup?p:"<!--"+o+"-->"+p+"<!--"+c+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=c},/*!*********************************************!*\
  !*** ./~/react-dom/lib/ReactDOMTextarea.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(){this._rootNodeID&&l.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return c.asap(r,this),n}var o=n(/*! ./reactProdInvariant */4),a=n(/*! object-assign */5),s=n(/*! ./LinkedValueUtils */70),u=n(/*! ./ReactDOMComponentTree */7),c=n(/*! ./ReactUpdates */14),l=(n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=s.getValue(e),r=n;if(null==n){var a=e.defaultValue,u=e.children;null!=u&&(null!=a?o("92"):void 0,Array.isArray(u)&&(u.length<=1?void 0:o("93"),u=u[0]),a=""+u),null==a&&(a=""),r=a}t._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t),n=e.textContent;n===t._wrapperState.initialValue&&(e.value=n)}});t.exports=l},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ReactDOMTreeTraversal.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(t,e){"_hostNode"in t?void 0:u("33"),"_hostNode"in e?void 0:u("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var i=0,o=e;o;o=o._hostParent)i++;for(;n-i>0;)t=t._hostParent,n--;for(;i-n>0;)e=e._hostParent,i--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t?void 0:u("35"),"_hostNode"in e?void 0:u("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function o(t){return"_hostNode"in t?void 0:u("36"),t._hostParent}function a(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var i;for(i=r.length;i-- >0;)e(r[i],"captured",n);for(i=0;i<r.length;i++)e(r[i],"bubbled",n)}function s(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var u=[];e&&e!==a;)u.push(e),e=e._hostParent;var c;for(c=0;c<s.length;c++)n(s[c],"bubbled",i);for(c=u.length;c-- >0;)n(u[c],"captured",o)}var u=n(/*! ./reactProdInvariant */4);n(/*! fbjs/lib/invariant */2);t.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},/*!*********************************************************!*\
  !*** ./~/react-dom/lib/ReactDefaultBatchingStrategy.js ***!
  \*********************************************************/
function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(/*! object-assign */5),o=n(/*! ./ReactUpdates */14),a=n(/*! ./Transaction */49),s=n(/*! fbjs/lib/emptyFunction */12),u={initialize:s,close:function(){f.isBatchingUpdates=!1}},c={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[c,u];i(r.prototype,a,{getTransactionWrappers:function(){return l}});var h=new r,f={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=f.isBatchingUpdates;return f.isBatchingUpdates=!0,a?t(e,n,r,i,o):h.perform(t,null,e,n,r,i,o)}};t.exports=f},/*!**************************************************!*\
  !*** ./~/react-dom/lib/ReactDefaultInjection.js ***!
  \**************************************************/
function(t,e,n){"use strict";function r(){S||(S=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(f),y.EventPluginUtils.injectTreeTraversal(p),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:w,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(h),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(i),y.DOMProperty.injectDOMPropertyConfig(c),y.DOMProperty.injectDOMPropertyConfig(b),y.EmptyComponent.injectEmptyComponentFactory(function(t){return new d(t)}),y.Updates.injectReconcileTransaction(_),y.Updates.injectBatchingStrategy(v),y.Component.injectEnvironment(l))}var i=n(/*! ./ARIADOMPropertyConfig */239),o=n(/*! ./BeforeInputEventPlugin */241),a=n(/*! ./ChangeEventPlugin */243),s=n(/*! ./DefaultEventPluginOrder */245),u=n(/*! ./EnterLeaveEventPlugin */246),c=n(/*! ./HTMLDOMPropertyConfig */248),l=n(/*! ./ReactComponentBrowserEnvironment */250),h=n(/*! ./ReactDOMComponent */253),f=n(/*! ./ReactDOMComponentTree */7),d=n(/*! ./ReactDOMEmptyComponent */255),p=n(/*! ./ReactDOMTreeTraversal */263),m=n(/*! ./ReactDOMTextComponent */261),v=n(/*! ./ReactDefaultBatchingStrategy */264),g=n(/*! ./ReactEventListener */268),y=n(/*! ./ReactInjection */269),_=n(/*! ./ReactReconcileTransaction */273),b=n(/*! ./SVGDOMPropertyConfig */278),w=n(/*! ./SelectEventPlugin */279),E=n(/*! ./SimpleEventPlugin */280),S=!1;t.exports={inject:r}},/*!***********************************************!*\
  !*** ./~/react-dom/lib/ReactElementSymbol.js ***!
  \***********************************************/
142,/*!***************************************************!*\
  !*** ./~/react-dom/lib/ReactEventEmitterMixin.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(/*! ./EventPluginHub */36),o={handleTopLevel:function(t,e,n,o){var a=i.extractEvents(t,e,n,o);r(a)}};t.exports=o},/*!***********************************************!*\
  !*** ./~/react-dom/lib/ReactEventListener.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=h.getNodeFromInstance(t),n=e.parentNode;return h.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){var e=d(t.nativeEvent),n=h.getClosestInstanceFromNode(e),i=n;do t.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<t.ancestors.length;o++)n=t.ancestors[o],m._handleTopLevel(t.topLevelType,n,t.nativeEvent,d(t.nativeEvent))}function a(t){var e=p(window);t(e)}var s=n(/*! object-assign */5),u=n(/*! fbjs/lib/EventListener */100),c=n(/*! fbjs/lib/ExecutionEnvironment */11),l=n(/*! ./PooledClass */22),h=n(/*! ./ReactDOMComponentTree */7),f=n(/*! ./ReactUpdates */14),d=n(/*! ./getEventTarget */77),p=n(/*! fbjs/lib/getUnboundedScrollPosition */222);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(t){m._handleTopLevel=t},setEnabled:function(t){m._enabled=!!t},isEnabled:function(){return m._enabled},trapBubbledEvent:function(t,e,n){return n?u.listen(n,e,m.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){return n?u.capture(n,e,m.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(m._enabled){var n=i.getPooled(t,e);try{f.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=m},/*!*******************************************!*\
  !*** ./~/react-dom/lib/ReactInjection.js ***!
  \*******************************************/
function(t,e,n){"use strict";var r=n(/*! ./DOMProperty */28),i=n(/*! ./EventPluginHub */36),o=n(/*! ./EventPluginUtils */68),a=n(/*! ./ReactComponentEnvironment */71),s=n(/*! ./ReactEmptyComponent */115),u=n(/*! ./ReactBrowserEventEmitter */47),c=n(/*! ./ReactHostComponent */117),l=n(/*! ./ReactUpdates */14),h={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:l.injection};t.exports=h},/*!************************************************!*\
  !*** ./~/react-dom/lib/ReactMarkupChecksum.js ***!
  \************************************************/
function(t,e,n){"use strict";var r=n(/*! ./adler32 */291),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return o.test(t)?t:t.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(t);return i===n}};t.exports=a},/*!***************************************!*\
  !*** ./~/react-dom/lib/ReactOwner.js ***!
  \***************************************/
function(t,e,n){"use strict";function r(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)}var i=n(/*! ./reactProdInvariant */4),o=(n(/*! fbjs/lib/invariant */2),{addComponentAsRefTo:function(t,e,n){r(n)?void 0:i("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r(n)?void 0:i("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=o},/*!*************************************************!*\
  !*** ./~/react-dom/lib/ReactPropTypesSecret.js ***!
  \*************************************************/
function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},/*!******************************************************!*\
  !*** ./~/react-dom/lib/ReactReconcileTransaction.js ***!
  \******************************************************/
function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=t}var i=n(/*! object-assign */5),o=n(/*! ./CallbackQueue */111),a=n(/*! ./PooledClass */22),s=n(/*! ./ReactBrowserEventEmitter */47),u=n(/*! ./ReactInputSelection */118),c=(n(/*! ./ReactInstrumentation */13),n(/*! ./Transaction */49)),l=n(/*! ./ReactUpdateQueue */73),h={initialize:u.getSelectionInformation,close:u.restoreSelection},f={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p=[h,f,d],m={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return l},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,c,m),a.addPoolingTo(r),t.exports=r},/*!*************************************!*\
  !*** ./~/react-dom/lib/ReactRef.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(/*! ./ReactOwner */271),a={};a.attachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null,r=null;null!==t&&"object"==typeof t&&(n=t.ref,r=t._owner);var i=null,o=null;return null!==e&&"object"==typeof e&&(i=e.ref,o=e._owner),n!==i||"string"==typeof i&&o!==r},a.detachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&i(n,t,e._owner)}},t.exports=a},/*!************************************************************!*\
  !*** ./~/react-dom/lib/ReactServerRenderingTransaction.js ***!
  \************************************************************/
function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(/*! object-assign */5),o=n(/*! ./PooledClass */22),a=n(/*! ./Transaction */49),s=(n(/*! ./ReactInstrumentation */13),n(/*! ./ReactServerUpdateQueue */276)),u=[],c={enqueue:function(){}},l={getTransactionWrappers:function(){return u},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,l),o.addPoolingTo(r),t.exports=r},/*!***************************************************!*\
  !*** ./~/react-dom/lib/ReactServerUpdateQueue.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){}var o=n(/*! ./ReactUpdateQueue */73),a=(n(/*! fbjs/lib/warning */3),function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&o.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?o.enqueueForceUpdate(t):i(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?o.enqueueReplaceState(t,e):i(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?o.enqueueSetState(t,e):i(t,"setState")},t}());t.exports=a},/*!*****************************************!*\
  !*** ./~/react-dom/lib/ReactVersion.js ***!
  \*****************************************/
function(t,e){"use strict";t.exports="15.6.2"},/*!*************************************************!*\
  !*** ./~/react-dom/lib/SVGDOMPropertyConfig.js ***!
  \*************************************************/
function(t,e){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(t){i.Properties[t]=0,r[t]&&(i.DOMAttributeNames[t]=r[t])}),t.exports=i},/*!**********************************************!*\
  !*** ./~/react-dom/lib/SelectEventPlugin.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(y||null==m||m!==l())return null;var n=r(m);if(!g||!f(g,n)){g=n;var i=c.getPooled(p.select,v,t,e);return i.type="select",i.target=m,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(/*! ./EventPropagators */37),a=n(/*! fbjs/lib/ExecutionEnvironment */11),s=n(/*! ./ReactDOMComponentTree */7),u=n(/*! ./ReactInputSelection */118),c=n(/*! ./SyntheticEvent */17),l=n(/*! fbjs/lib/getActiveElement */102),h=n(/*! ./isTextInputElement */129),f=n(/*! fbjs/lib/shallowEqual */60),d=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,p={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,v=null,g=null,y=!1,_=!1,b={eventTypes:p,extractEvents:function(t,e,n,r){if(!_)return null;var o=e?s.getNodeFromInstance(e):window;switch(t){case"topFocus":(h(o)||"true"===o.contentEditable)&&(m=o,v=e,g=null);break;case"topBlur":m=null,v=null,g=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,i(n,r);case"topSelectionChange":if(d)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(t,e,n){"onSelect"===e&&(_=!0)}};t.exports=b},/*!**********************************************!*\
  !*** ./~/react-dom/lib/SimpleEventPlugin.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){return"."+t._rootNodeID}function i(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}var o=n(/*! ./reactProdInvariant */4),a=n(/*! fbjs/lib/EventListener */100),s=n(/*! ./EventPropagators */37),u=n(/*! ./ReactDOMComponentTree */7),c=n(/*! ./SyntheticAnimationEvent */281),l=n(/*! ./SyntheticClipboardEvent */282),h=n(/*! ./SyntheticEvent */17),f=n(/*! ./SyntheticFocusEvent */285),d=n(/*! ./SyntheticKeyboardEvent */287),p=n(/*! ./SyntheticMouseEvent */48),m=n(/*! ./SyntheticDragEvent */284),v=n(/*! ./SyntheticTouchEvent */288),g=n(/*! ./SyntheticTransitionEvent */289),y=n(/*! ./SyntheticUIEvent */38),_=n(/*! ./SyntheticWheelEvent */290),b=n(/*! fbjs/lib/emptyFunction */12),w=n(/*! ./getEventCharCode */75),E=(n(/*! fbjs/lib/invariant */2),{}),S={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(t){var e=t[0].toUpperCase()+t.slice(1),n="on"+e,r="top"+e,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[t]=i,S[r]=i});var C={},T={eventTypes:E,extractEvents:function(t,e,n,r){var i=S[t];if(!i)return null;var a;switch(t){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=h;break;case"topKeyPress":if(0===w(n))return null;case"topKeyDown":case"topKeyUp":a=d;break;case"topBlur":case"topFocus":a=f;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=p;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=v;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=c;break;case"topTransitionEnd":a=g;break;case"topScroll":a=y;break;case"topWheel":a=_;break;case"topCopy":case"topCut":case"topPaste":a=l}a?void 0:o("86",t);var u=a.getPooled(i,e,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(t,e,n){if("onClick"===e&&!i(t._tag)){var o=r(t),s=u.getNodeFromInstance(t);C[o]||(C[o]=a.listen(s,"click",b))}},willDeleteListener:function(t,e){if("onClick"===e&&!i(t._tag)){var n=r(t);C[n].remove(),delete C[n]}}};t.exports=T},/*!****************************************************!*\
  !*** ./~/react-dom/lib/SyntheticAnimationEvent.js ***!
  \****************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},/*!****************************************************!*\
  !*** ./~/react-dom/lib/SyntheticClipboardEvent.js ***!
  \****************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},/*!******************************************************!*\
  !*** ./~/react-dom/lib/SyntheticCompositionEvent.js ***!
  \******************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o={data:null};i.augmentClass(r,o),t.exports=r},/*!***********************************************!*\
  !*** ./~/react-dom/lib/SyntheticDragEvent.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticMouseEvent */48),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},/*!************************************************!*\
  !*** ./~/react-dom/lib/SyntheticFocusEvent.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticUIEvent */38),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},/*!************************************************!*\
  !*** ./~/react-dom/lib/SyntheticInputEvent.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o={data:null};i.augmentClass(r,o),t.exports=r},/*!***************************************************!*\
  !*** ./~/react-dom/lib/SyntheticKeyboardEvent.js ***!
  \***************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticUIEvent */38),o=n(/*! ./getEventCharCode */75),a=n(/*! ./getEventKey */295),s=n(/*! ./getEventModifierState */76),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),t.exports=r},/*!************************************************!*\
  !*** ./~/react-dom/lib/SyntheticTouchEvent.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticUIEvent */38),o=n(/*! ./getEventModifierState */76),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},/*!*****************************************************!*\
  !*** ./~/react-dom/lib/SyntheticTransitionEvent.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticEvent */17),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},/*!************************************************!*\
  !*** ./~/react-dom/lib/SyntheticWheelEvent.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(/*! ./SyntheticMouseEvent */48),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},/*!************************************!*\
  !*** ./~/react-dom/lib/adler32.js ***!
  \************************************/
function(t,e){"use strict";function n(t){for(var e=1,n=0,i=0,o=t.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(e+=t.charCodeAt(i))+(e+=t.charCodeAt(i+1))+(e+=t.charCodeAt(i+2))+(e+=t.charCodeAt(i+3));e%=r,n%=r}for(;i<o;i++)n+=e+=t.charCodeAt(i);return e%=r,n%=r,e|n<<16}var r=65521;t.exports=n},/*!************************************************!*\
  !*** ./~/react-dom/lib/dangerousStyleValue.js ***!
  \************************************************/
function(t,e,n){"use strict";function r(t,e,n,r){var i=null==e||"boolean"==typeof e||""===e;if(i)return"";var a=isNaN(e);if(r||a||0===e||o.hasOwnProperty(t)&&o[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var i=n(/*! ./CSSProperty */110),o=(n(/*! fbjs/lib/warning */3),i.isUnitlessNumber);t.exports=r},/*!****************************************!*\
  !*** ./~/react-dom/lib/findDOMNode.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);return e?(e=s(e),e?o.getNodeFromInstance(e):null):void("function"==typeof t.render?i("44"):i("45",Object.keys(t)))}var i=n(/*! ./reactProdInvariant */4),o=(n(/*! react/lib/ReactCurrentOwner */18),n(/*! ./ReactDOMComponentTree */7)),a=n(/*! ./ReactInstanceMap */29),s=n(/*! ./getHostComponentFromComposite */125);n(/*! fbjs/lib/invariant */2),n(/*! fbjs/lib/warning */3);t.exports=r},/*!********************************************!*\
  !*** ./~/react-dom/lib/flattenChildren.js ***!
  \********************************************/
function(t,e,n){(function(e){"use strict";function r(t,e,n,r){if(t&&"object"==typeof t){var i=t,o=void 0===i[n];o&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return o(t,r,n),n}var o=(n(/*! ./KeyEscapeUtils */69),n(/*! ./traverseAllChildren */131));n(/*! fbjs/lib/warning */3);"undefined"!=typeof e&&e.env,1,t.exports=i}).call(e,n(/*! ./../../process/browser.js */35))},/*!****************************************!*\
  !*** ./~/react-dom/lib/getEventKey.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(/*! ./getEventCharCode */75),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},/*!******************************************!*\
  !*** ./~/react-dom/lib/getIteratorFn.js ***!
  \******************************************/
function(t,e){"use strict";function n(t){var e=t&&(r&&t[r]||t[i]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},/*!******************************************************!*\
  !*** ./~/react-dom/lib/getNodeForCharacterOffset.js ***!
  \******************************************************/
function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=e&&a>=e)return{node:i,offset:e-o};o=a}i=n(r(i))}}t.exports=i},/*!*******************************************************!*\
  !*** ./~/react-dom/lib/getVendorPrefixedEventName.js ***!
  \*******************************************************/
function(t,e,n){"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return s[t]=e[n];return""}var o=n(/*! fbjs/lib/ExecutionEnvironment */11),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=i},/*!**********************************************************!*\
  !*** ./~/react-dom/lib/quoteAttributeValueForBrowser.js ***!
  \**********************************************************/
function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=n(/*! ./escapeTextContentForBrowser */50);t.exports=r},/*!*******************************************************!*\
  !*** ./~/react-dom/lib/renderSubtreeIntoContainer.js ***!
  \*******************************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactMount */119);t.exports=r.renderSubtreeIntoContainer},/*!***************************************!*\
  !*** ./~/react-router/lib/History.js ***!
  \***************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! ./routerWarning */9),o=(r(i),n(/*! ./InternalPropTypes */23)),a={contextTypes:{history:o.history},componentWillMount:function(){this.history=this.context.history}};e.default=a,t.exports=e.default},/*!*****************************************!*\
  !*** ./~/react-router/lib/IndexLink.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(/*! react */1),a=r(o),s=n(/*! ./Link */132),u=r(s),c=a.default.createClass({displayName:"IndexLink",render:function(){return a.default.createElement(u.default,i({},this.props,{onlyActiveOnIndex:!0}))}});e.default=c,t.exports=e.default},/*!*********************************************!*\
  !*** ./~/react-router/lib/IndexRedirect.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! react */1),o=r(i),a=n(/*! ./routerWarning */9),s=(r(a),n(/*! invariant */10)),u=r(s),c=n(/*! ./Redirect */133),l=r(c),h=n(/*! ./InternalPropTypes */23),f=o.default.PropTypes,d=f.string,p=f.object,m=o.default.createClass({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(t,e){e&&(e.indexRoute=l.default.createRouteFromReactElement(t))}},propTypes:{to:d.isRequired,query:p,state:p,onEnter:h.falsy,children:h.falsy},render:function(){(0,u.default)(!1)}});e.default=m,t.exports=e.default},/*!******************************************!*\
  !*** ./~/react-router/lib/IndexRoute.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! react */1),o=r(i),a=n(/*! ./routerWarning */9),s=(r(a),n(/*! invariant */10)),u=r(s),c=n(/*! ./RouteUtils */19),l=n(/*! ./InternalPropTypes */23),h=o.default.PropTypes.func,f=o.default.createClass({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(t,e){e&&(e.indexRoute=(0,c.createRouteFromReactElement)(t))}},propTypes:{path:l.falsy,component:l.component,components:l.components,getComponent:h,getComponents:h},render:function(){(0,u.default)(!1)}});e.default=f,t.exports=e.default},/*!*****************************************!*\
  !*** ./~/react-router/lib/Lifecycle.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! ./routerWarning */9),o=(r(i),n(/*! react */1)),a=r(o),s=n(/*! invariant */10),u=r(s),c=a.default.PropTypes.object,l={contextTypes:{history:c.isRequired,route:c},propTypes:{route:c},componentDidMount:function(){this.routerWillLeave?void 0:(0,u.default)(!1);var t=this.props.route||this.context.route;t?void 0:(0,u.default)(!1),this._unlistenBeforeLeavingRoute=this.context.history.listenBeforeLeavingRoute(t,this.routerWillLeave)},componentWillUnmount:function(){this._unlistenBeforeLeavingRoute&&this._unlistenBeforeLeavingRoute()}};e.default=l,t.exports=e.default},/*!*************************************!*\
  !*** ./~/react-router/lib/Route.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! react */1),o=r(i),a=n(/*! invariant */10),s=r(a),u=n(/*! ./RouteUtils */19),c=n(/*! ./InternalPropTypes */23),l=o.default.PropTypes,h=l.string,f=l.func,d=o.default.createClass({displayName:"Route",statics:{createRouteFromReactElement:u.createRouteFromReactElement},propTypes:{path:h,component:c.component,components:c.components,getComponent:f,getComponents:f},render:function(){(0,s.default)(!1)}});e.default=d,t.exports=e.default},/*!********************************************!*\
  !*** ./~/react-router/lib/RouteContext.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! ./routerWarning */9),o=(r(i),n(/*! react */1)),a=r(o),s=a.default.PropTypes.object,u={propTypes:{route:s.isRequired},childContextTypes:{route:s.isRequired},getChildContext:function(){return{route:this.props.route}},componentWillMount:function(){}};e.default=u,t.exports=e.default},/*!**************************************!*\
  !*** ./~/react-router/lib/Router.js ***!
  \**************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){return!t||!t.__v2_compatible__}function a(t){return t&&t.getCurrentLocation}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(/*! history/lib/createHashHistory */105),c=r(u),l=n(/*! history/lib/useQueries */46),h=r(l),f=n(/*! invariant */10),d=r(f),p=n(/*! react */1),m=r(p),v=n(/*! ./createTransitionManager */83),g=r(v),y=n(/*! ./InternalPropTypes */23),_=n(/*! ./RouterContext */52),b=r(_),w=n(/*! ./RouteUtils */19),E=n(/*! ./RouterUtils */134),S=n(/*! ./routerWarning */9),C=(r(S),m.default.PropTypes),T=C.func,k=C.object,I=m.default.createClass({displayName:"Router",propTypes:{history:k,children:y.routes,routes:y.routes,render:T,createElement:T,onError:T,onUpdate:T,parseQueryString:T,stringifyQuery:T,matchContext:k},getDefaultProps:function(){return{render:function(t){return m.default.createElement(b.default,t)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(t){if(!this.props.onError)throw t;this.props.onError.call(this,t)},componentWillMount:function(){var t=this,e=this.props,n=(e.parseQueryString,e.stringifyQuery,this.createRouterObjects()),r=n.history,i=n.transitionManager,o=n.router;this._unlisten=i.listen(function(e,n){e?t.handleError(e):t.setState(n,t.props.onUpdate)}),this.history=r,this.router=o},createRouterObjects:function(){var t=this.props.matchContext;if(t)return t;var e=this.props.history,n=this.props,r=n.routes,i=n.children;a(e)?(0,d.default)(!1):void 0,o(e)&&(e=this.wrapDeprecatedHistory(e));var s=(0,g.default)(e,(0,w.createRoutes)(r||i)),u=(0,E.createRouterObject)(e,s),c=(0,E.createRoutingHistory)(e,s);return{history:c,transitionManager:s,router:u}},wrapDeprecatedHistory:function(t){var e=this.props,n=e.parseQueryString,r=e.stringifyQuery,i=void 0;return i=t?function(){return t}:c.default,(0,h.default)(i)({parseQueryString:n,stringifyQuery:r})},componentWillReceiveProps:function(t){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function t(){var e=this.state,n=e.location,r=e.routes,o=e.params,a=e.components,u=this.props,c=u.createElement,t=u.render,l=i(u,["createElement","render"]);return null==n?null:(Object.keys(I.propTypes).forEach(function(t){return delete l[t]}),t(s({},l,{history:this.history,router:this.router,location:n,routes:r,params:o,components:a,createElement:c})))}});e.default=I,t.exports=e.default},/*!**********************************************!*\
  !*** ./~/react-router/lib/RoutingContext.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! react */1),o=r(i),a=n(/*! ./RouterContext */52),s=r(a),u=n(/*! ./routerWarning */9),c=(r(u),o.default.createClass({displayName:"RoutingContext",componentWillMount:function(){},render:function(){return o.default.createElement(s.default,this.props)}}));e.default=c,t.exports=e.default},/*!***********************************************!*\
  !*** ./~/react-router/lib/TransitionUtils.js ***!
  \***********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];if(t.apply(e,i),t.length<n){var a=i[i.length-1];a()}}}function o(t){return t.reduce(function(t,e){return e.onEnter&&t.push(i(e.onEnter,e,3)),t},[])}function a(t){return t.reduce(function(t,e){return e.onChange&&t.push(i(e.onChange,e,4)),t},[])}function s(t,e,n){function r(t,e,n){return e?void(i={pathname:e,query:n,state:t}):void(i=t)}if(!t)return void n();var i=void 0;(0,h.loopAsync)(t,function(t,n,o){e(t,r,function(t){t||i?o(t,i):n()})},n)}function u(t,e,n){var r=o(t);return s(r.length,function(t,n,i){r[t](e,n,i)},n)}function c(t,e,n,r){var i=a(t);return s(i.length,function(t,r,o){i[t](e,n,r,o)},r)}function l(t,e){for(var n=0,r=t.length;n<r;++n)t[n].onLeave&&t[n].onLeave.call(t[n],e)}e.__esModule=!0,e.runEnterHooks=u,e.runChangeHooks=c,e.runLeaveHooks=l;var h=n(/*! ./AsyncUtils */81),f=n(/*! ./routerWarning */9);r(f)},/*!*****************************************************!*\
  !*** ./~/react-router/lib/applyRouterMiddleware.js ***!
  \*****************************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(/*! react */1),a=r(o),s=n(/*! ./RouterContext */52),u=r(s),c=n(/*! ./routerWarning */9);r(c);e.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(t){return t.renderRouterContext}).filter(Boolean),s=e.map(function(t){return t.renderRouteComponent}).filter(Boolean),c=function(){var t=arguments.length<=0||void 0===arguments[0]?o.createElement:arguments[0];return function(e,n){return s.reduceRight(function(t,e){return e(t,n)},t(e,n))}};return function(t){return r.reduceRight(function(e,n){return n(e,t)},a.default.createElement(u.default,i({},t,{createElement:c(t.createElement)})))}},t.exports=e.default},/*!**********************************************!*\
  !*** ./~/react-router/lib/browserHistory.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! history/lib/createBrowserHistory */230),o=r(i),a=n(/*! ./createRouterHistory */136),s=r(a);e.default=(0,s.default)(o.default),t.exports=e.default},/*!****************************************************!*\
  !*** ./~/react-router/lib/computeChangedRoutes.js ***!
  \****************************************************/
function(t,e,n){"use strict";function r(t,e,n){if(!t.path)return!1;var r=(0,o.getParamNames)(t.path);return r.some(function(t){return e.params[t]!==n.params[t]})}function i(t,e){var n=t&&t.routes,i=e.routes,o=void 0,a=void 0,s=void 0;return n?!function(){var u=!1;o=n.filter(function(n){if(u)return!0;var o=i.indexOf(n)===-1||r(n,t,e);return o&&(u=!0),o}),o.reverse(),s=[],a=[],i.forEach(function(t){var e=n.indexOf(t)===-1,r=o.indexOf(t)!==-1;e||r?s.push(t):a.push(t)})}():(o=[],a=[],s=i),{leaveRoutes:o,changeRoutes:a,enterRoutes:s}}e.__esModule=!0;var o=n(/*! ./PatternUtils */31);e.default=i,t.exports=e.default},/*!*********************************************!*\
  !*** ./~/react-router/lib/getComponents.js ***!
  \*********************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){if(e.component||e.components)return void n(null,e.component||e.components);var r=e.getComponent||e.getComponents;if(!r)return void n();var i=t.location,o=(0,u.default)(t,i);r.call(e,o,n)}function o(t,e){(0,a.mapAsync)(t.routes,function(e,n,r){i(t,e,r)},e)}e.__esModule=!0;var a=n(/*! ./AsyncUtils */81),s=n(/*! ./makeStateWithLocation */137),u=r(s);e.default=o,t.exports=e.default},/*!**********************************************!*\
  !*** ./~/react-router/lib/getRouteParams.js ***!
  \**********************************************/
function(t,e,n){"use strict";function r(t,e){var n={};return t.path?((0,i.getParamNames)(t.path).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}),n):n}e.__esModule=!0;var i=n(/*! ./PatternUtils */31);e.default=r,t.exports=e.default},/*!*******************************************!*\
  !*** ./~/react-router/lib/hashHistory.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(/*! history/lib/createHashHistory */105),o=r(i),a=n(/*! ./createRouterHistory */136),s=r(a);e.default=(0,s.default)(o.default),t.exports=e.default},/*!****************************************!*\
  !*** ./~/react-router/lib/isActive.js ***!
  \****************************************/
function(t,e,n){"use strict";function r(t,e){if(t==e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return r(t,e[n])});if("object"===("undefined"==typeof t?"undefined":u(t))){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))if(void 0===t[n]){if(void 0!==e[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(e,n))return!1;if(!r(t[n],e[n]))return!1}return!0}return String(t)===String(e)}function i(t,e){return"/"!==e.charAt(0)&&(e="/"+e),"/"!==t.charAt(t.length-1)&&(t+="/"),"/"!==e.charAt(e.length-1)&&(e+="/"),e===t}function o(t,e,n){for(var r=t,i=[],o=[],a=0,s=e.length;a<s;++a){var u=e[a],l=u.path||"";if("/"===l.charAt(0)&&(r=t,i=[],o=[]),null!==r&&l){var h=(0,c.matchPattern)(l,r);if(h?(r=h.remainingPathname,i=[].concat(i,h.paramNames),o=[].concat(o,h.paramValues)):r=null,""===r)return i.every(function(t,e){return String(o[e])===String(n[t])})}}return!1}function a(t,e){return null==e?null==t:null==t||r(t,e)}function s(t,e,n,r,s){var u=t.pathname,c=t.query;return null!=n&&("/"!==u.charAt(0)&&(u="/"+u),!!(i(u,n.pathname)||!e&&o(u,r,s))&&a(c,n.query))}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.default=s;var c=n(/*! ./PatternUtils */31);t.exports=e.default},/*!*************************************!*\
  !*** ./~/react-router/lib/match.js ***!
  \*************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){var n=t.history,r=t.routes,o=t.location,u=i(t,["history","routes","location"]);n||o?void 0:(0,c.default)(!1),n=n?n:(0,h.default)(u);var l=(0,d.default)(n,(0,p.createRoutes)(r)),f=void 0;o?o=n.createLocation(o):f=n.listen(function(t){o=t});var v=(0,m.createRouterObject)(n,l);n=(0,m.createRoutingHistory)(n,l),l.match(o,function(t,r,i){e(t,r&&v.createLocation(r,s.REPLACE),i&&a({},i,{history:n,router:v,matchContext:{history:n,transitionManager:l,router:v}})),f&&f()})}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(/*! history/lib/Actions */26),u=n(/*! invariant */10),c=r(u),l=n(/*! ./createMemoryHistory */135),h=r(l),f=n(/*! ./createTransitionManager */83),d=r(f),p=n(/*! ./RouteUtils */19),m=n(/*! ./RouterUtils */134);e.default=o,t.exports=e.default},/*!*******************************************!*\
  !*** ./~/react-router/lib/matchRoutes.js ***!
  \*******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){if(t.childRoutes)return[null,t.childRoutes];if(!t.getChildRoutes)return[];var o=!0,a=void 0,u={location:e,params:s(n,r)},c=(0,p.default)(u,e);return t.getChildRoutes(c,function(t,e){return e=!t&&(0,g.createRoutes)(e),o?void(a=[t,e]):void i(t,e)}),o=!1,a}function o(t,e,n,r,i){if(t.indexRoute)i(null,t.indexRoute);else if(t.getIndexRoute){var a={location:e,params:s(n,r)},u=(0,p.default)(a,e);t.getIndexRoute(u,function(t,e){i(t,!t&&(0,g.createRoutes)(e)[0])})}else t.childRoutes?!function(){var a=t.childRoutes.filter(function(t){return!t.path});(0,f.loopAsync)(a.length,function(t,i,s){o(a[t],e,n,r,function(e,n){if(e||n){var r=[a[t]].concat(Array.isArray(n)?n:[n]);s(e,r)}else i()})},function(t,e){i(null,e)})}():i()}function a(t,e,n){return e.reduce(function(t,e,r){var i=n&&n[r];return Array.isArray(t[e])?t[e].push(i):e in t?t[e]=[t[e],i]:t[e]=i,t},t)}function s(t,e){return a({},t,e)}function u(t,e,n,r,a,u){var l=t.path||"";if("/"===l.charAt(0)&&(n=e.pathname,r=[],a=[]),null!==n&&l){try{var f=(0,m.matchPattern)(l,n);f?(n=f.remainingPathname,r=[].concat(r,f.paramNames),a=[].concat(a,f.paramValues)):n=null}catch(t){u(t)}if(""===n){var d=function(){var n={routes:[t],params:s(r,a)};return o(t,e,r,a,function(t,e){if(t)u(t);else{if(Array.isArray(e)){var r;(r=n.routes).push.apply(r,e)}else e&&n.routes.push(e);u(null,n)}}),{v:void 0}}();if("object"===("undefined"==typeof d?"undefined":h(d)))return d.v}}if(null!=n||t.childRoutes){var p=function(i,o){i?u(i):o?c(o,e,function(e,n){e?u(e):n?(n.routes.unshift(t),u(null,n)):u()},n,r,a):u()},v=i(t,e,r,a,p);v&&p.apply(void 0,v)}else u()}function c(t,e,n,r){var i=arguments.length<=4||void 0===arguments[4]?[]:arguments[4],o=arguments.length<=5||void 0===arguments[5]?[]:arguments[5];void 0===r&&("/"!==e.pathname.charAt(0)&&(e=l({},e,{pathname:"/"+e.pathname})),r=e.pathname),(0,f.loopAsync)(t.length,function(n,a,s){u(t[n],e,r,i,o,function(t,e){t||e?s(t,e):a()})},n)}e.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.default=c;var f=n(/*! ./AsyncUtils */81),d=n(/*! ./makeStateWithLocation */137),p=r(d),m=n(/*! ./PatternUtils */31),v=n(/*! ./routerWarning */9),g=(r(v),n(/*! ./RouteUtils */19));t.exports=e.default},/*!*****************************************!*\
  !*** ./~/react-router/lib/useRoutes.js ***!
  \*****************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.routes,r=i(e,["routes"]),o=(0,u.default)(t)(r),s=(0,l.default)(o,n);return a({},o,s)}}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(/*! history/lib/useQueries */46),u=r(s),c=n(/*! ./createTransitionManager */83),l=r(c),h=n(/*! ./routerWarning */9);r(h);e.default=o,t.exports=e.default},/*!******************************************!*\
  !*** ./~/react-router/lib/withRouter.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.displayName||t.name||"Component"}function o(t,e){var n=e&&e.withRef,r=l.default.createClass({displayName:"WithRouter",contextTypes:{router:d.routerShape},propTypes:{router:d.routerShape},getWrappedInstance:function(){return n?void 0:(0,u.default)(!1),this.wrappedInstance},render:function(){var e=this,r=this.props.router||this.context.router,i=a({},this.props,{router:r});return n&&(i.ref=function(t){e.wrappedInstance=t}),l.default.createElement(t,i)}});return r.displayName="withRouter("+i(t)+")",r.WrappedComponent=t,(0,f.default)(r,t)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=o;var s=n(/*! invariant */10),u=r(s),c=n(/*! react */1),l=r(c),h=n(/*! hoist-non-react-statics */233),f=r(h),d=n(/*! ./PropTypes */82);t.exports=e.default},/*!******************************************!*\
  !*** ./~/react-skylight/lib/skylight.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(/*! react */1),l=r(c),h=n(/*! prop-types */64),f=r(h),d=n(/*! ./skylightstateless */139),p=r(d),m=function(t,e){return!t.isVisible&&e.isVisible},v=function(t,e){return t.isVisible&&!e.isVisible},g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={isVisible:!1},n}return a(e,t),u(e,[{key:"componentWillUpdate",value:function(t,e){m(this.state,e)&&this.props.beforeOpen&&this.props.beforeOpen(),v(this.state,e)&&this.props.beforeClose&&this.props.beforeClose()}},{key:"componentDidUpdate",value:function(t,e){m(e,this.state)&&this.props.afterOpen&&this.props.afterOpen(),v(e,this.state)&&this.props.afterClose&&this.props.afterClose()}},{key:"show",value:function(){this.setState({isVisible:!0})}},{key:"hide",value:function(){this.setState({isVisible:!1})}},{key:"_onOverlayClicked",value:function(){this.props.hideOnOverlayClicked&&this.hide(),this.props.onOverlayClicked&&this.props.onOverlayClicked()}},{key:"render",value:function(){var t=this;return l.default.createElement(p.default,s({},this.props,{isVisible:this.state.isVisible,onOverlayClicked:function(){return t._onOverlayClicked()},onCloseClicked:function(){return t.hide()}}))}}]),e}(l.default.Component);e.default=g,g.displayName="SkyLight",g.propTypes=s({},p.default.sharedPropTypes,{afterClose:f.default.func,afterOpen:f.default.func,beforeClose:f.default.func,beforeOpen:f.default.func,hideOnOverlayClicked:f.default.bool}),g.defaultProps=s({},p.default.defaultProps,{hideOnOverlayClicked:!1})},/*!****************************************!*\
  !*** ./~/react-skylight/lib/styles.js ***!
  \****************************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={overlayStyles:{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:"99",backgroundColor:"rgba(0,0,0,0.3)",transitionProperty:"all",transitionTimingFunction:"ease",display:"none"},dialogStyles:{width:"50%",height:"400px",position:"fixed",top:"50%",left:"50%",marginTop:"-200px",marginLeft:"-25%",backgroundColor:"#fff",borderRadius:"2px",zIndex:"100",padding:"15px",boxShadow:"0px 0px 4px rgba(0,0,0,.14),0px 4px 8px rgba(0,0,0,.28)"},animationBase:{transform:"scale(0)",transitionProperty:"transform",transitionTimingFunction:"ease"},animationOpen:{transform:"scale(1)",transitionProperty:"transform",transitionTimingFunction:"ease"},title:{marginTop:"0px"},closeButtonStyle:{cursor:"pointer",position:"absolute",fontSize:"1.8em",right:"10px",top:"0px"}};e.default=n},/*!**********************************************!*\
  !*** ./~/react-skylight/lib/utils/assign.js ***!
  \**********************************************/
function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<r.length;o++){var a=r[o];if(null!==a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}},/*!***************************************!*\
  !*** ./~/react/lib/KeyEscapeUtils.js ***!
  \***************************************/
69,/*!************************************!*\
  !*** ./~/react/lib/PooledClass.js ***!
  \************************************/
[341,40],/*!**************************************!*\
  !*** ./~/react/lib/ReactChildren.js ***!
  \**************************************/
function(t,e,n){"use strict";function r(t){return(""+t).replace(b,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);g(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?c(u,i,n,v.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function c(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(e,a,i,o);g(t,u,c),s.release(c)}function l(t,e,n){if(null==t)return t;var r=[];return c(t,r,null,e,n),r}function h(t,e,n){return null}function f(t,e){return g(t,h,null)}function d(t){var e=[];return c(t,e,null,v.thatReturnsArgument),e}var p=n(/*! ./PooledClass */326),m=n(/*! ./ReactElement */32),v=n(/*! fbjs/lib/emptyFunction */12),g=n(/*! ./traverseAllChildren */336),y=p.twoArgumentPooler,_=p.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},p.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p.addPoolingTo(s,_);var w={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:f,toArray:d};t.exports=w},/*!******************************************!*\
  !*** ./~/react/lib/ReactDOMFactories.js ***!
  \******************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactElement */32),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=o},/*!***************************************!*\
  !*** ./~/react/lib/ReactPropTypes.js ***!
  \***************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactElement */32),i=r.isValidElement,o=n(/*! prop-types/factory */108);t.exports=o(i)},/*!*************************************!*\
  !*** ./~/react/lib/ReactVersion.js ***!
  \*************************************/
277,/*!************************************!*\
  !*** ./~/react/lib/createClass.js ***!
  \************************************/
function(t,e,n){"use strict";var r=n(/*! ./ReactBaseClasses */140),i=r.Component,o=n(/*! ./ReactElement */32),a=o.isValidElement,s=n(/*! ./ReactNoopUpdateQueue */143),u=n(/*! create-react-class/factory */99);t.exports=u(i,a,s)},/*!**************************************!*\
  !*** ./~/react/lib/getIteratorFn.js ***!
  \**************************************/
296,/*!***************************************!*\
  !*** ./~/react/lib/getNextDebugID.js ***!
  \***************************************/
function(t,e){"use strict";function n(){return r++}var r=1;t.exports=n},/*!*******************************************!*\
  !*** ./~/react/lib/lowPriorityWarning.js ***!
  \*******************************************/
function(t,e,n){"use strict";var r=function(){};t.exports=r},/*!**********************************!*\
  !*** ./~/react/lib/onlyChild.js ***!
  \**********************************/
function(t,e,n){"use strict";function r(t){return o.isValidElement(t)?void 0:i("143"),t}var i=n(/*! ./reactProdInvariant */40),o=n(/*! ./ReactElement */32);n(/*! fbjs/lib/invariant */2);t.exports=r},/*!********************************************!*\
  !*** ./~/react/lib/traverseAllChildren.js ***!
  \********************************************/
function(t,e,n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var f=typeof t;if("undefined"!==f&&"boolean"!==f||(t=null),null===t||"string"===f||"number"===f||"object"===f&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var d,p,m=0,v=""===e?l:e+h;if(Array.isArray(t))for(var g=0;g<t.length;g++)d=t[g],p=v+r(d,g),m+=i(d,p,n,o);else{var y=u(t);if(y){var _,b=y.call(t);if(y!==t.entries)for(var w=0;!(_=b.next()).done;)d=_.value,p=v+r(d,w++),m+=i(d,p,n,o);else for(;!(_=b.next()).done;){var E=_.value;E&&(d=E[1],p=v+c.escape(E[0])+h+r(d,0),m+=i(d,p,n,o))}}else if("object"===f){var S="",C=String(t);a("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,S)}}return m}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(/*! ./reactProdInvariant */40),s=(n(/*! ./ReactCurrentOwner */18),n(/*! ./ReactElementSymbol */142)),u=n(/*! ./getIteratorFn */332),c=(n(/*! fbjs/lib/invariant */2),n(/*! ./KeyEscapeUtils */325)),l=(n(/*! fbjs/lib/warning */3),"."),h=":";t.exports=o},/*!****************************************!*\
  !*** ./~/setimmediate/setImmediate.js ***!
  \****************************************/
function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return m[p]=r,d(p),p++}function i(t){delete m[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(v)setTimeout(a,0,t);else{var e=m[t];if(e){v=!0;try{o(e)}finally{i(t),v=!1}}}}function s(){d=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(n){t.postMessage(e+n,"*")}}function l(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},d=function(e){t.port2.postMessage(e)}}function h(){var t=g.documentElement;d=function(e){var n=g.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function f(){d=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var d,p=1,m={},v=!1,g=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?h():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(/*! ./../process/browser.js */35))},/*!**************************************!*\
  !*** ./~/strict-uri-encode/index.js ***!
  \**************************************/
function(t,e){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},/*!*************************************!*\
  !*** ./~/timers-browserify/main.js ***!
  \*************************************/
function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(/*! setimmediate */337),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},/*!******************************!*\
  !*** ./~/warning/browser.js ***!
  \******************************/
15,/*!*************************************!*\
  !*** template of 326 referencing 2 ***!
  \*************************************/
function(t,e,n,r){"use strict";var i=n(r),o=(n(/*! fbjs/lib/invariant */2),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),a=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},s=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},u=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},c=function(t){var e=this;t instanceof e?void 0:i("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},l=10,h=o,f=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||h,n.poolSize||(n.poolSize=l),n.release=c,n},d={addPoolingTo:f,oneArgumentPooler:o,twoArgumentPooler:a,threeArgumentPooler:s,fourArgumentPooler:u};t.exports=d}]));
//# sourceMappingURL=bundle.js.map